import{c as D,j as e,t as j}from"./index-zWRKLUWk.js";import{u as z,b as r}from"./react-vendor-v5ei6ytj.js";import{B as m}from"./BookmarkNavbar-CsRLRI-a.js";import{S as H}from"./StarNumber-QKUb_kql.js";import{u as R,T as x}from"./Toast-DunFfijn.js";import{A as q}from"./WordByWord-DN1As7tc.js";import{B as G}from"./BlockInterpretationModal-DlJKBSK3.js";import{T as J}from"./trash-2-CN6ywLBE.js";import"./arrow-left-DpKbxHB2.js";import"./tamilWordByWordService-B0xEV9Gl.js";import"./apiService-hOh9yyny.js";import"./hindiWordByWordService-BCeNezEp.js";import"./banglaWordByWordService-DG8H3aZ-.js";import"./banglaTranslationService-DLkj577Y.js";import"./chevron-left-8YABQ6I3.js";import"./tamilTranslationService-CJsvEoeN.js";import"./hindiTranslationService-BGO3ah39.js";import"./urduTranslationService-jZuXP4Cs.js";import"./englishTranslationService-CdieVbVi.js";import"./surahNameUtils-CNmXwDjY.js";import"./surahNameUnicodes-C_pntk6C.js";import"./InterpretationNavbar-BnNdja9N.js";import"./WordByWordIcon-DxjBUJXe.js";const pe=()=>{const{user:n}=D(),y=z(),{toasts:o,removeToast:i,showSuccess:A,showError:M}=R(),[h,f]=r.useState([]),[g,b]=r.useState([]),[$,u]=r.useState(!0),[v,k]=r.useState(null),[N,w]=r.useState({}),[L,I]=r.useState(!1),[p,B]=r.useState(null),[E,S]=r.useState(!1),[d,C]=r.useState(null);r.useEffect(()=>{(async()=>{if(!n){u(!1);return}try{u(!0),k(null);const[l,a]=await Promise.all([j.getBookmarks(n.uid,"interpretation"),j.getBookmarks(n.uid,"block-interpretation")]),c=l.map(t=>({id:t.id||`${t.surahId}-${t.verseId}`,bookmarkId:t.id,number:t.surahId,surah:t.surahName||`Surah ${t.surahId}`,detail:`Verse ${t.verseId}`,verseText:t.verseText||"",surahId:t.surahId,verseId:t.verseId,interpretationNo:t.interpretationNo||1,language:t.language||"en"})),P=a.map(t=>({id:t.id||`${t.surahId}-${t.range}`,bookmarkId:t.id,number:t.surahId,surah:t.surahName||`Surah ${t.surahId}`,detail:`Verses ${t.range}`,verseText:"",surahId:t.surahId,range:t.range,interpretationNo:t.interpretationNo||1,language:t.language||"en"}));f(c),b(P)}catch(l){console.error("Error loading interpretation bookmarks:",l),k("Failed to load interpretation bookmarks")}finally{u(!1)}})()},[n]);const F=async(s,l)=>{if(n)try{w(a=>({...a,[s]:!0})),await j.deleteBookmark(s,n.uid),l==="ayah-wise"?f(a=>a.filter(c=>c.bookmarkId!==s)):b(a=>a.filter(c=>c.bookmarkId!==s)),A("Interpretation bookmark deleted successfully")}catch(a){console.error("Error deleting interpretation bookmark:",a),M("Failed to delete bookmark. Please try again.")}finally{w(a=>({...a,[s]:!1}))}},_=s=>{s.range?(C({surahId:s.surahId,range:s.range,interpretationNo:s.interpretationNo||1,language:s.language||"en"}),S(!0)):(B({surahId:s.surahId,verseId:s.verseId}),I(!0))},V=()=>{I(!1),B(null)},W=()=>{S(!1),C(null)},T=(s,l)=>e.jsxs("div",{className:"flex items-center font-poppins justify-between p-3 sm:p-4 dark:bg-gray-900 dark:text-white dark:hover:bg-gray-800 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>_(s),children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(H,{number:s.number})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate",children:s.surah}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:s.detail}),s.verseText&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 line-clamp-2",children:s.verseText.length>100?`${s.verseText.substring(0,100)}...`:s.verseText})]})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),F(s.bookmarkId,l)},disabled:N[s.bookmarkId],className:"p-2 text-black dark:text-white dark:hover:bg-transparent hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors flex-shrink-0 min-h-[44px] min-w-[44px] flex items-center justify-center ml-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Delete interpretation bookmark",children:N[s.bookmarkId]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-current"}):e.jsx(J,{className:"w-4 h-4 sm:w-[18px] sm:h-[18px]"})})]},s.id);return n?$?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(x,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading interpretation bookmarks..."})]})})})]}):v?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(x,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx_auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-4",children:v}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})})]}):h.length===0&&g.length===0?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(x,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w_full max-w-[1290px] mx_auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No interpretation bookmarks yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start reading verses with interpretations and bookmark them to see them here."}),e.jsx("button",{onClick:()=>y("/"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Start Reading"})]})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(x,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto min-h-screen p-3 sm:p-4 lg:p-6 bg-white dark:bg-gray-900",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[h.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-900 mb-3 sm:mb-4 dark:text-white",children:"Ayah wise interpretations"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid_cols-3 xl:grid_cols-3 gap-3 sm:gap-4 lg:gap-6",children:h.map(s=>T(s,"ayah-wise"))})]}),g.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-900 mb-3 sm:mb-4 dark:text-white",children:"Block wise interpretations"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid_cols-3 xl:grid_cols-3 gap-3 sm:gap-4 lg:gap-6",children:g.map(s=>T(s,"block-wise"))})]})]})})}),L&&p&&e.jsx(q,{surahId:p.surahId,verseId:p.verseId,onClose:V}),E&&d&&e.jsx(G,{surahId:d.surahId,range:d.range,interpretationNo:d.interpretationNo,language:d.language,onClose:W})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(x,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to view interpretation bookmarks"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please sign in to bookmark interpretations and access your saved content."}),e.jsx("button",{onClick:()=>y("/sign"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Sign In"})]})})})})]})};export{pe as default};
