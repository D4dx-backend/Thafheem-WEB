import{u as H,j as e,w as b,S as R}from"./index-ZyCXWqTv.js";import{u as U,b as r}from"./react-vendor-v5ei6ytj.js";import{B as h}from"./BookmarkNavbar-Qsn_tAcm.js";import{u as q,T as g}from"./Toast-BUDDFBhm.js";import{A as G}from"./WordByWord-CpXLkblR.js";import{B as J}from"./BlockInterpretationModal-Dktf9Mnb.js";import{T as K}from"./trash-2-BKkFMTDp.js";import"./arrow-left-Da5vTmbl.js";import"./tamilWordByWordService-DJSJu3_j.js";import"./apiService-C16t1Qxd.js";import"./hindiWordByWordService-6MX7_QNm.js";import"./banglaWordByWordService-CGoScuIQ.js";import"./banglaTranslationService-CT30Mrw8.js";import"./chevron-left-DmLICv9N.js";import"./tamilTranslationService-BmF9kf3t.js";import"./hindiTranslationService-e72fDb6R.js";import"./urduTranslationService-DYIhtcEh.js";import"./englishTranslationService-QMtPmafp.js";import"./surahNameUtils-Cy1ASzkB.js";import"./InterpretationNavbar-CUy_L0ui.js";import"./WordByWordIcon-It_ykZxg.js";const pe=()=>{const{user:n}=H(),f=U(),{toasts:l,removeToast:i,showSuccess:L,showError:M}=q(),[u,v]=r.useState([]),[p,k]=r.useState([]),[E,j]=r.useState(!0),[w,N]=r.useState(null),[I,B]=r.useState({}),[F,S]=r.useState(!1),[y,C]=r.useState(null),[_,T]=r.useState(!1),[d,$]=r.useState(null);r.useEffect(()=>{(async()=>{if(!n){j(!1);return}try{j(!0),N(null);const[o,a]=await Promise.all([b.getBookmarks(n.uid,"interpretation"),b.getBookmarks(n.uid,"block-interpretation")]),c=o.map(t=>{const m=t.interpretationNo||1,x=(t.language||"en").toLowerCase();return{id:t.id||`${t.surahId}-${t.verseId}`,bookmarkId:t.id,number:t.surahId,surah:t.surahName||`Surah ${t.surahId}`,detail:`Ayah ${t.verseId} • Interpretation ${m} • ${x.toUpperCase()}`,verseText:t.verseText||"",surahId:t.surahId,verseId:t.verseId,interpretationNo:m,language:x}}),z=a.map(t=>{const m=t.interpretationNo||1,x=(t.language||"en").toLowerCase();return{id:t.id||`${t.surahId}-${t.range}`,bookmarkId:t.id,number:t.surahId,surah:t.surahName||`Surah ${t.surahId}`,detail:`Verses ${t.range} • Interpretation ${m} • ${x.toUpperCase()}`,verseText:"",surahId:t.surahId,range:t.range,interpretationNo:m,language:x}});v(c),k(z)}catch(o){console.error("Error loading interpretation bookmarks:",o),N("Failed to load interpretation bookmarks")}finally{j(!1)}})()},[n]);const W=async(s,o)=>{if(n)try{B(a=>({...a,[s]:!0})),await b.deleteBookmark(s,n.uid),o==="ayah-wise"?v(a=>a.filter(c=>c.bookmarkId!==s)):k(a=>a.filter(c=>c.bookmarkId!==s)),L("Interpretation bookmark deleted successfully")}catch(a){console.error("Error deleting interpretation bookmark:",a),M("Failed to delete bookmark. Please try again.")}finally{B(a=>({...a,[s]:!1}))}},V=s=>{s.range?($({surahId:s.surahId,range:s.range,interpretationNo:s.interpretationNo||1,language:s.language||"en"}),T(!0)):(C({surahId:s.surahId,verseId:s.verseId}),S(!0))},P=()=>{S(!1),C(null)},D=()=>{T(!1),$(null)},A=(s,o)=>e.jsxs("div",{className:"flex items-center font-poppins justify-between p-3 sm:p-4 dark:bg-gray-900 dark:text-white dark:hover:bg-gray-800 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>V(s),children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{number:s.number})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate",children:s.surah}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:s.detail}),s.verseText&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 line-clamp-2",children:s.verseText.length>100?`${s.verseText.substring(0,100)}...`:s.verseText})]})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),W(s.bookmarkId,o)},disabled:I[s.bookmarkId],className:"p-2 text-black dark:text-white dark:hover:bg-transparent hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors flex-shrink-0 min-h-[44px] min-w-[44px] flex items-center justify-center ml-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Delete interpretation bookmark",children:I[s.bookmarkId]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-current"}):e.jsx(K,{className:"w-4 h-4 sm:w-[18px] sm:h-[18px]"})})]},s.id);return n?E?e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(g,{toasts:l,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading interpretation bookmarks..."})]})})})]}):w?e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(g,{toasts:l,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx_auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-4",children:w}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})})]}):u.length===0&&p.length===0?e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(g,{toasts:l,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w_full max-w-[1290px] mx_auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No interpretation bookmarks yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start reading verses with interpretations and bookmark them to see them here."}),e.jsx("button",{onClick:()=>f("/"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Start Reading"})]})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(g,{toasts:l,removeToast:i}),e.jsx("div",{className:"mx-auto min-h-screen p-3 sm:p-4 lg:p-6 bg-white dark:bg-gray-900",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[u.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-900 mb-3 sm:mb-4 dark:text-white",children:"Ayah wise interpretations"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid_cols-3 xl:grid_cols-3 gap-3 sm:gap-4 lg:gap-6",children:u.map(s=>A(s,"ayah-wise"))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-900 mb-3 sm:mb-4 dark:text-white",children:"Block wise interpretations"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid_cols-3 xl:grid_cols-3 gap-3 sm:gap-4 lg:gap-6",children:p.map(s=>A(s,"block-wise"))})]})]})})}),F&&y&&e.jsx(G,{surahId:y.surahId,verseId:y.verseId,onClose:P}),_&&d&&e.jsx(J,{surahId:d.surahId,range:d.range,interpretationNo:d.interpretationNo,language:d.language,onClose:D})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(g,{toasts:l,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to view interpretation bookmarks"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please sign in to bookmark interpretations and access your saved content."}),e.jsx("button",{onClick:()=>f("/sign"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Sign In"})]})})})})]})};export{pe as default};
