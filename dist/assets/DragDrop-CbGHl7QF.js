import{u as Ae,j as e,r as Z,X as Se,v as De,E as Te,a6 as Ce}from"./index-D0NMIq43.js";import{u as Pe,b as n}from"./react-vendor-v5ei6ytj.js";import{C as Ee}from"./chevron-left-B6PCEYk2.js";const Re=()=>{const{translationLanguage:r}=Ae(),ee=Pe(),[$,D]=n.useState(0),[c,T]=n.useState(1),[u,C]=n.useState(null),[P,g]=n.useState({}),[te,ae]=n.useState(!1),[E,f]=n.useState(!1),F=n.useRef(null),[h,B]=n.useState({id:1,name:"Al-Fatiha",range:"1-7"}),[_,k]=n.useState([]),[q,A]=n.useState([]),[M,z]=n.useState(!1),[x,i]=n.useState(0),[W]=n.useState(9),[d,se]=n.useState(1),[R,j]=n.useState(null),[G,V]=n.useState([]),[I,v]=n.useState([]),[re,S]=n.useState(!1),ne="Amiri Quran",N=()=>r==="mal"||r==="E"||r==="en",H=()=>r==="hi"?"font-hindi":r==="ur"?"font-urdu-nastaliq":r==="bn"?"font-bengali":r==="ta"?"font-tamil":r==="mal"?"font-malayalam":"font-poppins",le=()=>r==="E"||r==="en"?"English":r==="hi"?"Hindi":r==="ur"?"Urdu":r==="bn"?"Bangla":r==="ta"?"Tamil":"Malayalam",Q=()=>r==="mal"?"മാർക്ക്":r==="E"||r==="en"?"Score":r==="hi"?"स्कोर":r==="ur"?"اسکور":r==="bn"?"স্কোর":r==="ta"?"மதிப்பெண்":"Score";n.useEffect(()=>{(async()=>{try{const a=await De();V(a)}catch(a){console.error("Failed to load surahs:",a),V([{number:1,name:"Al-Fatiha",arabic:"الفاتحة",ayahs:7},{number:2,name:"Al-Baqarah",arabic:"البقرة",ayahs:286}])}})()},[]),n.useEffect(()=>{N()||(v([]),j(null),S(!1))},[r]),n.useEffect(()=>{(async()=>{if(d){if(!N()){v([]),j(null),S(!1);return}try{S(!0);const a=await Te(d,r),s=Array.isArray(a)?a:[];if(v(s),s.length>0){const o=s[0].ID!==void 0?s[0].ID:0;j(o)}}catch(a){console.error("Failed to load ayah ranges:",a),v([])}finally{S(!1)}}})()},[d,r]),n.useEffect(()=>{(async()=>{if(!(!h.id||!c))try{z(!0);const s=(await Ce(h.id,c,r))?.words||[];if(s&&Array.isArray(s)&&s.length>0){const o=s.map(l=>{const m=l.WordPhrase||"",w=l.MalMeaning||l.EngMeaning||l.WordMeaning||"";return{WordPhrase:m,Meaning:w}}).filter(l=>l.WordPhrase&&l.Meaning&&l.Meaning.trim()!==""&&!l.WordPhrase.includes("﴿")&&!l.WordPhrase.trim().match(/^[\d\s]+$/));if(o.length>0){const l=o.map((y,L)=>({id:`word_${L+1}`,text:y.WordPhrase,correctTranslation:y.Meaning})),ke=[...o.map(y=>y.Meaning)].sort(()=>Math.random()-.5).map((y,L)=>({id:`opt${L+1}`,text:y}));k(l),A(ke),i(0)}else k([]),A([]),i(0)}else k([]),A([]),i(0)}catch(a){console.error("Failed to load word meanings:",a),k([]),A([]),i(0)}finally{z(!1)}})()},[h.id,c,r]);const oe=[{id:"word_1",text:"بِسْمِ",correctTranslation:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"word_2",text:"اللَّهِ",correctTranslation:"അല്ലാഹു"},{id:"word_3",text:"الرَّحْمَٰنِ",correctTranslation:"പരമകാരുണികനായ"},{id:"word_4",text:"الرَّحِيمِ",correctTranslation:"പരമദയാലുവായ"}],ie=[{id:"opt1",text:"നിദ്രാനിമഗ്നമായവനു"},{id:"opt2",text:"പരമകാരുണികനായവനു"},{id:"opt3",text:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"opt4",text:"അല്ലാഹു"},{id:"opt5",text:"പരമകാരുണികനായ"},{id:"opt6",text:"പരമദയാലുവായ"}],U=_.length>0?_:oe,de=q.length>0?q:ie,X=x*W,ce=X+W,p=U.slice(X,ce),xe=p.map(t=>t.correctTranslation),me=de.filter(t=>xe.includes(t.text)),b=Math.ceil(U.length/W),O=x<b-1,J=x>0,[,ge]=h.range.split("-").map(Number),he=c<ge,ue=O||he,K=(t,a)=>{C(a),t.dataTransfer.effectAllowed="move"},Y=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},fe=(t,a)=>{if(t.preventDefault(),u){const s=p.find(l=>l.id===a),o=s&&s.correctTranslation===u.text;g(l=>{const m={...l};for(const w in m)m[w]?.text===u.text&&delete m[w];return m[a]={text:u.text,correct:o},m}),o&&D(l=>l+1),C(null)}},pe=t=>P[t],be=()=>{if(O)i(x+1),g({});else{const[,t]=h.range.split("-").map(Number);c<t&&(T(c+1),g({}),i(0))}},ye=()=>{J&&(i(x-1),g({}))},je=()=>{const t=Object.values(P).map(a=>a.text);return me.filter(a=>!t.includes(a.text))},ve=()=>{ae(!0)},Ne=()=>{const t=G.find(s=>s.number===d);if(!t)return;if(!N()){const s=`1-${t.ayahs}`;B({id:d,name:t.name,range:s}),T(1),f(!1),g({}),D(0),i(0);return}const a=I.find(s=>s.ID===R);if(a){const s=`${a.AyaFrom}-${a.AyaTo}`;B({id:d,name:t.name,range:s}),T(a.AyaFrom),f(!1),g({}),D(0),i(0)}},we=t=>{se(t),j(null),v([])};return n.useEffect(()=>{const t=a=>{F.current&&!F.current.contains(a.target)&&f(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),te?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-[#2A2C38]",children:e.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 relative",ref:F,children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 px-1 sm:px-2 py-1 rounded transition-colors",onClick:()=>f(!E),children:[e.jsx("span",{className:"text-gray-800 font-medium dark:text-white text-sm sm:text-base font-poppins",children:h.name}),e.jsx(Z,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 transition-transform rotate-90"})]}),e.jsx("span",{className:"text-gray-400 dark:text-white",children:"|"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-white",children:h.range}),E&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-80 bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Select Surah & Range"}),e.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(Se,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Surah"}),e.jsx("select",{value:d,onChange:t=>we(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:G.map(t=>e.jsxs("option",{value:t.number,children:[t.number,". ",t.name," (",t.arabic,") -"," ",t.ayahs," verses"]},t.number))})]}),N()&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available Ayah Ranges"}),re?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:"Loading ranges..."})]}):I.length>0?e.jsxs("select",{value:R||"",onChange:t=>j(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a range"}),I.map((t,a)=>e.jsxs("option",{value:t.ID||a,children:["Verses ",t.AyaFrom,"-",t.AyaTo," (",t.AyaTo-t.AyaFrom+1," verses)"]},t.ID||a))]}):d?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"No ayah ranges available for this surah"}):e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"Please select a surah first"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t dark:border-gray-700",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ne,disabled:!d||N()&&R===null,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#2AA0BF"},children:"Apply"})]})]})]})]})})})}),e.jsx("div",{className:"sm:border-b dark:bg-gray-900 w-full max-w-[884px] mx-auto",children:e.jsxs("div",{className:"mx-auto px-3 sm:px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-25",children:e.jsx("h1",{className:"text-lg sm:text-xl font-semibold font-poppins",style:{color:"#2AA0BF"},children:"Drag & Drop"})}),e.jsxs("div",{className:"hidden sm:block text-xs sm:text-sm text-gray-600 dark:text-white",children:[e.jsxs("span",{children:["Ayah: ",c]}),b>1&&e.jsxs("span",{className:"ml-4",children:["Page: ",x+1,"/",b]}),e.jsxs("span",{className:"ml-4",children:[Q(),": ",$]})]})]}),e.jsxs("div",{className:"sm:hidden border-t border-gray-300 mt-2 pt-2 text-xs text-gray-600 dark:text-white flex justify-end gap-4",children:[e.jsxs("span",{children:["Ayah: ",c]}),b>1&&e.jsxs("span",{children:["Page: ",x+1,"/",b]}),e.jsxs("span",{children:[Q(),": ",$]})]})]})}),e.jsx("div",{className:"w-full mx-auto px-3 sm:px-4 py-4 sm:py-6 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 sm:p-6",children:[M&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading word meanings..."})]}),!M&&p.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8 justify-center",children:[e.jsxs("div",{className:"flex flex-row gap-2 sm:gap-3 lg:gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Arabic Text"}),p.map(t=>e.jsx("div",{className:"bg-[#EBEEF0] dark:bg-[#323A3F] dark:text-white p-3 sm:p-4 rounded text-center w-[164px] sm:w-48 lg:w-50 h-10 sm:h-12 flex items-center justify-center",children:e.jsx("span",{className:"text-base sm:text-lg font-semibold",style:{fontFamily:`'${ne}', serif`},children:t.text})},t.id))]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-2",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Drop Here"}),p.map(t=>{const a=pe(t.id);return e.jsx("div",{draggable:!!a,onDragStart:s=>a&&K(s,a),className:`w-full ${H()} sm:w-56 lg:w-64 h-10 sm:h-12 border rounded-lg flex items-center justify-center text-xs sm:text-sm transition-colors ${a?a.correct?"border-green-400 bg-green-100 text-green-700":"border-red-400 bg-red-100 text-red-700":"border-gray-300 bg-[#EBEEF0] hover:border-blue-300 dark:bg-[#323A3F]"}`,onDragOver:Y,onDrop:s=>fe(s,t.id),children:a&&e.jsx("span",{className:"px-2 text-center",children:a.text})},`drop-${t.id}`)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 order-3",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:[le()," Options"]}),e.jsx("div",{className:`grid grid-cols-2 gap-4 sm:grid-cols-1 ${H()}`,children:je().map(t=>{const a=s=>{if(s.preventDefault(),u){const o={...P};for(const l in o)o[l]?.text===u.text&&delete o[l];g(o),C(null)}};return e.jsx("div",{draggable:!0,onDragStart:s=>K(s,t),onDragOver:Y,onDrop:a,className:"border rounded text-xs sm:text-sm w-full sm:w-60 lg:w-70 h-10 sm:h-12 flex items-center justify-center transition-shadow bg-white dark:bg-gray-900 dark:text-white border-gray-300 cursor-move hover:shadow-md",children:t.text},t.id)})})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-4",children:[J&&e.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[e.jsx(Ee,{className:"w-3 h-3"}),"Previous Words"]}),e.jsxs("span",{className:"flex items-center px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:[x+1," of ",b]}),ue&&e.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[O?"Next Words":"Next Ayah",e.jsx(Z,{className:"w-3 h-3"})]})]})]}),!M&&p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No word meanings available for this ayah."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please select a different surah or ayah range."})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-sm sm:max-w-md",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 dark:text-white",children:"Start Game"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 dark:text-white",children:"Are you ready to begin the game? Let's go!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>ee(-1),className:"px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-600 dark:text-white hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50 transition-colors order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"px-3 sm:px-4 py-2 text-sm sm:text-base bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors order-1 sm:order-2",style:{backgroundColor:"#2AA0BF"},children:"Start"})]})]})})})};export{Re as default};
