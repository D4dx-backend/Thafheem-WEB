import{j as e,v as X,X as be,b as fe,E as je,a4 as ve}from"./index-CQnsQrCL.js";import{b as r}from"./react-vendor-v5ei6ytj.js";import{A as Ne}from"./arrow-left-B3fquHuw.js";import{C as we}from"./chevron-left-BOO1WfRR.js";const Ce=()=>{const[R,E]=r.useState(0),[d,W]=r.useState(1),[m,N]=r.useState(null),[w,g]=r.useState({}),[J,K]=r.useState(!1),[k,b]=r.useState(!1),A=r.useRef(null),[x,U]=r.useState({id:1,name:"Al-Fatiha",range:"1-7"}),[O,f]=r.useState([]),[L,j]=r.useState([]),[S,B]=r.useState(!1),[o,c]=r.useState(0),[D]=r.useState(9),[i,Y]=r.useState(1),[C,M]=r.useState(null),[$,_]=r.useState([]),[F,T]=r.useState([]),[Z,z]=r.useState(!1),ee="Amiri Quran";r.useEffect(()=>{(async()=>{try{const a=await fe();_(a)}catch(a){console.error("Failed to load surahs:",a),_([{number:1,name:"Al-Fatiha",arabic:"الفاتحة",ayahs:7},{number:2,name:"Al-Baqarah",arabic:"البقرة",ayahs:286}])}})()},[]),r.useEffect(()=>{(async()=>{if(i)try{z(!0);const a=await je(i),s=Array.isArray(a)?a:[];if(T(s),s.length>0){const n=s[0].ID!==void 0?s[0].ID:0;M(n)}}catch(a){console.error("Failed to load ayah ranges:",a),T([])}finally{z(!1)}})()},[i]),r.useEffect(()=>{(async()=>{if(!(!x.id||!d))try{B(!0);const a=await ve(x.id,d,"M");if(a&&Array.isArray(a)&&a.length>0){const s=a.filter(n=>n.WordPhrase&&n.Meaning&&n.Meaning.trim()!==""&&!n.WordPhrase.includes("﴿"));if(s.length>0){const n=s.map((y,I)=>({id:`word_${I+1}`,text:y.WordPhrase,correctTranslation:y.Meaning})),v=[...s.map(y=>y.Meaning)].sort(()=>Math.random()-.5).map((y,I)=>({id:`opt${I+1}`,text:y}));f(n),j(v),c(0)}else f([]),j([]),c(0)}else f([]),j([]),c(0)}catch(a){console.error("Failed to load word meanings:",a),f([]),j([]),c(0)}finally{B(!1)}})()},[x.id,d]);const te=[{id:"word_1",text:"بِسْمِ",correctTranslation:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"word_2",text:"اللَّهِ",correctTranslation:"അല്ലാഹു"},{id:"word_3",text:"الرَّحْمَٰنِ",correctTranslation:"പരമകാരുണികനായ"},{id:"word_4",text:"الرَّحِيمِ",correctTranslation:"പരമദയാലുവായ"}],ae=[{id:"opt1",text:"നിദ്രാനിമഗ്നമായവനു"},{id:"opt2",text:"പരമകാരുണികനായവനു"},{id:"opt3",text:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"opt4",text:"അല്ലാഹു"},{id:"opt5",text:"പരമകാരുണികനായ"},{id:"opt6",text:"പരമദയാലുവായ"}],G=O.length>0?O:te,se=L.length>0?L:ae,V=o*D,re=V+D,h=G.slice(V,re),ne=h.map(t=>t.correctTranslation),le=se.filter(t=>ne.includes(t.text)),u=Math.ceil(G.length/D),P=o<u-1,q=o>0,[,de]=x.range.split("-").map(Number),oe=d<de,ce=P||oe,Q=(t,a)=>{N(a),t.dataTransfer.effectAllowed="move"},H=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},ie=(t,a)=>{if(t.preventDefault(),m){const s=h.find(l=>l.id===a),n=s&&s.correctTranslation===m.text;g(l=>{const p={...l};for(const v in p)p[v]?.text===m.text&&delete p[v];return p[a]={text:m.text,correct:n},p}),n&&E(l=>l+1),N(null)}},xe=t=>w[t],me=()=>{if(P)c(o+1),g({});else{const[,t]=x.range.split("-").map(Number);d<t&&(W(d+1),g({}),c(0))}},ge=()=>{q&&(c(o-1),g({}))},he=()=>{const t=Object.values(w).map(a=>a.text);return le.filter(a=>!t.includes(a.text))},ue=()=>{K(!0)},pe=()=>{const t=$.find(s=>s.number===i),a=F.find(s=>s.ID===C);if(t&&a){const s=`${a.AyaFrom}-${a.AyaTo}`;U({id:i,name:t.name,range:s}),W(a.AyaFrom),b(!1),g({}),E(0),c(0)}},ye=t=>{Y(t),M(null),T([])};return r.useEffect(()=>{const t=a=>{A.current&&!A.current.contains(a.target)&&b(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),J?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-[#2A2C38]",children:e.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 relative",ref:A,children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 px-1 sm:px-2 py-1 rounded transition-colors",onClick:()=>b(!k),children:[e.jsx("span",{className:"text-gray-800 font-medium dark:text-white text-sm sm:text-base font-poppins",children:x.name}),e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 transition-transform rotate-90"})]}),e.jsx("span",{className:"text-gray-400 dark:text-white",children:"|"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-white",children:x.range}),k&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-80 bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Select Surah & Range"}),e.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(be,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Surah"}),e.jsx("select",{value:i,onChange:t=>ye(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:$.map(t=>e.jsxs("option",{value:t.number,children:[t.number,". ",t.name," (",t.arabic,") -"," ",t.ayahs," verses"]},t.number))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available Ayah Ranges"}),Z?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:"Loading ranges..."})]}):F.length>0?e.jsxs("select",{value:C||"",onChange:t=>M(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a range"}),F.map((t,a)=>e.jsxs("option",{value:t.ID||a,children:["Verses ",t.AyaFrom,"-",t.AyaTo," (",t.AyaTo-t.AyaFrom+1," verses)"]},t.ID||a))]}):i?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"No ayah ranges available for this surah"}):e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"Please select a surah first"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t dark:border-gray-700",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),e.jsx("button",{onClick:pe,disabled:!i||C===null,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#2AA0BF"},children:"Apply"})]})]})]})]})})})}),e.jsx("div",{children:e.jsx(Ne,{className:"hidden sm:inline w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-white relative top-8 sm:top-10 left-4 sm:left-30"})}),e.jsx("div",{className:"sm:border-b dark:bg-gray-900 w-full max-w-[884px] mx-auto",children:e.jsxs("div",{className:"mx-auto px-3 sm:px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-25",children:e.jsx("h1",{className:"text-lg sm:text-xl font-semibold font-poppins",style:{color:"#2AA0BF"},children:"Drag & Drop"})}),e.jsxs("div",{className:"hidden sm:block text-xs sm:text-sm text-gray-600 dark:text-white",children:[e.jsxs("span",{children:["Ayah: ",d]}),u>1&&e.jsxs("span",{className:"ml-4",children:["Page: ",o+1,"/",u]}),e.jsxs("span",{className:"ml-4",children:["മാർക്ക്: ",R]})]})]}),e.jsxs("div",{className:"sm:hidden border-t border-gray-300 mt-2 pt-2 text-xs text-gray-600 dark:text-white flex justify-end gap-4",children:[e.jsxs("span",{children:["Ayah: ",d]}),u>1&&e.jsxs("span",{children:["Page: ",o+1,"/",u]}),e.jsxs("span",{children:["മാർക്ക്: ",R]})]})]})}),e.jsx("div",{className:"w-full mx-auto px-3 sm:px-4 py-4 sm:py-6 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 sm:p-6",children:[S&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading word meanings..."})]}),!S&&h.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8 justify-center",children:[e.jsxs("div",{className:"flex flex-row gap-2 sm:gap-3 lg:gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Arabic Text"}),h.map(t=>e.jsx("div",{className:"bg-[#EBEEF0] dark:bg-[#323A3F] dark:text-white p-3 sm:p-4 rounded text-center w-[164px] sm:w-48 lg:w-50 h-10 sm:h-12 flex items-center justify-center",children:e.jsx("span",{className:"text-base sm:text-lg font-semibold",style:{fontFamily:`'${ee}', serif`},children:t.text})},t.id))]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-2",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Drop Here"}),h.map(t=>{const a=xe(t.id);return e.jsx("div",{draggable:!!a,onDragStart:s=>a&&Q(s,a),className:`w-full font-malayalam sm:w-56 lg:w-64 h-10 sm:h-12 border rounded-lg flex items-center justify-center text-xs sm:text-sm transition-colors ${a?a.correct?"border-green-400 bg-green-100 text-green-700":"border-red-400 bg-red-100 text-red-700":"border-gray-300 bg-[#EBEEF0] hover:border-blue-300 dark:bg-[#323A3F]"}`,onDragOver:H,onDrop:s=>ie(s,t.id),children:a&&e.jsx("span",{className:"px-2 text-center",children:a.text})},`drop-${t.id}`)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 order-3",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Malayalam Options"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-1 font-malayalam",children:he().map(t=>{const a=s=>{if(s.preventDefault(),m){const n={...w};for(const l in n)n[l]?.text===m.text&&delete n[l];g(n),N(null)}};return e.jsx("div",{draggable:!0,onDragStart:s=>Q(s,t),onDragOver:H,onDrop:a,className:"border rounded text-xs sm:text-sm w-full sm:w-60 lg:w-70 h-10 sm:h-12 flex items-center justify-center transition-shadow bg-white dark:bg-gray-900 dark:text-white border-gray-300 cursor-move hover:shadow-md",children:t.text},t.id)})})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-4",children:[q&&e.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[e.jsx(we,{className:"w-3 h-3"}),"Previous Words"]}),e.jsxs("span",{className:"flex items-center px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:[o+1," of ",u]}),ce&&e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[P?"Next Words":"Next Ayah",e.jsx(X,{className:"w-3 h-3"})]})]})]}),!S&&h.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No word meanings available for this ayah."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please select a different surah or ayah range."})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-sm sm:max-w-md",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 dark:text-white",children:"Start Game"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 dark:text-white",children:"Are you ready to begin the game? Let's go!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>{},className:"px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-600 dark:text-white hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50 transition-colors order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{onClick:ue,className:"px-3 sm:px-4 py-2 text-sm sm:text-base bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors order-1 sm:order-2",style:{backgroundColor:"#2AA0BF"},children:"Start"})]})]})})})};export{Ce as default};
