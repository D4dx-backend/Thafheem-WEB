import{i as we,j as e,q as K,X as ke,t as Ae,E as Se,a6 as De}from"./index-CUlJBpza.js";import{b as n}from"./react-vendor-v5ei6ytj.js";import{A as Ce}from"./arrow-left-BNUhNc4Q.js";import{C as Te}from"./chevron-left-Cd5zBMff.js";const We=()=>{const{translationLanguage:r}=we(),[I,R]=n.useState(0),[i,O]=n.useState(1),[h,w]=n.useState(null),[k,u]=n.useState({}),[Y,Z]=n.useState(!1),[A,y]=n.useState(!1),S=n.useRef(null),[g,ee]=n.useState({id:1,name:"Al-Fatiha",range:"1-7"}),[L,v]=n.useState([]),[$,N]=n.useState([]),[D,B]=n.useState(!1),[d,c]=n.useState(0),[C]=n.useState(9),[x,te]=n.useState(1),[T,P]=n.useState(null),[_,q]=n.useState([]),[F,M]=n.useState([]),[se,z]=n.useState(!1),ae="Amiri Quran",G=()=>r==="hi"?"font-hindi":r==="ur"?"font-urdu-nastaliq":r==="bn"?"font-bengali":r==="ta"?"font-tamil":r==="mal"?"font-malayalam":"font-poppins",re=()=>r==="E"||r==="en"?"English":r==="hi"?"Hindi":r==="ur"?"Urdu":r==="bn"?"Bangla":r==="ta"?"Tamil":"Malayalam",V=()=>r==="mal"?"മാർക്ക്":r==="E"||r==="en"?"Score":r==="hi"?"स्कोर":r==="ur"?"اسکور":r==="bn"?"স্কোর":r==="ta"?"மதிப்பெண்":"Score";n.useEffect(()=>{(async()=>{try{const s=await Ae();q(s)}catch(s){console.error("Failed to load surahs:",s),q([{number:1,name:"Al-Fatiha",arabic:"الفاتحة",ayahs:7},{number:2,name:"Al-Baqarah",arabic:"البقرة",ayahs:286}])}})()},[]),n.useEffect(()=>{(async()=>{if(x)try{z(!0);const s=await Se(x,r),a=Array.isArray(s)?s:[];if(M(a),a.length>0){const o=a[0].ID!==void 0?a[0].ID:0;P(o)}}catch(s){console.error("Failed to load ayah ranges:",s),M([])}finally{z(!1)}})()},[x,r]),n.useEffect(()=>{(async()=>{if(!(!g.id||!i))try{B(!0);const a=(await De(g.id,i,r))?.words||[];if(a&&Array.isArray(a)&&a.length>0){const o=a.map(l=>{const m=l.WordPhrase||"",j=l.MalMeaning||l.EngMeaning||l.WordMeaning||"";return{WordPhrase:m,Meaning:j}}).filter(l=>l.WordPhrase&&l.Meaning&&l.Meaning.trim()!==""&&!l.WordPhrase.includes("﴿")&&!l.WordPhrase.trim().match(/^[\d\s]+$/));if(o.length>0){const l=o.map((b,W)=>({id:`word_${W+1}`,text:b.WordPhrase,correctTranslation:b.Meaning})),Ne=[...o.map(b=>b.Meaning)].sort(()=>Math.random()-.5).map((b,W)=>({id:`opt${W+1}`,text:b}));v(l),N(Ne),c(0)}else v([]),N([]),c(0)}else v([]),N([]),c(0)}catch(s){console.error("Failed to load word meanings:",s),v([]),N([]),c(0)}finally{B(!1)}})()},[g.id,i,r]);const ne=[{id:"word_1",text:"بِسْمِ",correctTranslation:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"word_2",text:"اللَّهِ",correctTranslation:"അല്ലാഹു"},{id:"word_3",text:"الرَّحْمَٰنِ",correctTranslation:"പരമകാരുണികനായ"},{id:"word_4",text:"الرَّحِيمِ",correctTranslation:"പരമദയാലുവായ"}],le=[{id:"opt1",text:"നിദ്രാനിമഗ്നമായവനു"},{id:"opt2",text:"പരമകാരുണികനായവനു"},{id:"opt3",text:"അല്ലാഹുവിന്റെ നാമത്തിൽ"},{id:"opt4",text:"അല്ലാഹു"},{id:"opt5",text:"പരമകാരുണികനായ"},{id:"opt6",text:"പരമദയാലുവായ"}],H=L.length>0?L:ne,oe=$.length>0?$:le,Q=d*C,ie=Q+C,f=H.slice(Q,ie),de=f.map(t=>t.correctTranslation),ce=oe.filter(t=>de.includes(t.text)),p=Math.ceil(H.length/C),E=d<p-1,U=d>0,[,xe]=g.range.split("-").map(Number),me=i<xe,ge=E||me,X=(t,s)=>{w(s),t.dataTransfer.effectAllowed="move"},J=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},he=(t,s)=>{if(t.preventDefault(),h){const a=f.find(l=>l.id===s),o=a&&a.correctTranslation===h.text;u(l=>{const m={...l};for(const j in m)m[j]?.text===h.text&&delete m[j];return m[s]={text:h.text,correct:o},m}),o&&R(l=>l+1),w(null)}},ue=t=>k[t],fe=()=>{if(E)c(d+1),u({});else{const[,t]=g.range.split("-").map(Number);i<t&&(O(i+1),u({}),c(0))}},pe=()=>{U&&(c(d-1),u({}))},be=()=>{const t=Object.values(k).map(s=>s.text);return ce.filter(s=>!t.includes(s.text))},ye=()=>{Z(!0)},je=()=>{const t=_.find(a=>a.number===x),s=F.find(a=>a.ID===T);if(t&&s){const a=`${s.AyaFrom}-${s.AyaTo}`;ee({id:x,name:t.name,range:a}),O(s.AyaFrom),y(!1),u({}),R(0),c(0)}},ve=t=>{te(t),P(null),M([])};return n.useEffect(()=>{const t=s=>{S.current&&!S.current.contains(s.target)&&y(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),Y?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-[#2A2C38]",children:e.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 relative",ref:S,children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 px-1 sm:px-2 py-1 rounded transition-colors",onClick:()=>y(!A),children:[e.jsx("span",{className:"text-gray-800 font-medium dark:text-white text-sm sm:text-base font-poppins",children:g.name}),e.jsx(K,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 transition-transform rotate-90"})]}),e.jsx("span",{className:"text-gray-400 dark:text-white",children:"|"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-white",children:g.range}),A&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-80 bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Select Surah & Range"}),e.jsx("button",{onClick:()=>y(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(ke,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Surah"}),e.jsx("select",{value:x,onChange:t=>ve(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:_.map(t=>e.jsxs("option",{value:t.number,children:[t.number,". ",t.name," (",t.arabic,") -"," ",t.ayahs," verses"]},t.number))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available Ayah Ranges"}),se?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:"Loading ranges..."})]}):F.length>0?e.jsxs("select",{value:T||"",onChange:t=>P(Number(t.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a range"}),F.map((t,s)=>e.jsxs("option",{value:t.ID||s,children:["Verses ",t.AyaFrom,"-",t.AyaTo," (",t.AyaTo-t.AyaFrom+1," verses)"]},t.ID||s))]}):x?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"No ayah ranges available for this surah"}):e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 py-2",children:"Please select a surah first"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t dark:border-gray-700",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),e.jsx("button",{onClick:je,disabled:!x||T===null,className:"px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#2AA0BF"},children:"Apply"})]})]})]})]})})})}),e.jsx("div",{children:e.jsx(Ce,{className:"hidden sm:inline w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-white relative top-8 sm:top-10 left-4 sm:left-30"})}),e.jsx("div",{className:"sm:border-b dark:bg-gray-900 w-full max-w-[884px] mx-auto",children:e.jsxs("div",{className:"mx-auto px-3 sm:px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-25",children:e.jsx("h1",{className:"text-lg sm:text-xl font-semibold font-poppins",style:{color:"#2AA0BF"},children:"Drag & Drop"})}),e.jsxs("div",{className:"hidden sm:block text-xs sm:text-sm text-gray-600 dark:text-white",children:[e.jsxs("span",{children:["Ayah: ",i]}),p>1&&e.jsxs("span",{className:"ml-4",children:["Page: ",d+1,"/",p]}),e.jsxs("span",{className:"ml-4",children:[V(),": ",I]})]})]}),e.jsxs("div",{className:"sm:hidden border-t border-gray-300 mt-2 pt-2 text-xs text-gray-600 dark:text-white flex justify-end gap-4",children:[e.jsxs("span",{children:["Ayah: ",i]}),p>1&&e.jsxs("span",{children:["Page: ",d+1,"/",p]}),e.jsxs("span",{children:[V(),": ",I]})]})]})}),e.jsx("div",{className:"w-full mx-auto px-3 sm:px-4 py-4 sm:py-6 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 sm:p-6",children:[D&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading word meanings..."})]}),!D&&f.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8 justify-center",children:[e.jsxs("div",{className:"flex flex-row gap-2 sm:gap-3 lg:gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Arabic Text"}),f.map(t=>e.jsx("div",{className:"bg-[#EBEEF0] dark:bg-[#323A3F] dark:text-white p-3 sm:p-4 rounded text-center w-[164px] sm:w-48 lg:w-50 h-10 sm:h-12 flex items-center justify-center",children:e.jsx("span",{className:"text-base sm:text-lg font-semibold",style:{fontFamily:`'${ae}', serif`},children:t.text})},t.id))]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 lg:gap-4 order-2",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:"Drop Here"}),f.map(t=>{const s=ue(t.id);return e.jsx("div",{draggable:!!s,onDragStart:a=>s&&X(a,s),className:`w-full ${G()} sm:w-56 lg:w-64 h-10 sm:h-12 border rounded-lg flex items-center justify-center text-xs sm:text-sm transition-colors ${s?s.correct?"border-green-400 bg-green-100 text-green-700":"border-red-400 bg-red-100 text-red-700":"border-gray-300 bg-[#EBEEF0] hover:border-blue-300 dark:bg-[#323A3F]"}`,onDragOver:J,onDrop:a=>he(a,t.id),children:s&&e.jsx("span",{className:"px-2 text-center",children:s.text})},`drop-${t.id}`)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3 order-3",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-medium text-center mb-2 text-gray-700 dark:text-white lg:hidden",children:[re()," Options"]}),e.jsx("div",{className:`grid grid-cols-2 gap-4 sm:grid-cols-1 ${G()}`,children:be().map(t=>{const s=a=>{if(a.preventDefault(),h){const o={...k};for(const l in o)o[l]?.text===h.text&&delete o[l];u(o),w(null)}};return e.jsx("div",{draggable:!0,onDragStart:a=>X(a,t),onDragOver:J,onDrop:s,className:"border rounded text-xs sm:text-sm w-full sm:w-60 lg:w-70 h-10 sm:h-12 flex items-center justify-center transition-shadow bg-white dark:bg-gray-900 dark:text-white border-gray-300 cursor-move hover:shadow-md",children:t.text},t.id)})})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4 mb-4",children:[U&&e.jsxs("button",{onClick:pe,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[e.jsx(Te,{className:"w-3 h-3"}),"Previous Words"]}),e.jsxs("span",{className:"flex items-center px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:[d+1," of ",p]}),ge&&e.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 text-sm",style:{backgroundColor:"#2AA0BF"},children:[E?"Next Words":"Next Ayah",e.jsx(K,{className:"w-3 h-3"})]})]})]}),!D&&f.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No word meanings available for this ayah."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please select a different surah or ayah range."})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-sm sm:max-w-md",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 dark:text-white",children:"Start Game"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 dark:text-white",children:"Are you ready to begin the game? Let's go!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>{},className:"px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-600 dark:text-white hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50 transition-colors order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{onClick:ye,className:"px-3 sm:px-4 py-2 text-sm sm:text-base bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors order-1 sm:order-2",style:{backgroundColor:"#2AA0BF"},children:"Start"})]})]})})})};export{We as default};
