import{j as e,O as L,ah as T,ai as I,z as V,P as $,X as B}from"./index-C60dBqWj.js";import{b as a}from"./react-vendor-v5ei6ytj.js";import{C as R}from"./chevron-up-CCC2ITVh.js";import{B as S,F as A}from"./backward-mJTTrnLJ.js";import{E as O}from"./ellipsis-B0msEmzt.js";import{V as U}from"./volume-x-BZcMCFfr.js";import{V as X}from"./volume-2-BRmDGB-i.js";const W=({activeSection:d,setActiveSection:s})=>{const[n,m]=a.useState(!1),[x,g]=a.useState([]),[i,u]=a.useState(!0),[h,r]=a.useState(null);a.useEffect(()=>{(async()=>{try{u(!0);const o=await T();g(o),!d&&o.length>0&&s(o[0])}catch(o){console.error("Error loading articles:",o),r(o.message)}finally{u(!1)}})()},[]);const b=l=>{s(l),m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden bg-white dark:bg-[#2A2C38] border-b border-gray-200 sticky top-0 z-40",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-black dark:text-white mb-3",children:"End of Prophethood page"}),h&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-sm rounded",children:"Using offline content"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>m(!n),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-left",children:[e.jsx("span",{className:"text-sm text-black dark:text-white truncate pr-2",children:d?.title||"Select an article"}),n?e.jsx(R,{size:20,className:"text-gray-500 flex-shrink-0"}):e.jsx(L,{size:20,className:"text-gray-500 flex-shrink-0"})]}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:x.map((l,o)=>e.jsx("button",{onClick:()=>b(l),className:`w-full text-left px-4 py-3 text-sm transition-all duration-200 border-b border-gray-100 dark:border-gray-600 last:border-b-0 ${d?.aid===l.aid?"bg-[#D9D9D9] dark:bg-gray-900 text-black dark:text-white font-medium":"text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l.title},o))})]})]})}),e.jsxs("div",{className:"hidden lg:block w-80 bg-white border-r border-gray-200 shadow-lg h-screen overflow-y-auto dark:bg-[#2A2C38] m-4",children:[e.jsxs("div",{className:"border-b border-gray-300 p-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-black dark:text-white",children:"End of Prophethood page"}),h&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded",children:"Using offline content"})]}),e.jsx("nav",{className:"py-2",children:i?e.jsx("div",{className:"space-y-2 px-4",children:Array.from({length:6}).map((l,o)=>e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"},o))}):e.jsx("ul",{className:"space-y-1",children:x.map((l,o)=>e.jsx("li",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>b(l),className:`w-[284px] text-left px-4 py-3 text-sm transition-all duration-200 ${d?.aid===l.aid?"bg-[#D9D9D9] dark:bg-gray-900 border-l-black text-black dark:text-white font-medium":"border-l-transparent text-gray-700 hover:border-l-gray-400 dark:text-white"}`,children:l.title})},o))})})]})]})},_=({onPlayAudio:d,activeSection:s,showPlayButton:n=!0})=>{const[m,x]=a.useState(null),[g,i]=a.useState(!0),[u,h]=a.useState(null);return a.useEffect(()=>{(async()=>{if(!s?.aid){i(!1);return}try{i(!0),h(null);const b=await I(s.aid);x(b)}catch(b){console.error("Error loading article:",b),h(b.message),x({id:s.aid,title:s.title,matter:"Content not available offline. Please check your internet connection."})}finally{i(!1)}})()},[s]),e.jsxs("div",{className:"flex-1 bg-white h-screen overflow-y-auto dark:bg-[#2A2C38] lg:m-4",children:[e.jsx("div",{className:"border-b border-gray-300 px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-black dark:text-white",children:m?.title||s?.title||"Select an article"}),n&&e.jsxs("button",{onClick:d,className:"flex items-center justify-center sm:justify-start space-x-2 px-4 py-2 text-[#2AA0BF] hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-colors duration-200 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium",children:"Play Audio"})]})]})}),e.jsx("div",{className:"px-4 sm:px-6 py-6",children:e.jsx("div",{className:"max-w-4xl",children:g?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-3/4"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-full"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-5/6"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-2/3"})]}):e.jsxs(e.Fragment,{children:[u&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-sm rounded",children:"Content loaded from offline cache"}),e.jsx("p",{className:"text-black text-sm sm:text-base  dark:text-white whitespace-pre-wrap",children:m?.matter||"Please select an article to view its content."})]})})})]})},q=({audioSrc:d,title:s,onClose:n,autoPlay:m=!1,isMobile:x=!1})=>{const[g,i]=a.useState(!1),[u,h]=a.useState(0),[r,b]=a.useState(0),[l,o]=a.useState(1),[j,E]=a.useState(!1),[k,w]=a.useState(!1),[v,N]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{const t=p.current;if(!t)return;const c=()=>{b(t.duration),m&&(t.play(),i(!0))},f=()=>{h(t.currentTime)},y=()=>{i(!1),h(0)};return t.addEventListener("loadedmetadata",c),t.addEventListener("timeupdate",f),t.addEventListener("ended",y),()=>{t.removeEventListener("loadedmetadata",c),t.removeEventListener("timeupdate",f),t.removeEventListener("ended",y),t.pause(),t.src="",t.currentTime=0}},[d,m]);const C=t=>{if(isNaN(t))return"00:00";const c=Math.floor(t/3600),f=Math.floor(t%3600/60),y=Math.floor(t%60);return c>0?`${c.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${f.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},P=()=>{const t=p.current;t&&(g?t.pause():t.play(),i(!g))},z=()=>{const t=p.current;t&&(t.currentTime=Math.max(0,t.currentTime-10))},M=()=>{const t=p.current;t&&(t.currentTime=Math.min(t.duration,t.currentTime+10))},D=t=>{const c=parseFloat(t.target.value),f=p.current;f&&(o(c),f.volume=c,E(c===0))},F=[{label:"Download",action:()=>console.log("Download")},{label:"Share",action:()=>console.log("Share")},{label:"Add to Playlist",action:()=>console.log("Add to Playlist")},{label:"Repeat",action:()=>console.log("Toggle Repeat")}];return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-[#2A2C38] border-t border-gray-200 shadow-lg z-50  h-[90px]",children:[e.jsx("audio",{ref:p,src:d,preload:"metadata"}),e.jsx("div",{className:"px-4 sm:px-6 pb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-1 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-1 bg-black rounded-full transition-all duration-200",style:{width:`${r?u/r*100:0}%`}})}),e.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-black rounded-full transform -translate-y-1/2 cursor-pointer",style:{left:`${r?u/r*100:0}%`}})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 min-h-[60px]",children:[e.jsx("div",{className:"text-xs sm:text-sm font-mono text-black w-12 sm:w-16 dark:text-white",children:C(u)}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("div",{className:"relative hidden sm:block",children:[e.jsx("button",{onClick:()=>N(!v),className:"p-2 text-black hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white",children:e.jsx(O,{size:20})}),v&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-2 min-w-40",children:F.map((t,c)=>e.jsx("button",{onClick:()=>{t.action(),N(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.label},c))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>w(!k),onMouseEnter:()=>w(!0),className:"p-1.5 sm:p-2 text-gray-600 bg-[#D9D9D9] hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white dark:bg-gray-600",children:j||l===0?e.jsx(U,{size:16,className:"sm:w-5 sm:h-5"}):e.jsx(X,{size:16,className:"sm:w-5 sm:h-5"})}),k&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",onMouseLeave:()=>w(!1),children:e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:j?0:l,onChange:D,className:"w-16 sm:w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer volume-slider"})})]}),e.jsxs("button",{onClick:z,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#1A1C28] flex items-center justify-center",children:[e.jsx("img",{src:S,alt:"Forward",className:"w-5 h-5 object-contain"}),e.jsx("img",{src:S,alt:"Forward",className:"w-5 h-5 object-contain"})]}),e.jsx("button",{onClick:P,className:"p-2 sm:p-3 bg-white text-black rounded-full transition-colors shadow-md hover:shadow-lg",children:g?e.jsx(V,{size:18,className:"sm:w-5 sm:h-5"}):e.jsx($,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsxs("button",{onClick:M,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#1A1C28] flex items-center justify-center",children:[e.jsx("img",{src:A,alt:"Forward",className:"w-5 h-5 object-contain"}),e.jsx("img",{src:A,alt:"Forward",className:"w-5 h-5 object-contain"})]}),x&&e.jsx("button",{onClick:n,className:"p-1.5 sm:p-2 text-black hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",children:e.jsx(B,{size:16,className:"sm:w-5 sm:h-5"})})]}),e.jsx("div",{className:"text-xs sm:text-sm font-mono text-black w-12 sm:w-16 text-right dark:text-white",children:C(r)})]}),s&&e.jsx("div",{className:"px-4 sm:px-6 pb-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 truncate",children:s})})]})},ee=()=>{const[d,s]=a.useState(!1),[n,m]=a.useState(null),[x,g]=a.useState(!1);a.useEffect(()=>{const r=()=>{g(window.innerWidth<1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const i=()=>{s(r=>!r)},u=()=>{s(!1)},h=!x||d;return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] dark:bg-gray-900 font-poppins",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsx(W,{activeSection:n,setActiveSection:m}),e.jsx(_,{onPlayAudio:i,activeSection:n,showPlayButton:!0})]}),h&&e.jsx(q,{audioSrc:n?.audiourl||"",title:n?.title||"",onClose:u,autoPlay:!1,isMobile:x})]})};export{ee as default};
