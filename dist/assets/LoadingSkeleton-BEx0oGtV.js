import{j as e}from"./index-pxHnjHjD.js";const u="ThafheemTranslations",b=1,n="translations",h=30;class y{constructor(){this.db=null,this.initPromise=this.initDB()}async initDB(){return new Promise((r,t)=>{const a=indexedDB.open(u,b);a.onerror=()=>t(a.error),a.onsuccess=()=>{this.db=a.result,r(this.db)},a.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains(n)||o.createObjectStore(n,{keyPath:"key"}).createIndex("expiry","expiry",{unique:!1})}})}generateCacheKey(r,t,a="E"){return`translation_${r}_${t}_${a}`}async getCachedTranslation(r,t,a="E"){try{if(await this.initPromise,!this.db)return null;const s=this.generateCacheKey(r,t,a),d=this.db.transaction([n],"readonly").objectStore(n);return new Promise(c=>{const i=d.get(s);i.onsuccess=()=>{const m=i.result;if(!m){c(null);return}const g=Date.now();if(m.expiry&&g>m.expiry){this.deleteCachedTranslation(r,t,a),c(null);return}c(m.data)},i.onerror=()=>c(null)})}catch(s){return console.error("Error getting cached translation:",s),null}}async setCachedTranslation(r,t,a,s="E"){try{if(await this.initPromise,!this.db)return!1;const o=this.generateCacheKey(r,t,s),d=Date.now()+h*24*60*60*1e3,i=this.db.transaction([n],"readwrite").objectStore(n);return new Promise(m=>{const g=i.put({key:o,data:a,expiry:d,timestamp:Date.now()});g.onsuccess=()=>{m(!0)},g.onerror=()=>{console.error("Error setting cached translation:",g.error),m(!1)}})}catch(o){return console.error("Error setting cached translation:",o),!1}}async deleteCachedTranslation(r,t,a="E"){try{if(await this.initPromise,!this.db)return!1;const s=this.generateCacheKey(r,t,a),d=this.db.transaction([n],"readwrite").objectStore(n);return new Promise(c=>{const i=d.delete(s);i.onsuccess=()=>c(!0),i.onerror=()=>c(!1)})}catch(s){return console.error("Error deleting cached translation:",s),!1}}async clearExpiredCache(){try{if(await this.initPromise,!this.db)return 0;const a=this.db.transaction([n],"readwrite").objectStore(n).index("expiry");return new Promise(s=>{const o=a.openCursor(IDBKeyRange.upperBound(Date.now()));let d=0;o.onsuccess=c=>{const i=c.target.result;i?(i.delete(),d++,i.continue()):s(d)},o.onerror=()=>s(0)})}catch(r){return console.error("Error clearing expired cache:",r),0}}async getCacheStats(){try{if(await this.initPromise,!this.db)return{total:0,expired:0,size:"0 KB"};const t=this.db.transaction([n],"readonly").objectStore(n);return new Promise(a=>{const s=t.count();s.onsuccess=()=>{const o=s.result;a({total:o,expired:0,size:"Unknown"})},s.onerror=()=>a({total:0,expired:0,size:"0 KB"})})}catch(r){return console.error("Error getting cache stats:",r),{total:0,expired:0,size:"0 KB"}}}async clearAllCache(){try{if(await this.initPromise,!this.db)return!1;const t=this.db.transaction([n],"readwrite").objectStore(n);return new Promise(a=>{const s=t.clear();s.onsuccess=()=>{a(!0)},s.onerror=()=>a(!1)})}catch(r){return console.error("Error clearing all cache:",r),!1}}}const w=new y,p=()=>e.jsxs("div",{className:"pb-4 sm:pb-6 border-b border-gray-200 dark:border-gray-700 rounded-md",children:[e.jsxs("div",{className:"text-right mb-2 sm:mb-3 lg:mb-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4 ml-auto"})]}),e.jsxs("div",{className:"mb-2 sm:mb-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 lg:gap-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-8"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-4"})]})]}),x=()=>e.jsxs("div",{className:"rounded-xl mb-4 sm:mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-3 sm:px-4 pt-3 sm:pt-4 flex items-center justify-between",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-32"})}),e.jsx("div",{className:"p-3 sm:p-4 md:p-6 lg:p-8",children:e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4 mx-auto"})]})}),e.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 pb-3 sm:pb-4 md:pb-6 lg:pb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4"})]}),e.jsx("div",{className:"flex flex-wrap justify-start gap-1 sm:gap-2",children:Array.from({length:6}).map((l,r)=>e.jsx("div",{className:"h-10 w-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"},r))})]})]}),N=({message:l="Loading..."})=>e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400 text-sm",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-current"}),e.jsx("span",{children:l})]}),k=({count:l=5})=>e.jsx("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8",children:Array.from({length:l}).map((r,t)=>e.jsx(p,{},t))}),f=({count:l=3})=>e.jsx("div",{className:"space-y-4 sm:space-y-6",children:Array.from({length:l}).map((r,t)=>e.jsx(x,{},t))});export{f as B,N as C,k as V,w as t};
