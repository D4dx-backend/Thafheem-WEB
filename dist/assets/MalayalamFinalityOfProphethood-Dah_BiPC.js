import{u as b,j as a,N as k,aB as v,z as j}from"./index-D0NMIq43.js";import{b as r}from"./react-vendor-v5ei6ytj.js";const P=()=>{const{translationLanguage:f}=b(),o=f==="mal",[p,x]=r.useState([]),[i,y]=r.useState(!0),[d,u]=r.useState(null),[s,c]=r.useState({isOpen:!1,noteId:null,noteName:null,noteText:null,loading:!1});r.useEffect(()=>{let e=!0;return(async()=>{try{y(!0),u(null);const n=await v();if(!e)return;x(n.sections||[]),n.error&&u("Unable to fetch content from the server.")}catch{e&&(u("Unable to load content. Please try again later."),x([]))}finally{e&&y(!1)}})(),()=>{e=!1}},[]);const h=async e=>{const l=e.target.closest(".p-note-link");if(!l)return;e.preventDefault(),e.stopPropagation();const n=l.getAttribute("data-note-id");if(n){c({isOpen:!0,noteId:n,noteName:null,noteText:null,loading:!0});try{const t=await j(n),m=t?.NoteName||null,N=t?.NoteText||t?.note_text||t?.content||t?.html||t?.text||t?.body||t?.description||t?.note||null;c({isOpen:!0,noteId:n,noteName:m,noteText:N||'<p style="color: #666;">Note content is not available.</p>',loading:!1})}catch(t){console.error(`Failed to fetch note ${n}:`,t.message),c({isOpen:!0,noteId:n,noteName:null,noteText:'<p style="color: #666;">Note content is temporarily unavailable. Please try again later.</p>',loading:!1})}}},g=e=>e&&e.replace(/([BHNPX])(\d+)/g,(l,n,t)=>{if(l.includes("p-note-link"))return l;const m=`${n}${t}`;return`<a href="#" class="p-note-link inline-block cursor-pointer text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 dark:hover:text-cyan-300 transition-colors font-semibold" data-note-id="${m}" title="Click to view note ${m}"><sup>${l}</sup></a>`});return a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 font-poppins",children:a.jsxs("div",{className:"max-w-[1070px] w-full mx-auto px-4 sm:px-6 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:`text-3xl font-bold text-gray-900 mb-2 dark:text-white ${o?"font-malayalam":""}`,style:o?{fontFamily:"'Noto Sans Malayalam'"}:{},children:o?"പ്രവാചകത്വത്തിന്റെ അന്ത്യം":"The Finality of Prophethood"}),a.jsx("div",{className:"mt-4 h-px bg-gray-200 dark:bg-gray-700"})]}),i&&a.jsx("div",{className:"py-10 text-center text-gray-600 dark:text-gray-300",children:o?"ഉള്ളടക്കം ലോഡുചെയ്യുന്നു...":"Loading content..."}),!i&&d&&a.jsx("div",{className:"mb-6 p-4 rounded-lg bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-200",children:d}),!i&&!d&&p.length===0&&a.jsx("div",{className:"py-10 text-center text-gray-600 dark:text-gray-300",children:o?"ഇപ്പോൾ ഉള്ളടക്കം ലഭ്യമല്ല.":"Content is not available at the moment."}),!i&&!d&&p.length>0&&a.jsx("div",{className:"space-y-8",children:p.map((e,l)=>a.jsxs("section",{className:"bg-white dark:bg-[#1b1d27] rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 p-5 sm:p-7",onClick:h,children:[e.title&&a.jsx("div",{className:`mb-4 prose prose-lg dark:prose-invert max-w-none ${o?"font-malayalam":""}`,style:o?{fontFamily:"'Noto Sans Malayalam'"}:{},dangerouslySetInnerHTML:{__html:g(e.title)}}),a.jsx("div",{className:`prose prose-sm sm:prose-base dark:prose-invert max-w-none leading-relaxed text-gray-800 dark:text-gray-200 ${o?"font-malayalam":""}`,dangerouslySetInnerHTML:{__html:g(e.text||"")},style:{lineHeight:1.8,textAlign:"justify",...o?{fontFamily:"'Noto Sans Malayalam'"}:{}}})]},e.id||l))}),a.jsx(k,{isOpen:s.isOpen,onClose:()=>c({isOpen:!1,noteId:null,noteName:null,noteText:null,loading:!1}),noteId:s.noteId,noteContent:s.loading?"Loading...":s.noteText,noteName:s.noteName,loading:s.loading})]})})};export{P as default};
