import{r as i,u as D,a as J,d as K,K as V,j as s,p as X,I as G,H as Q,J as U}from"./index-pxHnjHjD.js";import{I as Y,N as Z}from"./NotePopup-DbvEEH89.js";import{A as tt}from"./WordByWord-CXIsVNSw.js";import{C as et}from"./chevron-left-BDDzhXoa.js";import"./WordByWordIcon-B1kDBx-G.js";import"./tamilWordByWordService-CbdEWK98.js";import"./hindiWordByWordService-C4orOXOT.js";import"./banglaWordByWordService-CbmHEzxM.js";import"./banglaTranslationService-DREVDw9v.js";import"./apiService-uFQGO9bv.js";import"./Toast-B6q433qJ.js";import"./tamilTranslationService-BXq1lve9.js";import"./hindiTranslationService-TIz5d7Jr.js";import"./urduTranslationService-Devikl1b.js";import"./englishTranslationService-DbBUmdrl.js";const Nt=()=>{const[g,I]=i.useState(!1),[C,u]=i.useState({id:"",content:""}),[b,S]=i.useState(!1),[m,R]=i.useState({surahId:null,verseId:null}),[E,T]=i.useState(!1),[v,P]=i.useState(null),[x,H]=i.useState([]),[A,$]=i.useState(6),[k,M]=i.useState("3"),[y,O]=i.useState(1),[j,W]=i.useState("en"),{quranFont:rt}=D(),c=i.useRef(null);J();const l=K(),[h]=V(),_=r=>({N895:`
        <div class="note-content">
          <h3 style="color: #2AA0BF; margin-bottom: 10px;">Note N895</h3>
          <p>ലാത്ത് - ഇത് ഒരു പ്രാചീന അറബ് ദേവതയുടെ പേരാണ്. ഇസ്ലാമിന് മുമ്പുള്ള അറേബ്യയിൽ ഈ ദേവതയെ ആരാധിച്ചിരുന്നു.</p>
          <p>ഖുർആനിൽ ഈ ദേവതയെ പരാമർശിക്കുന്നത് ബഹുദൈവവാദത്തിന്റെ തെറ്റിനെ വിശദീകരിക്കാനാണ്.</p>
          </div>
      `,N189:`
        <div class="note-content">
          <h3 style="color: #2AA0BF; margin-bottom: 10px;">Note N189</h3>
          <p>ഉസ്സ - ഇതും ഒരു പ്രാചീന അറബ് ദേവതയാണ്. ലാത്ത്, ഉസ്സ, മനാത് എന്നിവ മക്കയിലെ പ്രധാന ദേവതകളായിരുന്നു.</p>
          <p>ഇവയെ "അല്ലാഹുവിന്റെ പുത്രിമാർ" എന്ന് അവർ വിളിച്ചിരുന്നു.</p>
        </div>
      `,N1514:`
        <div class="note-content">
          <h3 style="color: #2AA0BF; margin-bottom: 10px;">Note N1514</h3>
          <p>നബി(സ) തിരുമേനി ആ സന്ദർഭത്തിൽ അകപ്പെട്ടിരുന്ന സ്ഥിതിവിശേഷമാണിവിടെ സൂചിപ്പിക്കുന്നത്.</p>
          <p>നബി(സ)ക്കും സഹചാരികൾക്കും എതിരാളികൾ ഏൽപിച്ചിരുന്ന ദണ്ഡനപീഡനങ്ങളല്ല തിരുമേനിയെ ദുഃഖാകുലനാക്കിയിരുന്നതെന്ന് ഇതിൽനിന്ന് വ്യക്തമാണ്.</p>
          </div>
      `,N1462:`
        <div class="note-content">
          <h3 style="color: #2AA0BF; margin-bottom: 10px;">Note N1462</h3>
          <p>മുസ്ലിം ഹദീസ് ശേഖരത്തിലെ 1462-ാം നമ്പർ ഹദീസിനെ സൂചിപ്പിക്കുന്നു.</p>
          <p>ഈ ഹദീസ് നബി(സ)യുടെ ഉദാഹരണങ്ങളെക്കുറിച്ച് പ്രതിപാദിക്കുന്നു.</p>
        </div>
      `,"3 26:3":`
        <div class="note-content">
          <h3 style="color: #2AA0BF; margin-bottom: 10px;">Verse Reference 3:26:3</h3>
          <p>അശ്ശുഅറാഅ് സൂറയിലെ 26-ാം വാക്യത്തിന്റെ 3-ാം ഭാഗത്തെ സൂചിപ്പിക്കുന്നു.</p>
          <p>ഈ വാക്യം കവികളെക്കുറിച്ചും അവരുടെ പിന്തുടർച്ചക്കാരെക്കുറിച്ചും പ്രതിപാദിക്കുന്നു.</p>
        </div>
      `})[r]||null;i.useEffect(()=>{(async()=>{try{T(!0),P(null);const e=l.surahId?parseInt(l.surahId):parseInt(h.get("surahId"))||A,t=l.range||h.get("range")||k,o=l.ipt?parseInt(l.ipt):parseInt(h.get("ipt"))||y,p=l.lang||h.get("lang")||j;$(e),M(t),O(o),W(p);const a=/^\d+$/.test(t)?await G(e,parseInt(t,10),o,p):await Q(e,t,o,p),d=Array.isArray(a)?a:[a];H(d)}catch(e){P(e.message||"Failed to load interpretation")}finally{T(!1)}})()},[l,h]);const F=async r=>{u({id:r,content:"Loading..."}),I(!0);const e=_(r);e&&u({id:r,content:e});try{const t=await U(r),o=t?.NoteText||t?.content||t?.html||t?.text||t?.body||t?.description||t?.note||(typeof t=="string"?t:null);o&&o!=="Note content not available"&&u({id:r,content:o})}catch(t){console.error("Error fetching note:",t),console.error("Error details:",{message:t.message,status:t.status,stack:t.stack}),e||u({id:r,content:`Error loading note ${r}: ${t.message}`})}},q=r=>{const e=r.target;if(!(e.classList.contains("note-highlight")||e.closest(".note-highlight")||e.closest("sup")||e.closest("a")))return;const o=e.classList.contains("note-highlight")?e:e.closest(".note-highlight"),p=e.closest("sup"),n=e.closest("a"),a=(o?.innerText||p?.innerText||n?.innerText||"").trim();if(!a)return;const d=a.match(/^\(?(\d+)\s*[:：]\s*(\d+)\)?$/);if(d){const[,L,f]=d;R({surahId:parseInt(L,10),verseId:parseInt(f,10)}),S(!0);return}F(a)},w=()=>{if(!c.current)return;c.current.querySelectorAll(".note-highlight").forEach(n=>{const a=n.parentNode;a.replaceChild(document.createTextNode(n.textContent),n),a.normalize()});const e=[],t=document.createTreeWalker(c.current,NodeFilter.SHOW_TEXT,null,!1);let o;for(;o=t.nextNode();)o.parentElement&&!o.parentElement.classList.contains("note-highlight")&&!o.parentElement.closest(".note-highlight")&&o.textContent.trim()&&e.push(o);e.forEach(n=>{const a=n.textContent,d=n.parentElement;[{regex:/N\d+/g,type:"note"},{regex:/\(\d+:\d+\)/g,type:"verse"},{regex:/\d+\s+\d+:\d+/g,type:"range"}].forEach(({regex:f,type:st})=>{if(f.test(a)){const B=a.replace(f,N=>`<span class="note-highlight" style="color: #2AA0BF !important; text-decoration: none !important; cursor: pointer !important; font-weight: 600 !important;">${N}</span>`);if(B!==a){const N=document.createElement("div");N.innerHTML=B,d.replaceChild(N.firstChild,n)}}})}),c.current.querySelectorAll("sup, a").forEach(n=>{const a=(n.innerText||"").trim();if(/^N\d+$/.test(a)){n.style.setProperty("color","#2AA0BF","important"),n.style.setProperty("text-decoration","none","important"),n.style.setProperty("cursor","pointer","important"),n.style.setProperty("font-weight","600","important");return}if(/^\(?\d+\s*[:：]\s*\d+\)?$/.test(a)){n.style.setProperty("color","#2AA0BF","important"),n.style.setProperty("text-decoration","none","important"),n.style.setProperty("cursor","pointer","important"),n.style.setProperty("font-weight","600","important");return}/^\d+\s+\d+:\d+$/.test(a)&&(n.style.setProperty("color","#2AA0BF","important"),n.style.setProperty("text-decoration","none","important"),n.style.setProperty("cursor","pointer","important"),n.style.setProperty("font-weight","600","important"))})};i.useEffect(()=>{w()},[x]),i.useEffect(()=>{!g&&!b&&setTimeout(w,100)},[g,b]),i.useEffect(()=>{if(!c.current)return;const r=new MutationObserver(e=>{let t=!1;e.forEach(o=>{(o.type==="childList"||o.type==="attributes")&&(t=!0)}),t&&setTimeout(w,50)});return r.observe(c.current,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),()=>r.disconnect()},[x]);const z=r=>{if(r==null)return"";if(typeof r=="string")return r;const e=["interpret_text","interpretation","text","content","meaning","body","desc","description"];for(const t of e)if(typeof r[t]=="string"&&r[t].trim().length>0)return r[t];for(const[t,o]of Object.entries(r))if(typeof o=="string"&&o.trim().length>20)return o;try{return JSON.stringify(r)}catch{return String(r)}};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
               .note-highlight {
                 color: #2AA0BF !important;
                 text-decoration: none !important;
                 cursor: pointer !important;
                 font-weight: 600 !important;
               }
               sup.note-highlight, a.note-highlight {
                 color: #2AA0BF !important;
                 text-decoration: none !important;
                 cursor: pointer !important;
                 font-weight: 600 !important;
               }
             `}),s.jsx(Y,{interpretationNumber:y,surahName:`${A}- Surah`,verseRange:k.replace(/-/g," - "),onWordByWord:()=>{}}),s.jsx("div",{className:"w-full  mx-auto p-3 sm:p-4 lg:p-6 bg-white dark:bg-[#2A2C38] max-w-[1073px] ",children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 text-sm text-gray-600 dark:text-gray-300",children:[s.jsxs("span",{children:["Surah: ",A]}),s.jsxs("span",{children:["• Range: ",k]}),s.jsxs("span",{children:["• Interpretation: ",y]}),s.jsxs("span",{children:["• Lang: ",j]}),s.jsx("button",{onClick:()=>F("N189"),className:"ml-4 px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:"Test Note N189"})]}),E&&s.jsx("div",{className:"text-center py-8 text-gray-600 dark:text-gray-300",children:"Loading interpretation…"}),v&&s.jsx("div",{className:"text-red-600 dark:text-red-400 py-4",children:v}),!E&&!v&&x.length===0&&s.jsx("div",{className:"text-center py-10 text-gray-600 dark:text-gray-300",children:"No interpretation found for this selection."}),x.map((r,e)=>s.jsx("div",{className:"bg-gray-50 dark:bg-[#2A2C38] p-3 sm:p-4 lg:p-6 rounded-lg border-l-4 dark:border-[#2A2C38] border-white",children:s.jsx("div",{className:"text-gray-800 dark:text-white leading-relaxed text-justify space-y-3 sm:space-y-4 prose prose-sm dark:prose-invert max-w-none",ref:c,onClick:q,style:{fontFamily:"serif"},dangerouslySetInnerHTML:{__html:z(r)}})},e)),s.jsxs("div",{className:" bottom-0 left-0 w-full flex justify-between gap-3 sm:gap-0 p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-[#2A2C38] z-50",children:[s.jsxs("button",{className:`flex items-center justify-center sm:justify-start space-x-2 px-3 sm:px-4 py-2 rounded-lg border transition-colors group min-h-[44px] \r
    text-gray-600 dark:text-white hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-300 dark:border-gray-500`,children:[s.jsx(et,{className:"w-3 h-3 sm:w-4 sm:h-4 group-hover:-translate-x-1 transition-transform"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Previous Ayah"})]}),s.jsxs("button",{className:`flex items-center justify-center sm:justify-start space-x-2 px-3 sm:px-4 py-2 rounded-lg border transition-colors group min-h-[44px] \r
    text-gray-600 dark:text-white hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-300 dark:border-gray-500`,children:[s.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Next Ayah"}),s.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4 group-hover:translate-x-1 transition-transform"})]})]})]})}),g&&s.jsx(Z,{isOpen:g,onClose:()=>I(!1),noteId:C.id,noteContent:C.content}),b&&m.surahId&&m.verseId&&s.jsx(tt,{surahId:m.surahId,verseId:m.verseId,onClose:()=>S(!1),interpretationNo:y,language:j})]})};export{Nt as default};
