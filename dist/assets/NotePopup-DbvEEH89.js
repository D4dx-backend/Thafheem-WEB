import{a as B,r as g,j as e,Q as w,X as C,n as $,o as A,p as S,C as T}from"./index-pxHnjHjD.js";import{W as F}from"./WordByWordIcon-B1kDBx-G.js";import{C as M}from"./chevron-left-BDDzhXoa.js";const I=({interpretationNumber:c=1,surahName:b="2- Al-Baqarah",verseRange:d="1 - 7",backTo:o,onClose:y,onSelectSurah:N,onSelectRange:E,onBookmark:x,onShare:h,onWordByWord:p,bookmarking:u=!1,surahOptions:a=[],rangeOptions:s=[],onPickSurah:r,onPickRange:m,onPrev:l,onNext:v})=>{const z=B(),[i,n]=g.useState(null),j=g.useRef(null),k=g.useRef(null);g.useEffect(()=>{},[c]),g.useEffect(()=>{const t=f=>{!j.current&&!k.current||j.current?.contains(f.target)||k.current?.contains(f.target)||n(null)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const D=()=>{if(typeof y=="function"){y();return}z(o||-1)};return e.jsx("div",{className:"w-full bg-white dark:bg-[#2A2C38]",children:e.jsxs("div",{className:"mx-auto max-w-[1073px] border-b dark:border-gray-600",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsxs("div",{className:"relative inline-block",ref:j,children:[e.jsxs("button",{onClick:()=>n(i==="surah"?null:"surah"),className:"flex items-center space-x-2 rounded-full px-4 py-2 bg-[#EBEEF0] dark:bg-[#323A3F] text-black dark:text-white transition-colors",children:[e.jsx("span",{className:"text-sm font-medium truncate max-w-[140px]",children:b}),e.jsx(w,{size:16})]}),i==="surah"&&e.jsxs("div",{className:"absolute top-full left-0 z-[1000] mt-2 w-64 max-h-64 overflow-auto bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[a.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-300",children:"No options"}),a.map(t=>e.jsx("button",{onClick:()=>{r&&r(t.value),n(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-800 dark:text-white",children:t.label},t.value))]})]}),e.jsxs("div",{className:"relative inline-block",ref:k,children:[e.jsxs("button",{onClick:()=>n(i==="range"?null:"range"),className:"flex items-center space-x-2 rounded-full px-4 py-2 bg-[#EBEEF0] dark:bg-[#323A3F] text-black dark:text-white transition-colors",children:[e.jsx("span",{className:"text-sm font-medium",children:d}),e.jsx(w,{size:16})]}),i==="range"&&e.jsxs("div",{className:"absolute top-full left-0 z-[1000] mt-2 w-48 max-h-64 overflow-auto bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-300",children:"No options"}),s.map((t,f)=>e.jsx("button",{onClick:()=>{m&&m(t),n(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-800 dark:text-white",children:t},`${t}-${f}`))]})]})]}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),D()},className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-700 transition-colors ml-2",children:e.jsx(C,{size:20,className:"text-black dark:text-white"})})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100 dark:border-gray-600",children:[e.jsxs("h1",{className:"text-sm sm:text-lg font-medium text-[#2AA0BF]",children:["Interpretation ",c]},`interpretation-title-${c}`),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"p-2 text-[#2AA0BF] hover:text-[#1e8ba3] transition-colors",onClick:t=>{t.preventDefault(),t.stopPropagation(),p&&p(t)},children:e.jsx(F,{className:"w-4 h-4 sm:w-6 sm:h-6"})}),e.jsx("button",{className:`p-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors relative ${u?"opacity-70 pointer-events-none":""}`,onClick:t=>{t.preventDefault(),t.stopPropagation(),x&&x()},children:e.jsx($,{className:`w-4 h-4 sm:w-6 sm:h-6 ${u?"animate-pulse":""}`})}),e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",onClick:t=>{t.preventDefault(),t.stopPropagation(),h&&h()},children:e.jsx(A,{className:"w-4 h-4 sm:w-6 sm:h-6"})})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative inline-block",ref:j,children:[e.jsxs("button",{onClick:()=>n(i==="surah"?null:"surah"),className:"flex items-center space-x-2 rounded-full px-4 py-2 bg-[#EBEEF0] dark:bg-[#323A3F] text-black dark:text-white hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx("span",{className:"text-sm font-medium",children:b}),e.jsx(w,{size:16})]}),i==="surah"&&e.jsxs("div",{className:"absolute top-full left-0 z-[1000] mt-2 w-72 max-h-72 overflow-auto bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[a.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-300",children:"No options"}),a.map(t=>e.jsx("button",{onClick:()=>{r&&r(t.value),n(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-800 dark:text-white",children:t.label},t.value))]})]}),e.jsxs("div",{className:"relative inline-block",ref:k,children:[e.jsxs("button",{onClick:()=>n(i==="range"?null:"range"),className:"flex items-center space-x-2 rounded-full px-4 py-2 bg-[#EBEEF0] dark:bg-[#323A3F] text-black dark:text-white hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx("span",{className:"text-sm font-medium",children:d}),e.jsx(w,{size:16})]}),i==="range"&&e.jsxs("div",{className:"absolute top-full left-0 z-[1000] mt-2 w-56 max-h-72 overflow-auto bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[s.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-300",children:"No options"}),s.map((t,f)=>e.jsx("button",{onClick:()=>{m&&m(t),n(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-800 dark:text-white",children:t},`${t}-${f}`))]})]})]}),e.jsx("div",{className:"flex-1 text-center",children:e.jsxs("h1",{className:"text-lg font-medium text-[#2AA0BF]",children:["Interpretation ",c]},`interpretation-title-mobile-${c}`)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-[#2AA0BF] hover:text-[#1e8ba3] transition-colors",onClick:t=>{t.preventDefault(),t.stopPropagation(),p&&p(t)},children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("button",{className:`p-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors relative ${u?"opacity-70 pointer-events-none":""}`,onClick:t=>{t.preventDefault(),t.stopPropagation(),x&&x()},children:e.jsx($,{size:20,className:`${u?"animate-pulse":""}`})}),e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",onClick:t=>{t.preventDefault(),t.stopPropagation(),h&&h()},children:e.jsx(A,{size:20})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),D()},className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-700 transition-colors ml-2",children:e.jsx(C,{size:20,className:"text-black dark:text-white"})})]})]})}),e.jsx("div",{className:"flex items-center justify-center py-3 bg-gray-50 dark:bg-[#2A2C38] border-t border-gray-100 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),l&&l()},disabled:!l,className:`p-2 rounded-lg transition-all ${l?"text-[#19B5DD] dark:text-[#19B5DD] hover:bg-gray-200 dark:hover:bg-gray-700 hover:scale-110 cursor-pointer":"text-gray-300 dark:text-gray-600 cursor-not-allowed"}`,title:"Previous interpretation",children:e.jsx(M,{size:20})}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 px-2 whitespace-nowrap",children:"Navigate"}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),v&&v()},disabled:!v,className:`p-2 rounded-lg transition-all ${v?"text-[#19B5DD] dark:text-[#19B5DD] hover:bg-gray-200 dark:hover:bg-gray-700 hover:scale-110 cursor-pointer":"text-gray-300 dark:text-gray-600 cursor-not-allowed"}`,title:"Next interpretation",children:e.jsx(S,{size:20})})]})})]})})},H=({isOpen:c,onClose:b,noteId:d,noteContent:o})=>{const[y,N]=g.useState(!1),[E,x]=g.useState(!1);if(!c)return null;const h=a=>{if(typeof a=="string"){const s=document.createElement("div");return s.innerHTML=a,s.textContent||s.innerText||""}return String(a||"")},p=async()=>{try{const a=h(o),s=`Note ${d}

${a}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(s);else{const r=document.createElement("textarea");r.value=s,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select(),document.execCommand("copy"),document.body.removeChild(r)}N(!0),x(!0),setTimeout(()=>{N(!1),x(!1)},3e3)}catch(a){console.error("Failed to copy note:",a),alert("Failed to copy note to clipboard")}},u=async()=>{try{const a=h(o),s=`Note ${d}

${a}`,r=window.location.href;if(navigator.share)await navigator.share({title:`Note ${d} - Thafheem`,text:s,url:r});else{const m=`${s}

Shared from: ${r}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(m),alert("Note content copied to clipboard for sharing");else{const l=document.createElement("textarea");l.value=m,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select(),document.execCommand("copy"),document.body.removeChild(l),alert("Note content copied to clipboard for sharing")}}}catch(a){console.error("Failed to share note:",a),a.name!=="AbortError"&&alert("Failed to share note: "+a.message)}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @keyframes fade-in {
            from {
              opacity: 0;
              transform: translateY(-10px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          .animate-fade-in {
            animation: fade-in 0.3s ease-out;
          }
        `}),e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[99999]",children:e.jsxs("div",{className:`bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl 
                      w-[90vw] max-w-5xl mx-4 max-h-[90vh] overflow-hidden`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-medium text-[#2AA0BF]",children:["Note ",d]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:p,className:`p-2 transition-all duration-200 relative ${y?"text-green-600 dark:text-green-400 scale-110":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,title:"Copy note content",children:[e.jsx(T,{size:18}),y&&e.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-green-600 text-white text-xs px-3 py-1 rounded-md shadow-lg whitespace-nowrap z-10 animate-pulse",children:"âœ“ Copied to clipboard!"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Share note content",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Close note",children:e.jsx(C,{size:18})})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:[E&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center space-x-2 animate-fade-in",children:[e.jsx("div",{className:"text-green-600 dark:text-green-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-green-800 dark:text-green-200 font-medium",children:"Note content copied to clipboard successfully!"})]}),typeof o=="string"?e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-800 dark:text-white",dangerouslySetInnerHTML:{__html:o}}):e.jsx("div",{className:"text-gray-800 dark:text-white leading-relaxed text-justify",style:{fontFamily:"serif"},children:o})]})]})})]})};export{I,H as N};
