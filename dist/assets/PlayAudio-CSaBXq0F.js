import{j as t,D as P,P as L,X as V}from"./index-D80Klju5.js";import{b as s}from"./react-vendor-v5ei6ytj.js";import{E as $}from"./ellipsis-CPX_I-tD.js";import{V as R,a as D}from"./volume-x-C8H0cH8p.js";import{S as A,a as F}from"./skip-forward-CzIYsi9Q.js";const q=({audioSrc:m,title:x,onClose:S,autoPlay:g=!1})=>{const[i,d]=s.useState(!1),[c,h]=s.useState(0),[n,N]=s.useState(0),[f,w]=s.useState(1),[p,k]=s.useState(!1),[b,u]=s.useState(!1),[v,y]=s.useState(!1),o=s.useRef(null);s.useEffect(()=>{const e=o.current;if(!e)return;const a=()=>{N(e.duration),g&&(e.play(),d(!0))},r=()=>{h(e.currentTime)},l=()=>{d(!1),h(0)};return e.addEventListener("loadedmetadata",a),e.addEventListener("timeupdate",r),e.addEventListener("ended",l),()=>{e.removeEventListener("loadedmetadata",a),e.removeEventListener("timeupdate",r),e.removeEventListener("ended",l),e.pause(),e.src="",e.currentTime=0}},[m,g]);const j=e=>{if(isNaN(e))return"00:00";const a=Math.floor(e/3600),r=Math.floor(e%3600/60),l=Math.floor(e%60);return a>0?`${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`:`${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},E=()=>{const e=o.current;e&&(i?e.pause():e.play(),d(!i))},M=()=>{const e=o.current;e&&(e.currentTime=Math.max(0,e.currentTime-10))},T=()=>{const e=o.current;e&&(e.currentTime=Math.min(e.duration,e.currentTime+10))},C=e=>{const a=parseFloat(e.target.value),r=o.current;r&&(w(a),r.volume=a,k(a===0))},z=[{label:"Download",action:()=>console.log("Download")},{label:"Share",action:()=>console.log("Share")},{label:"Add to Playlist",action:()=>console.log("Add to Playlist")},{label:"Repeat",action:()=>console.log("Toggle Repeat")}];return t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50",children:[t.jsx("audio",{ref:o,src:m,preload:"metadata"}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx("div",{className:"text-sm font-mono text-gray-600 w-16",children:j(c)}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>y(!v),className:"p-2 text-gray-600 hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100",children:t.jsx($,{size:20})}),v&&t.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg py-2 min-w-40",children:z.map((e,a)=>t.jsx("button",{onClick:()=>{e.action(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:e.label},a))})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>u(!b),onMouseEnter:()=>u(!0),className:"p-2 text-gray-600 hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100",children:p||f===0?t.jsx(R,{size:20}):t.jsx(D,{size:20})}),b&&t.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-3",onMouseLeave:()=>u(!1),children:t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:p?0:f,onChange:C,className:"w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer volume-slider"})})]}),t.jsx("button",{onClick:M,className:"p-2 text-gray-600 hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100",children:t.jsx(A,{size:20})}),t.jsx("button",{onClick:E,className:"p-3 bg-black hover:bg-gray-700 text-white rounded-full transition-colors",children:i?t.jsx(P,{size:20}):t.jsx(L,{size:20})}),t.jsx("button",{onClick:T,className:"p-2 text-gray-600 hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100",children:t.jsx(F,{size:20})}),t.jsx("button",{onClick:S,className:"p-2 text-gray-600 hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100",children:t.jsx(V,{size:20})})]}),t.jsx("div",{className:"text-sm font-mono text-gray-600 w-16 text-right",children:j(n)})]}),t.jsx("div",{className:"px-6 pb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-full h-1 bg-gray-200 rounded-full",children:t.jsx("div",{className:"h-1 bg-black rounded-full transition-all duration-200",style:{width:`${n?c/n*100:0}%`}})}),t.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-black rounded-full transform -translate-y-1/2 cursor-pointer",style:{left:`${n?c/n*100:0}%`}})]})}),x&&t.jsx("div",{className:"px-6 pb-2",children:t.jsx("p",{className:"text-sm text-gray-700 truncate",children:x})})]})};export{q as default};
