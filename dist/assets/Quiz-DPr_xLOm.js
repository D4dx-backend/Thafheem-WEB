import{i as _,z as ee,j as e,Z as se,X as te,$ as ae,q as re,a0 as le,a1 as R,a2 as ne,a3 as ie,a4 as oe,a5 as $}from"./index-D80Klju5.js";import{b as a}from"./react-vendor-v5ei6ytj.js";import{A as ce}from"./arrow-left-CuzMV5Lm.js";import{C as de}from"./chevron-left-DtqKiCWt.js";const pe=()=>{const[r,f]=a.useState(1),[d,p]=a.useState(""),[L,h]=a.useState(!1),[y,N]=a.useState({}),[m,k]=a.useState({}),[b,v]=a.useState(0),[S,A]=a.useState(!1),[Q,C]=a.useState("Surah"),[P,B]=a.useState(!1),[n,w]=a.useState(null),[M,E]=a.useState(!1),[z,D]=a.useState(null),[l,V]=a.useState({id:1,name:"Al-Fatihah"}),[x,q]=a.useState("1-7"),[j,U]=a.useState(!0),[i,H]=a.useState(!1),{translationLanguage:O}=_(),{surahs:W}=ee(O);a.useEffect(()=>{(async()=>{if(l.id)try{E(!0),D(null),f(1),p(""),h(!1),N({}),k({}),v(0),B(!1);let t,u;if(i){u=await le(15);const c=R(u);t={questions:c,surahInfo:{id:"all",name:"Entire Thafheem"},totalQuestions:c.length}}else if(j)t=await ne(l.id,x);else{const[c,K]=x.split("-").map(Number);u=await ie(l.id,c,K||c);const T=R(u);t={questions:T,surahInfo:l,totalQuestions:T.length}}if(t&&t.questions&&oe(t.questions))w({title:i?"à´¤à´¹à´¾à´«àµ€à´¸àµ à´ªàµà´°à´¶àµà´¨àµ‹à´¤àµà´¤à´°à´¿ - à´¸à´®àµà´ªàµ‚àµ¼à´£àµà´£ à´¤à´¹à´¾à´«àµ€à´‚":"à´¤à´¹à´¾à´«àµ€à´¸àµ à´ªàµà´°à´¶àµà´¨àµ‹à´¤àµà´¤à´°à´¿",totalQuestions:t.questions.length,questions:t.questions,surahInfo:t.surahInfo||l});else{console.warn("Quiz data validation failed, using fallback data");const c=$(l.id);w({title:"à´¤à´¹à´¾à´«àµ€à´¸àµ à´ªàµà´°à´¶àµà´¨àµ‹à´¤àµà´¤à´°à´¿ (Debug Mode)",...c})}}catch(t){console.error("Detailed error loading quiz data:",t),D(t.message);const u=$(l.id);w({title:"à´¤à´¹à´¾à´«àµ€à´¸àµ à´ªàµà´°à´¶àµà´¨àµ‹à´¤àµà´¤à´°à´¿ (Error Mode)",...u})}finally{E(!1)}})()},[l,x,j,i]);const o=n?.questions[r-1],X=s=>{m[r]||(p(s),N(t=>({...t,[r]:s})),h(!1))},Y=()=>{!d||m[r]||(k(s=>({...s,[r]:!0})),h(!0),String(d).trim()===String(o?.correctAnswer).trim()&&v(s=>s+1))},Z=()=>{if(r>1){const s=r-1;f(s);const t=y[s]||"";p(t),h(!!m[s])}},G=()=>{if(!m[r]){alert("Please submit your answer before proceeding to the next question.");return}if(r<(n?.totalQuestions||0)){const s=r+1;f(s);const t=y[s]||"";p(t),h(!!m[s])}},J=s=>{V(s),q("1-7"),A(!1)},F=s=>{U(s==="entireSurah"),H(s==="entireThafheem")},I=()=>{A(!S)};if(M)return e.jsx("div",{className:"min-h-screen dark:bg-gray-900 bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading quiz questions..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Surah: ",l.name,", Range: ",x]})]})});n?.totalQuestions;const g=m[r];return e.jsxs("div",{className:"min-h-screen dark:bg-gray-900 bg-white",children:[e.jsx("div",{className:"bg-white border-b border-gray-700 relative",children:e.jsx("div",{className:"w-full mx-auto px-2 sm:px-4 py-2 dark:bg-[#2A2C38]",children:e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:e.jsxs("div",{className:"flex flex-row sm:flex-row items-start sm:items-center gap-2 sm:gap-3 relative w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 px-2 sm:px-3 py-1 rounded ${i?"cursor-default opacity-60":"cursor-pointer"}`,onClick:i?void 0:I,children:[e.jsx("span",{className:"text-black font-medium dark:text-white text-sm sm:text-base",children:i?"All Surahs":l.name}),e.jsx(se,{className:"w-3 h-3 sm:w-4 sm:h-4 text-black dark:text-white"})]}),e.jsx("span",{className:"text-xs sm:text-sm text-black dark:text-white",children:i?"Random Mix":x}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"scope",checked:j,onChange:()=>F("entireSurah"),className:"form-radio text-black focus:ring-0"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-300",children:"Entire Surah"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"scope",checked:i,onChange:()=>F("entireThafheem"),className:"form-radio text-cyan-500 focus:ring-cyan-500"}),e.jsx("span",{className:`text-xs sm:text-sm ${i?"text-cyan-500 font-medium":"text-gray-300"}`,children:"Entire Thafheem âœ¨"})]})]}),S&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center sm:absolute sm:left-0 sm:top-full sm:inset-auto sm:mt-2 sm:flex-none sm:items-start sm:justify-start bg-gray-500/70 bg-opacity-50 sm:bg-transparent z-50",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] sm:rounded-2xl shadow-xl w-[320px] sm:w-80 h-[600px] sm:h-96 overflow-hidden rounded-2xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b",children:[e.jsxs("div",{className:"flex bg-[#F8F9FA] w-full max-w-[244px] h-[40px] sm:h-[45px] dark:bg-gray-900 rounded-full p-1",children:[e.jsx("button",{className:`px-3 sm:px-4 py-1 text-xs sm:text-sm rounded-full transition flex-1 ${Q==="Surah"?"bg-white shadow text-gray-900 dark:bg-[#2A2C38] dark:text-white":"text-gray-500"}`,onClick:()=>C("Surah"),children:"Surah"}),e.jsx("button",{className:`px-3 sm:px-4 py-1 text-xs sm:text-sm rounded-full transition flex-1 ${Q==="Verse"?"bg-white shadow text-gray-900 dark:bg-[#2A2C38] dark:text-white":"text-gray-500"}`,onClick:()=>C("Verse"),children:"Verse"})]}),e.jsx("button",{onClick:I,className:"text-black hover:text-gray-600 ml-3",children:e.jsx(te,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"p-3 sm:p-4 border-b flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ae,{className:"w-3 h-3 sm:w-4 sm:h-4 absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search Surah",className:"w-full pl-8 sm:pl-9 pr-3 py-2 text-xs sm:text-sm bg-gray-50 border-0 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-black dark:placeholder:text-white dark:text-white"})]}),e.jsx("input",{type:"text",placeholder:"Verse",value:x,onChange:s=>q(s.target.value),disabled:i,className:"w-24 sm:w-32 px-2 sm:px-3 py-2 text-xs sm:text-sm bg-gray-50 border-0 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-black dark:placeholder:text-white dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsx("div",{className:"overflow-y-auto flex-1 pb-20 sm:pb-4 font-poppins",style:{maxHeight:"calc(100% - 80px)"},children:W.map(s=>e.jsxs("div",{className:`flex items-center justify-between px-3 sm:px-4 py-3 sm:py-2 cursor-pointer text-xs sm:text-sm ${s.number===l.id?"bg-gray-100 dark:bg-black dark:text-white rounded-lg mx-2":"hover:bg-gray-50 dark:hover:bg-black"}`,onClick:()=>J({id:s.number,name:s.name}),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-black w-6 dark:text-white",children:[s.number,"."]}),e.jsx("span",{className:"text-black dark:text-white",children:s.name})]}),e.jsx("div",{className:"flex items-center gap-2 text-black dark:text-white",children:e.jsxs("span",{children:[s.ayahs," verses"]})})]},s.number))})]})})]})})})}),e.jsx("div",{children:e.jsx(ce,{className:"hidden sm:inline w-4 h-4 sm:w-5 sm:h-5 text-gray-600 relative top-6 sm:top-8 left-4 sm:left-10"})}),e.jsx("div",{className:"bg-white dark:bg-gray-900",children:e.jsx("div",{className:"w-full max-w-[884px] mx-auto border-b px-3 sm:px-4 py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg sm:text-xl font-semibold",style:{color:"#2AA0BF"},children:n?.title||"Loading..."})}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-white",children:[e.jsxs("span",{className:"font-malayalam",children:["à´®à´¾àµ¼à´•àµà´•àµ: ",b]}),e.jsxs("span",{className:"ml-4",children:["Total: ",n?.totalQuestions||0]})]})]})})}),z&&e.jsx("div",{className:"w-full max-w-[884px] mx-auto px-3 sm:px-4 py-4",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Debug Information:"}),e.jsxs("p",{className:"text-yellow-700 text-xs mt-1",children:["API Error: ",z]}),e.jsx("p",{className:"text-yellow-700 text-xs",children:"Check browser console for detailed API response"}),e.jsx("p",{className:"text-yellow-700 text-xs",children:"Using fallback data for testing"})]})}),P&&e.jsx("div",{className:"w-full max-w-[884px] mx-auto px-3 sm:px-4 py-4",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-green-800 text-lg font-medium",children:"ðŸŽ‰ Quiz Completed!"}),e.jsxs("p",{className:"text-green-700 text-sm mt-1",children:["Your final score:"," ",e.jsxs("strong",{children:[b," out of ",n?.totalQuestions]})]}),e.jsxs("p",{className:"text-green-700 text-sm",children:["Percentage:"," ",e.jsxs("strong",{children:[Math.round(b/n?.totalQuestions*100),"%"]})]})]})}),n&&o&&e.jsxs("div",{className:"w-full max-w-[884px] mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[e.jsxs("div",{className:"dark:bg-gray-900 rounded-lg p-4 sm:p-6 mb-4",children:[e.jsxs("div",{className:"bg-[#EBEEF0] dark:bg-[#323A3F] p-3 sm:p-2 mb-4 rounded-lg",children:[e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsxs("span",{className:"text-xs sm:text-lg text-gray-600 dark:text-white font-malayalam",children:["à´šàµ‹à´¦àµà´¯à´‚: ",r," / ",n.totalQuestions]})}),e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("p",{className:"text-sm sm:text-lg text-gray-800 leading-relaxed dark:text-white font-malayalam",children:o.question})})]}),e.jsx("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6 ",children:o.options.map((s,t)=>e.jsxs("label",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg transition-colors ${g?"cursor-default":"cursor-pointer hover:bg-gray-50 dark:hover:bg-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:"flex  items-center p-3 sm:p-4 justify-center w-[40px] h-[35px] sm:w-[47px] sm:h-[40px] rounded-lg bg-[#EBEEF0] text-gray-800 dark:bg-[#323A3F] dark:text-white text-sm sm:text-base",children:s.id}),e.jsx("input",{type:"radio",name:"answer",value:s.id,checked:d===s.id,onChange:()=>X(s.id),disabled:g})]}),e.jsx("div",{className:"flex items-center p-3 sm:p-4 w-full rounded-lg bg-[#EBEEF0] text-gray-800 dark:bg-[#323A3F] dark:text-white",children:e.jsx("span",{className:"text-gray-700 dark:text-white text-sm sm:text-lg font-malayalam",children:s.text||`Option ${s.id} - No text available`})})]},s.id))}),d&&!g&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("button",{onClick:Y,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Answer"})}),e.jsxs("div",{className:"flex flex-row sm:flex-row justify-center items-center gap-4 sm:gap-12",children:[e.jsxs("button",{onClick:Z,disabled:r===1,className:"flex items-center gap-2 px-4 py-2 bg-white border dark:bg-gray-900 dark:text-white dark:border rounded-2xl text-gray-600 hover:text-gray-800 disabled:opacity-50 w-full sm:w-auto justify-center text-sm sm:text-base",children:[e.jsx(de,{className:"w-3 h-3 sm:w-4 sm:h-4"})," Previous Question"]}),e.jsxs("button",{onClick:G,disabled:!g||r===n?.totalQuestions,className:"flex items-center gap-2 px-4 py-2 bg-white border dark:bg-gray-900 dark:text-white dark:border rounded-2xl text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto justify-center text-sm sm:text-base",children:["Next Question ",e.jsx(re,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]}),L&&e.jsx("div",{className:"flex justify-center sm:justify-start",children:e.jsx("div",{className:`border-2 rounded-lg p-3 sm:p-4 w-[350px] sm:w-full text-center sm:text-left ${String(d).trim()===String(o.correctAnswer).trim()?"bg-green-50 dark:bg-green-900 border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900 border-red-200 dark:border-red-700"}`,children:e.jsxs("div",{className:"text-black",children:[e.jsx("p",{className:"font-medium mb-1 dark:text-white text-sm sm:text-base",children:String(d).trim()===String(o.correctAnswer).trim()?"ðŸŽ‰ Correct!":"âŒ Sorry...!"}),e.jsxs("p",{className:"text-xs sm:text-sm dark:text-white text-black",children:["Correct Answer:"," ",e.jsxs("span",{style:{color:"#2AA0BF"},children:[o.correctAnswer,")"," ",o.options.find(s=>s.id===o.correctAnswer)?.text]})]})]})})})]})]})};export{pe as default};
