import{j as e,Y as L,ad as $,ae as Q,D as V,P as B,X as R}from"./index-ZyCXWqTv.js";import{b as s}from"./react-vendor-v5ei6ytj.js";import{C as U}from"./chevron-up-TBfPF8BT.js";import{B as A,F as M}from"./backward-mJTTrnLJ.js";import{E as O}from"./ellipsis-DCJaN2jg.js";import{V as W,a as X}from"./volume-x-4TWDhm3y.js";const q=({activeItem:a,setActiveItem:o})=>{const[n,i]=s.useState(!1),[x,c]=s.useState([]),[h,u]=s.useState(!0),[y,g]=s.useState(null);s.useEffect(()=>{(async()=>{try{u(!0);const m=(await $(0,"muk")).map(j=>({id:j.aid,title:j.title}));c(m),!a&&m.length>0&&o(m[0])}catch(l){console.error("Error loading malarticles:",l),g(l.message);const m=[{id:1,title:"Note"},{id:2,title:"An introduction to study of the Quran"},{id:3,title:"Unique book"},{id:4,title:"Some basic facts"},{id:5,title:"What kind of book?"},{id:6,title:"The basis of the Quran"},{id:7,title:"Theme and theme"},{id:8,title:"Pearls strung on a necklace"},{id:9,title:"Presentation stages"},{id:10,title:"Instruction book"},{id:11,title:"Why the repetition?"},{id:12,title:"Codification"},{id:13,title:"Book illustration"}];c(m),a||o(m[0])}finally{u(!1)}})()},[a,o]);const b=r=>{o(r),i(!1)};return h?e.jsx("div",{className:"lg:hidden bg-white dark:bg-[#2A2C38] border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-black dark:text-white mb-3",children:"Qur'an Study - Preface"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-12 rounded-lg"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden bg-white dark:bg-[#2A2C38] border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-black dark:text-white mb-3",children:"Qur'an Study - Preface"}),y&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-sm rounded",children:"Using offline content due to connection issue"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-[#1A1C28] border border-gray-200 dark:border-gray-600 rounded-lg text-left text-black dark:text-white",children:[e.jsx("span",{className:"truncate",children:a?.title||"Select an article"}),n?e.jsx(U,{size:20,className:"ml-2 flex-shrink-0"}):e.jsx(L,{size:20,className:"ml-2 flex-shrink-0"})]}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:x.map((r,l)=>e.jsx("button",{onClick:()=>b(r),className:`w-full text-left px-4 py-3 text-sm transition-all duration-200 hover:bg-gray-50 dark:hover:bg-[#1A1C28] ${a?.id===r.id?"bg-[#D9D9D9] dark:bg-gray-900 text-black dark:text-white font-medium":"text-gray-700 dark:text-white"}`,children:r.title},l))})]})]})}),e.jsxs("div",{className:"hidden lg:block w-[332px] bg-white border-r border-gray-200 shadow-lg h-screen overflow-y-auto dark:bg-[#2A2C38] m-4",children:[e.jsxs("div",{className:"bg-white dark:text-white text-black p-4 dark:bg-[#2A2C38] shadow-md",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Qur'an Study - Preface"}),y&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded",children:"Using offline content"})]}),e.jsx("nav",{className:"py-2",children:h?e.jsx("div",{className:"space-y-2 px-4",children:Array.from({length:6}).map((r,l)=>e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-10 rounded"},l))}):e.jsx("ul",{className:"space-y-1",children:x.map((r,l)=>e.jsx("li",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>b(r),className:`w-[284px] text-left px-4 py-3 text-sm transition-all duration-200  ${a?.id===r.id?"bg-[#D9D9D9]  dark:border-0  text-black dark:bg-gray-900 dark:text-white font-medium":"border-l-transparent text-gray-700 dark:text-white hover:border-l-gray-300"}`,children:r.title})},l))})})]})]})},Y=({activeItem:a,onPlayAudio:o})=>{const[n,i]=s.useState(null),[x,c]=s.useState(!0),[h,u]=s.useState(null);s.useEffect(()=>{(async()=>{const b=a?.id||(typeof a=="string"?1:null),r=a?.title||a||"Unknown Article";if(!b){c(!1);return}try{c(!0),u(null);const l=await Q(b);i(l)}catch(l){console.error("Error loading article:",l),u(l.message),i({id:b,title:r,content:"Content not available offline. Please check your internet connection.",matter:"Content not available offline. Please check your internet connection."})}finally{c(!1)}})()},[a]);const y=()=>n?n.content||n.matter||n.text||n.body||`Content for ${n.title} will be displayed here.`:"Please select an article to view its content.";return e.jsxs("div",{className:"flex-1 bg-white overflow-y-auto dark:bg-[#2A2C38] lg:w-[711px] lg:h-[626px] lg:m-4 min-h-screen lg:min-h-0",children:[e.jsx("div",{className:"border-b border-gray-300 px-4 lg:px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-semibold text-black dark:text-white",children:a?.title||a||"Select an Article"}),e.jsxs("button",{onClick:o,className:"flex items-center justify-center sm:justify-start space-x-2 px-4 py-2 text-[#2AA0BF] transition-colors duration-200 hover:bg-gray-50 dark:hover:bg-[#1A1C28] rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium",children:"Play Audio"})]})]})}),e.jsx("div",{className:"px-4 lg:px-6 py-6",children:e.jsx("div",{className:"max-w-4xl",children:x?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-3/4"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-full"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-5/6"}),e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 rounded w-2/3"})]}):e.jsxs(e.Fragment,{children:[h&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-sm rounded",children:"Content loaded from offline cache due to connection issue"}),e.jsx("div",{className:"text-black text-sm lg:text-base leading-relaxed dark:text-white whitespace-pre-wrap",children:y()})]})})})]})},P=({audioSrc:a,title:o,onClose:n,autoPlay:i=!1,isMobile:x=!1})=>{const[c,h]=s.useState(!1),[u,y]=s.useState(0),[g,b]=s.useState(0),[r,l]=s.useState(1),[m,j]=s.useState(!1),[v,k]=s.useState(!1),[N,S]=s.useState(!1),p=s.useRef(null);s.useEffect(()=>{const t=p.current;if(!t)return;const d=()=>{b(t.duration),i&&(t.play(),h(!0))},f=()=>{y(t.currentTime)},w=()=>{h(!1),y(0)};return t.addEventListener("loadedmetadata",d),t.addEventListener("timeupdate",f),t.addEventListener("ended",w),()=>{t.removeEventListener("loadedmetadata",d),t.removeEventListener("timeupdate",f),t.removeEventListener("ended",w),t.pause(),t.src="",t.currentTime=0}},[a,i]);const C=t=>{if(isNaN(t))return"00:00";const d=Math.floor(t/3600),f=Math.floor(t%3600/60),w=Math.floor(t%60);return d>0?`${d.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`:`${f.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`},E=()=>{const t=p.current;t&&(c?t.pause():t.play(),h(!c))},D=()=>{const t=p.current;t&&(t.currentTime=Math.max(0,t.currentTime-10))},F=()=>{const t=p.current;t&&(t.currentTime=Math.min(t.duration,t.currentTime+10))},T=t=>{const d=parseFloat(t.target.value),f=p.current;f&&(l(d),f.volume=d,j(d===0))},z=[{label:"Download",action:()=>console.log("Download")},{label:"Share",action:()=>console.log("Share")},{label:"Add to Playlist",action:()=>console.log("Add to Playlist")},{label:"Repeat",action:()=>console.log("Toggle Repeat")}];return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-[#2A2C38] border-t border-gray-200 shadow-lg z-50 h-[90px]",children:[e.jsx("audio",{ref:p,src:a,preload:"metadata"}),e.jsx("div",{className:"px-4 sm:px-6 pb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-1 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-1 bg-black rounded-full transition-all duration-200",style:{width:`${g?u/g*100:0}%`}})}),e.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-black rounded-full transform -translate-y-1/2 cursor-pointer",style:{left:`${g?u/g*100:0}%`}})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 min-h-[60px]",children:[e.jsx("div",{className:"text-xs sm:text-sm font-mono text-black w-12 sm:w-16 dark:text-white",children:C(u)}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("div",{className:"relative hidden sm:block",children:[e.jsx("button",{onClick:()=>S(!N),className:"p-2 text-black hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white",children:e.jsx(O,{size:20})}),N&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-2 min-w-40",children:z.map((t,d)=>e.jsx("button",{onClick:()=>{t.action(),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.label},d))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>k(!v),onMouseEnter:()=>k(!0),className:"p-1.5 sm:p-2 text-gray-600 bg-[#D9D9D9] hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white dark:bg-gray-600",children:m||r===0?e.jsx(W,{size:16,className:"sm:w-5 sm:h-5"}):e.jsx(X,{size:16,className:"sm:w-5 sm:h-5"})}),v&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3",onMouseLeave:()=>k(!1),children:e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:m?0:r,onChange:T,className:"w-16 sm:w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer volume-slider"})})]}),e.jsxs("button",{onClick:D,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#1A1C28] flex items-center justify-center",children:[e.jsx("img",{src:A,alt:"Forward",className:"w-5 h-5 object-contain"}),e.jsx("img",{src:A,alt:"Forward",className:"w-5 h-5 object-contain"})]}),e.jsx("button",{onClick:E,className:"p-2 sm:p-3 bg-white text-black rounded-full transition-colors shadow-md hover:shadow-lg",children:c?e.jsx(V,{size:18,className:"sm:w-5 sm:h-5"}):e.jsx(B,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsxs("button",{onClick:F,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#1A1C28] flex items-center justify-center",children:[e.jsx("img",{src:M,alt:"Forward",className:"w-5 h-5 object-contain"}),e.jsx("img",{src:M,alt:"Forward",className:"w-5 h-5 object-contain"})]}),x&&e.jsx("button",{onClick:n,className:"p-1.5 sm:p-2 text-black hover:text-gray-800 transition-colors rounded-full hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",children:e.jsx(R,{size:16,className:"sm:w-5 sm:h-5"})})]}),e.jsx("div",{className:"text-xs sm:text-sm font-mono text-black w-12 sm:w-16 text-right dark:text-white",children:C(g)})]}),o&&e.jsx("div",{className:"px-4 sm:px-6 pb-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 truncate",children:o})})]})},Z=()=>{const[a,o]=s.useState(null),[n,i]=s.useState(!1);return e.jsxs("div",{className:"min-h-screen font-poppins",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row bg-[#FAFAFA] dark:bg-gray-900",children:[e.jsx(q,{activeItem:a,setActiveItem:o}),e.jsx(Y,{activeItem:a,onPlayAudio:()=>i(x=>!x)})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(P,{audioSrc:a?.audiourl||"",title:a?.title||"",onClose:()=>{}})}),n&&e.jsx("div",{className:"lg:hidden",children:e.jsx(P,{audioSrc:a?.audiourl||"",title:a?.title||"",onClose:()=>i(!1),isMobile:!0})})]})};export{Z as default};
