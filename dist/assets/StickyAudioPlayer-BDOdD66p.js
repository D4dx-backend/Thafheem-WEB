import{r as s,j as e,O as Y,A as Z,P as _,X as $,al as E,R as Q,am as ee,an as te}from"./index-DJ-cZXxg.js";import{V as re}from"./volume-x-D_FITz3q.js";import{V as ae}from"./volume-2-D1G5zOnx.js";import{S as se,a as ne}from"./skip-forward-DJVfF0SL.js";const ue=({audioElement:a,isPlaying:x,currentAyah:f,totalAyahs:z,surahInfo:le,onPlayPause:V,onStop:T,onSkipBack:L,onSkipForward:I,onClose:q,selectedQari:g="al-afasy",onQariChange:C,translationLanguage:y="mal",audioTypes:l=["quran"],onAudioTypesChange:M,playbackSpeed:n=1,onPlaybackSpeedChange:m})=>{const[v,P]=s.useState(0),[o,A]=s.useState(0),[k,O]=s.useState(1),[p,j]=s.useState(!1),[F,b]=s.useState(!1),[d,w]=s.useState(!1),[h,N]=s.useState(!1),u=s.useRef(!1);s.useEffect(()=>{if(!a){P(0),A(0);return}const t=()=>{P(a.currentTime)},r=()=>{A(a.duration)};return a.addEventListener("loadedmetadata",r),a.addEventListener("timeupdate",t),()=>{a.removeEventListener("loadedmetadata",r),a.removeEventListener("timeupdate",t)}},[a]);const D=t=>{if(isNaN(t))return"00:00";const r=Math.floor(t/3600),c=Math.floor(t%3600/60),i=Math.floor(t%60);return r>0?`${r.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},X=t=>{if(!a||!o)return;const r=t.currentTarget.getBoundingClientRect(),i=(t.clientX-r.left)/r.width*o;a&&(a.currentTime=i)},B=()=>{a&&(p?(a.volume=k,j(!1)):(a.volume=0,j(!0)))},U=t=>{const r=parseFloat(t.target.value);a&&(a.volume=r),O(r),j(r===0)};s.useEffect(()=>{a&&(a.playbackRate=n)},[a,n]);const S=[{value:"al-afasy",label:"Mishari Rashid al-`Afasy"},{value:"al-ghamidi",label:"Saad Al Ghamidi"},{value:"al-hudaify",label:"Al-Hudaify"}],R=[{value:"quran",label:"Quran",description:"Play Quran audio"},{value:"translation",label:"Translation",description:"Play Translation audio"},{value:"interpretation",label:"Interpretation",description:"Play Interpretation audio"}],G=y==="mal"?R:R.filter(t=>t.value==="quran"),H=()=>{const t=Math.max(.5,n-.1);m&&m(Math.round(t*10)/10)},J=()=>{const t=Math.min(2,n+.1);m&&m(Math.round(t*10)/10)};s.useEffect(()=>{},[d]),s.useEffect(()=>{},[l]),s.useEffect(()=>{d&&u.current&&(u.current=!1)},[l,d]),s.useEffect(()=>{const t=r=>{r.target.closest(".settings-menu")||r.target.closest(".settings-button")||h&&!r.target.closest(".reciter-dropdown")&&N(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[h,d]);const K=S.find(t=>t.value===g)||S[0];return f?(s.useEffect(()=>{console.log("[StickyAudioPlayer] Props update",{isPlaying:x,currentAyah:f,totalAyahs:z,selectedQari:g,translationLanguage:y,audioTypes:l,playbackSpeed:n})},[x,f,z,g,y,l,n]),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-[#2A2C38] border-t border-gray-200 dark:border-gray-700 shadow-lg z-50",children:[e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Audio play"})}),e.jsxs("div",{className:"px-4 pb-3",children:[e.jsxs("div",{className:"relative cursor-pointer mb-3",onClick:X,children:[e.jsx("div",{className:"w-full h-0.5 bg-gray-300 dark:bg-gray-600 rounded-full",children:e.jsx("div",{className:"h-0.5 bg-cyan-500 dark:bg-cyan-400 rounded-full transition-all duration-200",style:{width:`${o?v/o*100:0}%`}})}),e.jsx("div",{className:"absolute top-1/2 w-2 h-2 bg-cyan-500 dark:bg-cyan-400 rounded-full transform -translate-y-1/2 cursor-pointer",style:{left:`${o?v/o*100:0}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 w-14",children:D(v)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"relative settings-menu",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),w(!d)},className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 settings-button","aria-label":"Settings",children:e.jsx(Y,{size:16})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:B,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30",children:p||k===0?e.jsx(re,{size:16}):e.jsx(ae,{size:16})}),F&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:p?0:k,onChange:U,className:"w-16 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-cyan-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-cyan-500 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none"})})]}),e.jsx("button",{onClick:L,className:"p-1.5 rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center justify-center",children:e.jsx(se,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}),e.jsx("button",{onClick:()=>{console.log("[StickyAudioPlayer] PlayPause clicked",{isPlaying:x}),V()},className:"p-2 bg-cyan-500 dark:bg-cyan-400 text-white dark:text-black rounded-full transition-colors shadow-md hover:shadow-lg hover:bg-cyan-600 dark:hover:bg-cyan-300",children:x?e.jsx(Z,{size:16,fill:"currentColor"}):e.jsx(_,{size:16,fill:"currentColor"})}),e.jsx("button",{onClick:I,className:"p-1.5 rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center justify-center",children:e.jsx(ne,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}),e.jsx("button",{onClick:q||T,className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30",children:e.jsx($,{size:16})})]}),e.jsx("div",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 w-14 text-right",children:D(o)})]})]}),d&&e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 modal-backdrop",onClick:t=>{t.target===t.currentTarget&&!u.current&&w(!1)}}),e.jsxs("div",{className:"relative z-[1001] bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-md settings-modal",onClick:t=>{t.stopPropagation()},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Audio Settings"}),e.jsx("button",{onClick:()=>{w(!1)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx($,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Audio Options"}),e.jsx("div",{className:"space-y-2",children:G.map(t=>{const r=l.includes(t.value);return e.jsx("button",{type:"button",onClick:c=>{if(c.preventDefault(),c.stopPropagation(),u.current=!0,M){const i=r?l.filter(W=>W!==t.value):[...l,t.value];i.length>0&&M(i)}setTimeout(()=>{u.current=!1},100)},className:`w-full p-3 rounded-lg border-2 transition-all text-left ${r?"border-cyan-500 dark:border-cyan-400 bg-cyan-50 dark:bg-cyan-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center mr-3 ${r?"border-cyan-500 dark:border-cyan-400 bg-cyan-500 dark:bg-cyan-400":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}`,children:r&&e.jsx(E,{size:12,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]})},t.value)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Audio Settings"}),l.includes("quran")&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reciter"}),e.jsxs("div",{className:"relative reciter-dropdown",children:[e.jsxs("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),N(!h)},className:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-left",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:K.label}),e.jsx(Q,{size:16,className:"text-gray-500 dark:text-gray-400"})]}),h&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:S.map(t=>e.jsx("button",{type:"button",onClick:r=>{r.preventDefault(),r.stopPropagation(),C&&C(t.value),N(!1)},className:`w-full px-4 py-2 text-left text-sm transition-colors ${g===t.value?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400":"text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Playback Speed"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),H()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:n<=.5,children:e.jsx(ee,{size:16,className:"text-gray-600 dark:text-gray-300"})}),e.jsx("div",{className:"flex-1 text-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n.toFixed(1),"x"]})}),e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),J()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:n>=2,children:e.jsx(te,{size:16,className:"text-gray-600 dark:text-gray-300"})})]})]})]})]})]})]})]})):null};export{ue as default};
