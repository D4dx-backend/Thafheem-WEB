import{r as s,j as e,N as K,z as W,P as Y,X as P,ah as Z,Q as _,ai as E,aj as ee}from"./index-pxHnjHjD.js";import{V as te}from"./volume-x-BJnJqqFB.js";import{V as ae}from"./volume-2-O1mrhZ5G.js";import{S as re,a as se}from"./skip-forward-DQYe2sNq.js";const ue=({audioElement:r,isPlaying:A,currentAyah:D,totalAyahs:ne,surahInfo:le,onPlayPause:T,onStop:$,onSkipBack:L,onSkipForward:R,onClose:V,selectedQari:j="al-afasy",onQariChange:w,translationLanguage:I="mal",audioTypes:i=["quran"],onAudioTypesChange:N,playbackSpeed:n=1,onPlaybackSpeedChange:g})=>{const[m,S]=s.useState(0),[l,z]=s.useState(0),[h,q]=s.useState(1),[y,f]=s.useState(!1),[F,x]=s.useState(!1),[d,v]=s.useState(!1),[b,k]=s.useState(!1),u=s.useRef(!1);s.useEffect(()=>{if(!r){S(0),z(0);return}const t=()=>{S(r.currentTime)},a=()=>{z(r.duration)};return r.addEventListener("loadedmetadata",a),r.addEventListener("timeupdate",t),()=>{r.removeEventListener("loadedmetadata",a),r.removeEventListener("timeupdate",t)}},[r]);const C=t=>{if(isNaN(t))return"00:00";const a=Math.floor(t/3600),c=Math.floor(t%3600/60),o=Math.floor(t%60);return a>0?`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},O=t=>{if(!r||!l)return;const a=t.currentTarget.getBoundingClientRect(),o=(t.clientX-a.left)/a.width*l;r&&(r.currentTime=o)},X=()=>{r&&(y?(r.volume=h,f(!1)):(r.volume=0,f(!0)))},B=t=>{const a=parseFloat(t.target.value);r&&(r.volume=a),q(a),f(a===0)};s.useEffect(()=>{r&&(r.playbackRate=n)},[r,n]);const p=[{value:"al-afasy",label:"Mishari Rashid al-`Afasy"},{value:"al-ghamidi",label:"Saad Al Ghamidi"},{value:"al-hudaify",label:"Al-Hudaify"}],M=[{value:"quran",label:"Quran",description:"Play Quran audio"},{value:"translation",label:"Translation",description:"Play Translation audio"},{value:"interpretation",label:"Interpretation",description:"Play Interpretation audio"}],U=I==="mal"?M:M.filter(t=>t.value==="quran"),G=()=>{const t=Math.max(.5,n-.1);g&&g(Math.round(t*10)/10)},H=()=>{const t=Math.min(2,n+.1);g&&g(Math.round(t*10)/10)};s.useEffect(()=>{},[d]),s.useEffect(()=>{},[i]),s.useEffect(()=>{d&&u.current&&(u.current=!1)},[i,d]),s.useEffect(()=>{const t=a=>{a.target.closest(".settings-menu")||a.target.closest(".settings-button")||b&&!a.target.closest(".reciter-dropdown")&&k(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[b,d]);const Q=p.find(t=>t.value===j)||p[0];return D?e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-[#2A2C38] border-t border-gray-200 dark:border-gray-700 shadow-lg z-50",children:[e.jsx("div",{className:"px-4 pt-2 pb-1",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Audio play"})}),e.jsxs("div",{className:"px-4 pb-3",children:[e.jsxs("div",{className:"relative cursor-pointer mb-3",onClick:O,children:[e.jsx("div",{className:"w-full h-0.5 bg-gray-300 dark:bg-gray-600 rounded-full",children:e.jsx("div",{className:"h-0.5 bg-cyan-500 dark:bg-cyan-400 rounded-full transition-all duration-200",style:{width:`${l?m/l*100:0}%`}})}),e.jsx("div",{className:"absolute top-1/2 w-2 h-2 bg-cyan-500 dark:bg-cyan-400 rounded-full transform -translate-y-1/2 cursor-pointer",style:{left:`${l?m/l*100:0}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 w-14",children:C(m)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"relative settings-menu",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),v(!d)},className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 settings-button","aria-label":"Settings",children:e.jsx(K,{size:16})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:X,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30",children:y||h===0?e.jsx(te,{size:16}):e.jsx(ae,{size:16})}),F&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y?0:h,onChange:B,className:"w-16 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-cyan-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-cyan-500 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none"})})]}),e.jsx("button",{onClick:L,className:"p-1.5 rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center justify-center",children:e.jsx(re,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}),e.jsx("button",{onClick:T,className:"p-2 bg-cyan-500 dark:bg-cyan-400 text-white dark:text-black rounded-full transition-colors shadow-md hover:shadow-lg hover:bg-cyan-600 dark:hover:bg-cyan-300",children:A?e.jsx(W,{size:16,fill:"currentColor"}):e.jsx(Y,{size:16,fill:"currentColor"})}),e.jsx("button",{onClick:R,className:"p-1.5 rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30 flex items-center justify-center",children:e.jsx(se,{size:16,className:"text-cyan-500 dark:text-cyan-400"})}),e.jsx("button",{onClick:V||$,className:"p-1.5 text-cyan-500 hover:text-cyan-600 dark:text-cyan-400 transition-colors rounded-full hover:bg-cyan-50 dark:hover:bg-cyan-900/30",children:e.jsx(P,{size:16})})]}),e.jsx("div",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 w-14 text-right",children:C(l)})]})]}),d&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 modal-backdrop",onClick:t=>{t.target===t.currentTarget&&!u.current&&v(!1)}}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-md settings-modal",onClick:t=>{t.stopPropagation()},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Audio Settings"}),e.jsx("button",{onClick:()=>{v(!1)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(P,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Audio Options"}),e.jsx("div",{className:"space-y-2",children:U.map(t=>{const a=i.includes(t.value);return e.jsx("button",{type:"button",onClick:c=>{if(c.preventDefault(),c.stopPropagation(),u.current=!0,N){const o=a?i.filter(J=>J!==t.value):[...i,t.value];o.length>0&&N(o)}setTimeout(()=>{u.current=!1},100)},className:`w-full p-3 rounded-lg border-2 transition-all text-left ${a?"border-cyan-500 dark:border-cyan-400 bg-cyan-50 dark:bg-cyan-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center mr-3 ${a?"border-cyan-500 dark:border-cyan-400 bg-cyan-500 dark:bg-cyan-400":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}`,children:a&&e.jsx(Z,{size:12,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]})},t.value)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Audio Settings"}),i.includes("quran")&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reciter"}),e.jsxs("div",{className:"relative reciter-dropdown",children:[e.jsxs("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),k(!b)},className:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-left",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:Q.label}),e.jsx(_,{size:16,className:"text-gray-500 dark:text-gray-400"})]}),b&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.map(t=>e.jsx("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),w&&w(t.value),k(!1)},className:`w-full px-4 py-2 text-left text-sm transition-colors ${j===t.value?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400":"text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Playback Speed"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),G()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:n<=.5,children:e.jsx(E,{size:16,className:"text-gray-600 dark:text-gray-300"})}),e.jsx("div",{className:"flex-1 text-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n.toFixed(1),"x"]})}),e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),H()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:n>=2,children:e.jsx(ee,{size:16,className:"text-gray-600 dark:text-gray-300"})})]})]})]})]})]})]})]}):null};export{ue as default};
