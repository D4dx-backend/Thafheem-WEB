import{j as e,G as Y,x as Z,P as _,X as R,a9 as E,J as Q,aa as ee,ab as te}from"./index-zWRKLUWk.js";import{b as s}from"./react-vendor-v5ei6ytj.js";import{V as re}from"./volume-x-D3v98kuA.js";import{V as ae}from"./volume-2-B8vAoamP.js";import{S as se,a as oe}from"./skip-forward-_vqWQBqI.js";const ue=({audioElement:a,isPlaying:d,currentAyah:y,totalAyahs:z,surahInfo:le,onPlayPause:V,onStop:T,onSkipBack:L,onSkipForward:I,onClose:q,selectedQari:x="al-afasy",onQariChange:C,translationLanguage:v="mal",audioTypes:l=["quran"],onAudioTypesChange:P,playbackSpeed:o=1,onPlaybackSpeedChange:h})=>{const[p,M]=s.useState(0),[n,A]=s.useState(0),[k,U]=s.useState(1),[u,w]=s.useState(!1),[F,b]=s.useState(!1),[c,j]=s.useState(!1),[f,N]=s.useState(!1),g=s.useRef(!1);s.useEffect(()=>{if(!a){M(0),A(0);return}const t=()=>{M(a.currentTime)},r=()=>{A(a.duration)};return a.addEventListener("loadedmetadata",r),a.addEventListener("timeupdate",t),()=>{a.removeEventListener("loadedmetadata",r),a.removeEventListener("timeupdate",t)}},[a]);const D=t=>{if(isNaN(t))return"00:00";const r=Math.floor(t/3600),m=Math.floor(t%3600/60),i=Math.floor(t%60);return r>0?`${r.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${m.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},O=t=>{if(!a||!n)return;const r=t.currentTarget.getBoundingClientRect(),i=(t.clientX-r.left)/r.width*n;a&&(a.currentTime=i)},X=()=>{a&&(u?(a.volume=k,w(!1)):(a.volume=0,w(!0)))},B=t=>{const r=parseFloat(t.target.value);a&&(a.volume=r),U(r),w(r===0)};s.useEffect(()=>{a&&(a.playbackRate=o)},[a,o]);const S=[{value:"al-afasy",label:"Mishari Rashid al-`Afasy"},{value:"al-ghamidi",label:"Saad Al Ghamidi"},{value:"al-hudaify",label:"Al-Hudaify"}],$=[{value:"quran",label:"Quran",description:"Play Quran audio"},{value:"translation",label:"Translation",description:"Play Translation audio"},{value:"interpretation",label:"Interpretation",description:"Play Interpretation audio"}],G=v==="mal"?$:$.filter(t=>t.value==="quran"),H=()=>{const t=Math.max(.5,o-.1);h&&h(Math.round(t*10)/10)},J=()=>{const t=Math.min(2,o+.1);h&&h(Math.round(t*10)/10)};s.useEffect(()=>{},[c]),s.useEffect(()=>{},[l]),s.useEffect(()=>{c&&g.current&&(g.current=!1)},[l,c]),s.useEffect(()=>{const t=r=>{r.target.closest(".settings-menu")||r.target.closest(".settings-button")||f&&!r.target.closest(".reciter-dropdown")&&N(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[f,c]);const K=S.find(t=>t.value===x)||S[0];return y?(s.useEffect(()=>{console.log("[StickyAudioPlayer] Props update",{isPlaying:d,currentAyah:y,totalAyahs:z,selectedQari:x,translationLanguage:v,audioTypes:l,playbackSpeed:o})},[d,y,z,x,v,l,o]),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-b from-white to-gray-50 dark:from-[#1a1c24] dark:to-[#2A2C38] border-t border-gray-200 dark:border-gray-700 shadow-2xl z-50",children:[e.jsxs("div",{className:"max-w-[1024px] mx-auto",children:[e.jsx("div",{className:"px-3 sm:px-6 pt-2 pb-1",children:e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 tracking-wide uppercase",children:"Audio play"})}),e.jsxs("div",{className:"px-3 sm:px-6 pb-4",children:[e.jsxs("div",{className:"relative cursor-pointer mb-4 group",onClick:O,children:[e.jsx("div",{className:"w-full h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-1 bg-gradient-to-r from-cyan-400 to-cyan-600 dark:from-cyan-500 dark:to-cyan-400 rounded-full transition-all duration-300",style:{width:`${n?p/n*100:0}%`}})}),e.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-white dark:bg-gray-200 border-2 border-cyan-500 dark:border-cyan-400 rounded-full transform -translate-y-1/2 shadow-md opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",style:{left:`${n?p/n*100:0}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[e.jsx("div",{className:"text-xs sm:text-sm font-semibold font-mono text-gray-700 dark:text-gray-300 min-w-[45px] sm:min-w-[50px]",children:D(p)}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:"relative settings-menu",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),j(!c)},className:"p-2 sm:p-2.5 text-gray-600 hover:text-cyan-500 dark:text-gray-400 dark:hover:text-cyan-400 transition-all rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 settings-button","aria-label":"Settings",title:"Settings",children:e.jsx(Y,{size:18,className:"sm:w-5 sm:h-5"})})}),e.jsxs("div",{className:"relative hidden sm:block",children:[e.jsx("button",{onClick:X,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),className:"p-2 sm:p-2.5 text-gray-600 hover:text-cyan-500 dark:text-gray-400 dark:hover:text-cyan-400 transition-all rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":u?"Unmute":"Mute",title:u?"Unmute":"Mute",children:u||k===0?e.jsx(re,{size:18,className:"sm:w-5 sm:h-5"}):e.jsx(ae,{size:18,className:"sm:w-5 sm:h-5"})}),F&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl p-4 z-10",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:u?0:k,onChange:B,className:"w-20 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-cyan-400 [&::-webkit-slider-thumb]:to-cyan-600 [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-md [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-gradient-to-br [&::-moz-range-thumb]:from-cyan-400 [&::-moz-range-thumb]:to-cyan-600 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:shadow-md"})})]}),e.jsx("button",{onClick:L,className:"p-2 sm:p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all","aria-label":"Previous",title:"Previous",children:e.jsx(se,{size:18,className:"sm:w-5 sm:h-5 text-gray-600 dark:text-gray-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors"})}),e.jsx("button",{onClick:()=>{console.log("[StickyAudioPlayer] PlayPause clicked",{isPlaying:d}),V()},className:"p-3 sm:p-3.5 bg-gradient-to-br from-cyan-500 to-cyan-600 dark:from-cyan-500 dark:to-cyan-400 text-white rounded-full transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95","aria-label":d?"Pause":"Play",title:d?"Pause":"Play",children:d?e.jsx(Z,{size:20,className:"sm:w-6 sm:h-6",fill:"currentColor"}):e.jsx(_,{size:20,className:"sm:w-6 sm:h-6",fill:"currentColor"})}),e.jsx("button",{onClick:I,className:"p-2 sm:p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all","aria-label":"Next",title:"Next",children:e.jsx(oe,{size:18,className:"sm:w-5 sm:h-5 text-gray-600 dark:text-gray-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors"})}),e.jsx("button",{onClick:q||T,className:"p-2 sm:p-2.5 text-gray-600 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 transition-all rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",title:"Close",children:e.jsx(R,{size:18,className:"sm:w-5 sm:h-5"})})]}),e.jsx("div",{className:"text-xs sm:text-sm font-semibold font-mono text-gray-700 dark:text-gray-300 min-w-[45px] sm:min-w-[50px] text-right",children:D(n)})]})]})]}),c&&e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 modal-backdrop",onClick:t=>{t.target===t.currentTarget&&!g.current&&j(!1)}}),e.jsxs("div",{className:"relative z-[1001] bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-md settings-modal",onClick:t=>{t.stopPropagation()},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Audio Settings"}),e.jsx("button",{onClick:()=>{j(!1)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(R,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Audio Options"}),e.jsx("div",{className:"space-y-2",children:G.map(t=>{const r=l.includes(t.value);return e.jsx("button",{type:"button",onClick:m=>{if(m.preventDefault(),m.stopPropagation(),g.current=!0,P){const i=r?l.filter(W=>W!==t.value):[...l,t.value];i.length>0&&P(i)}setTimeout(()=>{g.current=!1},100)},className:`w-full p-3 rounded-lg border-2 transition-all text-left ${r?"border-cyan-500 dark:border-cyan-400 bg-cyan-50 dark:bg-cyan-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center mr-3 ${r?"border-cyan-500 dark:border-cyan-400 bg-cyan-500 dark:bg-cyan-400":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}`,children:r&&e.jsx(E,{size:12,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]})},t.value)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Audio Settings"}),l.includes("quran")&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reciter"}),e.jsxs("div",{className:"relative reciter-dropdown",children:[e.jsxs("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),N(!f)},className:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-left",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:K.label}),e.jsx(Q,{size:16,className:"text-gray-500 dark:text-gray-400"})]}),f&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#2A2C38] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:S.map(t=>e.jsx("button",{type:"button",onClick:r=>{r.preventDefault(),r.stopPropagation(),C&&C(t.value),N(!1)},className:`w-full px-4 py-2 text-left text-sm transition-colors ${x===t.value?"bg-cyan-50 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400":"text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Playback Speed"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),H()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:o<=.5,children:e.jsx(ee,{size:16,className:"text-gray-600 dark:text-gray-300"})}),e.jsx("div",{className:"flex-1 text-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[o.toFixed(1),"x"]})}),e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),J()},className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:o>=2,children:e.jsx(te,{size:16,className:"text-gray-600 dark:text-gray-300"})})]})]})]})]})]})]})]})):null};export{ue as default};
