import{e as na,h as sa,i as oa,u as ia,k as la,m as ca,n as De,j as e,T as da,B as wt,P as ua,C as ha,o as ma,p as ga,q as vt,r as kt,t as Nt,f as jt,v as Et,w as re}from"./index-CUlJBpza.js";import{d as fa,u as pa,e as xa,b as n}from"./react-vendor-v5ei6ytj.js";import{W as ya,A as ba}from"./WordByWord-KJZdy24d.js";import{V as St,D as wa,B as va,A as Ve}from"./LoadingSkeleton-Dbw3s3GM.js";import{W as ka}from"./WordByWordIcon-BKhnaaGx.js";import{u as Na,T as ja}from"./Toast-B2OJdYtw.js";import ne from"./tamilTranslationService-BMRWUV2A.js";import se from"./hindiTranslationService-CSJnwD8n.js";import xe from"./urduTranslationService-DMW3Lbpt.js";import He from"./banglaTranslationService-BkW9UeJs.js";import qe from"./englishTranslationService-BXVPM7Au.js";import Ea from"./StickyAudioPlayer-D8IUMogI.js";import{g as Sa,s as Aa}from"./surahNameUtils-DnNHw9gw.js";import{u as Ta}from"./useSequentialEnglishFootnotes-B4d1JHKd.js";import{C as ye}from"./chevron-left-Cd5zBMff.js";import"./tamilWordByWordService-vV6hXtFw.js";import"./apiService-B0XJNrcm.js";import"./hindiWordByWordService-BxXIkP0f.js";import"./banglaWordByWordService-CwmEntKu.js";import"./volume-x-w4A9WPZB.js";import"./skip-forward-Bxg33zbA.js";const Ca={"al-ghamidi":"G","al-afasy":"A","al-hudaify":"H"};async function Ia({ayahNumber:I,surahNumber:F,audioType:w="qirath",qariName:d="al-afasy",translationLanguage:_=null}){const M=String(F).padStart(3,"0"),j=String(I).padStart(3,"0");if(w==="translation"){if(_==="ur"){const r=await na(F,I);return r||null}return`https://old.thafheem.net/audio/translation/T${M}_${j}.ogg`}if(w==="interpretation"){if(_==="ur"){const r=await sa(F,I);return r||null}return`https://old.thafheem.net/audio/interpretation/I${M}_${j}.ogg`}const v=`Q${Ca[d]||"A"}`;return`https://old.thafheem.net/audio/qirath/${d}/${v}${M}_${j}.ogg`}async function La({ayahNumber:I,surahNumber:F,audioType:w="qirath",qariName:d="al-afasy",playbackSpeed:_=1,translationLanguage:M=null,onStart:j,onEnd:B,onError:v}){const r=await Ia({ayahNumber:I,surahNumber:F,audioType:w,qariName:d,translationLanguage:M});if(!r)return typeof v=="function"&&v(new Error(`Audio URL not available for ${w}`)),null;const y=new Audio(r);y.preload="none",y.playbackRate=_;const A=()=>{y&&(y.playbackRate=_),y.removeEventListener("loadedmetadata",A)};y.addEventListener("loadedmetadata",A,{once:!0});const Z=()=>{y&&(y.playbackRate=_),y.removeEventListener("canplay",Z)};y.addEventListener("canplay",Z,{once:!0});let oe=!1;const ie=k=>{oe||(oe=!0,w!=="interpretation"&&console.error(`Audio error for ${w}:`,k),typeof v=="function"&&v(k))};return y.onplay=()=>{typeof j=="function"&&j()},typeof B=="function"&&(y.onended=B),typeof v=="function"&&(y.onerror=ie),y.play().catch(k=>{const L=k.name==="NotSupportedError"||k.name==="NotAllowedError"||w==="interpretation"&&k.message?.includes("no supported source");(w!=="interpretation"||!L)&&console.error(`Error playing audio for ${w}:`,k),ie(k)}),y}const $a=I=>{if(!I)return I;const F=document.createElement("textarea");return F.innerHTML=I,F.value},At=25,Pa=40,Y=new Set(["bn","hi","ur","ta","E"]),lr=()=>{const{quranFont:I,fontSize:F,adjustedTranslationFontSize:w,translationLanguage:d,theme:_,viewType:M,setViewType:j}=oa(),B=d==="mal"||d==="E",{user:v}=ia(),{surahId:r}=fa(),y=pa(),A=xa(),{pathname:Z}=A,{toasts:oe,removeToast:ie,showSuccess:k,showError:L}=Na();n.useCallback(()=>{B&&j("Block Wise")},[j,B]),n.useEffect(()=>{if(A.state?.viewType)j(A.state.viewType);else{const t=sessionStorage.getItem("navigationState");if(t)try{const a=JSON.parse(t);a.viewType&&j(a.viewType),sessionStorage.removeItem("navigationState")}catch{}}},[A.state,j]),n.useEffect(()=>{if(!B&&M!=="Ayah Wise"){j("Ayah Wise");return}if(B&&M==="Block Wise"){const t=`/blockwise/${r}`;Z!==t&&y(t)}},[M,B,r,y,Z,j]);const le=new URLSearchParams(A.search).get("fromJuz"),[Tt,ce]=n.useState(null),[be,de]=n.useState(!1),[Ct,X]=n.useState(null),[we,ve]=n.useState(!1),[It,ke]=n.useState(null),[x,$]=n.useState([]),[ue,W]=n.useState([]),[ee,Ne]=n.useState(null),[C,z]=n.useState(!0),[Fa,Ma]=n.useState(0),[ze,J]=n.useState(null),[je,Ee]=n.useState(new Set),[Ue,Je]=n.useState({}),[he,Oe]=n.useState(!1),[Lt,Qe]=n.useState(!1),[Ge,Ke]=n.useState(!1),[Ba,Ye]=n.useState(!1),[Ra,_a]=n.useState(!1),[me,Ze]=n.useState(!1),[$t,Se]=n.useState(""),[Pt,Xe]=n.useState(!1),[Ae,et]=n.useState(!1),[Ft,ge]=n.useState(""),[Mt,tt]=n.useState(!1),[Te,at]=n.useState(!1),[Bt,Ce]=n.useState(""),[Rt,rt]=n.useState(!1),[Ie,nt]=n.useState(!1),[_t,fe]=n.useState(""),[Wt,st]=n.useState(!1),[N,D]=n.useState(null),[V,ot]=n.useState(()=>localStorage.getItem("reciter")||"al-afasy"),[Le,Dt]=n.useState(["quran"]),[R,it]=n.useState(()=>{const t=localStorage.getItem("playbackSpeed");return t?parseFloat(t):1}),[Wa,H]=n.useState(0),[b,lt]=n.useState(null),[$e,E]=n.useState(!1),q=n.useRef(null),te=n.useRef(!1),[T,O]=n.useState(null),[ae,ct]=n.useState(!1),dt=n.useRef(null),{getAyahViewCache:ut,setAyahViewCache:Pe}=la(),Fe=n.useRef(!1);n.useEffect(()=>{Fe.current=!1},[r,d]),n.useEffect(()=>{if(!r)return;const t=ut?.(r,d);t&&(Fe.current=!0,$(t.ayahData||[]),W(t.arabicVerses||[]),Ne(t.surahInfo||null),O(t.translationPagination||null),z(!1))},[r,d,ut]),n.useEffect(()=>{r&&ca({surahId:r,viewType:"surah",path:`/surah/${r}`})},[r]),Ta({enabled:d==="E",context:"ayahwise",dependencies:[x,r]});const Vt=t=>t?t.replace(/\s*﴿\s*[\d\u0660-\u0669]+\s*﴾\s*$/u,"").trim():"",Ht=t=>{const a=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return t.toString().split("").map(s=>a[s]||s).join("")},Me=n.useCallback((t,a)=>{const o={ta:c=>`Tamil translation not available for verse ${c+1}`,hi:()=>"Hindi translation service unavailable. Please try again later.",ur:()=>"Urdu translation service unavailable. Please try again later.",bn:c=>`Bangla translation not available for verse ${c+1}`,E:c=>`English translation not available for verse ${c+1}`}[a]||(c=>`Translation not available for verse ${c+1}`);return Array.from({length:t},(c,h)=>({number:h+1,ArabicText:"",Translation:o(h),...a==="E"?{interpretationCount:0}:{}}))},[]),pe=n.useCallback(()=>d==="ta"?At:Pa,[d]),Be=n.useCallback((t,a=!1)=>{if(!Array.isArray(t)){a&&W([]);return}W(s=>{if(a)return t;const o=new Map;return s.forEach(c=>{c?.verse_number!=null&&o.set(c.verse_number,c)}),t.forEach(c=>{c?.verse_number!=null&&o.set(c.verse_number,c)}),Array.from(o.values()).sort((c,h)=>c.verse_number-h.verse_number)})},[]),Q=n.useCallback(async({page:t=1,replace:a=!1,trackLoading:s=!0}={})=>{if(!r||!Y.has(d))return null;const o=parseInt(r,10);if(Number.isNaN(o))return null;const h={bn:He,hi:se,ur:xe,ta:ne,E:qe}[d];if(!h)return null;d==="ur"&&(a||t===1)&&xe.resetFootnoteOrdering(o),s&&ct(!0);try{const i=pe(),f=await h.getSurahTranslations(o,{page:t,limit:i}),m=Array.isArray(f?.translations)?f.translations:Array.isArray(f)?f:[];let p=m;d==="bn"?p=m.map(g=>({...g,Translation:He.parseBanglaTranslationWithClickableExplanations(g.Translation,o,g.number)})):d==="ur"?p=m.map(g=>{const S=xe.parseUrduTranslationWithClickableFootnotes(g.Translation||"",o,g.number);return{...g,Translation:S,RawTranslation:g.Translation||""}}):d==="E"&&(p=m.map(g=>{const S=Array.isArray(g.interpretations)?g.interpretations:[],P=g.footnote_metadata||null;return{...g,Translation:qe.parseEnglishTranslationWithClickableFootnotes(g.Translation||g.translation_text,o,g.number),interpretationCount:g.interpretationCount??S.length??0,interpretations:S}}));let l=null;try{l=await De(o,{page:t,limit:i})}catch(g){console.error("Error fetching Arabic verses page:",g)}const u=Array.isArray(l?.verses)?l.verses:Array.isArray(l)?l:[];return te.current&&(a?$(p):p.length>0&&$(g=>[...g,...p]),O(f?.pagination||null),u.length>0?Be(u,a):a&&Be([],!0)),{items:p,pagination:f?.pagination||null}}catch(i){throw a&&te.current&&($([]),O(null)),i}finally{s&&te.current&&ct(!1)}},[r,d,pe,Be]),ht=n.useCallback(async()=>{if(!Y.has(d)||ae||!T||!T.hasNext)return;const t=(T.page||1)+1;try{await Q({page:t,replace:!1})}catch(a){console.error("Error loading more translations:",a),L?.("Failed to load more ayahs. Please try again.")}},[d,T,ae,Q,L]);n.useEffect(()=>{if(!Y.has(d))return;const t=dt.current;if(!t)return;const a=new IntersectionObserver(s=>{s[0]?.isIntersecting&&T?.hasNext&&!ae&&ht()},{root:null,rootMargin:"200px",threshold:.1});return a.observe(t),()=>{a.disconnect()}},[d,T,ae,ht]);const Re=n.useRef(null);n.useEffect(()=>{const t=()=>{Re.current&&Re.current()};return window.addEventListener("playAudio",t),()=>{window.removeEventListener("playAudio",t)}},[]),n.useEffect(()=>{const a=new URLSearchParams(A.search).get("wordByWord");if(a){const s=parseInt(a)||1,o=setTimeout(()=>{X(s),de(!0);const c=new URL(window.location);c.searchParams.delete("wordByWord"),window.history.replaceState({},"",c.pathname)},500);return()=>clearTimeout(o)}},[A.search,C]),n.useEffect(()=>{if(d==="hi"&&x.length>0&&!C){const t=[200,500,1e3,2e3].map(a=>setTimeout(()=>{document.querySelectorAll("p[data-hindi-translation]").forEach((o,c)=>{const h=o.getAttribute("data-hindi-translation"),i=o.getAttribute("data-surah"),f=o.getAttribute("data-ayah"),m=o.innerHTML,p=h&&(h.includes('<sup class="f-note">')||h.includes("<sup>")),l=m.includes('<sup class="f-note">')||m.includes("<sup>"),u=!o.querySelector(".hindi-footnote-link");if((p||l)&&u){const g=se.parseHindiTranslationWithClickableExplanations(h||m,parseInt(i),parseInt(f));o.innerHTML=g}})},a));return()=>t.forEach(a=>clearTimeout(a))}},[d,x,C]),n.useEffect(()=>()=>{q.current&&(q.current.pause(),q.current.src="",q.current.currentTime=0,q.current.onended=null,q.current.onerror=null,q.current=null)},[]),n.useEffect(()=>{q.current=b},[b]),n.useEffect(()=>{let t=!0,a=new AbortController;return(async()=>{if(!(!r||Fe.current))try{if(!t)return;z(!0),J(null),W([]),O(null);const[o,c,h]=await Promise.all([kt(),Nt(),jt()]);if(!t)return;let f=((l,u)=>{const g=u.filter(P=>P.SuraId===parseInt(l));return g.length===0?7:Math.max(...g.map(P=>P.ayato))})(r,h||[]);if(f===7&&o&&Array.isArray(o)){const l=o.find(u=>u.id===parseInt(r));l&&l.ayahs&&(f=l.ayahs)}if(!t)return;if(Y.has(d))try{const l=await Q({page:1,replace:!0,trackLoading:!1});if(!t)return;if(!(l?.items||[]).length){const g=Me(f,d);$(g),O(null)}}catch(l){if(!t)return;l.name!=="AbortError"&&console.error(`Error fetching ${d} translations:`,l);const u=Me(f,d);$(u),O(null)}else{const l=await Et(parseInt(r));if(!t)return;if(!l||!Array.isArray(l)||l.length===0){const u=Array.from({length:f},(g,S)=>({number:S+1,ArabicText:"",Translation:`Translation not available for verse ${S+1}. The API server may be temporarily unavailable. Please try again later.`}));$(u)}else{const u=l.map((g,S)=>({number:(()=>{const _e=[g.ayaid,g.AyaId,g.AyaID,g.contiayano,g.contiAyaNo,S+1];for(const ra of _e){const We=Number.parseInt(ra,10);if(Number.isFinite(We)&&We>0)return We}return S+1})(),ArabicText:"",Translation:(g.AudioText||"").replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim()}));$(u)}try{const u=await De(parseInt(r));if(!t)return;const g=Array.isArray(u?.verses)?u.verses:Array.isArray(u)?u:[];W(g)}catch(u){if(!t)return;u.name!=="AbortError"&&console.error("Error fetching Arabic verses:",u),W([])}}if(!t)return;const m=o.find(l=>l.id===parseInt(r)),p=c.find(l=>l.number===parseInt(r));Ne(m?{arabic:m.arabic,number:m.id,type:p?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(o){t&&o.name!=="AbortError"&&(J(o.message),console.error("Error fetching surah data:",o))}finally{t&&z(!1)}})(),()=>{t=!1,a.abort()}},[r,d,Q,Me]),n.useEffect(()=>{!r||C||!Pe||!Array.isArray(x)||x.length===0||Pe(r,d,{ayahData:x,arabicVerses:ue,surahInfo:ee,translationPagination:T,__meta:{isComplete:!0}})},[r,d,x,ue,ee,T,C,Pe]),n.useEffect(()=>{(async()=>{if(!(!v||!r))try{const a=await re.getBookmarks(v.uid,"translation"),s=new Set(a.filter(o=>o.surahId===parseInt(r)).map(o=>`${o.surahId}:${o.verseId}`));Ee(s)}catch(a){console.error("Error loading bookmarks:",a)}})()},[v,r]),n.useEffect(()=>{(async()=>{if(!v||!r){Ye(!1);return}try{const a=await re.isFavorited(v.uid,r);Ye(a)}catch(a){console.error("Error loading favorite status:",a)}})()},[v,r]),n.useEffect(()=>{const t=()=>{let a=null;const s=window.location.hash;if(s&&s.startsWith("#verse-")){const o=parseInt(s.replace("#verse-",""),10);!isNaN(o)&&o>0&&(a=o)}if(!a&&A.state?.scrollToVerse){const o=parseInt(A.state.scrollToVerse,10);!isNaN(o)&&o>0&&(a=o)}if(!a){const o=sessionStorage.getItem("scrollToVerse");if(o){const c=parseInt(o,10);!isNaN(c)&&c>0&&(a=c,sessionStorage.removeItem("scrollToVerse"))}}if(a&&!C){const o=Y.has(d),c=o?pe():0,h=x.length;if(o&&a>h&&c>0){const f=Math.ceil(a/c);console.log(`Loading page ${f} to get verse ${a} (currently loaded ${h} verses)`),(async p=>{let l=T?.page||1;const u=Math.max(l,p);for(;l<u;){l++;try{await Q({page:l,replace:!1,trackLoading:!1}),await new Promise(g=>setTimeout(g,100))}catch(g){console.error(`Error loading page ${l}:`,g);break}}})(f).then(()=>{const p=(l=1)=>{const u=document.getElementById(`verse-${a}`);u?(u.scrollIntoView({behavior:"smooth",block:"center"}),u.style.backgroundColor="#fef3c7",setTimeout(()=>{u.style.backgroundColor=""},2e3)):l<5?setTimeout(()=>p(l+1),l*200):console.warn(`Could not find verse element: verse-${a} after loading pages. Current array length: ${x.length}`)};setTimeout(()=>p(1),300)});return}if(x.length>0){const f=(m=1)=>{const p=document.getElementById(`verse-${a}`);return p?(p.scrollIntoView({behavior:"smooth",block:"center"}),p.style.backgroundColor="#fef3c7",setTimeout(()=>{p.style.backgroundColor=""},2e3),!0):m<3?(setTimeout(()=>f(m+1),m*150),!1):(console.warn(`Could not find verse element: verse-${a} after ${m} attempts. Loaded ${x.length} verses (indices 0-${x.length-1} map to verse-1 through verse-${x.length})`),!1)};requestAnimationFrame(()=>{f(1)})}}};return C||requestAnimationFrame(()=>{t(),setTimeout(t,100)}),window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("load",t),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t),window.removeEventListener("load",t)}},[C,x,r,A.state,d,T,Q,pe]);const qt=(t,a)=>{if(a?.ctrlKey||a?.metaKey){a?.preventDefault(),a?.stopPropagation();const o=`/word-by-word/${r}/${t}`;window.open(o,"_blank","noopener,noreferrer");return}X(t),de(!0)},zt=()=>{de(!1),X(null)},Ut=t=>{X(t)},Jt=t=>{de(!1),X(null),y(`/surah/${t}?wordByWord=1`)},Ot=async t=>{try{parseInt(r),ke(t),ve(!0)}catch(a){console.error("Error opening interpretation:",a),L("Failed to load interpretation. Please try again.")}},Qt=()=>{ve(!1),ke(null)},Gt=async(t,a,s,o)=>{if(t.stopPropagation(),!v){L("Please sign in to bookmark verses"),y("/sign");return}const c=a+1,h=`${r}:${c}`;try{if(Je(i=>({...i,[h]:!0})),je.has(h)){const f=(await re.getBookmarks(v.uid,"translation")).find(m=>m.surahId===parseInt(r)&&m.verseId===c);f&&await re.deleteBookmark(f.id,v.uid),Ee(m=>{const p=new Set(m);return p.delete(h),p}),k("Bookmark removed successfully")}else await re.addBookmark(v.uid,r,c,"translation",ee?.arabic||`Surah ${r}`,`${s} - ${o}`),Ee(i=>new Set([...i,h])),k("Verse bookmarked successfully")}catch(i){console.error("Error managing bookmark:",i),L("Failed to manage bookmark. Please try again.")}finally{Je(i=>({...i,[h]:!1}))}},Kt=()=>{J(null),z(!0),Et(parseInt(r)).then($).catch(t=>{J(t.message),console.error("Error fetching ayah data on retry:",t)}).finally(()=>z(!1))};n.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[r]),n.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const i=h.target.closest(".hindi-footnote-link");if(i){const f=i.getAttribute("data-footnote"),m=i.getAttribute("data-surah"),p=i.getAttribute("data-ayah");if(f&&m&&p){Xe(!0),Ze(!0),Se("Loading...");try{const l=await se.getExplanationByNumber(parseInt(m),parseInt(p),f);Se(l)}catch(l){console.error("Error fetching Hindi footnote explanation:",l),Se(`Error loading explanation: ${l.message}`)}finally{Xe(!1)}}else console.error("Missing footnote data:",{footnoteNumber:f,surahNo:m,ayahNo:p})}},a=()=>{d==="hi"&&x.length>0&&document.querySelectorAll("p[data-hindi-translation]").forEach((i,f)=>{const m=i.getAttribute("data-hindi-translation"),p=i.getAttribute("data-surah"),l=i.getAttribute("data-ayah"),u=i.innerHTML,g=m&&(m.includes('<sup class="f-note">')||m.includes("<sup>")),S=u.includes('<sup class="f-note">')||u.includes("<sup>"),P=!i.querySelector(".hindi-footnote-link");if((g||S)&&P){const _e=se.parseHindiTranslationWithClickableExplanations(m||u,parseInt(p),parseInt(l));i.innerHTML=_e}})},s=document.createElement("style");s.textContent=`
      .hindi-footnote-link:hover {
        background-color: #0891b2 !important;
        transform: scale(1.05) !important;
      }
      .hindi-footnote-link:active {
        background-color: #0e7490 !important;
        transform: scale(0.95) !important;
      }
    `,document.head.appendChild(s),a();const o=setInterval(a,1e3);window.testHindiFootnotes=()=>{a()};const c=new MutationObserver(h=>{let i=!1;h.forEach(f=>{(f.type==="childList"||f.type==="attributes")&&f.addedNodes.forEach(m=>{m.nodeType===Node.ELEMENT_NODE&&(m.matches&&m.matches("p[data-hindi-translation]")||m.querySelector&&m.querySelector("p[data-hindi-translation]"))&&(i=!0)})}),i&&setTimeout(a,100)});return c.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hindi-translation"]}),document.addEventListener("click",t),()=>{document.removeEventListener("click",t),document.head.removeChild(s),clearInterval(o),c.disconnect()}},[d,x]),n.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const s=a.target.closest(".urdu-footnote-link");if(s){const o=s.getAttribute("data-footnote-id");s.getAttribute("data-footnote-number");const c=s.getAttribute("data-surah"),h=s.getAttribute("data-ayah");if(o&&c&&h){rt(!0),at(!0),Ce("Loading...");try{const i=await xe.getFootnoteExplanation(o),f=i&&$a(i);Ce(f)}catch(i){console.error("❌ Error loading Urdu footnote:",i),Ce(`Error loading explanation: ${i.message}`)}finally{rt(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x]),n.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const s=a.target.closest(".bangla-explanation-link");if(s){const o=s.getAttribute("data-explanation-number"),c=s.getAttribute("data-surah"),h=s.getAttribute("data-ayah");if(o&&c&&h){tt(!0),et(!0),ge("Loading...");try{const i=await He.getExplanationByNumber(parseInt(c),parseInt(h),o);ge(i||"Explanation not found.")}catch(i){console.error("❌ Error loading Bangla explanation:",i),ge("Error loading explanation.")}finally{tt(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x]),n.useEffect(()=>{const t=async a=>{let s=a.target.closest(".interpretation-link");if(s&&d==="E"){a.preventDefault(),a.stopPropagation(),s.getAttribute("data-interpretation")||s.getAttribute("data-interpretation-number")||s.textContent?.trim();const o=s.getAttribute("data-surah")||r,c=s.getAttribute("data-ayah");if(o&&c){ke(parseInt(c,10)),ve(!0);return}}if(s=a.target.closest(".english-footnote-link"),s){a.preventDefault(),a.stopPropagation();const o=s.getAttribute("data-footnote-id"),c=s.getAttribute("data-surah"),h=s.getAttribute("data-ayah");if(!c||!h)return;st(!0),nt(!0),fe("Loading...");try{let i="";if(o)i=await qe.getExplanation(parseInt(o,10));else{fe("Explanation not available.");return}fe(i||"Explanation not available.")}catch(i){console.error("Error fetching English explanation:",i),fe(`Error loading explanation: ${i.message}`)}finally{st(!1)}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x,r]),n.useEffect(()=>{},[me]);const mt=()=>{const t=parseInt(r)-1;t>=1&&y(`/surah/${t}`)},gt=()=>{const t=parseInt(r)+1;t<=114&&y(`/surah/${t}`)};n.useEffect(()=>{const t=()=>{window.scrollY>300?Qe(!0):Qe(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),n.useEffect(()=>{const t=a=>{const{type:s,message:o}=a.detail;s==="success"?k(o):s==="error"&&L(o)};return window.addEventListener("showToast",t),()=>{window.removeEventListener("showToast",t)}},[k,L]);const ft=t=>{if(!t)return"";if(typeof document>"u")return t.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();const a=document.createElement("div");return a.innerHTML=t,a.querySelectorAll(".english-footnote-link, .footnote-link, sup.f-note").forEach(s=>s.remove()),(a.textContent||a.innerText||"").replace(/\s+/g," ").trim()},Yt=async(t,a,s)=>{const o=ft(a),c=`${t}
  
  "${o}"
  
  — Quran ${r}:${s}`;try{await navigator.clipboard.writeText(c),ce(s),setTimeout(()=>{ce(null)},2e3)}catch(h){console.error("Failed to copy text: ",h);try{const i=document.createElement("textarea");i.value=c,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),ce(s),setTimeout(()=>{ce(null)},2e3)}catch(i){console.error("Fallback copy failed: ",i)}}},Zt=async(t,a,s)=>{const o=ft(a),c=`${window.location.origin}/surah/${r}#verse-${s}`,h=`${t}

${o}

— Quran ${r}:${s}

Read more: ${c}`,i={title:`Quran ${r}:${s}`,text:h};try{navigator.share&&navigator.canShare&&navigator.canShare(i)?(await navigator.share(i),k("Verse shared successfully")):(await navigator.clipboard.writeText(h),k("Verse content copied to clipboard"))}catch(f){if(f.name==="AbortError")return;console.error("Error sharing verse:",f);try{await navigator.clipboard.writeText(h),k("Verse content copied to clipboard")}catch(m){console.error("Failed to copy to clipboard:",m),L("Failed to share verse. Please try again.")}}},G=()=>{b&&(b.pause(),b.currentTime=0,b.onended=null,b.onerror=null)};n.useEffect(()=>(te.current=!0,()=>{te.current=!1;try{G()}catch{}E(!1),D(null),H(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))}),[]),n.useEffect(()=>{const t=()=>{window.scrollY>50?Ke(!0):Ke(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]);const U=async(t,a=0,s=null)=>{if(!r)return;const o=s||Le,c=x?.length||0;if(a>=o.length){t<c?U(t+1,0,s):(E(!1),D(null),H(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})));return}E(!0),D(t),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}));const h={quran:"qirath",translation:"translation",interpretation:"interpretation"},i=o[a],f=h[i]||"qirath";G(),H(a);try{const m=await La({ayahNumber:t,surahNumber:parseInt(r),audioType:f,qariName:V,playbackSpeed:R,translationLanguage:d,onStart:()=>{D(t),E(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))},onEnd:()=>{U(t,a+1,s)},onError:()=>{setTimeout(()=>{E(!1),D(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),U(t,a+1,s)},100)}});m?lt(m):setTimeout(()=>{E(!1),D(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),U(t,a+1,s)},100)}catch(m){console.error("Error playing audio:",m),setTimeout(()=>{E(!1),D(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),U(t,a+1,s)},100)}},K=async(t,a=0)=>{await U(t,a,null)},Xt=t=>{if(N===t&&b){b.paused?b.play().then(()=>E(!0)).catch(()=>{}):(b.pause(),E(!1));return}H(0),K(t,0)},pt=()=>{try{b&&!b.paused?(b.pause(),E(!1),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))):b&&b.paused?b.play().then(()=>{E(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))}).catch(()=>{}):(H(0),K(1,0))}catch{}};Re.current=pt;const ea=()=>{G(),E(!1),D(null),H(0),lt(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))};n.useEffect(()=>{localStorage.setItem("reciter",V),window.dispatchEvent(new CustomEvent("reciterChange",{detail:{reciter:V}}))},[V]),n.useEffect(()=>{const t=a=>{const s=a.detail.reciter;s!==V&&ot(s)};return window.addEventListener("reciterChange",t),()=>{window.removeEventListener("reciterChange",t)}},[V]),n.useEffect(()=>{$e&&b&&N&&(G(),E(!1),setTimeout(()=>{K(N,0)},100))},[V,Le]),n.useEffect(()=>{localStorage.setItem("playbackSpeed",R.toString()),window.dispatchEvent(new CustomEvent("playbackSpeedChange",{detail:{playbackSpeed:R}}))},[R]),n.useEffect(()=>{const t=a=>{const s=a.detail.playbackSpeed;s!==R&&it(s)};return window.addEventListener("playbackSpeedChange",t),()=>{window.removeEventListener("playbackSpeedChange",t)}},[R]),n.useEffect(()=>{b&&(b.playbackRate=R)},[b,R]);const xt=async()=>{try{Oe(!0),await ne.downloadDatabase(),k("Tamil database downloaded successfully!"),await(async()=>{if(r)try{z(!0),J(null);const[a,s,o]=await Promise.all([kt(),Nt(),jt()]);let h=((l,u)=>{const g=u.filter(P=>P.SuraId===parseInt(l));return g.length===0?7:Math.max(...g.map(P=>P.ayato))})(r,o||[]);if(h===7&&a&&Array.isArray(a)){const l=a.find(u=>u.id===parseInt(r));l&&l.ayahs&&(h=l.ayahs)}const i=await ne.getSurahTranslations(parseInt(r),{page:1,limit:At}),f=Array.isArray(i?.translations)?i.translations:[];if(f.length>0)$(f),setTamilPagination(i?.pagination||null);else{const l=Array.from({length:h},(u,g)=>({number:g+1,ArabicText:"",Translation:`Tamil translation not available for verse ${g+1}`}));$(l),setTamilPagination(null)}try{const l=await De(parseInt(r)),u=Array.isArray(l?.verses)?l.verses:Array.isArray(l)?l:[];W(u)}catch(l){console.error("Error fetching Arabic verses:",l),W([])}const m=a.find(l=>l.id===parseInt(r)),p=s.find(l=>l.number===parseInt(r));Ne(m?{arabic:m.arabic,number:m.id,type:p?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(a){J(a.message),console.error("Error fetching surah data:",a)}finally{z(!1)}})()}catch(t){console.error("Error downloading Tamil database:",t),L("Failed to download Tamil database. Please try again.")}finally{Oe(!1)}};if(C)return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-48 mx-auto mb-4 relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})}),e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-32 mx-auto relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})})]}),e.jsx(St,{count:5})]})});if(ze)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load Surah data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:ze}),e.jsx("button",{onClick:Kt,className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})});const yt=ee?.arabic||(r?`Surah ${r}`:"Surah"),ta=Sa(r,yt),bt=r?String(r):"",aa=bt==="1"||bt==="2"?"font-normal":"font-semibold";return e.jsxs("div",{children:[e.jsx(ja,{toasts:oe,removeToast:ie}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-outfit transition-colors duration-300",children:[e.jsx("div",{className:`sticky top-0 z-40 glass border-b border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 ${be||we||me||Te||Ae||Ie?"hidden":""}`,children:e.jsx("div",{className:"container-responsive py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center relative",children:[e.jsxs("div",{className:"sm:hidden w-full flex items-center justify-between mb-2",children:[le&&e.jsxs("button",{onClick:()=>y("/juz"),className:"flex items-center text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),"Juz ",le]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Ge?"max-h-0 opacity-0 m-0":"max-h-40 opacity-100 mb-2 sm:mb-4"}`,children:e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-arabic text-center text-gray-800 dark:text-white drop-shadow-sm ${aa}`,style:{fontFamily:Aa},"aria-label":yt,children:ta})}),parseInt(r)!==1&&parseInt(r)!==9&&e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Ge?"max-h-0 opacity-0 m-0":"max-h-20 opacity-90 hover:opacity-100 mb-4 sm:mb-6"}`,children:e.jsx("img",{src:_==="dark"?wa:va,alt:"Bismillah",className:"h-8 sm:h-10 md:h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"w-full flex items-center justify-between mt-2",children:[e.jsx("div",{className:"hidden sm:block w-1/3",children:le&&e.jsxs("button",{onClick:()=>y("/juz"),className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors group",children:[e.jsx(ye,{className:"w-4 h-4 mr-1 group-hover:-translate-x-1 transition-transform"}),"Back to Juz ",le]})}),e.jsx("div",{className:"w-full sm:w-1/3 flex justify-center",children:(d==="mal"||d==="E")&&e.jsx(da,{options:["Ayah Wise","Block Wise"],value:M,onChange:t=>j(t)})}),e.jsx("div",{className:"hidden sm:flex w-1/3 justify-end",children:d==="ta"&&!ne.isDatabaseDownloaded()&&e.jsx("button",{onClick:xt,disabled:he,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors flex items-center",children:he?"Downloading...":"Download Tamil DB"})})]}),d==="ta"&&!ne.isDatabaseDownloaded()&&e.jsx("div",{className:"sm:hidden mt-2 w-full flex justify-center",children:e.jsx("button",{onClick:xt,disabled:he,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-4 py-2 rounded-full w-full text-center",children:he?"Downloading...":"Download Tamil Database"})})]})})}),e.jsx("div",{className:"container-responsive py-6 sm:py-8 space-y-4 sm:space-y-6",children:C&&x.length===0?e.jsx(St,{count:5}):!C&&x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(wt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"No verses found for this Surah."})]}):!C&&x.length>0?e.jsxs(e.Fragment,{children:[x.map((t,a)=>{const s=ue[a],o=s?.text_uthmani||"",c=ue.find(u=>u.verse_key===`${r}:${a+1}`),h=o||c?.text_uthmani||"",f=Vt(h)||h,m=N===a+1,p=m&&$e,l=`
                    relative group rounded-2xl transition-all duration-300 overflow-hidden
                    ${m?"bg-teal-50/50 dark:bg-teal-900/10 border-teal-200 dark:border-teal-800 shadow-md ring-1 ring-teal-100 dark:ring-teal-900":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:shadow-card hover:border-gray-200 dark:hover:border-gray-600"}
                  `;return e.jsxs("div",{id:`verse-${a+1}`,className:l,children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-gray-50 dark:bg-gray-700/50 px-3 py-1.5 rounded-br-xl border-b border-r border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400 z-10",children:[r,":",a+1]}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"w-full mb-6 sm:mb-8 text-right",dir:"rtl",children:e.jsxs("p",{className:`leading-[2.2] ${m?"text-primary dark:text-primary-light":"text-gray-800 dark:text-gray-100"}`,style:{fontFamily:I,fontSize:`${F}px`},children:[f," ",e.jsxs("span",{className:"inline-block mx-1 text-gray-400 dark:text-gray-500 font-arabic text-[0.8em]",children:["﴿",Ht(s?.verse_number||a+1),"﴾"]})]})}),e.jsx("div",{className:"w-full text-left mb-6 relative",children:e.jsx("div",{className:`prose dark:prose-invert max-w-none ${m?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:d==="hi"?e.jsx("div",{"data-hindi-translation":t.Translation,"data-surah":r,"data-ayah":t.number||a+1,className:"font-hindi leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:se.parseHindiTranslationWithClickableExplanations(t.Translation||"",parseInt(r),t.number||a+1)}}):d==="ur"?e.jsx("div",{className:"font-urdu-nastaliq leading-relaxed text-right",dir:"rtl",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):d==="bn"?e.jsx("div",{className:"font-bengali leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):d==="ta"?e.jsx("div",{className:"font-tamil leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):d==="mal"?e.jsx("div",{className:"font-malayalam leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):e.jsx("div",{className:"font-poppins leading-relaxed",style:{fontSize:`${w}px`},"data-footnote-context":"ayahwise",dangerouslySetInnerHTML:{__html:t.Translation}})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),Xt(a+1)},className:`icon-btn ${p?"text-primary bg-primary/10":""}`,title:p?"Pause":"Play",children:p?e.jsxs("div",{className:"flex gap-0.5 h-3 items-end",children:[e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_0.6s_ease-in-out_infinite]"}),e.jsx("span",{className:"w-0.5 h-2/3 bg-current animate-[pulse_0.8s_ease-in-out_infinite_0.1s]"}),e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_1s_ease-in-out_infinite_0.2s]"})]}):e.jsx(ua,{className:"w-5 h-5"})}),d!=="ta"&&e.jsx("button",{onClick:u=>{u.stopPropagation(),Ot(a+1)},className:"icon-btn group",title:"Interpretation",children:e.jsx(wt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),qt(a+1,u)},className:"icon-btn group",title:"Word by Word",children:e.jsx(ka,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),Yt(h,t.Translation,a+1)},className:"icon-btn",title:"Copy",children:Tt===a+1?e.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied"}):e.jsx(ha,{className:"w-5 h-5"})}),e.jsx("button",{onClick:u=>Gt(u,a,h,t.Translation),disabled:Ue[`${r}:${a+1}`],className:`icon-btn ${je.has(`${r}:${a+1}`)?"text-accent":""}`,title:"Bookmark",children:Ue[`${r}:${a+1}`]?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(ma,{className:`w-5 h-5 ${je.has(`${r}:${a+1}`)?"fill-current":""}`})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),Zt(h,t.Translation,a+1)},className:"icon-btn",title:"Share",children:e.jsx(ga,{className:"w-5 h-5"})})]})]})]})]},a)}),Y.has(d)&&T?.totalItems?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-8",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Math.min(x.length,T.totalItems)," of ",T.totalItems," ayahs"]}),e.jsx("div",{ref:dt,className:"h-10 flex items-center justify-center",children:ae&&e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})})]}):null]}):null}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 dark:border-gray-700 px-3 sm:px-4 lg:px-6 py-3 sm:py-4 mt-6 sm:mt-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"sm:hidden space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:mt,disabled:parseInt(r)<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg w-[173.96px] min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ye,{className:"w-3 h-3"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]`,children:[e.jsx(Ve,{className:"w-3 h-3"}),e.jsx("span",{children:"Beginning of Surah"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:gt,disabled:parseInt(r)>=114,className:`w-[173.96px] flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(vt,{className:"w-3 h-3"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-3 sm:space-x-4 lg:space-x-6",children:[e.jsxs("button",{onClick:mt,disabled:parseInt(r)<=1,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ye,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg`,children:[e.jsx(Ve,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Beginning of Surah"})]}),e.jsxs("button",{onClick:gt,disabled:parseInt(r)>=114,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(vt,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]})}),be&&e.jsx(ya,{selectedVerse:Ct,surahId:r,onClose:zt,onNavigate:Ut,onSurahChange:Jt}),we&&e.jsx(ba,{surahId:r,verseId:It,onClose:Qt}),me&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hindi Explanation"}),e.jsx("button",{onClick:()=>Ze(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Pt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:$t})})})]})}),Ae&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bangla Explanation"}),e.jsx("button",{onClick:()=>et(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Mt?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:Ft})})})]})}),Te&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
              .urdu-footnote-modal-content * {
                font-family: 'Noto Nastaliq Urdu', 'JameelNoori', serif !important;
              }
              .urdu-footnote-modal-content a {
                font-family: 'Noto Nastaliq Urdu', 'JameelNoori', serif !important;
                text-align: right !important;
              }
            `}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Urdu Explanation"}),e.jsx("button",{onClick:()=>at(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Rt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:`text-gray-700 leading-[1.6] sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none urdu-footnote-modal-content ${d==="ur"?"font-urdu-nastaliq":"font-poppins"}`,style:{fontSize:`${w}px`,...d==="ur"?{textAlign:"right",lineHeight:"2.6",fontFamily:"'Noto Nastaliq Urdu', 'JameelNoori', serif"}:{}},dir:d==="ur"?"rtl":"ltr",children:Bt})})})]})})]}),Ie&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"English Explanation"}),e.jsx("button",{onClick:()=>nt(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Wt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:_t})})})]})}),Lt&&e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed right-6 z-[60] bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center ${N?"bottom-32 sm:bottom-36":"bottom-6"}`,title:"Beginning of Surah","aria-label":"Beginning of Surah",children:e.jsx(Ve,{className:"w-6 h-6"})}),N&&!be&&!we&&!me&&!Te&&!Ae&&!Ie&&e.jsx(Ea,{audioElement:b,isPlaying:$e&&b&&!b.paused,currentAyah:N,totalAyahs:x?.length||0,surahInfo:ee,onPlayPause:pt,onStop:ea,onSkipBack:()=>{N&&N>1&&(H(0),K(N-1,0))},onSkipForward:()=>{const t=x?.length||0;N&&N<t&&(H(0),K(N+1,0))},onClose:null,selectedQari:V,onQariChange:t=>{ot(t),N&&(G(),E(!1),setTimeout(()=>{K(N,0)},50))},translationLanguage:d,audioTypes:Le,onAudioTypesChange:t=>{const a=N;Dt(t),a&&(G(),E(!1),setTimeout(()=>{U(a,0,t)},50))},playbackSpeed:R,onPlaybackSpeedChange:t=>{it(t)}})]})]})};export{lr as default};
