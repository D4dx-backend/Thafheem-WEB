import{u as sa,c as na,i as oa,k as Be,j as e,T as ia,B as xt,P as la,C as ca,m as da,n as ua,o as pt,p as yt,q as bt,f as wt,r as vt,t as K}from"./index-CYmUdfUH.js";import{d as ha,u as ma,e as ga,b as s}from"./react-vendor-v5ei6ytj.js";import{W as fa,A as xa}from"./WordByWord-DH_d5gzU.js";import{V as kt,D as pa,B as ya,A as _e}from"./LoadingSkeleton-CRHMA9Rg.js";import{W as ba}from"./WordByWordIcon-C71fWaUO.js";import{u as wa,T as va}from"./Toast-CATwdAtO.js";import Y from"./tamilTranslationService-ARhWXMCS.js";import Z from"./hindiTranslationService-BZ49cBod.js";import he from"./urduTranslationService-BtJGiN1d.js";import We from"./banglaTranslationService-DwkTVBb7.js";import Re from"./englishTranslationService-BczWIkHy.js";import ka from"./StickyAudioPlayer-sEqa5eMM.js";import{s as ja}from"./readingProgressService-DFoY0i0J.js";import{g as Na,s as Sa}from"./surahNameUtils-CNmXwDjY.js";import{u as Aa}from"./useSequentialEnglishFootnotes-B4d1JHKd.js";import{C as me}from"./chevron-left-CZsIedE5.js";import"./tamilWordByWordService-0aMUZhbw.js";import"./apiService-BiExnp6s.js";import"./hindiWordByWordService-IKYrE6m0.js";import"./banglaWordByWordService-Btfq8z-m.js";import"./volume-x-QgwjSujb.js";import"./volume-2-BSWijN6o.js";import"./skip-forward-Dk4ftrCr.js";import"./surahNameUnicodes-C_pntk6C.js";const Ea={"al-ghamidi":"G","al-afasy":"A","al-hudaify":"H"};function Ta({ayahNumber:z,surahNumber:q,audioType:w="qirath",qariName:c="al-afasy"}){const _=String(q).padStart(3,"0"),S=String(z).padStart(3,"0");if(w==="translation")return`https://old.thafheem.net/audio/translation/T${_}_${S}.ogg`;if(w==="interpretation")return`https://old.thafheem.net/audio/interpretation/I${_}_${S}.ogg`;const k=`Q${Ea[c]||"A"}`;return`https://old.thafheem.net/audio/qirath/${c}/${k}${_}_${S}.ogg`}function Ca({ayahNumber:z,surahNumber:q,audioType:w="qirath",qariName:c="al-afasy",playbackSpeed:_=1,onStart:S,onEnd:L,onError:k}){const j=Ta({ayahNumber:z,surahNumber:q,audioType:w,qariName:c}),r=new Audio(j);return r.preload="none",r.playbackRate=_,r.onplay=()=>{typeof S=="function"&&S()},typeof L=="function"&&(r.onended=L),typeof k=="function"&&(r.onerror=k),r.play().catch(I=>{typeof k=="function"&&k(I)}),r}const jt=25,Ia=40,X=new Set(["bn","hi","ur","ta","E"]),lr=()=>{const{quranFont:z,fontSize:q,adjustedTranslationFontSize:w,translationLanguage:c,theme:_,viewType:S,setViewType:L}=sa(),k=c==="mal"||c==="E",{user:j}=na(),{surahId:r}=ha(),I=ma(),ee=ga(),{pathname:De}=ee,{toasts:Nt,removeToast:St,showSuccess:P,showError:F}=wa();s.useCallback(()=>{k&&L("Block Wise")},[L,k]),s.useEffect(()=>{if(!k&&S!=="Ayah Wise"){L("Ayah Wise");return}if(k&&S==="Block Wise"){const t=`/blockwise/${r}`;De!==t&&I(t)}},[S,k,r,I,De,L]);const te=new URLSearchParams(ee.search).get("fromJuz"),[At,ae]=s.useState(null),[ge,re]=s.useState(!1),[Et,U]=s.useState(null),[fe,xe]=s.useState(!1),[Tt,pe]=s.useState(null),[y,A]=s.useState([]),[se,$]=s.useState([]),[Q,ye]=s.useState(null),[N,W]=s.useState(!0),[La,Fa]=s.useState(0),[Ve,R]=s.useState(null),[be,we]=s.useState(new Set),[He,ze]=s.useState({}),[ne,qe]=s.useState(!1),[Ct,Ue]=s.useState(!1),[Qe,Ge]=s.useState(!1),[Pa,Oe]=s.useState(!1),[$a,Ma]=s.useState(!1),[oe,Je]=s.useState(!1),[It,ve]=s.useState(""),[Lt,Ke]=s.useState(!1),[ke,Ye]=s.useState(!1),[Ft,ie]=s.useState(""),[Pt,Ze]=s.useState(!1),[je,Xe]=s.useState(!1),[$t,Ne]=s.useState(""),[Mt,et]=s.useState(!1),[Se,tt]=s.useState(!1),[Bt,le]=s.useState(""),[_t,at]=s.useState(!1),[b,ce]=s.useState(null),[Ae,Wt]=s.useState("al-afasy"),[Ee,Rt]=s.useState(["quran"]),[de,Dt]=s.useState(1),[Ba,M]=s.useState(0),[p,rt]=s.useState(null),[Te,E]=s.useState(!1),B=s.useRef(null),G=s.useRef(!1),[T,D]=s.useState(null),[O,st]=s.useState(!1),nt=s.useRef(null),{getAyahViewCache:ot,setAyahViewCache:Ce}=oa(),Ie=s.useRef(!1);s.useEffect(()=>{Ie.current=!1},[r,c]),s.useEffect(()=>{if(!r)return;const t=ot?.(r,c);t&&(Ie.current=!0,A(t.ayahData||[]),$(t.arabicVerses||[]),ye(t.surahInfo||null),D(t.translationPagination||null),W(!1))},[r,c,ot]),s.useEffect(()=>{r&&ja({surahId:r,viewType:"surah",path:`/surah/${r}`})},[r]),Aa({enabled:c==="E",context:"ayahwise",dependencies:[y,r]});const Vt=t=>t?t.replace(/\s*﴿\s*[\d\u0660-\u0669]+\s*﴾\s*$/u,"").trim():"",Ht=t=>{const a=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return t.toString().split("").map(n=>a[n]||n).join("")},Le=s.useCallback((t,a)=>{const o={ta:d=>`Tamil translation not available for verse ${d+1}`,hi:()=>"Hindi translation service unavailable. Please try again later.",ur:()=>"Urdu translation service unavailable. Please try again later.",bn:d=>`Bangla translation not available for verse ${d+1}`,E:d=>`English translation not available for verse ${d+1}`}[a]||(d=>`Translation not available for verse ${d+1}`);return Array.from({length:t},(d,u)=>({number:u+1,ArabicText:"",Translation:o(u),...a==="E"?{interpretationCount:0}:{}}))},[]),it=s.useCallback(()=>c==="ta"?jt:Ia,[c]),Fe=s.useCallback((t,a=!1)=>{if(!Array.isArray(t)){a&&$([]);return}$(n=>{if(a)return t;const o=new Map;return n.forEach(d=>{d?.verse_number!=null&&o.set(d.verse_number,d)}),t.forEach(d=>{d?.verse_number!=null&&o.set(d.verse_number,d)}),Array.from(o.values()).sort((d,u)=>d.verse_number-u.verse_number)})},[]),ue=s.useCallback(async({page:t=1,replace:a=!1,trackLoading:n=!0}={})=>{if(!r||!X.has(c))return null;const o=parseInt(r,10);if(Number.isNaN(o))return null;const u={bn:We,hi:Z,ur:he,ta:Y,E:Re}[c];if(!u)return null;c==="ur"&&(a||t===1)&&he.resetFootnoteOrdering(o),n&&st(!0);try{const i=it(),f=await u.getSurahTranslations(o,{page:t,limit:i}),g=Array.isArray(f?.translations)?f.translations:Array.isArray(f)?f:[];let x=g;c==="bn"?x=g.map(m=>({...m,Translation:We.parseBanglaTranslationWithClickableExplanations(m.Translation,o,m.number)})):c==="ur"?x=g.map(m=>{const v=he.parseUrduTranslationWithClickableFootnotes(m.Translation||"",o,m.number);return{...m,Translation:v,RawTranslation:m.Translation||""}}):c==="E"&&(x=g.map(m=>{const v=Array.isArray(m.interpretations)?m.interpretations:[],C=m.footnote_metadata||null;return{...m,Translation:Re.parseEnglishTranslationWithClickableFootnotes(m.Translation||m.translation_text,o,m.number),interpretationCount:m.interpretationCount??v.length??0,interpretations:v}}));let l=null;try{l=await Be(o,{page:t,limit:i})}catch(m){console.error("Error fetching Arabic verses page:",m)}const h=Array.isArray(l?.verses)?l.verses:Array.isArray(l)?l:[];return G.current&&(a?A(x):x.length>0&&A(m=>[...m,...x]),D(f?.pagination||null),h.length>0?Fe(h,a):a&&Fe([],!0)),{items:x,pagination:f?.pagination||null}}catch(i){throw a&&G.current&&(A([]),D(null)),i}finally{n&&G.current&&st(!1)}},[r,c,it,Fe]),lt=s.useCallback(async()=>{if(!X.has(c)||O||!T||!T.hasNext)return;const t=(T.page||1)+1;try{await ue({page:t,replace:!1})}catch(a){console.error("Error loading more translations:",a),F?.("Failed to load more ayahs. Please try again.")}},[c,T,O,ue,F]);s.useEffect(()=>{if(!X.has(c))return;const t=nt.current;if(!t)return;const a=new IntersectionObserver(n=>{n[0]?.isIntersecting&&T?.hasNext&&!O&&lt()},{root:null,rootMargin:"200px",threshold:.1});return a.observe(t),()=>{a.disconnect()}},[c,T,O,lt]);const Pe=s.useRef(null);s.useEffect(()=>{const t=()=>{Pe.current&&Pe.current()};return window.addEventListener("playAudio",t),()=>{window.removeEventListener("playAudio",t)}},[]),s.useEffect(()=>{const a=new URLSearchParams(ee.search).get("wordByWord");if(a){const n=parseInt(a)||1,o=setTimeout(()=>{U(n),re(!0);const d=new URL(window.location);d.searchParams.delete("wordByWord"),window.history.replaceState({},"",d.pathname)},500);return()=>clearTimeout(o)}},[ee.search,N]),s.useEffect(()=>{if(c==="hi"&&y.length>0&&!N){const t=[200,500,1e3,2e3].map(a=>setTimeout(()=>{document.querySelectorAll("p[data-hindi-translation]").forEach((o,d)=>{const u=o.getAttribute("data-hindi-translation"),i=o.getAttribute("data-surah"),f=o.getAttribute("data-ayah"),g=o.innerHTML,x=u&&(u.includes('<sup class="f-note">')||u.includes("<sup>")),l=g.includes('<sup class="f-note">')||g.includes("<sup>"),h=!o.querySelector(".hindi-footnote-link");if((x||l)&&h){const m=Z.parseHindiTranslationWithClickableExplanations(u||g,parseInt(i),parseInt(f));o.innerHTML=m}})},a));return()=>t.forEach(a=>clearTimeout(a))}},[c,y,N]),s.useEffect(()=>()=>{B.current&&(B.current.pause(),B.current.src="",B.current.currentTime=0,B.current.onended=null,B.current.onerror=null,B.current=null)},[]),s.useEffect(()=>{B.current=p},[p]),s.useEffect(()=>{let t=!0,a=new AbortController;return(async()=>{if(!(!r||Ie.current))try{if(!t)return;W(!0),R(null),$([]),D(null);const[o,d,u]=await Promise.all([yt(),bt(),wt()]);if(!t)return;let f=((l,h)=>{const m=h.filter(C=>C.SuraId===parseInt(l));return m.length===0?7:Math.max(...m.map(C=>C.ayato))})(r,u||[]);if(f===7&&o&&Array.isArray(o)){const l=o.find(h=>h.id===parseInt(r));l&&l.ayahs&&(f=l.ayahs)}if(!t)return;if(X.has(c))try{const l=await ue({page:1,replace:!0,trackLoading:!1});if(!t)return;if(!(l?.items||[]).length){const m=Le(f,c);A(m),D(null)}}catch(l){if(!t)return;l.name!=="AbortError"&&console.error(`Error fetching ${c} translations:`,l);const h=Le(f,c);A(h),D(null)}else{const l=await vt(parseInt(r));if(!t)return;if(!l||!Array.isArray(l)||l.length===0){const h=Array.from({length:f},(m,v)=>({number:v+1,ArabicText:"",Translation:`Translation not available for verse ${v+1}. The API server may be temporarily unavailable. Please try again later.`}));A(h)}else{const h=l.map((m,v)=>({number:(()=>{const $e=[m.ayaid,m.AyaId,m.AyaID,m.contiayano,m.contiAyaNo,v+1];for(const ra of $e){const Me=Number.parseInt(ra,10);if(Number.isFinite(Me)&&Me>0)return Me}return v+1})(),ArabicText:"",Translation:(m.AudioText||"").replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim()}));A(h)}try{const h=await Be(parseInt(r));if(!t)return;const m=Array.isArray(h?.verses)?h.verses:Array.isArray(h)?h:[];$(m)}catch(h){if(!t)return;h.name!=="AbortError"&&console.error("Error fetching Arabic verses:",h),$([])}}if(!t)return;const g=o.find(l=>l.id===parseInt(r)),x=d.find(l=>l.number===parseInt(r));ye(g?{arabic:g.arabic,number:g.id,type:x?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(o){t&&o.name!=="AbortError"&&(R(o.message),console.error("Error fetching surah data:",o))}finally{t&&W(!1)}})(),()=>{t=!1,a.abort()}},[r,c,ue,Le]),s.useEffect(()=>{!r||N||!Ce||!Array.isArray(y)||y.length===0||Ce(r,c,{ayahData:y,arabicVerses:se,surahInfo:Q,translationPagination:T,__meta:{isComplete:!0}})},[r,c,y,se,Q,T,N,Ce]),s.useEffect(()=>{(async()=>{if(!(!j||!r))try{const a=await K.getBookmarks(j.uid,"translation"),n=new Set(a.filter(o=>o.surahId===parseInt(r)).map(o=>`${o.surahId}:${o.verseId}`));we(n)}catch(a){console.error("Error loading bookmarks:",a)}})()},[j,r]),s.useEffect(()=>{(async()=>{if(!j||!r){Oe(!1);return}try{const a=await K.isFavorited(j.uid,r);Oe(a)}catch(a){console.error("Error loading favorite status:",a)}})()},[j,r]),s.useEffect(()=>{const t=()=>{const a=window.location.hash;if(a&&a.startsWith("#verse-")){const n=parseInt(a.replace("#verse-",""));n&&!N&&y.length>0&&setTimeout(()=>{const o=document.getElementById(`verse-${n}`);o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),o.style.backgroundColor="#fef3c7",setTimeout(()=>{o.style.backgroundColor=""},2e3))},500)}};return!N&&y.length>0&&setTimeout(t,100),window.addEventListener("hashchange",t),window.addEventListener("popstate",t),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t)}},[N,y,r]);const zt=(t,a)=>{if(a?.ctrlKey||a?.metaKey){a?.preventDefault(),a?.stopPropagation();const o=`/word-by-word/${r}/${t}`;window.open(o,"_blank","noopener,noreferrer");return}U(t),re(!0)},qt=()=>{re(!1),U(null)},Ut=t=>{U(t)},Qt=t=>{re(!1),U(null),I(`/surah/${t}?wordByWord=1`)},Gt=async t=>{try{parseInt(r),pe(t),xe(!0)}catch(a){console.error("Error opening interpretation:",a),F("Failed to load interpretation. Please try again.")}},Ot=()=>{xe(!1),pe(null)},Jt=async(t,a,n,o)=>{if(t.stopPropagation(),!j){F("Please sign in to bookmark verses"),I("/sign");return}const d=a+1,u=`${r}:${d}`;try{if(ze(i=>({...i,[u]:!0})),be.has(u)){const f=(await K.getBookmarks(j.uid,"translation")).find(g=>g.surahId===parseInt(r)&&g.verseId===d);f&&await K.deleteBookmark(f.id,j.uid),we(g=>{const x=new Set(g);return x.delete(u),x}),P("Bookmark removed successfully")}else await K.addBookmark(j.uid,r,d,"translation",Q?.arabic||`Surah ${r}`,`${n} - ${o}`),we(i=>new Set([...i,u])),P("Verse bookmarked successfully")}catch(i){console.error("Error managing bookmark:",i),F("Failed to manage bookmark. Please try again.")}finally{ze(i=>({...i,[u]:!1}))}},Kt=()=>{R(null),W(!0),vt(parseInt(r)).then(A).catch(t=>{R(t.message),console.error("Error fetching ayah data on retry:",t)}).finally(()=>W(!1))};s.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[r]),s.useEffect(()=>{const t=async u=>{u.preventDefault(),u.stopPropagation();const i=u.target.closest(".hindi-footnote-link");if(i){const f=i.getAttribute("data-footnote"),g=i.getAttribute("data-surah"),x=i.getAttribute("data-ayah");if(f&&g&&x){Ke(!0),Je(!0),ve("Loading...");try{const l=await Z.getExplanationByNumber(parseInt(g),parseInt(x),f);ve(l)}catch(l){console.error("Error fetching Hindi footnote explanation:",l),ve(`Error loading explanation: ${l.message}`)}finally{Ke(!1)}}else console.error("Missing footnote data:",{footnoteNumber:f,surahNo:g,ayahNo:x})}},a=()=>{c==="hi"&&y.length>0&&document.querySelectorAll("p[data-hindi-translation]").forEach((i,f)=>{const g=i.getAttribute("data-hindi-translation"),x=i.getAttribute("data-surah"),l=i.getAttribute("data-ayah"),h=i.innerHTML,m=g&&(g.includes('<sup class="f-note">')||g.includes("<sup>")),v=h.includes('<sup class="f-note">')||h.includes("<sup>"),C=!i.querySelector(".hindi-footnote-link");if((m||v)&&C){const $e=Z.parseHindiTranslationWithClickableExplanations(g||h,parseInt(x),parseInt(l));i.innerHTML=$e}})},n=document.createElement("style");n.textContent=`
      .hindi-footnote-link:hover {
        background-color: #0891b2 !important;
        transform: scale(1.05) !important;
      }
      .hindi-footnote-link:active {
        background-color: #0e7490 !important;
        transform: scale(0.95) !important;
      }
    `,document.head.appendChild(n),a();const o=setInterval(a,1e3);window.testHindiFootnotes=()=>{a()};const d=new MutationObserver(u=>{let i=!1;u.forEach(f=>{(f.type==="childList"||f.type==="attributes")&&f.addedNodes.forEach(g=>{g.nodeType===Node.ELEMENT_NODE&&(g.matches&&g.matches("p[data-hindi-translation]")||g.querySelector&&g.querySelector("p[data-hindi-translation]"))&&(i=!0)})}),i&&setTimeout(a,100)});return d.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hindi-translation"]}),document.addEventListener("click",t),()=>{document.removeEventListener("click",t),document.head.removeChild(n),clearInterval(o),d.disconnect()}},[c,y]),s.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const n=a.target.closest(".urdu-footnote-link");if(n){const o=n.getAttribute("data-footnote-id");n.getAttribute("data-footnote-number");const d=n.getAttribute("data-surah"),u=n.getAttribute("data-ayah");if(o&&d&&u){et(!0),Xe(!0),Ne("Loading...");try{const i=await he.getFootnoteExplanation(o);Ne(i)}catch(i){console.error("❌ Error loading Urdu footnote:",i),Ne(`Error loading explanation: ${i.message}`)}finally{et(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[c,y]),s.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const n=a.target.closest(".bangla-explanation-link");if(n){const o=n.getAttribute("data-explanation-number"),d=n.getAttribute("data-surah"),u=n.getAttribute("data-ayah");if(o&&d&&u){Ze(!0),Ye(!0),ie("Loading...");try{const i=await We.getExplanationByNumber(parseInt(d),parseInt(u),o);ie(i||"Explanation not found.")}catch(i){console.error("❌ Error loading Bangla explanation:",i),ie("Error loading explanation.")}finally{Ze(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[c,y]),s.useEffect(()=>{const t=async a=>{let n=a.target.closest(".interpretation-link");if(n&&c==="E"){a.preventDefault(),a.stopPropagation(),n.getAttribute("data-interpretation")||n.getAttribute("data-interpretation-number")||n.textContent?.trim();const o=n.getAttribute("data-surah")||r,d=n.getAttribute("data-ayah");if(o&&d){pe(parseInt(d,10)),xe(!0);return}}if(n=a.target.closest(".english-footnote-link"),n){a.preventDefault(),a.stopPropagation();const o=n.getAttribute("data-footnote-id"),d=n.getAttribute("data-surah"),u=n.getAttribute("data-ayah");if(!d||!u)return;at(!0),tt(!0),le("Loading...");try{let i="";if(o)i=await Re.getExplanation(parseInt(o,10));else{le("Explanation not available.");return}le(i||"Explanation not available.")}catch(i){console.error("Error fetching English explanation:",i),le(`Error loading explanation: ${i.message}`)}finally{at(!1)}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[c,y,r]),s.useEffect(()=>{},[oe]);const ct=()=>{const t=parseInt(r)-1;t>=1&&I(`/surah/${t}`)},dt=()=>{const t=parseInt(r)+1;t<=114&&I(`/surah/${t}`)};s.useEffect(()=>{const t=()=>{window.scrollY>300?Ue(!0):Ue(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),s.useEffect(()=>{const t=a=>{const{type:n,message:o}=a.detail;n==="success"?P(o):n==="error"&&F(o)};return window.addEventListener("showToast",t),()=>{window.removeEventListener("showToast",t)}},[P,F]);const ut=t=>{if(!t)return"";if(typeof document>"u")return t.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();const a=document.createElement("div");return a.innerHTML=t,a.querySelectorAll(".english-footnote-link, .footnote-link, sup.f-note").forEach(n=>n.remove()),(a.textContent||a.innerText||"").replace(/\s+/g," ").trim()},Yt=async(t,a,n)=>{const o=ut(a),d=`${t}
  
  "${o}"
  
  — Quran ${r}:${n}`;try{await navigator.clipboard.writeText(d),ae(n),setTimeout(()=>{ae(null)},2e3)}catch(u){console.error("Failed to copy text: ",u);try{const i=document.createElement("textarea");i.value=d,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),ae(n),setTimeout(()=>{ae(null)},2e3)}catch(i){console.error("Fallback copy failed: ",i)}}},Zt=async(t,a,n)=>{const o=ut(a),d=`${window.location.origin}/surah/${r}#verse-${n}`,u=`${t}

${o}

— Quran ${r}:${n}

Read more: ${d}`,i={title:`Quran ${r}:${n}`,text:u};try{navigator.share&&navigator.canShare&&navigator.canShare(i)?(await navigator.share(i),P("Verse shared successfully")):(await navigator.clipboard.writeText(u),P("Verse content copied to clipboard"))}catch(f){if(f.name==="AbortError")return;console.error("Error sharing verse:",f);try{await navigator.clipboard.writeText(u),P("Verse content copied to clipboard")}catch(g){console.error("Failed to copy to clipboard:",g),F("Failed to share verse. Please try again.")}}},V=()=>{p&&(p.pause(),p.currentTime=0,p.onended=null,p.onerror=null)};s.useEffect(()=>(G.current=!0,()=>{G.current=!1;try{V()}catch{}E(!1),ce(null),M(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))}),[]),s.useEffect(()=>{const t=()=>{window.scrollY>50?Ge(!0):Ge(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]);const J=(t,a=0,n=null)=>{if(!r)return;const o=n||Ee,d=y?.length||0;if(a>=o.length){t<d?J(t+1,0,n):(E(!1),ce(null),M(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})));return}E(!0);const u={quran:"qirath",translation:"translation",interpretation:"interpretation"},i=o[a],f=u[i]||"qirath";V(),M(a);const g=Ca({ayahNumber:t,surahNumber:parseInt(r),audioType:f,qariName:Ae,playbackSpeed:de,onStart:()=>{ce(t),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))},onEnd:()=>{J(t,a+1,n)},onError:()=>{J(t,a+1,n)}});rt(g)},H=(t,a=0)=>{J(t,a,null)},Xt=t=>{if(b===t&&p){p.paused?p.play().then(()=>E(!0)).catch(()=>{}):(p.pause(),E(!1));return}M(0),H(t,0)},ht=()=>{try{p&&!p.paused?(p.pause(),E(!1),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))):p&&p.paused?p.play().then(()=>{E(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))}).catch(()=>{}):(M(0),H(1,0))}catch{}};Pe.current=ht;const ea=()=>{V(),E(!1),ce(null),M(0),rt(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))};s.useEffect(()=>{Te&&p&&b&&(V(),E(!1),setTimeout(()=>{H(b,0)},100))},[Ae,Ee]),s.useEffect(()=>{p&&(p.playbackRate=de)},[p,de]);const mt=async()=>{try{qe(!0),await Y.downloadDatabase(),P("Tamil database downloaded successfully!"),await(async()=>{if(r)try{W(!0),R(null);const[a,n,o]=await Promise.all([yt(),bt(),wt()]);let u=((l,h)=>{const m=h.filter(C=>C.SuraId===parseInt(l));return m.length===0?7:Math.max(...m.map(C=>C.ayato))})(r,o||[]);if(u===7&&a&&Array.isArray(a)){const l=a.find(h=>h.id===parseInt(r));l&&l.ayahs&&(u=l.ayahs)}const i=await Y.getSurahTranslations(parseInt(r),{page:1,limit:jt}),f=Array.isArray(i?.translations)?i.translations:[];if(f.length>0)A(f),setTamilPagination(i?.pagination||null);else{const l=Array.from({length:u},(h,m)=>({number:m+1,ArabicText:"",Translation:`Tamil translation not available for verse ${m+1}`}));A(l),setTamilPagination(null)}try{const l=await Be(parseInt(r)),h=Array.isArray(l?.verses)?l.verses:Array.isArray(l)?l:[];$(h)}catch(l){console.error("Error fetching Arabic verses:",l),$([])}const g=a.find(l=>l.id===parseInt(r)),x=n.find(l=>l.number===parseInt(r));ye(g?{arabic:g.arabic,number:g.id,type:x?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(a){R(a.message),console.error("Error fetching surah data:",a)}finally{W(!1)}})()}catch(t){console.error("Error downloading Tamil database:",t),F("Failed to download Tamil database. Please try again.")}finally{qe(!1)}};if(N)return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-48 mx-auto mb-4 relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})}),e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-32 mx-auto relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})})]}),e.jsx(kt,{count:5})]})});if(Ve)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load Surah data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:Ve}),e.jsx("button",{onClick:Kt,className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})});const gt=Q?.arabic||(r?`Surah ${r}`:"Surah"),ta=Na(r,gt),ft=r?String(r):"",aa=ft==="1"||ft==="2"?"font-normal":"font-semibold";return e.jsxs("div",{children:[e.jsx(va,{toasts:Nt,removeToast:St}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-outfit transition-colors duration-300",children:[e.jsx("div",{className:`sticky top-0 z-40 glass border-b border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 ${ge||fe||oe||je||ke||Se?"hidden":""}`,children:e.jsx("div",{className:"container-responsive py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center relative",children:[e.jsxs("div",{className:"sm:hidden w-full flex items-center justify-between mb-2",children:[te&&e.jsxs("button",{onClick:()=>I("/juz"),className:"flex items-center text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors",children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),"Juz ",te]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Qe?"max-h-0 opacity-0 m-0":"max-h-40 opacity-100 mb-2 sm:mb-4"}`,children:e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-arabic text-center text-gray-800 dark:text-white drop-shadow-sm ${aa}`,style:{fontFamily:Sa},"aria-label":gt,children:ta})}),parseInt(r)!==1&&parseInt(r)!==9&&e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Qe?"max-h-0 opacity-0 m-0":"max-h-20 opacity-90 hover:opacity-100 mb-4 sm:mb-6"}`,children:e.jsx("img",{src:_==="dark"?pa:ya,alt:"Bismillah",className:"h-8 sm:h-10 md:h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"w-full flex items-center justify-between mt-2",children:[e.jsx("div",{className:"hidden sm:block w-1/3",children:te&&e.jsxs("button",{onClick:()=>I("/juz"),className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors group",children:[e.jsx(me,{className:"w-4 h-4 mr-1 group-hover:-translate-x-1 transition-transform"}),"Back to Juz ",te]})}),e.jsx("div",{className:"w-full sm:w-1/3 flex justify-center",children:(c==="mal"||c==="E")&&e.jsx(ia,{options:["Ayah Wise","Block Wise"],value:S,onChange:t=>L(t)})}),e.jsx("div",{className:"hidden sm:flex w-1/3 justify-end",children:c==="ta"&&!Y.isDatabaseDownloaded()&&e.jsx("button",{onClick:mt,disabled:ne,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors flex items-center",children:ne?"Downloading...":"Download Tamil DB"})})]}),c==="ta"&&!Y.isDatabaseDownloaded()&&e.jsx("div",{className:"sm:hidden mt-2 w-full flex justify-center",children:e.jsx("button",{onClick:mt,disabled:ne,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-4 py-2 rounded-full w-full text-center",children:ne?"Downloading...":"Download Tamil Database"})})]})})}),e.jsx("div",{className:"container-responsive py-6 sm:py-8 space-y-4 sm:space-y-6",children:N&&y.length===0?e.jsx(kt,{count:5}):!N&&y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(xt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"No verses found for this Surah."})]}):!N&&y.length>0?e.jsxs(e.Fragment,{children:[y.map((t,a)=>{const n=se[a],o=n?.text_uthmani||"",d=se.find(h=>h.verse_key===`${r}:${a+1}`),u=o||d?.text_uthmani||"",f=Vt(u)||u,g=b===a+1,x=g&&Te,l=`
                    relative group rounded-2xl transition-all duration-300 overflow-hidden
                    ${g?"bg-teal-50/50 dark:bg-teal-900/10 border-teal-200 dark:border-teal-800 shadow-md ring-1 ring-teal-100 dark:ring-teal-900":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:shadow-card hover:border-gray-200 dark:hover:border-gray-600"}
                  `;return e.jsxs("div",{id:`verse-${a+1}`,className:l,children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-gray-50 dark:bg-gray-700/50 px-3 py-1.5 rounded-br-xl border-b border-r border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400 z-10",children:[r,":",a+1]}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"w-full mb-6 sm:mb-8 text-right",dir:"rtl",children:e.jsxs("p",{className:`leading-[2.2] ${g?"text-primary dark:text-primary-light":"text-gray-800 dark:text-gray-100"}`,style:{fontFamily:z,fontSize:`${q}px`},children:[f," ",e.jsxs("span",{className:"inline-block mx-1 text-gray-400 dark:text-gray-500 font-arabic text-[0.8em]",children:["﴿",Ht(n?.verse_number||a+1),"﴾"]})]})}),e.jsx("div",{className:"w-full text-left mb-6 relative",children:e.jsx("div",{className:`prose dark:prose-invert max-w-none ${g?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:c==="hi"?e.jsx("div",{"data-hindi-translation":t.Translation,"data-surah":r,"data-ayah":t.number||a+1,className:"font-hindi leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:Z.parseHindiTranslationWithClickableExplanations(t.Translation||"",parseInt(r),t.number||a+1)}}):c==="ur"?e.jsx("div",{className:"font-urdu leading-relaxed text-right",dir:"rtl",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):c==="bn"?e.jsx("div",{className:"font-bengali leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):c==="ta"?e.jsx("div",{className:"font-tamil leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):c==="mal"?e.jsx("div",{className:"font-malayalam leading-relaxed",style:{fontSize:`${w}px`},dangerouslySetInnerHTML:{__html:t.Translation}}):e.jsx("div",{className:"font-poppins leading-relaxed",style:{fontSize:`${w}px`},"data-footnote-context":"ayahwise",dangerouslySetInnerHTML:{__html:t.Translation}})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),Xt(a+1)},className:`icon-btn ${x?"text-primary bg-primary/10":""}`,title:x?"Pause":"Play",children:x?e.jsxs("div",{className:"flex gap-0.5 h-3 items-end",children:[e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_0.6s_ease-in-out_infinite]"}),e.jsx("span",{className:"w-0.5 h-2/3 bg-current animate-[pulse_0.8s_ease-in-out_infinite_0.1s]"}),e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_1s_ease-in-out_infinite_0.2s]"})]}):e.jsx(la,{className:"w-5 h-5"})}),c!=="ta"&&e.jsx("button",{onClick:h=>{h.stopPropagation(),Gt(a+1)},className:"icon-btn group",title:"Interpretation",children:e.jsx(xt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:h=>{h.stopPropagation(),zt(a+1,h)},className:"icon-btn group",title:"Word by Word",children:e.jsx(ba,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),Yt(u,t.Translation,a+1)},className:"icon-btn",title:"Copy",children:At===a+1?e.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied"}):e.jsx(ca,{className:"w-5 h-5"})}),e.jsx("button",{onClick:h=>Jt(h,a,u,t.Translation),disabled:He[`${r}:${a+1}`],className:`icon-btn ${be.has(`${r}:${a+1}`)?"text-accent":""}`,title:"Bookmark",children:He[`${r}:${a+1}`]?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(da,{className:`w-5 h-5 ${be.has(`${r}:${a+1}`)?"fill-current":""}`})}),e.jsx("button",{onClick:h=>{h.stopPropagation(),Zt(u,t.Translation,a+1)},className:"icon-btn",title:"Share",children:e.jsx(ua,{className:"w-5 h-5"})})]})]})]})]},a)}),X.has(c)&&T?.totalItems?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-8",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Math.min(y.length,T.totalItems)," of ",T.totalItems," ayahs"]}),e.jsx("div",{ref:nt,className:"h-10 flex items-center justify-center",children:O&&e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})})]}):null]}):null}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 dark:border-gray-700 px-3 sm:px-4 lg:px-6 py-3 sm:py-4 mt-6 sm:mt-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"sm:hidden space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:ct,disabled:parseInt(r)<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg w-[173.96px] min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]`,children:[e.jsx(_e,{className:"w-3 h-3"}),e.jsx("span",{children:"Beginning of Surah"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:dt,disabled:parseInt(r)>=114,className:`w-[173.96px] flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(pt,{className:"w-3 h-3"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-3 sm:space-x-4 lg:space-x-6",children:[e.jsxs("button",{onClick:ct,disabled:parseInt(r)<=1,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(me,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg`,children:[e.jsx(_e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Beginning of Surah"})]}),e.jsxs("button",{onClick:dt,disabled:parseInt(r)>=114,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]})}),ge&&e.jsx(fa,{selectedVerse:Et,surahId:r,onClose:qt,onNavigate:Ut,onSurahChange:Qt}),fe&&e.jsx(xa,{surahId:r,verseId:Tt,onClose:Ot}),oe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hindi Explanation"}),e.jsx("button",{onClick:()=>Je(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Lt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:It})})})]})}),ke&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bangla Explanation"}),e.jsx("button",{onClick:()=>Ye(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Pt?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:Ft})})})]})}),je&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Urdu Explanation"}),e.jsx("button",{onClick:()=>Xe(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Mt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:$t})})})]})}),Se&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"English Explanation"}),e.jsx("button",{onClick:()=>tt(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:_t?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${w}px`},children:Bt})})})]})}),Ct&&e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed right-6 z-[60] bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center ${b?"bottom-32 sm:bottom-36":"bottom-6"}`,title:"Beginning of Surah","aria-label":"Beginning of Surah",children:e.jsx(_e,{className:"w-6 h-6"})}),b&&!ge&&!fe&&!oe&&!je&&!ke&&!Se&&e.jsx(ka,{audioElement:p,isPlaying:Te&&p&&!p.paused,currentAyah:b,totalAyahs:y?.length||0,surahInfo:Q,onPlayPause:ht,onStop:ea,onSkipBack:()=>{b&&b>1&&(M(0),H(b-1,0))},onSkipForward:()=>{const t=y?.length||0;b&&b<t&&(M(0),H(b+1,0))},onClose:null,selectedQari:Ae,onQariChange:t=>{Wt(t),b&&(V(),E(!1),setTimeout(()=>{H(b,0)},50))},translationLanguage:c,audioTypes:Ee,onAudioTypesChange:t=>{const a=b;Rt(t),a&&(V(),E(!1),setTimeout(()=>{J(a,0,t)},50))},playbackSpeed:de,onPlaybackSpeedChange:t=>{Dt(t)}})]})]})};export{lr as default};
