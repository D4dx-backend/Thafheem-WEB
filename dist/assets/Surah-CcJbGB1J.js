import{u as nt,g as ot,d as it,a as lt,b as ct,r as s,n as dt,j as e,T as ut,B as pa,P as ht,C as mt,o as gt,p as ft,q as ya,t as ba,v as wa,w as va,f as ka,x as ja,y as Z}from"./index-DwV6Sgdl.js";import{W as xt,A as pt}from"./WordByWord-Bt_DhbBw.js";import{V as Na,D as yt,B as bt,A as $e}from"./LoadingSkeleton-C2albd6H.js";import{W as wt}from"./WordByWordIcon-Bl8OnoDL.js";import{u as vt,T as kt}from"./Toast-BkkzXe9J.js";import X from"./tamilTranslationService-CILKoxG5.js";import ee from"./hindiTranslationService-BzIxfkHD.js";import Be from"./urduTranslationService-BOrLzMVt.js";import Me from"./banglaTranslationService-CL6dPNsx.js";import _e from"./englishTranslationService-DXza466L.js";import jt from"./StickyAudioPlayer-DWtKBTPn.js";import{s as Nt}from"./readingProgressService-DFoY0i0J.js";import{g as St,s as Tt}from"./surahNameUtils-CNmXwDjY.js";import{C as ge}from"./chevron-left-CUJCTrI5.js";import"./tamilWordByWordService-SO7jYcnK.js";import"./hindiWordByWordService-0Fk5bvry.js";import"./banglaWordByWordService-Bv-0rA99.js";import"./apiService-BdQWyFVk.js";import"./volume-x-DRoqbppe.js";import"./volume-2-BlDcEo1O.js";import"./skip-forward-D1qqYM77.js";import"./surahNameUnicodes-C_pntk6C.js";const Et={"al-ghamidi":"G","al-afasy":"A","al-hudaify":"H"};function At({ayahNumber:q,surahNumber:Q,audioType:k="qirath",qariName:c="al-afasy"}){const R=String(Q).padStart(3,"0"),A=String(q).padStart(3,"0");if(k==="translation")return`https://old.thafheem.net/audio/translation/T${R}_${A}.ogg`;if(k==="interpretation")return`https://old.thafheem.net/audio/interpretation/I${R}_${A}.ogg`;const j=`Q${Et[c]||"A"}`;return`https://old.thafheem.net/audio/qirath/${c}/${j}${R}_${A}.ogg`}function Ct({ayahNumber:q,surahNumber:Q,audioType:k="qirath",qariName:c="al-afasy",playbackSpeed:R=1,onStart:A,onEnd:P,onError:j}){const N=At({ayahNumber:q,surahNumber:Q,audioType:k,qariName:c}),r=new Audio(N);return r.preload="none",r.playbackRate=R,r.onplay=()=>{typeof A=="function"&&A()},typeof P=="function"&&(r.onended=P),typeof j=="function"&&(r.onerror=j),r.play().catch(L=>{typeof j=="function"&&j(L)}),r}const Sa=20,Ta=25,nr=()=>{const{quranFont:q,fontSize:Q,translationFontSize:k,translationLanguage:c,theme:R,viewType:A,setViewType:P}=nt(),j=c==="mal"||c==="E",{user:N}=ot(),{surahId:r}=it(),L=lt(),ae=ct(),{pathname:We}=ae,{toasts:Ea,removeToast:Aa,showSuccess:B,showError:C}=vt();s.useCallback(()=>{j&&P("Block Wise")},[P,j]),s.useEffect(()=>{if(!j&&A!=="Ayah Wise"){P("Ayah Wise");return}if(j&&A==="Block Wise"){const a=`/blockwise/${r}`;We!==a&&L(a)}},[A,j,r,L,We,P]);const te=new URLSearchParams(ae.search).get("fromJuz"),[Ca,re]=s.useState(null),[fe,se]=s.useState(!1),[Ia,J]=s.useState(null),[xe,Re]=s.useState(!1),[La,De]=s.useState(null),[w,p]=s.useState([]),[ne,pe]=s.useState([]),[K,ye]=s.useState(null),[S,D]=s.useState(!0),[It,Lt]=s.useState(0),[He,H]=s.useState(null),[be,we]=s.useState(new Set),[Ve,Ue]=s.useState({}),[oe,ze]=s.useState(!1),[Fa,qe]=s.useState(!1),[Qe,Je]=s.useState(!1),[Ft,Ke]=s.useState(!1),[Pt,$t]=s.useState(!1),[ie,Oe]=s.useState(!1),[Pa,ve]=s.useState(""),[$a,Ge]=s.useState(!1),[ke,Ye]=s.useState(!1),[Ba,le]=s.useState(""),[Ma,Ze]=s.useState(!1),[je,Xe]=s.useState(!1),[_a,Ne]=s.useState(""),[Wa,ea]=s.useState(!1),[Se,aa]=s.useState(!1),[Ra,Te]=s.useState(""),[Da,ta]=s.useState(!1),[v,ce]=s.useState(null),[Ee,Ha]=s.useState("al-afasy"),[Ae,Va]=s.useState(["quran"]),[de,Ua]=s.useState(1),[Bt,M]=s.useState(0),[y,ra]=s.useState(null),[Ce,I]=s.useState(!1),_=s.useRef(null),O=s.useRef(!1),[F,Ie]=s.useState(0),[$,ue]=s.useState(0),[G,sa]=s.useState(!1),na=s.useRef(null),[V,W]=s.useState(null),[oa,ia]=s.useState(!1),{getAyahViewCache:la,setAyahViewCache:Le}=dt(),Fe=s.useRef(!1);s.useEffect(()=>{Fe.current=!1},[r,c]),s.useEffect(()=>{if(!r)return;const a=la?.(r,c);a&&(Fe.current=!0,p(a.ayahData||[]),pe(a.arabicVerses||[]),ye(a.surahInfo||null),W(a.tamilPagination||null),Ie(a.totalUrduVerses||0),ue(a.urduLoadedCount||0),D(!1))},[r,c,la]),s.useEffect(()=>{r&&Nt({surahId:r,viewType:"surah",path:`/surah/${r}`})},[r]);const za=a=>{const t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return a.toString().split("").map(o=>t[o]||o).join("")},he=s.useCallback(async(a,t,o=!1)=>{if(!r||c!=="ur")return;const i=parseInt(r,10);if(!Number.isNaN(i)){sa(!0);try{const h=Array.from({length:t-a+1},(n,g)=>a+g),u=await Promise.all(h.map(async n=>{const g=await Be.getAyahTranslation(i,n)||"",d=Be.parseUrduTranslationWithClickableFootnotes(g,i,n);return{number:n,ArabicText:"",Translation:d,RawTranslation:g}}));p(n=>o?u:[...n,...u]),ue(t)}catch(h){throw o&&p([]),console.error(`Error fetching Urdu translations for ayahs ${a}-${t}:`,h),h}finally{sa(!1)}}},[r,c]),ca=s.useCallback(async()=>{if(c!=="ur"||G||$>=F)return;const a=$+1,t=Math.min($+Sa,F);try{await he(a,t)}catch{C?.("Failed to load more Urdu ayahs. Please try again.")}},[G,he,F,C,$,c]),me=s.useCallback(async({page:a=1,replace:t=!1,trackLoading:o=!0}={})=>{if(!r||c!=="ta")return null;const i=parseInt(r,10);if(Number.isNaN(i))return null;o&&ia(!0);try{const h=await X.getSurahTranslations(i,{page:a,limit:Ta}),u=Array.isArray(h?.translations)?h.translations:[],n=h?.pagination||null;return O.current&&(t?p(u):u.length>0&&p(g=>[...g,...u]),W(n)),{items:u,pagination:n}}catch(h){throw t&&O.current&&(p([]),W(null)),h}finally{o&&O.current&&ia(!1)}},[r,c]);s.useCallback(async()=>{if(c!=="ta"||oa||!V||!V.hasNext)return;const a=(V.page||1)+1;try{await me({page:a,replace:!1})}catch(t){console.error("Error loading more Tamil translations:",t),C?.("Failed to load more Tamil ayahs. Please try again.")}},[c,V,oa,me,C]),s.useEffect(()=>{if(c!=="ur")return;const a=na.current;if(!a)return;const t=new IntersectionObserver(o=>{o[0]?.isIntersecting&&!G&&$<F&&ca()},{root:null,rootMargin:"200px",threshold:.1});return t.observe(a),()=>{t.disconnect()}},[ca,G,F,c,$]);const Pe=s.useRef(null);s.useEffect(()=>{const a=()=>{Pe.current&&Pe.current()};return window.addEventListener("playAudio",a),()=>{window.removeEventListener("playAudio",a)}},[]),s.useEffect(()=>{const t=new URLSearchParams(ae.search).get("wordByWord");if(t){const o=parseInt(t)||1,i=setTimeout(()=>{J(o),se(!0);const h=new URL(window.location);h.searchParams.delete("wordByWord"),window.history.replaceState({},"",h.pathname)},500);return()=>clearTimeout(i)}},[ae.search,S]),s.useEffect(()=>{if(c==="hi"&&w.length>0&&!S){const a=[200,500,1e3,2e3].map(t=>setTimeout(()=>{document.querySelectorAll("p[data-hindi-translation]").forEach((i,h)=>{const u=i.getAttribute("data-hindi-translation"),n=i.getAttribute("data-surah"),g=i.getAttribute("data-ayah"),d=i.innerHTML,f=u&&(u.includes('<sup class="f-note">')||u.includes("<sup>")),T=d.includes('<sup class="f-note">')||d.includes("<sup>"),l=!i.querySelector(".hindi-footnote-link");if((f||T)&&l){const m=ee.parseHindiTranslationWithClickableExplanations(u||d,parseInt(n),parseInt(g));i.innerHTML=m}})},t));return()=>a.forEach(t=>clearTimeout(t))}},[c,w,S]),s.useEffect(()=>()=>{_.current&&(_.current.pause(),_.current.src="",_.current.currentTime=0,_.current.onended=null,_.current.onerror=null,_.current=null)},[]),s.useEffect(()=>{_.current=y},[y]),s.useEffect(()=>{let a=!0,t=new AbortController;return(async()=>{if(!(!r||Fe.current))try{if(!a)return;D(!0),H(null);const[i,h,u,n]=await Promise.all([ba(),wa(),va(parseInt(r)),ka()]);if(!a)return;let d=((l,m)=>{const x=m.filter(E=>E.SuraId===parseInt(l));return x.length===0?7:Math.max(...x.map(E=>E.ayato))})(r,n||[]);if(d===7&&i&&Array.isArray(i)){const l=i.find(m=>m.id===parseInt(r));l&&l.ayahs&&(d=l.ayahs)}if(!a)return;if(c!=="ur"&&(Ie(0),ue(0)),c==="ta")try{W(null);const l=await me({page:1,replace:!0,trackLoading:!1});if(!a)return;if(!(l?.items||[]).length){const x=Array.from({length:d},(b,E)=>({number:E+1,ArabicText:"",Translation:`Tamil translation not available for verse ${E+1}`}));p(x),W(null)}}catch(l){if(!a)return;l.name!=="AbortError"&&console.error("Error fetching Tamil translations:",l);const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:"Tamil translation service unavailable. Please try again later."}));p(m),W(null)}else if(c==="hi")try{const l=await ee.getSurahTranslations(parseInt(r));if(!a)return;l&&l.length>0?p(l):(console.warn("No Hindi translations found"),p([]))}catch(l){if(!a)return;l.name!=="AbortError"&&console.error("Error fetching Hindi translations:",l);const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:"Hindi translation service unavailable. Please try again later."}));p(m)}else if(c==="ur")try{if(!a)return;if(Ie(d),ue(0),p([]),d>0){const l=Math.min(Sa,d);if(await he(1,l,!0),!a)return}}catch(l){if(!a)return;l.name!=="AbortError"&&console.error("Error fetching Urdu translations:",l);const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:"Urdu translation service unavailable. Please try again later."}));p(m)}else if(c==="bn")try{const l=await Me.getSurahTranslations(parseInt(r));if(!a)return;if(l&&l.length>0){const m=l.map(x=>({...x,Translation:Me.parseBanglaTranslationWithClickableExplanations(x.Translation,parseInt(r),x.number)}));p(m)}else{const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:`Bangla translation not available for verse ${b+1}`}));p(m)}}catch(l){if(!a)return;l.name!=="AbortError"&&console.error("Error fetching Bangla translations:",l);const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:"Bangla translation service unavailable. Please try again later."}));p(m)}else if(c==="E")try{const l=await _e.getSurahTranslations(parseInt(r));if(!a)return;if(l&&l.length>0){const m=l.map(x=>({...x,Translation:_e.parseEnglishTranslationWithClickableFootnotes(x.Translation,parseInt(r),x.number),interpretationCount:0}));p(m)}else{const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:`English translation not available for verse ${b+1}`}));p(m)}}catch(l){if(!a)return;l.name!=="AbortError"&&console.error("Error fetching English translations:",l);const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:"English translation service unavailable. Please try again later."}));p(m)}else{const l=await ja(parseInt(r));if(!a)return;if(!l||!Array.isArray(l)||l.length===0){const m=Array.from({length:d},(x,b)=>({number:b+1,ArabicText:"",Translation:`Translation not available for verse ${b+1}. The API server may be temporarily unavailable. Please try again later.`}));p(m)}else{const m=l.map(x=>({number:x.contiayano||0,ArabicText:"",Translation:(x.AudioText||"").replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim()}));p(m)}}if(!a)return;pe(u||[]);const f=i.find(l=>l.id===parseInt(r)),T=h.find(l=>l.number===parseInt(r));ye(f?{arabic:f.arabic,number:f.id,type:T?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(i){a&&i.name!=="AbortError"&&(H(i.message),console.error("Error fetching surah data:",i))}finally{a&&D(!1)}})(),()=>{a=!1,t.abort()}},[r,c,he,me]),s.useEffect(()=>{!r||S||!Le||!Array.isArray(w)||w.length===0||Le(r,c,{ayahData:w,arabicVerses:ne,surahInfo:K,tamilPagination:V,totalUrduVerses:F,urduLoadedCount:$,__meta:{isComplete:!0}})},[r,c,w,ne,K,V,F,$,S,Le]),s.useEffect(()=>{(async()=>{if(!(!N||!r))try{const t=await Z.getBookmarks(N.uid,"translation"),o=new Set(t.filter(i=>i.surahId===parseInt(r)).map(i=>`${i.surahId}:${i.verseId}`));we(o)}catch(t){console.error("Error loading bookmarks:",t)}})()},[N,r]),s.useEffect(()=>{(async()=>{if(!N||!r){Ke(!1);return}try{const t=await Z.isFavorited(N.uid,r);Ke(t)}catch(t){console.error("Error loading favorite status:",t)}})()},[N,r]),s.useEffect(()=>{const a=()=>{const t=window.location.hash;if(t&&t.startsWith("#verse-")){const o=parseInt(t.replace("#verse-",""));o&&!S&&w.length>0&&setTimeout(()=>{const i=document.getElementById(`verse-${o}`);i&&(i.scrollIntoView({behavior:"smooth",block:"center"}),i.style.backgroundColor="#fef3c7",setTimeout(()=>{i.style.backgroundColor=""},2e3))},500)}};return!S&&w.length>0&&setTimeout(a,100),window.addEventListener("hashchange",a),window.addEventListener("popstate",a),()=>{window.removeEventListener("hashchange",a),window.removeEventListener("popstate",a)}},[S,w,r]);const qa=(a,t)=>{if(t?.ctrlKey||t?.metaKey){t?.preventDefault(),t?.stopPropagation();const i=`/word-by-word/${r}/${a}`;window.open(i,"_blank","noopener,noreferrer");return}J(a),se(!0)},Qa=()=>{se(!1),J(null)},Ja=a=>{J(a)},Ka=a=>{se(!1),J(null),L(`/surah/${a}?wordByWord=1`)},Oa=async a=>{try{parseInt(r),De(a),Re(!0)}catch(t){console.error("Error opening interpretation:",t),C("Failed to load interpretation. Please try again.")}},Ga=()=>{Re(!1),De(null)},Ya=async(a,t,o,i)=>{if(a.stopPropagation(),!N){C("Please sign in to bookmark verses"),L("/sign");return}const h=t+1,u=`${r}:${h}`;try{if(Ue(n=>({...n,[u]:!0})),be.has(u)){const g=(await Z.getBookmarks(N.uid,"translation")).find(d=>d.surahId===parseInt(r)&&d.verseId===h);g&&await Z.deleteBookmark(g.id,N.uid),we(d=>{const f=new Set(d);return f.delete(u),f}),B("Bookmark removed successfully")}else await Z.addBookmark(N.uid,r,h,"translation",K?.arabic||`Surah ${r}`,`${o} - ${i}`),we(n=>new Set([...n,u])),B("Verse bookmarked successfully")}catch(n){console.error("Error managing bookmark:",n),C("Failed to manage bookmark. Please try again.")}finally{Ue(n=>({...n,[u]:!1}))}},Za=()=>{H(null),D(!0),ja(parseInt(r)).then(p).catch(a=>{H(a.message),console.error("Error fetching ayah data on retry:",a)}).finally(()=>D(!1))};s.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[r]),s.useEffect(()=>{const a=async u=>{u.preventDefault(),u.stopPropagation();const n=u.target.closest(".hindi-footnote-link");if(n){const g=n.getAttribute("data-footnote"),d=n.getAttribute("data-surah"),f=n.getAttribute("data-ayah");if(g&&d&&f){Ge(!0),Oe(!0),ve("Loading...");try{const T=await ee.getExplanationByNumber(parseInt(d),parseInt(f),g);ve(T)}catch(T){console.error("Error fetching Hindi footnote explanation:",T),ve(`Error loading explanation: ${T.message}`)}finally{Ge(!1)}}else console.error("Missing footnote data:",{footnoteNumber:g,surahNo:d,ayahNo:f})}},t=()=>{c==="hi"&&w.length>0&&document.querySelectorAll("p[data-hindi-translation]").forEach((n,g)=>{const d=n.getAttribute("data-hindi-translation"),f=n.getAttribute("data-surah"),T=n.getAttribute("data-ayah"),l=n.innerHTML,m=d&&(d.includes('<sup class="f-note">')||d.includes("<sup>")),x=l.includes('<sup class="f-note">')||l.includes("<sup>"),b=!n.querySelector(".hindi-footnote-link");if((m||x)&&b){const E=ee.parseHindiTranslationWithClickableExplanations(d||l,parseInt(f),parseInt(T));n.innerHTML=E}})},o=document.createElement("style");o.textContent=`
      .hindi-footnote-link:hover {
        background-color: #0891b2 !important;
        transform: scale(1.05) !important;
      }
      .hindi-footnote-link:active {
        background-color: #0e7490 !important;
        transform: scale(0.95) !important;
      }
    `,document.head.appendChild(o),t();const i=setInterval(t,1e3);window.testHindiFootnotes=()=>{t()};const h=new MutationObserver(u=>{let n=!1;u.forEach(g=>{(g.type==="childList"||g.type==="attributes")&&g.addedNodes.forEach(d=>{d.nodeType===Node.ELEMENT_NODE&&(d.matches&&d.matches("p[data-hindi-translation]")||d.querySelector&&d.querySelector("p[data-hindi-translation]"))&&(n=!0)})}),n&&setTimeout(t,100)});return h.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hindi-translation"]}),document.addEventListener("click",a),()=>{document.removeEventListener("click",a),document.head.removeChild(o),clearInterval(i),h.disconnect()}},[c,w]),s.useEffect(()=>{const a=async t=>{t.preventDefault(),t.stopPropagation();const o=t.target.closest(".urdu-footnote-link");if(o){const i=o.getAttribute("data-footnote-id");o.getAttribute("data-footnote-number");const h=o.getAttribute("data-surah"),u=o.getAttribute("data-ayah");if(i&&h&&u){ea(!0),Xe(!0),Ne("Loading...");try{const n=await Be.getFootnoteExplanation(i);Ne(n)}catch(n){console.error("❌ Error loading Urdu footnote:",n),Ne(`Error loading explanation: ${n.message}`)}finally{ea(!1)}}}};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[c,w]),s.useEffect(()=>{const a=async t=>{t.preventDefault(),t.stopPropagation();const o=t.target.closest(".bangla-explanation-link");if(o){const i=o.getAttribute("data-explanation-number"),h=o.getAttribute("data-surah"),u=o.getAttribute("data-ayah");if(i&&h&&u){Ze(!0),Ye(!0),le("Loading...");try{const n=await Me.getExplanationByNumber(parseInt(h),parseInt(u),i);le(n||"Explanation not found.")}catch(n){console.error("❌ Error loading Bangla explanation:",n),le("Error loading explanation.")}finally{Ze(!1)}}}};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[c,w]),s.useEffect(()=>{const a=async t=>{t.preventDefault(),t.stopPropagation();const o=t.target.closest(".english-footnote-link");if(o){const i=o.getAttribute("data-footnote-id"),h=o.getAttribute("data-surah"),u=o.getAttribute("data-ayah");if(i&&h&&u){ta(!0),aa(!0),Te("Loading...");try{const n=await _e.getExplanation(parseInt(i));Te(n)}catch(n){console.error("Error fetching English footnote explanation:",n),Te(`Error loading explanation: ${n.message}`)}finally{ta(!1)}}}};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[c,w]),s.useEffect(()=>{},[ie]);const da=()=>{const a=parseInt(r)-1;a>=1&&L(`/surah/${a}`)},ua=()=>{const a=parseInt(r)+1;a<=114&&L(`/surah/${a}`)};s.useEffect(()=>{const a=()=>{window.scrollY>300?qe(!0):qe(!1)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),s.useEffect(()=>{const a=t=>{const{type:o,message:i}=t.detail;o==="success"?B(i):o==="error"&&C(i)};return window.addEventListener("showToast",a),()=>{window.removeEventListener("showToast",a)}},[B,C]);const ha=a=>{if(!a)return"";if(typeof document>"u")return a.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();const t=document.createElement("div");return t.innerHTML=a,t.querySelectorAll(".english-footnote-link, .footnote-link, sup.f-note").forEach(o=>o.remove()),(t.textContent||t.innerText||"").replace(/\s+/g," ").trim()},Xa=async(a,t,o)=>{const i=ha(t),h=`${a}
  
  "${i}"
  
  — Quran ${r}:${o}`;try{await navigator.clipboard.writeText(h),re(o),setTimeout(()=>{re(null)},2e3)}catch(u){console.error("Failed to copy text: ",u);try{const n=document.createElement("textarea");n.value=h,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),re(o),setTimeout(()=>{re(null)},2e3)}catch(n){console.error("Fallback copy failed: ",n)}}},et=async(a,t,o)=>{const i=ha(t),h=`${window.location.origin}/surah/${r}#verse-${o}`,u=`${a}

${i}

— Quran ${r}:${o}

Read more: ${h}`,n={title:`Quran ${r}:${o}`,text:u};try{navigator.share&&navigator.canShare&&navigator.canShare(n)?(await navigator.share(n),B("Verse shared successfully")):(await navigator.clipboard.writeText(u),B("Verse content copied to clipboard"))}catch(g){if(g.name==="AbortError")return;console.error("Error sharing verse:",g);try{await navigator.clipboard.writeText(u),B("Verse content copied to clipboard")}catch(d){console.error("Failed to copy to clipboard:",d),C("Failed to share verse. Please try again.")}}},U=()=>{y&&(y.pause(),y.currentTime=0,y.onended=null,y.onerror=null)};s.useEffect(()=>(O.current=!0,()=>{O.current=!1;try{U()}catch{}I(!1),ce(null),M(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))}),[]),s.useEffect(()=>{const a=()=>{window.scrollY>50?Je(!0):Je(!1)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const Y=(a,t=0,o=null)=>{if(!r)return;const i=o||Ae,h=w?.length||0;if(t>=i.length){a<h?Y(a+1,0,o):(I(!1),ce(null),M(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})));return}I(!0);const u={quran:"qirath",translation:"translation",interpretation:"interpretation"},n=i[t],g=u[n]||"qirath";U(),M(t);const d=Ct({ayahNumber:a,surahNumber:parseInt(r),audioType:g,qariName:Ee,playbackSpeed:de,onStart:()=>{ce(a),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))},onEnd:()=>{Y(a,t+1,o)},onError:()=>{Y(a,t+1,o)}});ra(d)},z=(a,t=0)=>{Y(a,t,null)},at=a=>{if(v===a&&y){y.paused?y.play().then(()=>I(!0)).catch(()=>{}):(y.pause(),I(!1));return}M(0),z(a,0)},ma=()=>{try{y&&!y.paused?(y.pause(),I(!1),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))):y&&y.paused?y.play().then(()=>{I(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))}).catch(()=>{}):(M(0),z(1,0))}catch{}};Pe.current=ma;const tt=()=>{U(),I(!1),ce(null),M(0),ra(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))};s.useEffect(()=>{Ce&&y&&v&&(U(),I(!1),setTimeout(()=>{z(v,0)},100))},[Ee,Ae]),s.useEffect(()=>{y&&(y.playbackRate=de)},[y,de]);const ga=async()=>{try{ze(!0),await X.downloadDatabase(),B("Tamil database downloaded successfully!"),await(async()=>{if(r)try{D(!0),H(null);const[t,o,i,h]=await Promise.all([ba(),wa(),va(parseInt(r)),ka()]);let n=((l,m)=>{const x=m.filter(E=>E.SuraId===parseInt(l));return x.length===0?7:Math.max(...x.map(E=>E.ayato))})(r,h||[]);if(n===7&&t&&Array.isArray(t)){const l=t.find(m=>m.id===parseInt(r));l&&l.ayahs&&(n=l.ayahs)}const g=await X.getSurahTranslations(parseInt(r),{page:1,limit:Ta}),d=Array.isArray(g?.translations)?g.translations:[];if(d.length>0)p(d),W(g?.pagination||null);else{const l=Array.from({length:n},(m,x)=>({number:x+1,ArabicText:"",Translation:`Tamil translation not available for verse ${x+1}`}));p(l),W(null)}pe(i||[]);const f=t.find(l=>l.id===parseInt(r)),T=o.find(l=>l.number===parseInt(r));ye(f?{arabic:f.arabic,number:f.id,type:T?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(r),type:"Makki"})}catch(t){H(t.message),console.error("Error fetching surah data:",t)}finally{D(!1)}})()}catch(a){console.error("Error downloading Tamil database:",a),C("Failed to download Tamil database. Please try again.")}finally{ze(!1)}};if(S)return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-48 mx-auto mb-4 relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})}),e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-32 mx-auto relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})})]}),e.jsx(Na,{count:5})]})});if(He)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load Surah data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:He}),e.jsx("button",{onClick:Za,className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})});const fa=K?.arabic||(r?`Surah ${r}`:"Surah"),rt=St(r,fa),xa=r?String(r):"",st=xa==="1"||xa==="2"?"font-normal":"font-semibold";return e.jsxs("div",{children:[e.jsx(kt,{toasts:Ea,removeToast:Aa}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-outfit transition-colors duration-300",children:[e.jsx("div",{className:`sticky top-0 z-40 glass border-b border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 ${fe||xe||ie||je||ke||Se?"hidden":""}`,children:e.jsx("div",{className:"container-responsive py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center relative",children:[e.jsxs("div",{className:"sm:hidden w-full flex items-center justify-between mb-2",children:[te&&e.jsxs("button",{onClick:()=>L("/juz"),className:"flex items-center text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors",children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"Juz ",te]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Qe?"max-h-0 opacity-0 m-0":"max-h-40 opacity-100 mb-2 sm:mb-4"}`,children:e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-arabic text-center text-gray-800 dark:text-white drop-shadow-sm ${st}`,style:{fontFamily:Tt},"aria-label":fa,children:rt})}),parseInt(r)!==1&&parseInt(r)!==9&&e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Qe?"max-h-0 opacity-0 m-0":"max-h-20 opacity-90 hover:opacity-100 mb-4 sm:mb-6"}`,children:e.jsx("img",{src:R==="dark"?yt:bt,alt:"Bismillah",className:"h-8 sm:h-10 md:h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"w-full flex items-center justify-between mt-2",children:[e.jsx("div",{className:"hidden sm:block w-1/3",children:te&&e.jsxs("button",{onClick:()=>L("/juz"),className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors group",children:[e.jsx(ge,{className:"w-4 h-4 mr-1 group-hover:-translate-x-1 transition-transform"}),"Back to Juz ",te]})}),e.jsx("div",{className:"w-full sm:w-1/3 flex justify-center",children:(c==="mal"||c==="E")&&e.jsx(ut,{options:["Ayah Wise","Block Wise"],value:A,onChange:a=>P(a)})}),e.jsx("div",{className:"hidden sm:flex w-1/3 justify-end",children:c==="ta"&&!X.isDatabaseDownloaded()&&e.jsx("button",{onClick:ga,disabled:oe,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors flex items-center",children:oe?"Downloading...":"Download Tamil DB"})})]}),c==="ta"&&!X.isDatabaseDownloaded()&&e.jsx("div",{className:"sm:hidden mt-2 w-full flex justify-center",children:e.jsx("button",{onClick:ga,disabled:oe,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-4 py-2 rounded-full w-full text-center",children:oe?"Downloading...":"Download Tamil Database"})})]})})}),e.jsx("div",{className:"container-responsive py-6 sm:py-8 space-y-4 sm:space-y-6",children:S&&w.length===0?e.jsx(Na,{count:5}):!S&&w.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(pa,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"No verses found for this Surah."})]}):!S&&w.length>0?e.jsxs(e.Fragment,{children:[w.map((a,t)=>{const o=ne[t],i=o?.text_uthmani||"",h=ne.find(f=>f.verse_key===`${r}:${t+1}`),u=i||h?.text_uthmani||"",n=v===t+1,g=n&&Ce,d=`
                    relative group rounded-2xl transition-all duration-300 overflow-hidden
                    ${n?"bg-teal-50/50 dark:bg-teal-900/10 border-teal-200 dark:border-teal-800 shadow-md ring-1 ring-teal-100 dark:ring-teal-900":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:shadow-card hover:border-gray-200 dark:hover:border-gray-600"}
                  `;return e.jsxs("div",{id:`verse-${t+1}`,className:d,children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-gray-50 dark:bg-gray-700/50 px-3 py-1.5 rounded-br-xl border-b border-r border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400 z-10",children:[r,":",t+1]}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"w-full mb-6 sm:mb-8 text-right",dir:"rtl",children:e.jsxs("p",{className:`leading-[2.2] ${n?"text-primary dark:text-primary-light":"text-gray-800 dark:text-gray-100"}`,style:{fontFamily:q,fontSize:`${Q}px`},children:[u," ",e.jsxs("span",{className:"inline-block mx-1 text-gray-400 dark:text-gray-500 font-arabic text-[0.8em]",children:["﴿",za(o?.verse_number||t+1),"﴾"]})]})}),e.jsx("div",{className:"w-full text-left mb-6 relative",children:e.jsx("div",{className:`prose dark:prose-invert max-w-none ${n?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:c==="hi"?e.jsx("div",{"data-hindi-translation":a.Translation,"data-surah":r,"data-ayah":a.number||t+1,className:"font-hindi leading-relaxed",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:ee.parseHindiTranslationWithClickableExplanations(a.Translation||"",parseInt(r),a.number||t+1)}}):c==="ur"?e.jsx("div",{className:"font-urdu leading-relaxed text-right",dir:"rtl",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):c==="bn"?e.jsx("div",{className:"font-bengali leading-relaxed",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):c==="ta"?e.jsx("div",{className:"font-tamil leading-relaxed",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):c==="mal"?e.jsx("div",{className:"font-malayalam leading-relaxed",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):e.jsx("div",{className:"font-poppins leading-relaxed",style:{fontSize:`${k}px`},dangerouslySetInnerHTML:{__html:a.Translation}})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),at(t+1)},className:`icon-btn ${g?"text-primary bg-primary/10":""}`,title:g?"Pause":"Play",children:g?e.jsxs("div",{className:"flex gap-0.5 h-3 items-end",children:[e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_0.6s_ease-in-out_infinite]"}),e.jsx("span",{className:"w-0.5 h-2/3 bg-current animate-[pulse_0.8s_ease-in-out_infinite_0.1s]"}),e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_1s_ease-in-out_infinite_0.2s]"})]}):e.jsx(ht,{className:"w-5 h-5"})}),c!=="ta"&&e.jsx("button",{onClick:f=>{f.stopPropagation(),Oa(t+1)},className:"icon-btn group",title:"Interpretation",children:e.jsx(pa,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:f=>{f.stopPropagation(),qa(t+1,f)},className:"icon-btn group",title:"Word by Word",children:e.jsx(wt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),Xa(u,a.Translation,t+1)},className:"icon-btn",title:"Copy",children:Ca===t+1?e.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied"}):e.jsx(mt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:f=>Ya(f,t,u,a.Translation),disabled:Ve[`${r}:${t+1}`],className:`icon-btn ${be.has(`${r}:${t+1}`)?"text-accent":""}`,title:"Bookmark",children:Ve[`${r}:${t+1}`]?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(gt,{className:`w-5 h-5 ${be.has(`${r}:${t+1}`)?"fill-current":""}`})}),e.jsx("button",{onClick:f=>{f.stopPropagation(),et(u,a.Translation,t+1)},className:"icon-btn",title:"Share",children:e.jsx(ft,{className:"w-5 h-5"})})]})]})]})]},t)}),c==="ur"&&F>0&&e.jsxs("div",{className:"flex flex-col items-center gap-3 py-8",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Math.min($,F)," of ",F," ayahs"]}),e.jsx("div",{ref:na,className:"h-10 flex items-center justify-center",children:G&&e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})})]})]}):null}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 dark:border-gray-700 px-3 sm:px-4 lg:px-6 py-3 sm:py-4 mt-6 sm:mt-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"sm:hidden space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:da,disabled:parseInt(r)<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg w-[173.96px] min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]`,children:[e.jsx($e,{className:"w-3 h-3"}),e.jsx("span",{children:"Beginning of Surah"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:ua,disabled:parseInt(r)>=114,className:`w-[173.96px] flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(ya,{className:"w-3 h-3"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-3 sm:space-x-4 lg:space-x-6",children:[e.jsxs("button",{onClick:da,disabled:parseInt(r)<=1,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ge,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg`,children:[e.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Beginning of Surah"})]}),e.jsxs("button",{onClick:ua,disabled:parseInt(r)>=114,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(ya,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]})}),fe&&e.jsx(xt,{selectedVerse:Ia,surahId:r,onClose:Qa,onNavigate:Ja,onSurahChange:Ka}),xe&&e.jsx(pt,{surahId:r,verseId:La,onClose:Ga}),ie&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hindi Explanation"}),e.jsx("button",{onClick:()=>Oe(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:$a?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${k}px`},children:Pa})})})]})}),ke&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bangla Explanation"}),e.jsx("button",{onClick:()=>Ye(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Ma?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${k}px`},children:Ba})})})]})}),je&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Urdu Explanation"}),e.jsx("button",{onClick:()=>Xe(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Wa?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${k}px`},children:_a})})})]})}),Se&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"English Explanation"}),e.jsx("button",{onClick:()=>aa(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Da?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${k}px`},children:Ra})})})]})}),Fa&&e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed right-6 z-[60] bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center ${v?"bottom-32 sm:bottom-36":"bottom-6"}`,title:"Beginning of Surah","aria-label":"Beginning of Surah",children:e.jsx($e,{className:"w-6 h-6"})}),v&&!fe&&!xe&&!ie&&!je&&!ke&&!Se&&e.jsx(jt,{audioElement:y,isPlaying:Ce&&y&&!y.paused,currentAyah:v,totalAyahs:w?.length||0,surahInfo:K,onPlayPause:ma,onStop:tt,onSkipBack:()=>{v&&v>1&&(M(0),z(v-1,0))},onSkipForward:()=>{const a=w?.length||0;v&&v<a&&(M(0),z(v+1,0))},onClose:null,selectedQari:Ee,onQariChange:a=>{Ha(a),v&&(U(),I(!1),setTimeout(()=>{z(v,0)},50))},translationLanguage:c,audioTypes:Ae,onAudioTypesChange:a=>{const t=v;Va(a),t&&(U(),I(!1),setTimeout(()=>{Y(t,0,a)},50))},playbackSpeed:de,onPlaybackSpeedChange:a=>{Ua(a)}})]})]})};export{nr as default};
