import{i as sa,k as oa,u as ia,a as la,m as ca,n as da,o as He,j as e,T as ua,B as kt,P as ha,C as ma,p as fa,q as ga,r as St,t as jt,v as Nt,f as Et,w as At,x as le}from"./index-D0NMIq43.js";import{d as pa,u as xa,e as ya,b as o}from"./react-vendor-v5ei6ytj.js";import{W as ba,A as va}from"./WordByWord-CWAAPupz.js";import{a as Y,V as Ct,D as wa,B as ka,A as ze}from"./LoadingSkeleton-BaxG_oO1.js";import{W as Sa}from"./WordByWordIcon-DrlWBNwO.js";import{u as ja,T as Na}from"./Toast-Bf4bwsOE.js";import ce from"./tamilTranslationService-D-704-MC.js";import de from"./hindiTranslationService-CFRwMbcP.js";import ve from"./urduTranslationService-D6XDtXQ4.js";import Ue from"./banglaTranslationService-CCMvLMqe.js";import qe from"./englishTranslationService-TExHbstj.js";import Ea from"./StickyAudioPlayer-Cxr1kIJb.js";import{g as Aa,s as Ca}from"./surahNameUtils-BTvJ0ckf.js";import{u as Ta}from"./useSequentialEnglishFootnotes-B4d1JHKd.js";import{C as we}from"./chevron-left-B6PCEYk2.js";import"./tamilWordByWordService-C7rMpoKH.js";import"./apiService-Be4cmTqe.js";import"./hindiWordByWordService-BZeSq7qs.js";import"./banglaWordByWordService-BITaT-vc.js";import"./volume-x-C8BF0xN2.js";import"./skip-forward-BY6SBxtt.js";const Ia={"al-ghamidi":"G","al-afasy":"A","al-hudaify":"H"};async function La({ayahNumber:T,surahNumber:R,audioType:b="qirath",qariName:d="al-afasy",translationLanguage:F=null}){const E=String(R).padStart(3,"0"),A=String(T).padStart(3,"0");if(b==="translation"){if(F!=="ur"&&F!=="mal")return{primary:null,fallback:null};if(F==="ur"){const k=await sa(R,T);return k?{primary:k,fallback:null}:{primary:null,fallback:null}}const n=`https://thafheem.net/audio/translation/T${E}_${A}.ogg`;let w=null;if(F==="mal"&&T>1){const k=String(T-1).padStart(3,"0");w=`https://thafheem.net/audio/translation/T${E}_${k},${A}.ogg`}return{primary:n,fallback:w}}if(b==="interpretation"){if(F==="ur"){const n=await oa(R,T);return n?{primary:n,fallback:null}:{primary:null,fallback:null}}return{primary:`https://thafheem.net/audio/interpretation/I${E}_${A}.ogg`,fallback:null}}const j=`Q${Ia[d]||"A"}`;return{primary:`https://thafheem.net/audio/qirath/${d}/${j}${E}_${A}.ogg`,fallback:null}}async function $a({ayahNumber:T,surahNumber:R,audioType:b="qirath",qariName:d="al-afasy",playbackSpeed:F=1,translationLanguage:E=null,onStart:A,onEnd:D,onError:j}){const n=await La({ayahNumber:T,surahNumber:R,audioType:b,qariName:d,translationLanguage:E});if(!n||!n.primary)return b==="translation"&&E==="ur"||b==="interpretation"&&E==="ur"||typeof j=="function"&&j(new Error(`Audio URL not available for ${b}`)),null;let w=!1;const k=(ue,J=!1)=>{if(Y.getShouldStop())return null;J||(w=!1);const S=new Audio(ue);S.preload="none",S.playbackRate=F,Y.register(S);const M=()=>{S&&(S.playbackRate=F),S.removeEventListener("loadedmetadata",M)};S.addEventListener("loadedmetadata",M,{once:!0});const $=()=>{S&&(S.playbackRate=F),S.removeEventListener("canplay",$)};S.addEventListener("canplay",$,{once:!0});let O=!1;const he=I=>{if(!O){if(O=!0,!J&&!w&&b==="translation"&&E==="mal"&&n.fallback)return w=!0,console.log("[audio.js] Primary Malayalam translation audio failed, trying fallback:",n.fallback),k(n.fallback,!0);!J&&w||(b!=="interpretation"&&console.error(`Audio error for ${b}:`,I),typeof j=="function"&&j(I))}};return S.onplay=()=>{typeof A=="function"&&A()},typeof D=="function"&&(S.onended=D),typeof j=="function"&&(S.onerror=he),Y.getShouldStop()?(S.pause(),null):(S.play().catch(I=>{if(Y.getShouldStop())return null;if(!J&&!w&&b==="translation"&&E==="mal"&&n.fallback)return w=!0,console.log("[audio.js] Primary Malayalam translation audio play failed, trying fallback:",n.fallback),k(n.fallback,!0);if(!J&&w)return;const re=I.name==="NotSupportedError"||I.name==="NotAllowedError"||b==="interpretation"&&I.message?.includes("no supported source");(b!=="interpretation"||!re)&&console.error(`Error playing audio for ${b}:`,I),he(I)}),S)};return k(n.primary,!1)}const Pa=T=>{if(!T)return T;const R=document.createElement("textarea");return R.innerHTML=T,R.value},Tt=25,Fa=40,ae=new Set(["bn","hi","ur","ta","E"]),cr=()=>{const{quranFont:T,fontSize:R,adjustedTranslationFontSize:b,translationLanguage:d,theme:F,viewType:E,setViewType:A}=ia(),D=d==="mal"||d==="E",{user:j}=la(),{surahId:n}=pa(),w=xa(),k=ya(),{pathname:ue}=k,{toasts:J,removeToast:S,showSuccess:M,showError:$}=ja();o.useCallback(()=>{D&&A("Block Wise")},[A,D]),o.useEffect(()=>{if(k.state?.viewType)A(k.state.viewType);else{const t=sessionStorage.getItem("navigationState");if(t)try{const a=JSON.parse(t);a.viewType&&A(a.viewType),sessionStorage.removeItem("navigationState")}catch{}}},[k.state,A]),o.useEffect(()=>{if(!D&&E!=="Ayah Wise"){A("Ayah Wise");return}if(D&&E==="Block Wise"){const t=`/blockwise/${n}`;ue!==t&&w(t)}},[E,D,n,w,ue,A]);const O=new URLSearchParams(k.search).get("fromJuz"),[he,I]=o.useState(null),[re,me]=o.useState(!1),[It,ne]=o.useState(null),[ke,Se]=o.useState(!1),[Lt,je]=o.useState(null),[x,B]=o.useState([]),[fe,H]=o.useState([]),[se,Ne]=o.useState(null),[P,Q]=o.useState(!0),[Ma,Ba]=o.useState(0),[Je,Z]=o.useState(null),[Ee,Ae]=o.useState(new Set),[Oe,Qe]=o.useState({}),[ge,Ge]=o.useState(!1),[$t,Ke]=o.useState(!1),[Ye,Ze]=o.useState(!1),[_a,Xe]=o.useState(!1),[Ra,Wa]=o.useState(!1),[pe,et]=o.useState(!1),[Pt,Ce]=o.useState(""),[Ft,tt]=o.useState(!1),[Te,at]=o.useState(!1),[Mt,xe]=o.useState(""),[Bt,rt]=o.useState(!1),[Ie,nt]=o.useState(!1),[_t,Le]=o.useState(""),[Rt,st]=o.useState(!1),[$e,ot]=o.useState(!1),[Wt,ye]=o.useState(""),[Dt,it]=o.useState(!1),[C,W]=o.useState(null),[z,lt]=o.useState(()=>localStorage.getItem("reciter")||"al-afasy"),[Pe,Vt]=o.useState(["quran"]),[V,ct]=o.useState(()=>{const t=localStorage.getItem("playbackSpeed");return t?parseFloat(t):1}),[Da,U]=o.useState(0),[v,dt]=o.useState(null),[Fe,N]=o.useState(!1),q=o.useRef(null),oe=o.useRef(!1),[L,X]=o.useState(null),[ie,ut]=o.useState(!1),ht=o.useRef(null),{getAyahViewCache:mt,setAyahViewCache:Me}=ca(),Be=o.useRef(!1);o.useEffect(()=>{Be.current=!1},[n,d]),o.useEffect(()=>{if(!n)return;const t=mt?.(n,d);t&&(Be.current=!0,B(t.ayahData||[]),H(t.arabicVerses||[]),Ne(t.surahInfo||null),X(t.translationPagination||null),Q(!1))},[n,d,mt]),o.useEffect(()=>{n&&da({surahId:n,viewType:"surah",path:`/surah/${n}`})},[n]),Ta({enabled:d==="E",context:"ayahwise",dependencies:[x,n]});const Ht=t=>t?t.replace(/\s*﴿\s*[\d\u0660-\u0669]+\s*﴾\s*$/u,"").trim():"",zt=t=>{const a=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return t.toString().split("").map(s=>a[s]||s).join("")},_e=o.useCallback((t,a)=>{const r={ta:c=>`Tamil translation not available for verse ${c+1}`,hi:()=>"Hindi translation service unavailable. Please try again later.",ur:()=>"Urdu translation service unavailable. Please try again later.",bn:c=>`Bangla translation not available for verse ${c+1}`,E:c=>`English translation not available for verse ${c+1}`}[a]||(c=>`Translation not available for verse ${c+1}`);return Array.from({length:t},(c,u)=>({number:u+1,ArabicText:"",Translation:r(u),...a==="E"?{interpretationCount:0}:{}}))},[]),be=o.useCallback(()=>d==="ta"?Tt:Fa,[d]),Re=o.useCallback((t,a=!1)=>{if(!Array.isArray(t)){a&&H([]);return}H(s=>{if(a)return t;const r=new Map;return s.forEach(c=>{c?.verse_number!=null&&r.set(c.verse_number,c)}),t.forEach(c=>{c?.verse_number!=null&&r.set(c.verse_number,c)}),Array.from(r.values()).sort((c,u)=>c.verse_number-u.verse_number)})},[]),ee=o.useCallback(async({page:t=1,replace:a=!1,trackLoading:s=!0}={})=>{if(!n||!ae.has(d))return null;const r=parseInt(n,10);if(Number.isNaN(r))return null;const u={bn:Ue,hi:de,ur:ve,ta:ce,E:qe}[d];if(!u)return null;d==="ur"&&(a||t===1)&&ve.resetFootnoteOrdering(r),s&&ut(!0);try{const l=be(),f=await u.getSurahTranslations(r,{page:t,limit:l}),m=Array.isArray(f?.translations)?f.translations:Array.isArray(f)?f:[];let p=m;d==="bn"?p=m.map(h=>({...h,Translation:Ue.parseBanglaTranslationWithClickableExplanations(h.Translation,r,h.number)})):d==="ur"?p=m.map(h=>{const y=ve.parseUrduTranslationWithClickableFootnotes(h.Translation||"",r,h.number);return{...h,Translation:y,RawTranslation:h.Translation||""}}):d==="E"&&(p=m.map(h=>{const y=Array.isArray(h.interpretations)?h.interpretations:[],_=h.footnote_metadata||null;return{...h,Translation:qe.parseEnglishTranslationWithClickableFootnotes(h.Translation||h.translation_text,r,h.number),interpretationCount:h.interpretationCount??y.length??0,interpretations:y}}));let i=null;try{i=await He(r,{page:t,limit:l})}catch(h){console.error("Error fetching Arabic verses page:",h)}const g=Array.isArray(i?.verses)?i.verses:Array.isArray(i)?i:[];return oe.current&&(a?B(p):p.length>0&&B(h=>[...h,...p]),X(f?.pagination||null),g.length>0?Re(g,a):a&&Re([],!0)),{items:p,pagination:f?.pagination||null}}catch(l){throw a&&oe.current&&(B([]),X(null)),l}finally{s&&oe.current&&ut(!1)}},[n,d,be,Re]),ft=o.useCallback(async()=>{if(!ae.has(d)||ie||!L||!L.hasNext)return;const t=(L.page||1)+1;try{await ee({page:t,replace:!1})}catch(a){console.error("Error loading more translations:",a),$?.("Failed to load more ayahs. Please try again.")}},[d,L,ie,ee,$]);o.useEffect(()=>{if(!ae.has(d))return;const t=ht.current;if(!t)return;const a=new IntersectionObserver(s=>{s[0]?.isIntersecting&&L?.hasNext&&!ie&&ft()},{root:null,rootMargin:"200px",threshold:.1});return a.observe(t),()=>{a.disconnect()}},[d,L,ie,ft]);const We=o.useRef(null);o.useEffect(()=>{const t=()=>{We.current&&We.current()};return window.addEventListener("playAudio",t),()=>{window.removeEventListener("playAudio",t)}},[]),o.useEffect(()=>{const a=new URLSearchParams(k.search).get("wordByWord");if(a){const s=parseInt(a)||1,r=setTimeout(()=>{ne(s),me(!0);const c=new URL(window.location);c.searchParams.delete("wordByWord"),window.history.replaceState({},"",c.pathname)},500);return()=>clearTimeout(r)}},[k.search,P]),o.useEffect(()=>{if(d==="hi"&&x.length>0&&!P){const t=[200,500,1e3,2e3].map(a=>setTimeout(()=>{document.querySelectorAll("p[data-hindi-translation]").forEach((r,c)=>{const u=r.getAttribute("data-hindi-translation"),l=r.getAttribute("data-surah"),f=r.getAttribute("data-ayah"),m=r.innerHTML,p=u&&(u.includes('<sup class="f-note">')||u.includes("<sup>")),i=m.includes('<sup class="f-note">')||m.includes("<sup>"),g=!r.querySelector(".hindi-footnote-link");if((p||i)&&g){const h=de.parseHindiTranslationWithClickableExplanations(u||m,parseInt(l),parseInt(f));r.innerHTML=h}})},a));return()=>t.forEach(a=>clearTimeout(a))}},[d,x,P]),o.useEffect(()=>()=>{q.current&&(q.current.pause(),q.current.src="",q.current.currentTime=0,q.current.onended=null,q.current.onerror=null,q.current=null)},[]),o.useEffect(()=>{q.current=v},[v]),o.useEffect(()=>{let t=!0,a=new AbortController;return(async()=>{if(!(!n||Be.current))try{if(!t)return;Q(!0),Z(null),H([]),X(null);const[r,c,u]=await Promise.all([jt(),Nt(),Et()]);if(!t)return;let f=((i,g)=>{const h=g.filter(_=>_.SuraId===parseInt(i));return h.length===0?7:Math.max(...h.map(_=>_.ayato))})(n,u||[]);if(f===7&&r&&Array.isArray(r)){const i=r.find(g=>g.id===parseInt(n));i&&i.ayahs&&(f=i.ayahs)}if(!t)return;if(ae.has(d))try{const i=await ee({page:1,replace:!0,trackLoading:!1});if(!t)return;if(!(i?.items||[]).length){const h=_e(f,d);B(h),X(null)}}catch(i){if(!t)return;i.name!=="AbortError"&&console.error(`Error fetching ${d} translations:`,i);const g=_e(f,d);B(g),X(null)}else{const i=await At(parseInt(n));if(!t)return;if(!i||!Array.isArray(i)||i.length===0){const g=Array.from({length:f},(h,y)=>({number:y+1,ArabicText:"",Translation:`Translation not available for verse ${y+1}. The API server may be temporarily unavailable. Please try again later.`}));B(g)}else{const g=i.map((h,y)=>({number:(()=>{const De=[h.ayaid,h.AyaId,h.AyaID,h.contiayano,h.contiAyaNo,y+1];for(const na of De){const Ve=Number.parseInt(na,10);if(Number.isFinite(Ve)&&Ve>0)return Ve}return y+1})(),ArabicText:"",Translation:(h.AudioText||"").replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim()}));B(g)}try{const g=await He(parseInt(n));if(!t)return;const h=Array.isArray(g?.verses)?g.verses:Array.isArray(g)?g:[];H(h)}catch(g){if(!t)return;g.name!=="AbortError"&&console.error("Error fetching Arabic verses:",g),H([])}}if(!t)return;const m=r.find(i=>i.id===parseInt(n)),p=c.find(i=>i.number===parseInt(n));Ne(m?{arabic:m.arabic,number:m.id,type:p?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(n),type:"Makki"})}catch(r){t&&r.name!=="AbortError"&&(Z(r.message),console.error("Error fetching surah data:",r))}finally{t&&Q(!1)}})(),()=>{t=!1,a.abort()}},[n,d,ee,_e]),o.useEffect(()=>{!n||P||!Me||!Array.isArray(x)||x.length===0||Me(n,d,{ayahData:x,arabicVerses:fe,surahInfo:se,translationPagination:L,__meta:{isComplete:!0}})},[n,d,x,fe,se,L,P,Me]),o.useEffect(()=>{(async()=>{if(!(!j||!n))try{const a=await le.getBookmarks(j.uid,"translation"),s=new Set(a.filter(r=>r.surahId===parseInt(n)).map(r=>`${r.surahId}:${r.verseId}`));Ae(s)}catch(a){console.error("Error loading bookmarks:",a)}})()},[j,n]),o.useEffect(()=>{(async()=>{if(!j||!n){Xe(!1);return}try{const a=await le.isFavorited(j.uid,n);Xe(a)}catch(a){console.error("Error loading favorite status:",a)}})()},[j,n]),o.useEffect(()=>{const t=()=>{let a=null;const s=window.location.hash;if(s&&s.startsWith("#verse-")){const r=parseInt(s.replace("#verse-",""),10);!isNaN(r)&&r>0&&(a=r)}if(!a&&k.state?.scrollToVerse){const r=parseInt(k.state.scrollToVerse,10);!isNaN(r)&&r>0&&(a=r)}if(!a){const r=sessionStorage.getItem("scrollToVerse");if(r){const c=parseInt(r,10);!isNaN(c)&&c>0&&(a=c,sessionStorage.removeItem("scrollToVerse"))}}if(a&&!P){const r=ae.has(d),c=r?be():0,u=x.length;if(r&&a>u&&c>0){const f=Math.ceil(a/c);console.log(`Loading page ${f} to get verse ${a} (currently loaded ${u} verses)`),(async p=>{let i=L?.page||1;const g=Math.max(i,p);for(;i<g;){i++;try{await ee({page:i,replace:!1,trackLoading:!1}),await new Promise(h=>setTimeout(h,100))}catch(h){console.error(`Error loading page ${i}:`,h);break}}})(f).then(()=>{const p=(i=1)=>{const g=document.getElementById(`verse-${a}`);g?(g.scrollIntoView({behavior:"smooth",block:"center"}),g.style.backgroundColor="#fef3c7",setTimeout(()=>{g.style.backgroundColor=""},2e3)):i<5?setTimeout(()=>p(i+1),i*200):console.warn(`Could not find verse element: verse-${a} after loading pages. Current array length: ${x.length}`)};setTimeout(()=>p(1),300)});return}if(x.length>0){const f=(m=1)=>{const p=document.getElementById(`verse-${a}`);return p?(p.scrollIntoView({behavior:"smooth",block:"center"}),p.style.backgroundColor="#fef3c7",setTimeout(()=>{p.style.backgroundColor=""},2e3),!0):m<3?(setTimeout(()=>f(m+1),m*150),!1):(console.warn(`Could not find verse element: verse-${a} after ${m} attempts. Loaded ${x.length} verses (indices 0-${x.length-1} map to verse-1 through verse-${x.length})`),!1)};requestAnimationFrame(()=>{f(1)})}}};return P||requestAnimationFrame(()=>{t(),setTimeout(t,100)}),window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("load",t),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("popstate",t),window.removeEventListener("load",t)}},[P,x,n,k.state,d,L,ee,be]);const Ut=(t,a)=>{if(a?.ctrlKey||a?.metaKey){a?.preventDefault(),a?.stopPropagation();const r=`/word-by-word/${n}/${t}`;window.open(r,"_blank","noopener,noreferrer");return}ne(t),me(!0)},qt=()=>{me(!1),ne(null)},Jt=t=>{ne(t)},Ot=t=>{me(!1),ne(null),w(`/surah/${t}?wordByWord=1`)},Qt=async t=>{try{parseInt(n),je(t),Se(!0)}catch(a){console.error("Error opening interpretation:",a),$("Failed to load interpretation. Please try again.")}},Gt=()=>{Se(!1),je(null)},Kt=async(t,a,s,r)=>{if(t.stopPropagation(),!j){$("Please sign in to bookmark verses"),w("/sign");return}const c=a+1,u=`${n}:${c}`;try{if(Qe(l=>({...l,[u]:!0})),Ee.has(u)){const f=(await le.getBookmarks(j.uid,"translation")).find(m=>m.surahId===parseInt(n)&&m.verseId===c);f&&await le.deleteBookmark(f.id,j.uid),Ae(m=>{const p=new Set(m);return p.delete(u),p}),M("Bookmark removed successfully")}else await le.addBookmark(j.uid,n,c,"translation",se?.arabic||`Surah ${n}`,`${s} - ${r}`),Ae(l=>new Set([...l,u])),M("Verse bookmarked successfully")}catch(l){console.error("Error managing bookmark:",l),$("Failed to manage bookmark. Please try again.")}finally{Qe(l=>({...l,[u]:!1}))}},Yt=()=>{Z(null),Q(!0),At(parseInt(n)).then(B).catch(t=>{Z(t.message),console.error("Error fetching ayah data on retry:",t)}).finally(()=>Q(!1))};o.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[n]),o.useEffect(()=>{const t=async u=>{u.preventDefault(),u.stopPropagation();const l=u.target.closest(".hindi-footnote-link");if(l){const f=l.getAttribute("data-footnote"),m=l.getAttribute("data-surah"),p=l.getAttribute("data-ayah");if(f&&m&&p){tt(!0),et(!0),Ce("Loading...");try{const i=await de.getExplanationByNumber(parseInt(m),parseInt(p),f);Ce(i)}catch(i){console.error("Error fetching Hindi footnote explanation:",i),Ce(`Error loading explanation: ${i.message}`)}finally{tt(!1)}}else console.error("Missing footnote data:",{footnoteNumber:f,surahNo:m,ayahNo:p})}},a=()=>{d==="hi"&&x.length>0&&document.querySelectorAll("p[data-hindi-translation]").forEach((l,f)=>{const m=l.getAttribute("data-hindi-translation"),p=l.getAttribute("data-surah"),i=l.getAttribute("data-ayah"),g=l.innerHTML,h=m&&(m.includes('<sup class="f-note">')||m.includes("<sup>")),y=g.includes('<sup class="f-note">')||g.includes("<sup>"),_=!l.querySelector(".hindi-footnote-link");if((h||y)&&_){const De=de.parseHindiTranslationWithClickableExplanations(m||g,parseInt(p),parseInt(i));l.innerHTML=De}})},s=document.createElement("style");s.textContent=`
      .hindi-footnote-link:hover {
        color: #0891b2 !important;
      }
      .hindi-footnote-link:active {
        color: #0e7490 !important;
      }
    `,document.head.appendChild(s),a();const r=setInterval(a,1e3);window.testHindiFootnotes=()=>{a()};const c=new MutationObserver(u=>{let l=!1;u.forEach(f=>{(f.type==="childList"||f.type==="attributes")&&f.addedNodes.forEach(m=>{m.nodeType===Node.ELEMENT_NODE&&(m.matches&&m.matches("p[data-hindi-translation]")||m.querySelector&&m.querySelector("p[data-hindi-translation]"))&&(l=!0)})}),l&&setTimeout(a,100)});return c.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hindi-translation"]}),document.addEventListener("click",t),()=>{document.removeEventListener("click",t),document.head.removeChild(s),clearInterval(r),c.disconnect()}},[d,x]),o.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const s=a.target.closest(".urdu-footnote-link");if(s){const r=s.getAttribute("data-footnote-id");s.getAttribute("data-footnote-number");const c=s.getAttribute("data-surah"),u=s.getAttribute("data-ayah");if(r&&c&&u){st(!0),nt(!0),Le("Loading...");try{const l=await ve.getFootnoteExplanation(r),f=l&&Pa(l);Le(f)}catch(l){console.error("❌ Error loading Urdu footnote:",l),Le(`Error loading explanation: ${l.message}`)}finally{st(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x]),o.useEffect(()=>{const t=async a=>{a.preventDefault(),a.stopPropagation();const s=a.target.closest(".bangla-explanation-link");if(s){const r=s.getAttribute("data-explanation-number"),c=s.getAttribute("data-surah"),u=s.getAttribute("data-ayah");if(r&&c&&u){rt(!0),at(!0),xe("Loading...");try{const l=await Ue.getExplanationByNumber(parseInt(c),parseInt(u),r);xe(l||"Explanation not found.")}catch(l){console.error("❌ Error loading Bangla explanation:",l),xe("Error loading explanation.")}finally{rt(!1)}}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x]),o.useEffect(()=>{const t=async a=>{let s=a.target.closest(".interpretation-link");if(s&&d==="E"){a.preventDefault(),a.stopPropagation(),s.getAttribute("data-interpretation")||s.getAttribute("data-interpretation-number")||s.textContent?.trim();const r=s.getAttribute("data-surah")||n,c=s.getAttribute("data-ayah");if(r&&c){je(parseInt(c,10)),Se(!0);return}}if(s=a.target.closest(".english-footnote-link"),s){a.preventDefault(),a.stopPropagation();const r=s.getAttribute("data-footnote-id"),c=s.getAttribute("data-surah"),u=s.getAttribute("data-ayah");if(!c||!u)return;it(!0),ot(!0),ye("Loading...");try{let l="";if(r)l=await qe.getExplanation(parseInt(r,10));else{ye("Explanation not available.");return}ye(l||"Explanation not available.")}catch(l){console.error("Error fetching English explanation:",l),ye(`Error loading explanation: ${l.message}`)}finally{it(!1)}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[d,x,n]),o.useEffect(()=>{},[pe]);const gt=()=>{const t=parseInt(n)-1;t>=1&&w(`/surah/${t}`)},pt=()=>{const t=parseInt(n)+1;t<=114&&w(`/surah/${t}`)};o.useEffect(()=>{const t=()=>{window.scrollY>300?Ke(!0):Ke(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),o.useEffect(()=>{const t=a=>{const{type:s,message:r}=a.detail;s==="success"?M(r):s==="error"&&$(r)};return window.addEventListener("showToast",t),()=>{window.removeEventListener("showToast",t)}},[M,$]);const xt=t=>{if(!t)return"";if(typeof document>"u")return t.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();const a=document.createElement("div");return a.innerHTML=t,a.querySelectorAll(".english-footnote-link, .footnote-link, sup.f-note").forEach(s=>s.remove()),(a.textContent||a.innerText||"").replace(/\s+/g," ").trim()},Zt=async(t,a,s)=>{const r=xt(a),c=`${t}
  
  "${r}"
  
  — Quran ${n}:${s}`;try{await navigator.clipboard.writeText(c),I(s),setTimeout(()=>{I(null)},2e3)}catch(u){console.error("Failed to copy text: ",u);try{const l=document.createElement("textarea");l.value=c,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),I(s),setTimeout(()=>{I(null)},2e3)}catch(l){console.error("Fallback copy failed: ",l)}}},Xt=async(t,a,s)=>{const r=xt(a),c=`${window.location.origin}/surah/${n}#verse-${s}`,u=`${t}

${r}

— Quran ${n}:${s}

Read more: ${c}`,l={title:`Quran ${n}:${s}`,text:u};try{navigator.share&&navigator.canShare&&navigator.canShare(l)?(await navigator.share(l),M("Verse shared successfully")):(await navigator.clipboard.writeText(u),M("Verse content copied to clipboard"))}catch(f){if(f.name==="AbortError")return;console.error("Error sharing verse:",f);try{await navigator.clipboard.writeText(u),M("Verse content copied to clipboard")}catch(m){console.error("Failed to copy to clipboard:",m),$("Failed to share verse. Please try again.")}}},G=()=>{v&&(v.pause(),v.currentTime=0,v.onended=null,v.onerror=null)};o.useEffect(()=>(oe.current=!0,()=>{oe.current=!1;try{G()}catch{}N(!1),W(null),U(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))}),[]),o.useEffect(()=>{const t=()=>{window.scrollY>50?Ze(!0):Ze(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]);const K=async(t,a=0,s=null,r=null)=>{if(!n)return;const c=s||Pe,u=r||z,l=x?.length||0;if(a>=c.length){t<l?K(t+1,0,s,r):(N(!1),W(null),U(0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})));return}if(Y.getShouldStop())return;N(!0),W(t),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}));const f={quran:"qirath",translation:"translation",interpretation:"interpretation"},m=c[a],p=f[m]||"qirath";G(),U(a);try{const i=await $a({ayahNumber:t,surahNumber:parseInt(n),audioType:p,qariName:u,playbackSpeed:V,translationLanguage:d,onStart:()=>{W(t),N(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))},onEnd:()=>{K(t,a+1,s,r)},onError:()=>{setTimeout(()=>{N(!1),W(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),K(t,a+1,s,r)},100)}});if(Y.getShouldStop()){i&&(i.pause(),i.currentTime=0),N(!1),W(null);return}i?dt(i):setTimeout(()=>{N(!1),W(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),K(t,a+1,s,r)},100)}catch(i){console.error("Error playing audio:",i),setTimeout(()=>{N(!1),W(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}})),K(t,a+1,s,r)},100)}},te=async(t,a=0,s=null)=>{await K(t,a,null,s)},ea=t=>{if(C===t&&v){v.paused?v.play().then(()=>N(!0)).catch(()=>{}):(v.pause(),N(!1));return}U(0),te(t,0)},yt=()=>{try{v&&!v.paused?(v.pause(),N(!1),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))):v&&v.paused?v.play().then(()=>{N(!0),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!0}}))}).catch(()=>{}):(U(0),te(1,0))}catch{}};We.current=yt;const ta=()=>{G(),N(!1),W(null),U(0),dt(null),window.dispatchEvent(new CustomEvent("audioStateChange",{detail:{isPlaying:!1}}))};o.useEffect(()=>{localStorage.setItem("reciter",z),window.dispatchEvent(new CustomEvent("reciterChange",{detail:{reciter:z}}))},[z]),o.useEffect(()=>{const t=()=>{Y.stopAll(),G(),N(!1),W(null)};return window.addEventListener("languageChange",t),()=>{window.removeEventListener("languageChange",t)}},[]),o.useEffect(()=>{const t=a=>{const s=a.detail.reciter;s!==z&&lt(s)};return window.addEventListener("reciterChange",t),()=>{window.removeEventListener("reciterChange",t)}},[z]),o.useEffect(()=>{Fe&&v&&C&&(G(),N(!1),setTimeout(()=>{te(C,0)},100))},[z,Pe]),o.useEffect(()=>{localStorage.setItem("playbackSpeed",V.toString()),window.dispatchEvent(new CustomEvent("playbackSpeedChange",{detail:{playbackSpeed:V}}))},[V]),o.useEffect(()=>{const t=a=>{const s=a.detail.playbackSpeed;s!==V&&ct(s)};return window.addEventListener("playbackSpeedChange",t),()=>{window.removeEventListener("playbackSpeedChange",t)}},[V]),o.useEffect(()=>{v&&(v.playbackRate=V)},[v,V]);const bt=async()=>{try{Ge(!0),await ce.downloadDatabase(),M("Tamil database downloaded successfully!"),await(async()=>{if(n)try{Q(!0),Z(null);const[a,s,r]=await Promise.all([jt(),Nt(),Et()]);let u=((i,g)=>{const h=g.filter(_=>_.SuraId===parseInt(i));return h.length===0?7:Math.max(...h.map(_=>_.ayato))})(n,r||[]);if(u===7&&a&&Array.isArray(a)){const i=a.find(g=>g.id===parseInt(n));i&&i.ayahs&&(u=i.ayahs)}const l=await ce.getSurahTranslations(parseInt(n),{page:1,limit:Tt}),f=Array.isArray(l?.translations)?l.translations:[];if(f.length>0)B(f),setTamilPagination(l?.pagination||null);else{const i=Array.from({length:u},(g,h)=>({number:h+1,ArabicText:"",Translation:`Tamil translation not available for verse ${h+1}`}));B(i),setTamilPagination(null)}try{const i=await He(parseInt(n)),g=Array.isArray(i?.verses)?i.verses:Array.isArray(i)?i:[];H(g)}catch(i){console.error("Error fetching Arabic verses:",i),H([])}const m=a.find(i=>i.id===parseInt(n)),p=s.find(i=>i.number===parseInt(n));Ne(m?{arabic:m.arabic,number:m.id,type:p?.type||"Makki"}:{arabic:"Unknown Surah",number:parseInt(n),type:"Makki"})}catch(a){Z(a.message),console.error("Error fetching surah data:",a)}finally{Q(!1)}})()}catch(t){console.error("Error downloading Tamil database:",t),$("Failed to download Tamil database. Please try again.")}finally{Ge(!1)}};if(P)return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-48 mx-auto mb-4 relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})}),e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded w-32 mx-auto relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/60 dark:via-white/10 to-transparent"})})]}),e.jsx(Ct,{count:5})]})});if(Je)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load Surah data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:Je}),e.jsx("button",{onClick:Yt,className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})});const vt=se?.arabic||(n?`Surah ${n}`:"Surah"),aa=Aa(n,vt),wt=n?String(n):"",ra=wt==="1"||wt==="2"?"font-normal":"font-semibold";return e.jsxs("div",{children:[e.jsx(Na,{toasts:J,removeToast:S}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-outfit transition-colors duration-300",children:[e.jsx("div",{className:`sticky top-0 z-40 glass border-b border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 ${re||ke||pe||Ie||Te||$e?"hidden":""}`,children:e.jsx("div",{className:"container-responsive py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center relative",children:[e.jsxs("div",{className:"sm:hidden w-full flex items-center justify-between mb-2",children:[O&&e.jsxs("button",{onClick:()=>w("/juz"),className:"flex items-center text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"Juz ",O]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Ye?"max-h-0 opacity-0 m-0":"max-h-40 opacity-100 mb-2 sm:mb-4"}`,children:e.jsx("h1",{className:`text-4xl sm:text-5xl md:text-6xl font-arabic text-center text-gray-800 dark:text-white drop-shadow-sm ${ra}`,style:{fontFamily:Ca},"aria-label":vt,children:aa})}),parseInt(n)!==1&&parseInt(n)!==9&&e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${Ye?"max-h-0 opacity-0 m-0":"max-h-20 opacity-90 hover:opacity-100 mb-4 sm:mb-6"}`,children:e.jsx("img",{src:F==="dark"?wa:ka,alt:"Bismillah",className:"h-8 sm:h-10 md:h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"w-full flex items-center justify-between mt-2",children:[e.jsx("div",{className:"hidden sm:block w-1/3",children:O&&e.jsxs("button",{onClick:()=>w("/juz"),className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors group",children:[e.jsx(we,{className:"w-4 h-4 mr-1 group-hover:-translate-x-1 transition-transform"}),"Back to Juz ",O]})}),e.jsx("div",{className:"w-full sm:w-1/3 flex justify-center",children:(d==="mal"||d==="E")&&e.jsx(ua,{options:["Ayah Wise","Block Wise"],value:E,onChange:t=>A(t)})}),e.jsx("div",{className:"hidden sm:flex w-1/3 justify-end",children:d==="ta"&&!ce.isDatabaseDownloaded()&&e.jsx("button",{onClick:bt,disabled:ge,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors flex items-center",children:ge?"Downloading...":"Download Tamil DB"})})]}),d==="ta"&&!ce.isDatabaseDownloaded()&&e.jsx("div",{className:"sm:hidden mt-2 w-full flex justify-center",children:e.jsx("button",{onClick:bt,disabled:ge,className:"text-xs bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-4 py-2 rounded-full w-full text-center",children:ge?"Downloading...":"Download Tamil Database"})})]})})}),e.jsx("div",{className:"container-responsive py-6 sm:py-8 space-y-4 sm:space-y-6",children:P&&x.length===0?e.jsx(Ct,{count:5}):!P&&x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(kt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:"No verses found for this Surah."})]}):!P&&x.length>0?e.jsxs(e.Fragment,{children:[(()=>{const t=new Map;return fe.forEach(a=>{a?.verse_number!=null&&t.set(a.verse_number,a),a?.verse_key&&t.set(a.verse_key,a)}),x.map((a,s)=>{const r=a.number||s+1,c=`${n}:${r}`,u=t.get(r)||t.get(c)||fe[s],l=u?.text_uthmani||"",f=l,p=Ht(l)||l,i=C===r,g=i&&Fe,h=`
                    relative group rounded-2xl transition-all duration-300 overflow-hidden
                    ${i?"bg-teal-50/50 dark:bg-teal-900/10 border-teal-200 dark:border-teal-800 shadow-md ring-1 ring-teal-100 dark:ring-teal-900":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 hover:shadow-card hover:border-gray-200 dark:hover:border-gray-600"}
                  `;return e.jsxs("div",{id:`verse-${r}`,className:h,children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-gray-50 dark:bg-gray-700/50 px-3 py-1.5 rounded-br-xl border-b border-r border-gray-100 dark:border-gray-700 text-xs font-medium text-gray-500 dark:text-gray-400 z-10",children:[n,":",r]}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"w-full mb-6 sm:mb-8 text-right",dir:"rtl",children:e.jsxs("p",{className:`leading-[2.2] ${i?"text-primary dark:text-primary-light":"text-gray-800 dark:text-gray-100"}`,style:{fontFamily:T,fontSize:`${R}px`},children:[p," ",e.jsxs("span",{className:"inline-block mx-1 text-gray-400 dark:text-gray-500 font-arabic text-[0.8em]",children:["﴿",zt(u?.verse_number||r),"﴾"]})]})}),e.jsx("div",{className:"w-full text-left mb-6 relative",children:e.jsx("div",{className:`prose dark:prose-invert max-w-none ${i?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:d==="hi"?e.jsx("div",{"data-hindi-translation":a.Translation,"data-surah":n,"data-ayah":r,className:"font-hindi leading-relaxed",style:{fontSize:`${b}px`},dangerouslySetInnerHTML:{__html:de.parseHindiTranslationWithClickableExplanations(a.Translation||"",parseInt(n),r)}}):d==="ur"?e.jsx("div",{className:"font-urdu-nastaliq leading-relaxed text-right",dir:"rtl",style:{fontSize:`${b}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):d==="bn"?e.jsx("div",{className:"font-bengali leading-relaxed",style:{fontSize:`${b}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):d==="ta"?e.jsx("div",{className:"font-tamil leading-relaxed",style:{fontSize:`${b}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):d==="mal"?e.jsx("div",{className:"font-malayalam leading-relaxed",style:{fontSize:`${b}px`},dangerouslySetInnerHTML:{__html:a.Translation}}):e.jsx("div",{className:"font-poppins leading-relaxed",style:{fontSize:`${b}px`},"data-footnote-context":"ayahwise",dangerouslySetInnerHTML:{__html:E==="Ayah Wise"&&d==="E"?(a.Translation||"").replace(/<sup[^>]*>.*?<\/sup>/gi,"").replace(/<span[^>]*class="english-footnote-link"[^>]*>.*?<\/span>/gi,""):a.Translation}})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:y=>{y.stopPropagation(),ea(r)},className:`icon-btn ${g?"text-primary bg-primary/10":""}`,title:g?"Pause":"Play",children:g?e.jsxs("div",{className:"flex gap-0.5 h-3 items-end",children:[e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_0.6s_ease-in-out_infinite]"}),e.jsx("span",{className:"w-0.5 h-2/3 bg-current animate-[pulse_0.8s_ease-in-out_infinite_0.1s]"}),e.jsx("span",{className:"w-0.5 h-full bg-current animate-[pulse_1s_ease-in-out_infinite_0.2s]"})]}):e.jsx(ha,{className:"w-5 h-5"})}),d!=="ta"&&e.jsx("button",{onClick:y=>{y.stopPropagation(),Qt(r)},className:"icon-btn group",title:"Interpretation",children:e.jsx(kt,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:y=>{y.stopPropagation(),Ut(r,y)},className:"icon-btn group",title:"Word by Word",children:e.jsx(Sa,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:y=>{y.stopPropagation(),Zt(f,a.Translation,r)},className:"icon-btn",title:"Copy",children:he===s+1?e.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied"}):e.jsx(ma,{className:"w-5 h-5"})}),e.jsx("button",{onClick:y=>Kt(y,s,f,a.Translation),disabled:Oe[`${n}:${r}`],className:`icon-btn ${Ee.has(`${n}:${r}`)?"text-accent":""}`,title:"Bookmark",children:Oe[`${n}:${r}`]?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(fa,{className:`w-5 h-5 ${Ee.has(`${n}:${r}`)?"fill-current":""}`})}),e.jsx("button",{onClick:y=>{y.stopPropagation(),Xt(f,a.Translation,r)},className:"icon-btn",title:"Share",children:e.jsx(ga,{className:"w-5 h-5"})})]})]})]})]},s)})})(),ae.has(d)&&L?.totalItems?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-8",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Math.min(x.length,L.totalItems)," of ",L.totalItems," ayahs"]}),e.jsx("div",{ref:ht,className:"h-10 flex items-center justify-center",children:ie&&e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})})]}):null]}):null}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 dark:border-gray-700 px-3 sm:px-4 lg:px-6 py-3 sm:py-4 mt-6 sm:mt-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"sm:hidden space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:gt,disabled:parseInt(n)<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg w-[173.96px] min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(we,{className:"w-3 h-3"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]`,children:[e.jsx(ze,{className:"w-3 h-3"}),e.jsx("span",{children:"Beginning of Surah"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:pt,disabled:parseInt(n)>=114,className:`w-[173.96px] flex items-center justify-center space-x-2 px-4 py-2 text-xs text-gray-600 
                             dark:bg-[#323A3F] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 
                             border border-gray-300 dark:border-gray-600 rounded-lg min-h-[44px]
                             disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(St,{className:"w-3 h-3"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-3 sm:space-x-4 lg:space-x-6",children:[e.jsxs("button",{onClick:gt,disabled:parseInt(n)<=1,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(we,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Previous Surah"})]}),e.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg`,children:[e.jsx(ze,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Beginning of Surah"})]}),e.jsxs("button",{onClick:pt,disabled:parseInt(n)>=114,className:`flex items-center space-x-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-[#FFFFFF] text-gray-600 
                           dark:bg-[#2A2C38] dark:text-white hover:text-gray-900 dark:hover:text-gray-300 min-h-[44px] 
                           sm:min-h-[48px] border border-gray-300 dark:border-gray-600 rounded-lg
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{children:"Next Surah"}),e.jsx(St,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]})]})}),re&&e.jsx(ba,{selectedVerse:It,surahId:n,onClose:qt,onNavigate:Jt,onSurahChange:Ot}),ke&&e.jsx(va,{surahId:n,verseId:Lt,onClose:Gt}),pe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hindi Explanation"}),e.jsx("button",{onClick:()=>et(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Ft?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                      .hindi-explanation-content,
                      .hindi-explanation-content p,
                      .hindi-explanation-content div,
                      .hindi-explanation-content span {
                        text-align: justify !important;
                      }
                    `}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"hindi-explanation-content text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none text-justify",style:{fontSize:`${b}px`,textAlign:"justify"},dangerouslySetInnerHTML:{__html:Pt}})})]})})]})}),Te&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bangla Explanation"}),e.jsx("button",{onClick:()=>at(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Bt?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${b}px`},children:Mt})})})]})}),Ie&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
              .urdu-footnote-modal-content * {
                font-family: 'Noto Nastaliq Urdu', 'JameelNoori', serif !important;
              }
              .urdu-footnote-modal-content a {
                font-family: 'Noto Nastaliq Urdu', 'JameelNoori', serif !important;
                text-align: right !important;
              }
            `}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Urdu Explanation"}),e.jsx("button",{onClick:()=>nt(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Rt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:`text-gray-700 leading-[1.6] sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none urdu-footnote-modal-content ${d==="ur"?"font-urdu-nastaliq":"font-poppins"}`,style:{fontSize:`${b}px`,...d==="ur"?{textAlign:"right",lineHeight:"2.6",fontFamily:"'Noto Nastaliq Urdu', 'JameelNoori', serif"}:{}},dir:d==="ur"?"rtl":"ltr",children:_t})})})]})})]}),$e&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-2 sm:p-4 lg:p-6 bg-black/60 dark:bg-black/70 backdrop-blur-sm overflow-y-auto animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] rounded-lg shadow-xl w-full max-w-xs sm:max-w-2xl lg:max-w-4xl xl:max-w-[1073px] max-h-[90vh] flex flex-col overflow-hidden my-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"English Explanation"}),e.jsx("button",{onClick:()=>ot(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:Dt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading explanation..."})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 sm:p-6",children:e.jsx("div",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-white text-sm sm:text-base lg:text-lg prose prose-sm dark:prose-invert max-w-none",style:{fontSize:`${b}px`},children:Wt})})})]})}),$t&&e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed right-6 z-[60] bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center ${C?"bottom-32 sm:bottom-36":"bottom-6"}`,title:"Beginning of Surah","aria-label":"Beginning of Surah",children:e.jsx(ze,{className:"w-6 h-6"})}),C&&!re&&!ke&&!pe&&!Ie&&!Te&&!$e&&e.jsx(Ea,{audioElement:v,isPlaying:Fe&&v&&!v.paused,currentAyah:C,totalAyahs:x?.length||0,surahInfo:se,onPlayPause:yt,onStop:ta,onSkipBack:()=>{C&&C>1&&(U(0),te(C-1,0))},onSkipForward:()=>{const t=x?.length||0;C&&C<t&&(U(0),te(C+1,0))},onClose:null,selectedQari:z,onQariChange:t=>{lt(t),C&&(G(),N(!1),setTimeout(()=>{te(C,0,t)},50))},translationLanguage:d,audioTypes:Pe,onAudioTypesChange:t=>{const a=C;Vt(t),a&&(G(),N(!1),setTimeout(()=>{K(a,0,t)},50))},playbackSpeed:V,onPlaybackSpeedChange:t=>{ct(t)}})]})]})};export{cr as default};
