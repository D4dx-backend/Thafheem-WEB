import{H as Ve,r as n,a as he,g as Te,j as e,X as me,R as xe,B as Le,o as $e,p as _e,v as ge,y as oe,u as Ie,ae,q as We,af as Ae,ag as Me,J as De,x as Ue,w as Re,d as He,b as qe,ah as de,ai as Qe}from"./index-DwV6Sgdl.js";import Oe from"./tamilWordByWordService-SO7jYcnK.js";import Ge from"./hindiWordByWordService-0Fk5bvry.js";import Ke from"./banglaWordByWordService-Bv-0rA99.js";import{u as ve,T as ce}from"./Toast-BkkzXe9J.js";import{C as Be}from"./chevron-left-CUJCTrI5.js";import Je from"./tamilTranslationService-CILKoxG5.js";import ue from"./hindiTranslationService-BzIxfkHD.js";import ye from"./urduTranslationService-BOrLzMVt.js";import fe from"./banglaTranslationService-CL6dPNsx.js";import Ce from"./englishTranslationService-DXza466L.js";import{g as Xe,s as Ye}from"./surahNameUtils-CNmXwDjY.js";const Ze=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"16",height:"18",x:"4",y:"4",rx:"2",key:"1u9h20"}],["path",{d:"M8 10h6",key:"3oa6kw"}],["path",{d:"M8 14h8",key:"1fgep2"}],["path",{d:"M8 18h5",key:"17enja"}]],et=Ve("notepad-text",Ze),be=({surahId:w,selectedVerse:N,surahInfo:S,onNavigate:v,onClose:V,onShowAyahModal:$,onSurahChange:l,onVerseChange:D,wordData:d=null,showSuccess:c=null,showError:x=null,translationLanguage:G=null})=>{const[u,p]=n.useState(!0),[y,X]=n.useState([]),[A,U]=n.useState(!1),[j,_]=n.useState(!1),[J,K]=n.useState(!1),[R,L]=n.useState(!1),[C,Y]=n.useState(""),H=n.useRef(null),M=n.useRef(null),q=he(),{user:B}=Te?.()||{user:null};S?.ayahs;const z=o=>{U(!1),Y(""),l&&l(o.number)},P=o=>{_(!1),D&&D(o)},Z=()=>{const o=S?.ayahs||0;return Array.from({length:o},(b,I)=>I+1)},re=async()=>{try{K(!0);const o=oe.getEffectiveUserId(B),b=S?.name||`Surah ${w}`,I=d?.text_uthmani||d?.translations?.[0]?.text||"";await oe.addBookmark(o,w,N,"word-by-word",b,I),c&&c("Word-by-word content bookmarked successfully!")}catch(o){console.error("Failed to bookmark word-by-word content:",o),x&&x("Failed to save bookmark. Please try again.")}finally{setTimeout(()=>K(!1),300)}},te=async()=>{try{const o=S?.name||`Surah ${w}`,b=d?.text_uthmani||d?.translations?.[0]?.text||"",I=d?.translations?.[0]?.text||"";let T=`Word by Word - ${o}, Verse ${N}

`;T+=`Arabic: ${b}

`,I&&(T+=`Translation: ${I}

`),d?.words&&d.words.length>0&&(T+=`Word Breakdown:
`,d.words.slice(0,5).forEach((a,m)=>{const r=a.text_uthmani||a.text_simple||"",t=a.translation?.text||"N/A";T+=`${m+1}. ${r} - ${t}
`}),d.words.length>5&&(T+=`... and ${d.words.length-5} more words
`),T+=`
`),T+="Shared from Thafheem - Word by Word Study";const Q=window.location.href;if(navigator.share)await navigator.share({title:`Word by Word - ${o}, Verse ${N}`,text:T,url:Q});else{const a=`${T}

View full content: ${Q}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(a),alert("Word-by-word content copied to clipboard for sharing");else{const m=document.createElement("textarea");m.value=a,m.style.position="fixed",m.style.left="-999999px",m.style.top="-999999px",document.body.appendChild(m),m.focus(),m.select(),document.execCommand("copy"),document.body.removeChild(m),alert("Word-by-word content copied to clipboard for sharing")}}}catch(o){console.error("Failed to share word-by-word content:",o),o.name!=="AbortError"&&alert("Failed to share content: "+o.message)}};return n.useEffect(()=>{(async()=>{try{L(!0);const b=await ge();X(b)}catch(b){console.error("Error loading surahs:",b)}finally{L(!1)}})()},[]),n.useEffect(()=>{const o=b=>{H.current&&!H.current.contains(b.target)&&U(!1),M.current&&!M.current.contains(b.target)&&_(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[]),y.filter(o=>o.name.toLowerCase().includes(C.toLowerCase())||o.arabic.includes(C)||o.number.toString().includes(C)),u?e.jsxs("div",{className:"bg-white dark:bg-gray-900 px-3 sm:px-4 py-3 space-y-3 relative z-10",children:[e.jsx("button",{className:"absolute top-2 right-2 sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors bg-white dark:bg-gray-600 shadow-sm z-10",title:"Close",onClick:()=>V?V():q(-1),children:e.jsx(me,{className:"w-4 h-4 text-gray-600 dark:text-white"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2 sm:space-x-3 pr-12 sm:pr-0",children:[e.jsxs("div",{className:"relative dropdown-container",ref:H,children:[e.jsxs("button",{onClick:()=>U(!A),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:w?`${w} - ${S?.name||"Loading..."}`:"Select Surah"}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),A&&!R&&e.jsx("div",{className:"absolute sm:text-sm text-sm top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-80 sm:w-45 h-[calc(100vh-100px)] z-50",children:y.map(o=>e.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${o.number===parseInt(w)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>z(o),children:[o.number," - ",o.name]},o.number))})]}),e.jsxs("div",{className:"relative dropdown-container",ref:M,children:[e.jsxs("button",{onClick:()=>_(!j),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:N||"1"}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),j&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-auto max-h-60 z-50",children:Z().map(o=>e.jsx("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${parseInt(N)===o?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>P(o),children:o},o))})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 self-end sm:self-auto",children:[G!=="ta"&&e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Ayah Details",onClick:()=>$&&$(N),children:e.jsx(Le,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})}),e.jsx("button",{onClick:re,disabled:J,className:`p-2 rounded-lg transition-colors ${J?"text-gray-400 cursor-not-allowed":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:J?"Saving...":"Bookmark this verse",children:e.jsx($e,{className:"w-4 sm:w-5 h-4 sm:h-5"})}),e.jsx("button",{onClick:te,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share word-by-word content",children:e.jsx(_e,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})}),V&&e.jsx("button",{className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors dark:bg-white",title:"Close",onClick:V,children:e.jsx(me,{className:"w-5 h-5 text-gray-600"})})]})]})]}):null},ke=({surahId:w,verseId:N,totalVerses:S,surahInfo:v,onVerseChange:V,onSurahChange:$,onClose:l,onWordByWordClick:D,verseData:d,interpretationData:c,selectedQari:x,onQariChange:G})=>{const[u,p]=n.useState(!0),[y,X]=n.useState(!1),[A,U]=n.useState(!1),[j,_]=n.useState([]),[J,K]=n.useState(!0),[R,L]=n.useState(!1),[C,Y]=n.useState(!1),[H,M]=n.useState(!1),q=he(),{user:B}=Te(),{showSuccess:z,showError:P}=ve();n.useEffect(()=>{(async()=>{try{const m=await ge();_(m)}catch(m){console.error("Error loading surahs:",m)}finally{K(!1)}})()},[]),n.useEffect(()=>{(async()=>{if(B&&w&&N)try{const m=await oe.isBookmarked(B.uid,w,N,"interpretation");L(m)}catch(m){console.error("Error checking bookmark status:",m)}})()},[B,w,N]);const Z=Array.from({length:S||10},(a,m)=>m+1),re=v?`${v.number} - ${v.name||v.arabic}`:`${w} - Loading...`,te=a=>{$?$(a):q(`/surah/${a}`),X(!1)},o=a=>{V&&V(a),U(!1)},b=a=>{if(a==null)return"";if(typeof a!="string")return String(a);if(typeof window<"u"){const m=document.createElement("div");return m.innerHTML=a,m.textContent||m.innerText||""}return a.replace(/<[^>]+>/g," ")},I=a=>{if(!a||typeof a!="object")return"";const m=["AudioIntrerptn","Interpretation","interpretation","AudioText","interpret_text","InterpretText","Interpret_Text","text","Text","content","Content","meaning","Meaning","body","Body","desc","Desc","description","Description"];for(const r of m)if(typeof a[r]=="string"&&a[r].trim().length>0)return a[r];for(const[r,t]of Object.entries(a))if(typeof t=="string"&&t.trim().length>10&&!["InterpretationNo","Interpretation_No","interptn_no","contiayano","ayaid","Ayaid","suraid","pageid","QAudioUrl","TransUrl","InterPtnUrl","ASuraName"].includes(r))return t;return""},T=async()=>{if(!d&&!c){P("No data available to copy");return}try{const a=[];if(d?.arabic&&a.push(d.arabic),d?.translation&&a.push(d.translation),c){const r=[];if(Array.isArray(c))c.forEach((t,h)=>{if(typeof t=="string"&&t.trim().length>0){const s=b(t);if(s.trim()){const g=c.length>1?`Interpretation ${h+1}:
`:`Interpretation:
`;r.push(g+s.trim())}}else if(t&&typeof t=="object"){const s=I(t);if(s){const g=b(s);if(g.trim()){const k=c.length>1?`Interpretation ${h+1}:
`:`Interpretation:
`;r.push(k+g.trim())}}}});else if(typeof c=="string"){const t=b(c);t.trim()&&r.push(`Interpretation:
`+t.trim())}else if(typeof c=="object"){const t=I(c);if(t){const h=b(t);h.trim()&&r.push(`Interpretation:
`+h.trim())}}r.length>0?a.push(r.join(`

`)):console.warn("Interpretation data exists but no text extracted:",c)}if(a.length===0){const r=v?.name||v?.arabic||`Surah ${w}`;a.push(`${r}, Verse ${N}`)}const m=a.join(`

---

`);if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(m);else{const r=document.createElement("textarea");r.value=m,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}M(!0),z("Verse and interpretation copied to clipboard"),setTimeout(()=>M(!1),2e3)}catch(a){console.error("Failed to copy verse:",a),P("Failed to copy verse. Please try again.")}},Q=async()=>{if(!B){q("/sign");return}try{if(Y(!0),R){const m=(await oe.getBookmarks(B.uid,"interpretation")).find(r=>r.surahId===parseInt(w)&&r.verseId===parseInt(N));m&&(await oe.deleteBookmark(m.id,B.uid),L(!1),z("Bookmark removed successfully"))}else{const a=v?.name||v?.arabic||`Surah ${w}`,m=d?.translation||d?.arabic||"";await oe.addBookmark(B.uid,w,N,"interpretation",a,m),L(!0),z("Verse bookmarked successfully")}}catch(a){console.error("Error handling bookmark:",a),P("Failed to update bookmark. Please try again.")}finally{Y(!1)}};return u?e.jsxs("div",{className:"bg-white dark:bg-gray-900 px-3 sm:px-4 py-3 space-y-3 relative",children:[e.jsx("button",{className:"absolute top-2 right-2 sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors bg-white dark:bg-gray-600 shadow-sm z-10",title:"Close",onClick:l||(()=>q(-1)),children:e.jsx(me,{className:"w-4 h-4 text-gray-600 dark:text-white"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2 sm:space-x-3 pr-12 sm:pr-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>X(a=>!a),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:re}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),y&&!J&&e.jsx("div",{className:"absolute sm:text-sm text-sm top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-80 sm:w-45 h-[calc(100vh-100px)] z-50",children:j.map(a=>e.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${a.number===parseInt(w)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>te(a.number),children:[a.number," - ",a.name]},a.number))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>U(a=>!a),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsxs("span",{children:[" ",N]}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),A&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-auto max-h-60 z-50",children:Z.map(a=>e.jsx("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${a===parseInt(N)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>o(a),children:a},a))})]})]}),e.jsx("div",{className:"hidden sm:flex items-center",children:e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors dark:bg-gray-950",title:"Close",onClick:l||(()=>q(-1)),children:e.jsx(me,{className:"w-5 h-5 text-gray-600"})})})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-2"}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors relative",title:"Copy",children:H?e.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied!"}):e.jsx(et,{className:"w-4 sm:w-5 h-4 sm:h-5 dark:text-white text-gray-600"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:R?"Remove Bookmark":"Add Bookmark",onClick:Q,disabled:C,children:C?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b border-current"}):e.jsx($e,{className:`w-4 sm:w-5 h-4 sm:h-5 transition-colors ${R?"text-cyan-500 fill-cyan-500 dark:text-cyan-400 dark:fill-cyan-400":"text-gray-600 dark:text-gray-300"}`})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share",children:e.jsx(_e,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})})]})]})]}):null};let we=null,Ee=0;const tt=300*1e3,at=({surahId:w,verseId:N,onClose:S})=>{const{quranFont:v,fontSize:V,translationFontSize:$,translationLanguage:l}=Ie(),{toasts:D,removeToast:d}=ve(),c=he(),[x,G]=n.useState(()=>{const t=parseInt(w,10);return Number.isNaN(t)?0:t}),[u,p]=n.useState(1),[y,X]=n.useState(null),[A,U]=n.useState(null),[j,_]=n.useState(null),[J,K]=n.useState(!0),[R,L]=n.useState(null),[C,Y]=n.useState(0),[H,M]=n.useState(!1),[q,B]=n.useState(null),[z,P]=n.useState("al-afasy"),[Z,re]=n.useState("qirath");n.useEffect(()=>{N&&p(parseInt(N))},[N]),n.useEffect(()=>{const t=parseInt(w,10);Number.isNaN(t)||G(t)},[w]),n.useEffect(()=>{let t=!1;return(async()=>{if(!(!x||!u))try{K(!0),L(null),_(null),U(null);const s=u,g=l==="mal"?Ae(x,s,"mal").then(i=>i||[]).catch(i=>(console.error("❌ Error fetching Malayalam interpretations:",i),[])):l==="ta"?Je.getAyahTranslation(x,s).then(i=>i?[{interpretation:i,AudioIntrerptn:i,text:i,content:i}]:[]).catch(()=>[]):l==="hi"?ue.getAllExplanations(x,s).then(i=>i&&i.length>0?i.map(W=>({interpretation:W.explanation,AudioIntrerptn:W.explanation,text:W.explanation,content:W.explanation,explanation_no_BN:W.explanation_no_BN,explanation_no_EN:W.explanation_no_EN})):[]).catch(i=>(console.error("❌ Error fetching Hindi explanations in AyahModal:",i),[])):l==="ur"?ye.getAllExplanations(x,s).then(i=>i&&i.length>0?i.map(O=>({interpretation:O.explanation,AudioIntrerptn:O.explanation,text:O.explanation,content:O.explanation,explanation_no:O.explanation_no})):[]).catch(()=>[]):l==="bn"?fe.getAllExplanations(x,s).then(i=>i&&i.length>0?i.map(W=>({interpretation:W.explanation,AudioIntrerptn:W.explanation,text:W.explanation,content:W.explanation,explanation_no_BNG:W.explanation_no_BNG,explanation_no_EN:W.explanation_no_EN})):[]).catch(i=>(console.error("❌ Error fetching Bangla explanations in AyahModal:",i),[])):l==="E"?(async()=>{try{const i=await Ce.getAyahTranslation(x,s);if(!i)return[];const O=[],W=/<sup[^>]*foot_note="([^"]+)"[^>]*>(\d+)<\/sup>/g;let Se;for(;(Se=W.exec(i))!==null;){const F=Se[1];O.push(F)}if(O.length===0)return[];const Fe=O.map(F=>fetch(`${Me}/english/footnote/${F}`).then(ne=>ne.ok?ne.json().then(pe=>({footnote_id:F,text:pe.footnote_text,content:pe.footnote_text,explanation:pe.footnote_text})):null).catch(ne=>(console.error(`❌ Error fetching footnote ${F}:`,ne),null)));return(await Promise.all(Fe)).filter(F=>F!==null).map((F,ne)=>({interpretation:F.text,AudioIntrerptn:F.text,text:F.text,content:F.text,interptn_no:F.footnote_id||ne+1}))}catch(i){return console.error(`❌ [AyahModal] Error fetching English translation for verse ${s}:`,i),[]}})():(async()=>{try{return l==="mal"?await Ae(x,s,"mal"):await De(x,s,1,l)}catch{return null}})(),k=l==="ta"||l==="hi"||l==="bn"||l==="E"?Promise.resolve(null):Ue(x,s),E=Date.now(),f=async()=>{if(we&&E-Ee<tt)return we;const i=await ge();return we=i,Ee=E,i},[ie,ze,le,ee]=await Promise.all([f(),Re(x),k,g]);if(t)return;const Ne=ie.find(i=>i.number===x);X(Ne||{arabic:"Unknown Surah",number:x}),Y(Ne?.ayahs||0);const Pe=ze.find(i=>i.verse_key===`${x}:${s}`),je=le?Array.isArray(le)?le.find(i=>i.contiayano===s):le:null;let se="";if(l==="E")try{se=await Ce.getAyahTranslation(x,s),se=se?se.replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim():""}catch(i){console.error("Error fetching English translation:",i),se=""}if(t||(U({number:s,arabic:Pe?.text_uthmani||"",translation:l==="E"?se:je?.AudioText?je.AudioText.replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim():"",verseKey:`${x}:${s}`}),t))return;ee?Array.isArray(ee)?_(ee):ee.data&&Array.isArray(ee.data)?_(ee.data):_(typeof ee=="object"?[ee]:null):_(null)}catch(s){if(t)return;L(s.message),console.error("Error fetching verse data:",s)}finally{if(t)return;K(!1)}})(),()=>{t=!0}},[x,u,l]),n.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".bangla-explanation-link");if(s){const g=s.getAttribute("data-explanation-number"),k=s.getAttribute("data-surah"),E=s.getAttribute("data-ayah");if(g&&k&&E)try{const f=await fe.getExplanationByNumber(parseInt(k),parseInt(E),g);alert(f?`Explanation ${g}:

${f}`:"Explanation not found.")}catch(f){console.error("❌ Error loading Bangla explanation:",f),alert("Error loading explanation.")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),n.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".hindi-explanation-link");if(s){const g=s.getAttribute("data-explanation-number"),k=s.getAttribute("data-surah"),E=s.getAttribute("data-ayah");if(g&&k&&E)try{const f=await ue.getExplanationByNumber(parseInt(k),parseInt(E),g);alert(f?`Explanation ${g}:

${f}`:`Explanation ${g} not found.`)}catch(f){console.error("❌ Error loading Hindi explanation:",f),alert("Error loading explanation.")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),n.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".urdu-footnote-link");if(s){const g=s.getAttribute("data-footnote-id");s.getAttribute("data-footnote-number");const k=s.getAttribute("data-surah"),E=s.getAttribute("data-ayah");if(g&&k&&E)try{const f=await ye.getFootnoteExplanation(g);f&&f.trim()!==""&&f!=="Explanation not available"?(_([{interpretation:f,AudioIntrerptn:f,text:f,content:f}]),setShowInterpretationModal(!0)):showToast("Footnote explanation not available","warning")}catch(f){console.error("Error fetching Urdu footnote:",f),showToast("Failed to load footnote explanation","error")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]);const te=()=>{u<C&&p(u+1)},o=()=>{u>1&&p(u-1)},b=t=>{M(!0)},I=()=>{M(!1)},T=t=>{if(l!=="mal")return;const h=t.target.closest("sup, a");if(!h)return;const s=(h.innerText||h.textContent||"").trim();if(!s)return;let g=!1;const k=s.replace(/[\s()]+/g,"").toUpperCase();if(/^N\d+$/.test(k))g=!0,S&&S(),c(`/note/${k}`);else{const E=s.match(/(\d+)\s*[:：]\s*(\d+)/);if(E){const f=parseInt(E[1],10),ie=parseInt(E[2],10);Number.isFinite(f)&&Number.isFinite(ie)&&(g=!0,G(f),p(ie))}}g&&(t.preventDefault(),t.stopPropagation())};n.useEffect(()=>{if(H){const t=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}}},[H]);const Q=document.getElementById("modal-root")||document.body;if(J)return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx(ke,{surahId:x,verseId:u,totalVerses:C,surahInfo:y,onVerseChange:p,onClose:S,onWordByWordClick:b,verseData:A,interpretationData:j,selectedQari:z,onQariChange:P}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading verse data..."})]})})]})]}),Q);if(R)return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm",onClick:S}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] max-w-4xl flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx(ke,{surahId:x,verseId:u,totalVerses:C,surahInfo:y,onVerseChange:p,onClose:S,onWordByWordClick:b,verseData:A,interpretationData:j,selectedQari:z,onQariChange:P}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[300px] p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load verse data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:R}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})]})]}),Q);const a=typeof l=="string"&&["e","en"].includes(l.toLowerCase()),m=y?.arabic||(x?`Surah ${x}`:"Surah"),r=Xe(x,m);return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:S}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800",onClick:S,children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx(ke,{surahId:x,verseId:u,totalVerses:C,surahInfo:y,onVerseChange:p,onClose:S,onWordByWordClick:b,verseData:A,selectedQari:z,onQariChange:P}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6 overflow-y-auto flex-1 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsx("div",{className:"mb-4 sm:mb-6 text-center sm:text-left",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-3 gap-2",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-medium text-gray-800 dark:text-gray-200",style:{fontFamily:Ye},"aria-label":m,children:r}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700",children:["Verse ",u," of ",C]})]})}),A&&e.jsx("div",{className:"text-right mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-6",children:e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl dark:text-white text-gray-900 leading-[2.2] px-2 sm:px-0",style:{fontFamily:v,fontSize:`${V}px`},dir:"rtl",children:A.arabic})}),A&&!a&&e.jsx("div",{className:"mb-6 sm:mb-8",children:l==="bn"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-bengali dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${$}px`},dangerouslySetInnerHTML:{__html:fe.parseBanglaTranslationWithClickableExplanations(A.translation,x,u)}}):l==="hi"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-hindi dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${$}px`},dangerouslySetInnerHTML:{__html:ue.parseHindiTranslationWithClickableExplanations(A.translation,x,u)}}):l==="ur"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-urdu dark:text-gray-200 px-2 sm:px-0 text-right prose dark:prose-invert max-w-none",style:{fontSize:`${$}px`},dir:"rtl",dangerouslySetInnerHTML:{__html:ye.parseUrduTranslationWithClickableFootnotes(A.translation,x,u)}}):l==="ta"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-tamil dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${$}px`},dangerouslySetInnerHTML:{__html:A.translation}}):e.jsx("p",{className:"text-gray-700 leading-[1.8] font-poppins dark:text-gray-200 px-2 sm:px-0",style:{fontSize:`${$}px`},children:A.translation})}),(j&&j.length>0,null),j&&j.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Tafheem-ul-Quran"]}),l==="mal"&&e.jsx("style",{children:`
                    .ayah-interpretation-content sup.f-intprno,
                    .ayah-interpretation-content sup.f-noteno,
                    .ayah-interpretation-content a.crs {
                      color: #0F766E !important;
                      cursor: pointer !important;
                      text-decoration: none !important;
                      font-weight: bold;
                    }
                    .dark .ayah-interpretation-content sup.f-intprno,
                    .dark .ayah-interpretation-content sup.f-noteno,
                    .dark .ayah-interpretation-content a.crs {
                      color: #14B8A6 !important;
                    }

                    .ayah-interpretation-content sup.f-intprno:hover,
                    .ayah-interpretation-content sup.f-noteno:hover,
                    .ayah-interpretation-content a.crs:hover {
                      text-decoration: underline !important;
                    }
                  `}),e.jsx("div",{className:"space-y-4 ayah-interpretation-content",onClick:T,children:j.map((t,h)=>{const g=[t.AudioIntrerptn,t.interpretation,t.Interpretation,t.text,t.content,t?.interpretation_text,t?.InterpretationText].find(f=>typeof f=="string"&&f.trim().length>0)||"No interpretation available",k=typeof g=="string"?g:String(g??""),E=l==="hi"?t.explanation_no_BN||t.explanation_no_EN||h+1:l==="bn"?t.explanation_no_BNG||t.explanation_no_EN||h+1:l==="ur"?t.explanation_no||h+1:a?t.interptn_no||t.number||h+1:t.resolvedInterpretationNo||t.InterpretationNo||t.Interpretation_No||t.interptn_no||t.number||t.requestedInterpretationNo||h+1;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[(l==="hi"||l==="ur")&&e.jsxs("div",{className:"mb-3 text-sm font-bold text-primary dark:text-primary-light",children:["Explanation ",E,":"]}),a&&null,e.jsx("div",{className:"text-gray-700 leading-[1.8] font-poppins dark:text-gray-300 text-sm sm:text-base",style:{fontSize:`${$}px`},dangerouslySetInnerHTML:{__html:k}})]},h)})})]}),(!j||j.length===0)&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3",children:"Interpretation"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm italic flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),x===114?"Interpretation data is not available for Surah An-Nas (114).":"No interpretation available for this verse."]})})]})]}),e.jsxs("div",{className:"flex justify-between gap-3 p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("button",{onClick:o,disabled:u<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${u<=1?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-white text-gray-700 border-gray-200 hover:border-primary hover:text-primary hover:bg-primary/5 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:border-primary-light dark:hover:text-primary-light"}`,children:[e.jsx(Be,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Prev"})]}),e.jsxs("button",{onClick:te,disabled:u>=C,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${u>=C?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-primary text-white border-primary hover:bg-primary-dark shadow-lg shadow-primary/20 dark:bg-primary dark:border-primary dark:hover:bg-primary-dark"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Next Ayah"}),e.jsx(We,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}),H&&ae.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-[100000] pt-24 sm:pt-28 lg:pt-32 p-4 overflow-hidden",children:e.jsx("div",{className:"bg-white dark:bg-[#2A2C38] rounded-xl shadow-2xl w-full sm:w-auto sm:max-w-6xl max-w-[95vw]",children:e.jsx(rt,{selectedVerse:u,surahId:x,onClose:I,onNavigate:p})})}),Q),e.jsx(ce,{toasts:D,removeToast:d})]}),Q)},rt=({selectedVerse:w,surahId:N,onClose:S,onNavigate:v,onSurahChange:V})=>{const $=He(),l=he(),D=qe(),d=$.surahId||N,c=$.verseId?parseInt($.verseId):w,{quranFont:x,fontSize:G,translationFontSize:u,translationLanguage:p}=Ie(),[y,X]=n.useState(null),[A,U]=n.useState([]),[j,_]=n.useState(null),[J,K]=n.useState(!0),[R,L]=n.useState(null),[C,Y]=n.useState(0),[H,M]=n.useState(!1),{toasts:q,removeToast:B,showSuccess:z,showError:P}=ve(),Z=document.getElementById("modal-root")||document.body;n.useEffect(()=>{(async()=>{if(!(!c||!d))try{K(!0),L(null);const t=[p==="ta"?Oe.getWordByWordDataWithArabic(d,c).catch(async k=>await de(d,c,"E")):p==="hi"?Ge.getWordByWordDataWithArabic(d,c).catch(async k=>await de(d,c,"E")):p==="bn"?Ke.getWordByWordDataWithArabic(d,c).catch(async k=>await de(d,c,"E")):p!=="mal"?de(d,c,p):Promise.resolve(null),Qe(d,c).catch(()=>[]),j?Promise.resolve(j):ge().then(k=>k.find(E=>E.number===parseInt(d))).catch(()=>null)],[h,s,g]=await Promise.all(t);X(h),U(s||[]),_(g),Y(g?.ayahs||0)}catch(t){L(t.message)}finally{K(!1)}})()},[c,d,p]);const re=()=>{c>1&&(v?v(c-1):l(`/word-by-word/${d}/${c-1}`,{state:D.state}))},te=()=>{v?v(c+1):l(`/word-by-word/${d}/${c+1}`,{state:D.state})},o=()=>{if(S)S();else{const r=D.state?.from;l(r&&r!=="/surah/all"&&r!=="/surah"?r:`/surah/${d}`)}},b=r=>{M(!0)},I=r=>{V?V(r):v?(S(),l(`/surah/${r}?wordByWord=1`)):l(`/word-by-word/${r}/1`,{state:D.state})},T=r=>{v?v(r):l(`/word-by-word/${d}/${r}`,{state:D.state})},Q=()=>{M(!1)},m=(r=>{switch(r){case"mal":return"Malayalam";case"E":return"English";case"ta":return"Tamil";case"hi":return"Hindi";case"ur":return"Urdu";case"ar":return"Arabic";default:return"English"}})(p);return J?ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:d,selectedVerse:c,surahInfo:j,onNavigate:v,onClose:o,onShowAyahModal:b,onSurahChange:I,onVerseChange:T,wordData:y,showSuccess:z,showError:P,translationLanguage:p})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-8 min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading word meanings..."})]})}),e.jsx(ce,{toasts:q,removeToast:B})]})]}),Z):R?ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm",onClick:o}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:d,selectedVerse:c,surahInfo:j,onNavigate:v,onClose:o,onShowAyahModal:b,onSurahChange:I,onVerseChange:T,wordData:y,showSuccess:z,showError:P,translationLanguage:p})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-8 min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 mb-2",children:"Failed to load word meanings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Retry"})]})}),e.jsx(ce,{toasts:q,removeToast:B})]})]}),Z):ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:o}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800",onClick:o,children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:d,selectedVerse:c,surahInfo:j,onNavigate:v,onClose:o,onShowAyahModal:b,onSurahChange:I,onVerseChange:T,wordData:y,showSuccess:z,showError:P,translationLanguage:p})}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6 overflow-y-auto flex-1 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsx("div",{className:"mb-4 sm:mb-6 text-center sm:text-left",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-3 gap-2",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200",style:{fontFamily:x,fontSize:`${G}px`},children:j?.arabic||`Surah ${d}`}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700",children:["Verse ",c," of ",C]})]})}),y&&e.jsx("div",{className:"text-right mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-6",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl dark:text-white text-gray-900 leading-[2.2] px-2 sm:px-0",style:{fontFamily:x,fontSize:`${G}px`},dir:"rtl",children:[y.text_uthmani||y.words&&y.words.map(r=>r.text_uthmani||r.text_simple).join(" ")||"Verse text not available"," "]})}),y&&y.translations&&y.translations.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Translation"]}),e.jsx("p",{className:`text-gray-700 leading-[1.8] dark:text-gray-200 px-2 sm:px-0 ${p==="hi"?"font-hindi":p==="ur"?"font-urdu":p==="bn"?"font-bengali":p==="ta"?"font-tamil":p==="mal"?"font-malayalam":"font-poppins"}`,style:{fontSize:`${u}px`},children:y.translations[0].text})]}),p!=="mal"&&y&&y.words&&y.words.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[p!=="bn"&&e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Word Breakdown (",m,")"]}),e.jsx("div",{className:"space-y-4",children:y.words.map((r,t)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl text-gray-800 dark:text-white font-arabic",style:{fontFamily:x,fontSize:`${G}px`},children:r.text_uthmani||r.text_simple||"N/A"}),r.text_simple&&r.text_uthmani!==r.text_simple&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r.text_simple})]}),e.jsxs("div",{className:"text-left max-w-[60%]",children:[r.translation&&r.translation.text?e.jsx("p",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-gray-200 mb-1 font-medium",style:{fontSize:`${u}px`},children:r.translation.text}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1 italic",style:{fontSize:`${u}px`},children:"Translation not available"}),r.class_name&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 uppercase tracking-wide",children:r.class_name})]})]})},t))})]}),y&&(!y.words||y.words.length===0)&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Word Breakdown:"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm italic",children:"Word-by-word breakdown not available for this verse."})})]}),p==="mal"&&A.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Word Breakdown (Malayalam)"]}),e.jsx("div",{className:"space-y-4",children:A.reduce((t,h,s)=>(t.findIndex(k=>k.WordPhrase===h.WordPhrase)===-1&&t.push({...h,originalIndex:s}),t),[]).map((t,h)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-2xl sm:text-3xl font-arabic dark:text-white text-gray-800",style:{fontFamily:x,fontSize:`${G}px`},children:t.WordPhrase})}),e.jsx("div",{className:"text-left max-w-[60%]",children:e.jsx("span",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-gray-200 font-malayalam font-medium",style:{fontSize:`${u}px`},children:t.Meaning})})]})},`${t.WordPhrase}-${h}`))})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-between gap-3 p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 z-10",children:[e.jsxs("button",{onClick:re,disabled:c<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${c<=1?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-white text-gray-700 border-gray-200 hover:border-primary hover:text-primary hover:bg-primary/5 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:border-primary-light dark:hover:text-primary-light"}`,children:[e.jsx(Be,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Prev"})]}),e.jsxs("button",{onClick:te,disabled:c>=C,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${c>=C?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-primary text-white border-primary hover:bg-primary-dark shadow-lg shadow-primary/20 dark:bg-primary dark:border-primary dark:hover:bg-primary-dark"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Next Ayah"}),e.jsx(We,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),H&&e.jsx(at,{surahId:d,verseId:c,onClose:Q}),e.jsx(ce,{toasts:q,removeToast:B})]})]}),Z)};export{at as A,rt as W};
