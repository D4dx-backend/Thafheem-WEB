import{G as _e,r,a as he,g as $e,j as e,X as me,Q as xe,B as Pe,n as We,o as Te,t as ge,x as oe,u as Be,ad as ae,p as Ie,ae as Ee,af as Ve,I as De,w as Re,v as Ue,d as He,b as qe,ag as de,ah as Qe}from"./index-D2bCerlO.js";import Oe from"./tamilWordByWordService-SO7jYcnK.js";import Ge from"./hindiWordByWordService-0Fk5bvry.js";import Ke from"./banglaWordByWordService-B0pxDZ7G.js";import{u as ve,T as ce}from"./Toast-PYsKcHUz.js";import{C as ze}from"./chevron-left-BigIIEdd.js";import Xe from"./tamilTranslationService-54WtXJFr.js";import pe from"./hindiTranslationService-BBKiYQvL.js";import ye from"./urduTranslationService-CWrhNGUr.js";import fe from"./banglaTranslationService-dFx8O3w7.js";import Ae from"./englishTranslationService-Ju4YN8zF.js";import{g as Je,s as Ye}from"./surahNameUtils-CNmXwDjY.js";const Ze=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],et=_e("list",Ze);const tt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"16",height:"18",x:"4",y:"4",rx:"2",key:"1u9h20"}],["path",{d:"M8 10h6",key:"3oa6kw"}],["path",{d:"M8 14h8",key:"1fgep2"}],["path",{d:"M8 18h5",key:"17enja"}]],at=_e("notepad-text",tt),be=({surahId:b,selectedVerse:k,surahInfo:v,onNavigate:N,onClose:M,onShowAyahModal:_,onSurahChange:o,onVerseChange:I,wordData:l=null,showSuccess:m=null,showError:i=null,translationLanguage:V=null})=>{const[u,x]=r.useState(!0),[g,te]=r.useState([]),[j,O]=r.useState(!1),[S,$]=r.useState(!1),[K,L]=r.useState(!1),[D,R]=r.useState(!1),[E,G]=r.useState(""),C=r.useRef(null),F=r.useRef(null),J=he(),{user:Y}=$e?.()||{user:null};v?.ayahs;const U=a=>{O(!1),G(""),o&&o(a.number)},H=a=>{$(!1),I&&I(a)},Z=()=>{const a=v?.ayahs||0;return Array.from({length:a},(f,P)=>P+1)},re=async()=>{try{L(!0);const a=oe.getEffectiveUserId(Y),f=v?.name||`Surah ${b}`,P=l?.text_uthmani||l?.translations?.[0]?.text||"";await oe.addBookmark(a,b,k,"word-by-word",f,P),m&&m("Word-by-word content bookmarked successfully!")}catch(a){console.error("Failed to bookmark word-by-word content:",a),i&&i("Failed to save bookmark. Please try again.")}finally{setTimeout(()=>L(!1),300)}},c=async()=>{try{const a=v?.name||`Surah ${b}`,f=l?.text_uthmani||l?.translations?.[0]?.text||"",P=l?.translations?.[0]?.text||"";let W=`Word by Word - ${a}, Verse ${k}

`;W+=`Arabic: ${f}

`,P&&(W+=`Translation: ${P}

`),l?.words&&l.words.length>0&&(W+=`Word Breakdown:
`,l.words.slice(0,5).forEach((q,T)=>{const d=q.text_uthmani||q.text_simple||"",t=q.translation?.text||"N/A";W+=`${T+1}. ${d} - ${t}
`}),l.words.length>5&&(W+=`... and ${l.words.length-5} more words
`),W+=`
`),W+="Shared from Thafheem - Word by Word Study";const X=window.location.href;if(navigator.share)await navigator.share({title:`Word by Word - ${a}, Verse ${k}`,text:W,url:X});else{const q=`${W}

View full content: ${X}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(q),alert("Word-by-word content copied to clipboard for sharing");else{const T=document.createElement("textarea");T.value=q,T.style.position="fixed",T.style.left="-999999px",T.style.top="-999999px",document.body.appendChild(T),T.focus(),T.select(),document.execCommand("copy"),document.body.removeChild(T),alert("Word-by-word content copied to clipboard for sharing")}}}catch(a){console.error("Failed to share word-by-word content:",a),a.name!=="AbortError"&&alert("Failed to share content: "+a.message)}};return r.useEffect(()=>{(async()=>{try{R(!0);const f=await ge();te(f)}catch(f){console.error("Error loading surahs:",f)}finally{R(!1)}})()},[]),r.useEffect(()=>{const a=f=>{C.current&&!C.current.contains(f.target)&&O(!1),F.current&&!F.current.contains(f.target)&&$(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),g.filter(a=>a.name.toLowerCase().includes(E.toLowerCase())||a.arabic.includes(E)||a.number.toString().includes(E)),u?e.jsxs("div",{className:"bg-white dark:bg-gray-900 px-3 sm:px-4 py-3 space-y-3 relative z-10",children:[e.jsx("button",{className:"absolute top-2 right-2 sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors bg-white dark:bg-gray-600 shadow-sm z-10",title:"Close",onClick:()=>M?M():J(-1),children:e.jsx(me,{className:"w-4 h-4 text-gray-600 dark:text-white"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2 sm:space-x-3 pr-12 sm:pr-0",children:[e.jsxs("div",{className:"relative dropdown-container",ref:C,children:[e.jsxs("button",{onClick:()=>O(!j),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:b?`${b} - ${v?.name||"Loading..."}`:"Select Surah"}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),j&&!D&&e.jsx("div",{className:"absolute sm:text-sm text-sm top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-80 sm:w-45 h-[calc(100vh-100px)] z-50",children:g.map(a=>e.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${a.number===parseInt(b)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>U(a),children:[a.number," - ",a.name]},a.number))})]}),e.jsxs("div",{className:"relative dropdown-container",ref:F,children:[e.jsxs("button",{onClick:()=>$(!S),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:k||"1"}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),S&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-auto max-h-60 z-50",children:Z().map(a=>e.jsx("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${parseInt(k)===a?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>H(a),children:a},a))})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 self-end sm:self-auto",children:[V!=="ta"&&e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Ayah Details",onClick:()=>_&&_(k),children:e.jsx(Pe,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})}),e.jsx("button",{onClick:re,disabled:K,className:`p-2 rounded-lg transition-colors ${K?"text-gray-400 cursor-not-allowed":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:K?"Saving...":"Bookmark this verse",children:e.jsx(We,{className:"w-4 sm:w-5 h-4 sm:h-5"})}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share word-by-word content",children:e.jsx(Te,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})}),M&&e.jsx("button",{className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors dark:bg-white",title:"Close",onClick:M,children:e.jsx(me,{className:"w-5 h-5 text-gray-600"})})]})]})]}):null},ke=({surahId:b,verseId:k,totalVerses:v,surahInfo:N,onVerseChange:M,onSurahChange:_,onClose:o,onWordByWordClick:I,verseData:l,selectedQari:m,onQariChange:i})=>{const[V,u]=r.useState(!0),[x,g]=r.useState(!1),[te,j]=r.useState(!1),[O,S]=r.useState([]),[$,K]=r.useState(!0),[L,D]=r.useState(!1),[R,E]=r.useState(!1),G=he(),{user:C}=$e(),{showSuccess:F,showError:J}=ve();r.useEffect(()=>{(async()=>{try{const a=await ge();S(a)}catch(a){console.error("Error loading surahs:",a)}finally{K(!1)}})()},[]),r.useEffect(()=>{(async()=>{if(C&&b&&k)try{const a=await oe.isBookmarked(C.uid,b,k,"interpretation");D(a)}catch(a){console.error("Error checking bookmark status:",a)}})()},[C,b,k]);const Y=Array.from({length:v||10},(c,a)=>a+1),U=N?`${N.number} - ${N.name||N.arabic}`:`${b} - Loading...`,H=c=>{_?_(c):G(`/surah/${c}`),g(!1)},Z=c=>{M&&M(c),j(!1)},re=async()=>{if(!C){G("/sign");return}try{if(E(!0),L){const a=(await oe.getBookmarks(C.uid,"interpretation")).find(f=>f.surahId===parseInt(b)&&f.verseId===parseInt(k));a&&(await oe.deleteBookmark(a.id,C.uid),D(!1),F("Bookmark removed successfully"))}else{const c=N?.name||N?.arabic||`Surah ${b}`,a=l?.translation||l?.arabic||"";await oe.addBookmark(C.uid,b,k,"interpretation",c,a),D(!0),F("Verse bookmarked successfully")}}catch(c){console.error("Error handling bookmark:",c),J("Failed to update bookmark. Please try again.")}finally{E(!1)}};return V?e.jsxs("div",{className:"bg-white dark:bg-gray-900 px-3 sm:px-4 py-3 space-y-3 relative",children:[e.jsx("button",{className:"absolute top-2 right-2 sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors bg-white dark:bg-gray-600 shadow-sm z-10",title:"Close",onClick:o||(()=>G(-1)),children:e.jsx(me,{className:"w-4 h-4 text-gray-600 dark:text-white"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2 sm:space-x-3 pr-12 sm:pr-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(c=>!c),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsx("span",{children:U}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),x&&!$&&e.jsx("div",{className:"absolute sm:text-sm text-sm top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-80 sm:w-45 h-[calc(100vh-100px)] z-50",children:O.map(c=>e.jsxs("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${c.number===parseInt(b)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>H(c.number),children:[c.number," - ",c.name]},c.number))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>j(c=>!c),className:"flex font-poppins items-center space-x-2 px-3 sm:px-4 py-2 bg-gray-100 dark:bg-[#323A3F] dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs sm:text-sm font-medium text-gray-700 transition-colors",children:[e.jsxs("span",{children:[" ",k]}),e.jsx(xe,{className:"w-4 h-4 text-gray-600 dark:text-white"})]}),te&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white dark:bg-[#2A2C38] shadow-lg rounded-lg overflow-auto w-auto max-h-60 z-50",children:Y.map(c=>e.jsx("div",{className:`px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-white ${c===parseInt(k)?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>Z(c),children:c},c))})]})]}),e.jsx("div",{className:"hidden sm:flex items-center",children:e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors dark:bg-gray-950",title:"Close",onClick:o||(()=>G(-1)),children:e.jsx(me,{className:"w-5 h-5 text-gray-600"})})})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-2"}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg  transition-colors",title:"Copy",children:e.jsx(at,{className:"w-4 sm:w-5 h-4 sm:h-5 dark:text-white text-gray-600"})}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:L?"Remove Bookmark":"Add Bookmark",onClick:re,disabled:R,children:R?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b border-current"}):e.jsx(We,{className:`w-4 sm:w-5 h-4 sm:h-5 transition-colors ${L?"text-cyan-500 fill-cyan-500 dark:text-cyan-400 dark:fill-cyan-400":"text-gray-600 dark:text-gray-300"}`})}),e.jsxs("button",{className:"relative group p-2 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 rounded-lg transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",title:"Word by Word","aria-label":"Word by Word",onClick:()=>I&&I(k),children:[e.jsx(et,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"pointer-events-none absolute -top-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-md bg-gray-900 px-2 py-1 text-[10px] font-medium text-white opacity-0 shadow-lg transition-opacity duration-150 group-hover:opacity-100 group-focus-visible:opacity-100 dark:bg-white dark:text-gray-900 z-50",children:"Word by Word"})]}),e.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share",children:e.jsx(Te,{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-600 dark:text-gray-300"})})]})]})]}):null};let we=null,Ce=0;const rt=300*1e3,st=({surahId:b,verseId:k,onClose:v})=>{const{quranFont:N,fontSize:M,translationFontSize:_,translationLanguage:o}=Be(),{toasts:I,removeToast:l}=ve(),m=he(),[i,V]=r.useState(()=>{const t=parseInt(b,10);return Number.isNaN(t)?0:t}),[u,x]=r.useState(1),[g,te]=r.useState(null),[j,O]=r.useState(null),[S,$]=r.useState(null),[K,L]=r.useState(!0),[D,R]=r.useState(null),[E,G]=r.useState(0),[C,F]=r.useState(!1),[J,Y]=r.useState(null),[U,H]=r.useState("al-afasy"),[Z,re]=r.useState("qirath");r.useEffect(()=>{k&&x(parseInt(k))},[k]),r.useEffect(()=>{const t=parseInt(b,10);Number.isNaN(t)||V(t)},[b]),r.useEffect(()=>{let t=!1;return(async()=>{if(!(!i||!u))try{L(!0),R(null),$(null),O(null);const s=u,y=o==="mal"?Ee(i,s,"mal").then(n=>n||[]).catch(n=>(console.error("❌ Error fetching Malayalam interpretations:",n),[])):o==="ta"?Xe.getAyahTranslation(i,s).then(n=>n?[{interpretation:n,AudioIntrerptn:n,text:n,content:n}]:[]).catch(()=>[]):o==="hi"?pe.getAllExplanations(i,s).then(n=>n&&n.length>0?n.map(B=>({interpretation:B.explanation,AudioIntrerptn:B.explanation,text:B.explanation,content:B.explanation,explanation_no_BN:B.explanation_no_BN,explanation_no_EN:B.explanation_no_EN})):[]).catch(n=>(console.error("❌ Error fetching Hindi explanations in AyahModal:",n),[])):o==="ur"?ye.getAllExplanations(i,s).then(n=>n&&n.length>0?n.map(Q=>({interpretation:Q.explanation,AudioIntrerptn:Q.explanation,text:Q.explanation,content:Q.explanation,explanation_no:Q.explanation_no})):[]).catch(()=>[]):o==="bn"?fe.getAllExplanations(i,s).then(n=>n&&n.length>0?n.map(B=>({interpretation:B.explanation,AudioIntrerptn:B.explanation,text:B.explanation,content:B.explanation,explanation_no_BNG:B.explanation_no_BNG,explanation_no_EN:B.explanation_no_EN})):[]).catch(n=>(console.error("❌ Error fetching Bangla explanations in AyahModal:",n),[])):o==="E"?(async()=>{try{const n=await Ae.getAyahTranslation(i,s);if(!n)return[];const Q=[],B=/<sup[^>]*foot_note="([^"]+)"[^>]*>(\d+)<\/sup>/g;let Se;for(;(Se=B.exec(n))!==null;){const z=Se[1];Q.push(z)}if(Q.length===0)return[];const Fe=Q.map(z=>fetch(`${Ve}/english/footnote/${z}`).then(ne=>ne.ok?ne.json().then(ue=>({footnote_id:z,text:ue.footnote_text,content:ue.footnote_text,explanation:ue.footnote_text})):null).catch(ne=>(console.error(`❌ Error fetching footnote ${z}:`,ne),null)));return(await Promise.all(Fe)).filter(z=>z!==null).map((z,ne)=>({interpretation:z.text,AudioIntrerptn:z.text,text:z.text,content:z.text,interptn_no:z.footnote_id||ne+1}))}catch(n){return console.error(`❌ [AyahModal] Error fetching English translation for verse ${s}:`,n),[]}})():(async()=>{try{return o==="mal"?await Ee(i,s,"mal"):await De(i,s,1,o)}catch{return null}})(),w=o==="ta"||o==="hi"||o==="bn"||o==="E"?Promise.resolve(null):Re(i,s),A=Date.now(),p=async()=>{if(we&&A-Ce<rt)return we;const n=await ge();return we=n,Ce=A,n},[ie,Me,le,ee]=await Promise.all([p(),Ue(i),w,y]);if(t)return;const Ne=ie.find(n=>n.number===i);te(Ne||{arabic:"Unknown Surah",number:i}),G(Ne?.ayahs||0);const Le=Me.find(n=>n.verse_key===`${i}:${s}`),je=le?Array.isArray(le)?le.find(n=>n.contiayano===s):le:null;let se="";if(o==="E")try{se=await Ae.getAyahTranslation(i,s),se=se?se.replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim():""}catch(n){console.error("Error fetching English translation:",n),se=""}if(t||(O({number:s,arabic:Le?.text_uthmani||"",translation:o==="E"?se:je?.AudioText?je.AudioText.replace(/<sup[^>]*foot_note[^>]*>\d+<\/sup>/g,"").replace(/\s+/g," ").trim():"",verseKey:`${i}:${s}`}),t))return;ee?Array.isArray(ee)?$(ee):ee.data&&Array.isArray(ee.data)?$(ee.data):$(typeof ee=="object"?[ee]:null):$(null)}catch(s){if(t)return;R(s.message),console.error("Error fetching verse data:",s)}finally{if(t)return;L(!1)}})(),()=>{t=!0}},[i,u,o]),r.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".bangla-explanation-link");if(s){const y=s.getAttribute("data-explanation-number"),w=s.getAttribute("data-surah"),A=s.getAttribute("data-ayah");if(y&&w&&A)try{const p=await fe.getExplanationByNumber(parseInt(w),parseInt(A),y);alert(p?`Explanation ${y}:

${p}`:"Explanation not found.")}catch(p){console.error("❌ Error loading Bangla explanation:",p),alert("Error loading explanation.")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),r.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".hindi-explanation-link");if(s){const y=s.getAttribute("data-explanation-number"),w=s.getAttribute("data-surah"),A=s.getAttribute("data-ayah");if(y&&w&&A)try{const p=await pe.getExplanationByNumber(parseInt(w),parseInt(A),y);alert(p?`Explanation ${y}:

${p}`:`Explanation ${y} not found.`)}catch(p){console.error("❌ Error loading Hindi explanation:",p),alert("Error loading explanation.")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),r.useEffect(()=>{const t=async h=>{h.preventDefault(),h.stopPropagation();const s=h.target.closest(".urdu-footnote-link");if(s){const y=s.getAttribute("data-footnote-id");s.getAttribute("data-footnote-number");const w=s.getAttribute("data-surah"),A=s.getAttribute("data-ayah");if(y&&w&&A)try{const p=await ye.getFootnoteExplanation(y);p&&p.trim()!==""&&p!=="Explanation not available"?($([{interpretation:p,AudioIntrerptn:p,text:p,content:p}]),setShowInterpretationModal(!0)):showToast("Footnote explanation not available","warning")}catch(p){console.error("Error fetching Urdu footnote:",p),showToast("Failed to load footnote explanation","error")}}};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]);const c=()=>{u<E&&x(u+1)},a=()=>{u>1&&x(u-1)},f=t=>{F(!0)},P=()=>{F(!1)},W=t=>{if(o!=="mal")return;const h=t.target.closest("sup, a");if(!h)return;const s=(h.innerText||h.textContent||"").trim();if(!s)return;let y=!1;const w=s.replace(/[\s()]+/g,"").toUpperCase();if(/^N\d+$/.test(w))y=!0,v&&v(),m(`/note/${w}`);else{const A=s.match(/(\d+)\s*[:：]\s*(\d+)/);if(A){const p=parseInt(A[1],10),ie=parseInt(A[2],10);Number.isFinite(p)&&Number.isFinite(ie)&&(y=!0,V(p),x(ie))}}y&&(t.preventDefault(),t.stopPropagation())};r.useEffect(()=>{if(C){const t=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}}},[C]);const X=document.getElementById("modal-root")||document.body;if(K)return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx(ke,{surahId:i,verseId:u,totalVerses:E,surahInfo:g,onVerseChange:x,onClose:v,onWordByWordClick:f,verseData:j,selectedQari:U,onQariChange:H}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading verse data..."})]})})]})]}),X);if(D)return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm",onClick:v}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] max-w-4xl flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx(ke,{surahId:i,verseId:u,totalVerses:E,surahInfo:g,onVerseChange:x,onClose:v,onWordByWordClick:f,verseData:j,selectedQari:U,onQariChange:H}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[300px] p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load verse data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:D}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})]})]}),X);const q=typeof o=="string"&&["e","en"].includes(o.toLowerCase()),T=g?.arabic||(i?`Surah ${i}`:"Surah"),d=Je(i,T);return ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:v}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800",onClick:v,children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx(ke,{surahId:i,verseId:u,totalVerses:E,surahInfo:g,onVerseChange:x,onClose:v,onWordByWordClick:f,verseData:j,selectedQari:U,onQariChange:H}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6 overflow-y-auto flex-1 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsx("div",{className:"mb-4 sm:mb-6 text-center sm:text-left",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-3 gap-2",children:[e.jsx("h3",{className:"text-2xl sm:text-3xl font-medium text-gray-800 dark:text-gray-200",style:{fontFamily:Ye},"aria-label":T,children:d}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700",children:["Verse ",u," of ",E]})]})}),j&&e.jsx("div",{className:"text-right mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-6",children:e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl dark:text-white text-gray-900 leading-[2.2] px-2 sm:px-0",style:{fontFamily:N,fontSize:`${M}px`},dir:"rtl",children:j.arabic})}),j&&!q&&e.jsx("div",{className:"mb-6 sm:mb-8",children:o==="bn"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-bengali dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${_}px`},dangerouslySetInnerHTML:{__html:fe.parseBanglaTranslationWithClickableExplanations(j.translation,i,u)}}):o==="hi"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-hindi dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${_}px`},dangerouslySetInnerHTML:{__html:pe.parseHindiTranslationWithClickableExplanations(j.translation,i,u)}}):o==="ur"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-urdu dark:text-gray-200 px-2 sm:px-0 text-right prose dark:prose-invert max-w-none",style:{fontSize:`${_}px`},dir:"rtl",dangerouslySetInnerHTML:{__html:ye.parseUrduTranslationWithClickableFootnotes(j.translation,i,u)}}):o==="ta"?e.jsx("div",{className:"text-gray-700 leading-[1.8] font-tamil dark:text-gray-200 px-2 sm:px-0 prose dark:prose-invert max-w-none",style:{fontSize:`${_}px`},dangerouslySetInnerHTML:{__html:j.translation}}):e.jsx("p",{className:"text-gray-700 leading-[1.8] font-poppins dark:text-gray-200 px-2 sm:px-0",style:{fontSize:`${_}px`},children:j.translation})}),(S&&S.length>0,null),S&&S.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Tafheem-ul-Quran"]}),o==="mal"&&e.jsx("style",{children:`
                    .ayah-interpretation-content sup.f-intprno,
                    .ayah-interpretation-content sup.f-noteno,
                    .ayah-interpretation-content a.crs {
                      color: #0F766E !important;
                      cursor: pointer !important;
                      text-decoration: none !important;
                      font-weight: bold;
                    }
                    .dark .ayah-interpretation-content sup.f-intprno,
                    .dark .ayah-interpretation-content sup.f-noteno,
                    .dark .ayah-interpretation-content a.crs {
                      color: #14B8A6 !important;
                    }

                    .ayah-interpretation-content sup.f-intprno:hover,
                    .ayah-interpretation-content sup.f-noteno:hover,
                    .ayah-interpretation-content a.crs:hover {
                      text-decoration: underline !important;
                    }
                  `}),e.jsx("div",{className:"space-y-4 ayah-interpretation-content",onClick:W,children:S.map((t,h)=>{const y=[t.AudioIntrerptn,t.interpretation,t.Interpretation,t.text,t.content,t?.interpretation_text,t?.InterpretationText].find(p=>typeof p=="string"&&p.trim().length>0)||"No interpretation available",w=typeof y=="string"?y:String(y??""),A=o==="hi"?t.explanation_no_BN||t.explanation_no_EN||h+1:o==="bn"?t.explanation_no_BNG||t.explanation_no_EN||h+1:o==="ur"?t.explanation_no||h+1:q?t.interptn_no||t.number||h+1:t.resolvedInterpretationNo||t.InterpretationNo||t.Interpretation_No||t.interptn_no||t.number||t.requestedInterpretationNo||h+1;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[(o==="hi"||o==="ur")&&e.jsxs("div",{className:"mb-3 text-sm font-bold text-primary dark:text-primary-light",children:["Explanation ",A,":"]}),q&&null,e.jsx("div",{className:"text-gray-700 leading-[1.8] font-poppins dark:text-gray-300 text-sm sm:text-base",style:{fontSize:`${_}px`},dangerouslySetInnerHTML:{__html:w}})]},h)})})]}),(!S||S.length===0)&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3",children:"Interpretation"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm italic flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),i===114?"Interpretation data is not available for Surah An-Nas (114).":"No interpretation available for this verse."]})})]})]}),e.jsxs("div",{className:"flex justify-between gap-3 p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("button",{onClick:a,disabled:u<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${u<=1?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-white text-gray-700 border-gray-200 hover:border-primary hover:text-primary hover:bg-primary/5 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:border-primary-light dark:hover:text-primary-light"}`,children:[e.jsx(ze,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Prev"})]}),e.jsxs("button",{onClick:c,disabled:u>=E,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${u>=E?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-primary text-white border-primary hover:bg-primary-dark shadow-lg shadow-primary/20 dark:bg-primary dark:border-primary dark:hover:bg-primary-dark"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Next Ayah"}),e.jsx(Ie,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}),C&&ae.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start justify-center z-[100000] pt-24 sm:pt-28 lg:pt-32 p-4 overflow-hidden",children:e.jsx("div",{className:"bg-white dark:bg-[#2A2C38] rounded-xl shadow-2xl w-full sm:w-auto sm:max-w-6xl max-w-[95vw]",children:e.jsx(nt,{selectedVerse:u,surahId:i,onClose:P,onNavigate:x})})}),X),e.jsx(ce,{toasts:I,removeToast:l})]}),X)},nt=({selectedVerse:b,surahId:k,onClose:v,onNavigate:N,onSurahChange:M})=>{const _=He(),o=he(),I=qe(),l=_.surahId||k,m=_.verseId?parseInt(_.verseId):b,{quranFont:i,fontSize:V,translationFontSize:u,translationLanguage:x}=Be(),[g,te]=r.useState(null),[j,O]=r.useState([]),[S,$]=r.useState(null),[K,L]=r.useState(!0),[D,R]=r.useState(null),[E,G]=r.useState(0),[C,F]=r.useState(!1),{toasts:J,removeToast:Y,showSuccess:U,showError:H}=ve(),Z=document.getElementById("modal-root")||document.body;r.useEffect(()=>{(async()=>{if(!(!m||!l))try{L(!0),R(null);const t=[x==="ta"?Oe.getWordByWordDataWithArabic(l,m).catch(async w=>await de(l,m,"E")):x==="hi"?Ge.getWordByWordDataWithArabic(l,m).catch(async w=>await de(l,m,"E")):x==="bn"?Ke.getWordByWordDataWithArabic(l,m).catch(async w=>await de(l,m,"E")):x!=="mal"?de(l,m,x):Promise.resolve(null),Qe(l,m).catch(()=>[]),S?Promise.resolve(S):ge().then(w=>w.find(A=>A.number===parseInt(l))).catch(()=>null)],[h,s,y]=await Promise.all(t);te(h),O(s||[]),$(y),G(y?.ayahs||0)}catch(t){R(t.message)}finally{L(!1)}})()},[m,l,x]);const re=()=>{m>1&&(N?N(m-1):o(`/word-by-word/${l}/${m-1}`,{state:I.state}))},c=()=>{N?N(m+1):o(`/word-by-word/${l}/${m+1}`,{state:I.state})},a=()=>{if(v)v();else{const d=I.state?.from;o(d&&d!=="/surah/all"&&d!=="/surah"?d:`/surah/${l}`)}},f=d=>{F(!0)},P=d=>{M?M(d):N?(v(),o(`/surah/${d}?wordByWord=1`)):o(`/word-by-word/${d}/1`,{state:I.state})},W=d=>{N?N(d):o(`/word-by-word/${l}/${d}`,{state:I.state})},X=()=>{F(!1)},T=(d=>{switch(d){case"mal":return"Malayalam";case"E":return"English";case"ta":return"Tamil";case"hi":return"Hindi";case"ur":return"Urdu";case"ar":return"Arabic";default:return"English"}})(x);return K?ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:l,selectedVerse:m,surahInfo:S,onNavigate:N,onClose:a,onShowAyahModal:f,onSurahChange:P,onVerseChange:W,wordData:g,showSuccess:U,showError:H,translationLanguage:x})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-8 min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading word meanings..."})]})}),e.jsx(ce,{toasts:J,removeToast:Y})]})]}),Z):D?ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:l,selectedVerse:m,surahInfo:S,onNavigate:N,onClose:a,onShowAyahModal:f,onSurahChange:P,onVerseChange:W,wordData:g,showSuccess:U,showError:H,translationLanguage:x})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-8 min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 mb-2",children:"Failed to load word meanings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:D}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Retry"})]})}),e.jsx(ce,{toasts:J,removeToast:Y})]})]}),Z):ae.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:a}),e.jsxs("div",{className:"relative w-full sm:w-auto sm:min-w-[600px] lg:min-w-[800px] max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl overflow-hidden animate-slideUp sm:animate-fadeIn",children:[e.jsx("div",{className:"sm:hidden w-full flex justify-center pt-3 pb-1 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800",onClick:a,children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx("div",{className:"flex-shrink-0 z-10 bg-white dark:bg-gray-900",children:e.jsx(be,{surahId:l,selectedVerse:m,surahInfo:S,onNavigate:N,onClose:a,onShowAyahModal:f,onSurahChange:P,onVerseChange:W,wordData:g,showSuccess:U,showError:H,translationLanguage:x})}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6 overflow-y-auto flex-1 bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsx("div",{className:"mb-4 sm:mb-6 text-center sm:text-left",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-3 gap-2",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200",style:{fontFamily:i,fontSize:`${V}px`},children:S?.arabic||`Surah ${l}`}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700",children:["Verse ",m," of ",E]})]})}),g&&e.jsx("div",{className:"text-right mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-6",children:e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl dark:text-white text-gray-900 leading-[2.2] px-2 sm:px-0",style:{fontFamily:i,fontSize:`${V}px`},dir:"rtl",children:[g.text_uthmani||g.words&&g.words.map(d=>d.text_uthmani||d.text_simple).join(" ")||"Verse text not available"," "]})}),g&&g.translations&&g.translations.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Translation"]}),e.jsx("p",{className:`text-gray-700 leading-[1.8] dark:text-gray-200 px-2 sm:px-0 ${x==="hi"?"font-hindi":x==="ur"?"font-urdu":x==="bn"?"font-bengali":x==="ta"?"font-tamil":x==="mal"?"font-malayalam":"font-poppins"}`,style:{fontSize:`${u}px`},children:g.translations[0].text})]}),x!=="mal"&&g&&g.words&&g.words.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[x!=="bn"&&e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Word Breakdown (",T,")"]}),e.jsx("div",{className:"space-y-4",children:g.words.map((d,t)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl text-gray-800 dark:text-white font-arabic",style:{fontFamily:i,fontSize:`${V}px`},children:d.text_uthmani||d.text_simple||"N/A"}),d.text_simple&&d.text_uthmani!==d.text_simple&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:d.text_simple})]}),e.jsxs("div",{className:"text-left max-w-[60%]",children:[d.translation&&d.translation.text?e.jsx("p",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-gray-200 mb-1 font-medium",style:{fontSize:`${u}px`},children:d.translation.text}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1 italic",style:{fontSize:`${u}px`},children:"Translation not available"}),d.class_name&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 uppercase tracking-wide",children:d.class_name})]})]})},t))})]}),g&&(!g.words||g.words.length===0)&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Word Breakdown:"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm italic",children:"Word-by-word breakdown not available for this verse."})})]}),x==="mal"&&j.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-primary dark:text-primary-light mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-[1px] bg-primary dark:bg-primary-light"}),"Word Breakdown (Malayalam)"]}),e.jsx("div",{className:"space-y-4",children:j.reduce((t,h,s)=>(t.findIndex(w=>w.WordPhrase===h.WordPhrase)===-1&&t.push({...h,originalIndex:s}),t),[]).map((t,h)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-2xl sm:text-3xl font-arabic dark:text-white text-gray-800",style:{fontFamily:i,fontSize:`${V}px`},children:t.WordPhrase})}),e.jsx("div",{className:"text-left max-w-[60%]",children:e.jsx("span",{className:"text-gray-700 leading-[1.6] font-poppins sm:leading-[1.7] lg:leading-[1.8] dark:text-gray-200 font-malayalam font-medium",style:{fontSize:`${u}px`},children:t.Meaning})})]})},`${t.WordPhrase}-${h}`))})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-between gap-3 p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 z-10",children:[e.jsxs("button",{onClick:re,disabled:m<=1,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${m<=1?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-white text-gray-700 border-gray-200 hover:border-primary hover:text-primary hover:bg-primary/5 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:border-primary-light dark:hover:text-primary-light"}`,children:[e.jsx(ze,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Prev"})]}),e.jsxs("button",{onClick:c,disabled:m>=E,className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border transition-all duration-200 group ${m>=E?"bg-gray-50 text-gray-400 border-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:border-gray-700 cursor-not-allowed":"bg-primary text-white border-primary hover:bg-primary-dark shadow-lg shadow-primary/20 dark:bg-primary dark:border-primary dark:hover:bg-primary-dark"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:"Next Ayah"}),e.jsx(Ie,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),C&&e.jsx(st,{surahId:l,verseId:m,onClose:X}),e.jsx(ce,{toasts:J,removeToast:Y})]})]}),Z)};export{st as A,nt as W};
