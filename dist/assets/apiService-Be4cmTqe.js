import{ag as i,an as c}from"./index-D0NMIq43.js";class h{constructor(){this.requestQueue=new Map}async makeRequest(e,t={},s={}){const a=this.generateCacheKey(e,t);if(this.requestQueue.has(a))return this.requestQueue.get(a);const r=this._makeActualRequest(e,t,s);this.requestQueue.set(a,r);try{return await r}finally{this.requestQueue.delete(a)}}generateCacheKey(e,t={}){const s=Object.keys(t).sort().map(a=>`${a}=${t[a]}`).join("&");return`${e}${s?`?${s}`:""}`}async _makeActualRequest(e,t={},s={}){const a=i||`${c}/api/v1`,r=e.startsWith("/")?e:`/${e}`,u=new URL(`${a}${r}`);Object.keys(t).forEach(n=>{t[n]!==void 0&&t[n]!==null&&u.searchParams.append(n,t[n])});const o=await fetch(u.toString(),{method:"GET",headers:{"Content-Type":"application/json",...s.headers},...s});if(!o.ok){const n=await o.text();throw new Error(`API request failed: ${o.status} ${o.statusText} - ${n}`)}return await o.json()}async getTranslation(e,t,s){return this.makeRequest(`/${e}/translation/${t}/${s}`)}async getSurahTranslations(e,t,s={}){return this.makeRequest(`/${e}/surah/${t}`,s)}async getInterpretation(e,t,s,a=null){const r=e==="english"&&a?`/${e}/interpretation/${t}/${a}`:`/${e}/interpretation/${t}/${s}`,u=e==="english"&&a?{}:a?{explanationNo:a}:{};return this.makeRequest(r,u)}async getWordByWord(e,t,s){return this.makeRequest(`/${e}/word-by-word/${t}/${s}`)}async getUrduFootnote(e){return this.makeRequest(`/urdu/footnote/${e}`)}async getEnglishFootnote(e){return this.makeRequest(`/english/footnote/${e}`)}async getMalayalamFootnote(e){return this.makeRequest(`/malayalam/footnote/${e}`)}async getArabicText(e,t){return this.makeRequest(`/arabic/text/${e}/${t}`)}async checkLanguageHealth(e){return this.makeRequest(`/${e}/health`)}}const y=new h;export{y as a};
