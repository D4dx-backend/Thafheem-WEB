import{e as T,j as e,y as j}from"./index-B0J67sDz.js";import{u as B,b as l}from"./react-vendor-v5ei6ytj.js";import{B as d}from"./BookmarkNavbar-m4iP6PpO.js";import{S as I}from"./StarNumber-BrhF54JA.js";import{u as S,T as c}from"./Toast-DOsmPb36.js";import{A as L}from"./arrow-left-C6XkpHHd.js";import{T as $}from"./trash-2-BpbXMmF6.js";const W=()=>{const{user:o}=T(),x=B(),{toasts:n,removeToast:i,showSuccess:y,showError:f}=S(),[h,g]=l.useState([]),[v,m]=l.useState(!0),[u,p]=l.useState(null),[b,k]=l.useState({});l.useEffect(()=>{(async()=>{if(!o){m(!1);return}try{m(!0),p(null);const t=(await j.getBookmarks(o.uid,"translation")).map(a=>({id:a.id||`${a.surahId}-${a.verseId}`,bookmarkId:a.id,number:a.surahId,surah:a.surahName||`Surah ${a.surahId}`,ayah:`Ayah ${a.verseId}`,verseText:a.verseText||"",surahId:a.surahId,verseId:a.verseId}));g(t)}catch(r){console.error("Error loading bookmarks:",r),p("Failed to load bookmarks")}finally{m(!1)}})()},[o]);const w=async(s,r)=>{if(o)try{k(t=>({...t,[r]:!0})),await j.deleteBookmark(s,o.uid),g(t=>t.filter(a=>a.bookmarkId!==s)),y("Bookmark deleted successfully")}catch(t){console.error("Error deleting bookmark:",t),f("Failed to delete bookmark. Please try again.")}finally{k(t=>({...t,[r]:!1}))}},N=(s,r)=>{x(`/surah/${s}#verse-${r}`,{state:{viewType:"Ayah Wise",scrollToVerse:r,highlightVerse:`${s}:${r}`}})};return o?v?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:n,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading bookmarks..."})]})})})]}):u?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:n,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-4",children:u}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})})]}):h.length===0?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:n,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-black font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No bookmarks yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start reading and bookmark your favorite verses to see them here."}),e.jsx("button",{onClick:()=>x("/"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Start Reading"})]})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:n,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsxs("div",{className:"w-full max-w-[1290px] mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:e.jsxs("button",{onClick:()=>x(-1),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:h.map(s=>{const r=`${s.surahId}-${s.verseId}`;return e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>N(s.surahId,s.verseId),children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{number:s.number})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate",children:s.surah}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-white truncate",children:s.ayah}),s.verseText&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-white mt-1 line-clamp-2",children:s.verseText.length>100?`${s.verseText.substring(0,100)}...`:s.verseText})]})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),w(s.bookmarkId,r)},disabled:b[r],className:"p-2 text-black dark:text-white dark:hover:bg-transparent hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors flex-shrink-0 min-h-[44px] min-w-[44px] flex items-center justify-center ml-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Delete bookmark",children:b[r]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-current"}):e.jsx($,{className:"w-4 h-4 sm:w-[18px] sm:h-[18px]"})})]},s.id)})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:n,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to view bookmarks"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please sign in to bookmark verses and access your saved content."}),e.jsx("button",{onClick:()=>x("/sign"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Sign In"})]})})})})]})};export{W as default};
