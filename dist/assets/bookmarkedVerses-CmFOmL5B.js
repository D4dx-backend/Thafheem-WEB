import{c as I,j as e,t as j}from"./index-CYmUdfUH.js";import{u as B,b as l}from"./react-vendor-v5ei6ytj.js";import{B as d}from"./BookmarkNavbar-nVuS_yU3.js";import{S}from"./StarNumber-CXE6946O.js";import{u as T,T as c}from"./Toast-CATwdAtO.js";import{A as L}from"./arrow-left-DhBm5-oz.js";import{T as C}from"./trash-2-Cn0S7R0Y.js";const z=()=>{const{user:n}=I(),x=B(),{toasts:o,removeToast:i,showSuccess:y,showError:f}=T(),[h,g]=l.useState([]),[v,m]=l.useState(!0),[u,p]=l.useState(null),[b,k]=l.useState({});l.useEffect(()=>{(async()=>{if(!n){m(!1);return}try{m(!0),p(null);const t=(await j.getBookmarks(n.uid,"translation")).map(r=>({id:r.id||`${r.surahId}-${r.verseId}`,bookmarkId:r.id,number:r.surahId,surah:r.surahName||`Surah ${r.surahId}`,ayah:`Ayah ${r.verseId}`,verseText:r.verseText||"",surahId:r.surahId,verseId:r.verseId}));g(t)}catch(a){console.error("Error loading bookmarks:",a),p("Failed to load bookmarks")}finally{m(!1)}})()},[n]);const N=async(s,a)=>{if(n)try{k(t=>({...t,[a]:!0})),await j.deleteBookmark(s,n.uid),g(t=>t.filter(r=>r.bookmarkId!==s)),y("Bookmark deleted successfully")}catch(t){console.error("Error deleting bookmark:",t),f("Failed to delete bookmark. Please try again.")}finally{k(t=>({...t,[a]:!1}))}},w=(s,a)=>{x(`/surah/${s}#verse-${a}`)};return n?v?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading bookmarks..."})]})})})]}):u?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-4",children:u}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})})})]}):h.length===0?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-black font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No bookmarks yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start reading and bookmark your favorite verses to see them here."}),e.jsx("button",{onClick:()=>x("/"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Start Reading"})]})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsxs("div",{className:"w-full max-w-[1290px] mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:e.jsxs("button",{onClick:()=>x(-1),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:h.map(s=>{const a=`${s.surahId}-${s.verseId}`;return e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>w(s.surahId,s.verseId),children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(S,{number:s.number})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white truncate",children:s.surah}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-white truncate",children:s.ayah}),s.verseText&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-white mt-1 line-clamp-2",children:s.verseText.length>100?`${s.verseText.substring(0,100)}...`:s.verseText})]})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),N(s.bookmarkId,a)},disabled:b[a],className:"p-2 text-black dark:text-white dark:hover:bg-transparent hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors flex-shrink-0 min-h-[44px] min-w-[44px] flex items-center justify-center ml-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Delete bookmark",children:b[a]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-current"}):e.jsx(C,{className:"w-4 h-4 sm:w-[18px] sm:h-[18px]"})})]},s.id)})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(c,{toasts:o,removeToast:i}),e.jsx("div",{className:"mx-auto p-3 sm:p-4 lg:p-6 min-h-screen bg-white dark:bg-gray-900 font-poppins",children:e.jsx("div",{className:"w-full max-w-[1290px] mx-auto",children:e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to view bookmarks"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please sign in to bookmark verses and access your saved content."}),e.jsx("button",{onClick:()=>x("/sign"),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-medium",children:"Sign In"})]})})})})]})};export{z as default};
