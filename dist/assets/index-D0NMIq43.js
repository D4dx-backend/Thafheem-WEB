const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hindiTranslationService-CFRwMbcP.js","assets/apiService-Be4cmTqe.js","assets/react-vendor-v5ei6ytj.js","assets/urduTranslationService-D6XDtXQ4.js","assets/banglaTranslationService-CCMvLMqe.js","assets/tamilTranslationService-D-704-MC.js","assets/englishTranslationService-TExHbstj.js","assets/hindiWordByWordService-BZeSq7qs.js","assets/banglaWordByWordService-BITaT-vc.js","assets/tamilWordByWordService-C7rMpoKH.js","assets/banglaInterpretationService-Ce-5v0ek.js","assets/Juz-DMdM2600.js","assets/arrow-left-B3PuUel5.js","assets/Sign-B7_4cF1P.js","assets/Surah-Drxy7siQ.js","assets/WordByWord-CWAAPupz.js","assets/Toast-Bf4bwsOE.js","assets/chevron-left-B6PCEYk2.js","assets/surahNameUtils-BTvJ0ckf.js","assets/LoadingSkeleton-BaxG_oO1.js","assets/WordByWordIcon-DrlWBNwO.js","assets/StickyAudioPlayer-Cxr1kIJb.js","assets/volume-x-C8BF0xN2.js","assets/skip-forward-BY6SBxtt.js","assets/useSequentialEnglishFootnotes-B4d1JHKd.js","assets/SurahInfo-Cq1LpFap.js","assets/Reading-BNTKsUIn.js","assets/BlockWise-CYfjn6BS.js","assets/InterpretationBlockwise-bzGSXxyX.js","assets/BlockInterpretationModal-ChQ-ZZJT.js","assets/InterpretationNavbar-6fKJEcm-.js","assets/bookmarkedVerses-4x_cYgZV.js","assets/BookmarkNavbar-kgO74Jy4.js","assets/trash-2-8YpYQVA4.js","assets/BookmarkBlock-DnDLoMnT.js","assets/BookInterpretations-DHPgeMKC.js","assets/MalayalamInterpreter-BM521lYP.js","assets/FavoriteSurahs-YfZbIhEw.js","assets/PlayAudio-CszON32x.js","assets/ellipsis-Bj7qOUff.js","assets/TableContents-v5W3CZiP.js","assets/Maududi-DkT0JVxM.js","assets/maududi-C6Gkxmm0.js","assets/WhatsNew-DaaFrw4o.js","assets/Digitisation-Ca19Leyr.js","assets/About-DZtFsfZN.js","assets/AuthorPreface-Dha11ake.js","assets/AuthorConclusion-DgOFWNE-.js","assets/IntroductionToQuran-DBznPFyP.js","assets/Appendix-C_YiVyHe.js","assets/EnglishTranslate-6fp-bWUL.js","assets/Quiz-D3aTIN0S.js","assets/DragDrop-CbGHl7QF.js","assets/Privacy-DT0Yfy92.js","assets/DeleteAccount-BD1vXl1R.js","assets/LogOut-CiK8pmji.js","assets/Conclusion-Cn5LwtKK.js","assets/Tajweed-Dho0er1R.js","assets/chevron-up-7X_zz9Uj.js","assets/QuranStudy-BTVFY546.js","assets/backward-mJTTrnLJ.js","assets/EndofProphethood-CZ1sOlh7.js","assets/WordByWordPage-BuiFbaCu.js","assets/Note-AwIC1I7x.js","assets/UrduFinalityOfProphethood-DFFT3hDL.js","assets/UrduJesusMohammed-BcITf-4C.js","assets/Contact-jCFx9Wid.js","assets/Feedback-DjalRZA8.js","assets/TechnicalTerms-CYw-OJss.js","assets/Translators-Cw-mxhuy.js","assets/HistoryOfTranslation-CxWXhFvJ.js","assets/MalayalamJesusMohammed-Bza83n3G.js","assets/MalayalamFinalityOfProphethood-Dah_BiPC.js","assets/EnglishJesusMohammed-CZZz6sfG.js","assets/EnglishFinalityOfProphethood-D-YCBLhz.js","assets/HindiJesusMohammed-mf9mnCZi.js","assets/HindiFinalityOfProphethood-DqpPlvKd.js","assets/BanglaJesusMohammed-pfH8GURQ.js","assets/BanglaFinalityOfProphethood-BOkB5ORq.js","assets/TamilSayyidMaududi-B8RWZo0d.js","assets/TamilAuthorPreface-DFVbtzSq.js","assets/TamilAuthorConclusion-CdnJ6U0m.js","assets/TamilJesusMohammed-CyFtfv31.js","assets/TamilFinalityOfProphethood-BXGy0K3Q.js"])))=>i.map(i=>d[i]);
import{r as $o,a as Lo,b as d,u as ze,R as Mo,c as ur,d as Do,e as xa,B as Oo,f as Fo,g as D}from"./react-vendor-v5ei6ytj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Hr={exports:{}},Xt={};var Ja;function Uo(){if(Ja)return Xt;Ja=1;var t=$o(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(c,l,u){var h,m={},f=null,g=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(h in l)a.call(l,h)&&!o.hasOwnProperty(h)&&(m[h]=l[h]);if(c&&c.defaultProps)for(h in l=c.defaultProps,l)m[h]===void 0&&(m[h]=l[h]);return{$$typeof:e,type:c,key:f,ref:g,props:m,_owner:n.current}}return Xt.Fragment=r,Xt.jsx=i,Xt.jsxs=i,Xt}var Qa;function Bo(){return Qa||(Qa=1,Hr.exports=Uo()),Hr.exports}var s=Bo(),xr={},Ga;function zo(){if(Ga)return xr;Ga=1;var t=Lo();return xr.createRoot=t.createRoot,xr.hydrateRoot=t.hydrateRoot,xr}var Vo=zo();const Ho="modulepreload",qo=function(t){return"/"+t},Ka={},R=function(e,r,a){let n=Promise.resolve();if(r&&r.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");n=l(r.map(u=>{if(u=qo(u),u in Ka)return;Ka[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":Ho,h||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),h)return new Promise((g,x)=>{f.addEventListener("load",g),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return n.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},at=new Map,Wo=async t=>{if(at.has(t))return at.get(t);let e;try{switch(t){case"mal":return null;case"hi":e=await R(()=>import("./hindiTranslationService-CFRwMbcP.js"),__vite__mapDeps([0,1,2]));break;case"ur":e=await R(()=>import("./urduTranslationService-D6XDtXQ4.js"),__vite__mapDeps([3,1,2]));break;case"bn":e=await R(()=>import("./banglaTranslationService-CCMvLMqe.js"),__vite__mapDeps([4,1,2]));break;case"ta":e=await R(()=>import("./tamilTranslationService-D-704-MC.js"),__vite__mapDeps([5,1,2]));break;case"E":e=await R(()=>import("./englishTranslationService-TExHbstj.js"),__vite__mapDeps([6,1,2]));break;default:return console.warn(`Unknown language: ${t}`),null}const r=e.default||e;return at.set(t,r),r}catch(r){return console.error(`Failed to load service for language ${t}:`,r),null}},Jo=async t=>{const e=`wbw_${t}`;if(at.has(e))return at.get(e);let r;try{switch(t){case"hi":r=await R(()=>import("./hindiWordByWordService-BZeSq7qs.js"),__vite__mapDeps([7,1,2]));break;case"bn":r=await R(()=>import("./banglaWordByWordService-BITaT-vc.js"),__vite__mapDeps([8,4,1,2]));break;case"ta":r=await R(()=>import("./tamilWordByWordService-C7rMpoKH.js"),__vite__mapDeps([9,1,2]));break;default:return null}const a=r.default||r;return at.set(e,a),a}catch(a){return console.error(`Failed to load word-by-word service for language ${t}:`,a),null}},Qo=async t=>{const e=`interp_${t}`;if(at.has(e))return at.get(e);let r;try{switch(t){case"bn":r=await R(()=>import("./banglaInterpretationService-Ce-5v0ek.js"),__vite__mapDeps([10,4,1,2]));break;default:return null}const a=r.default||r;return at.set(e,a),a}catch(a){return console.error(`Failed to load interpretation service for language ${t}:`,a),null}},Go=async t=>{const e=[Wo(t),Jo(t),Qo(t)];await Promise.allSettled(e)},Zs=d.createContext();function Ko({children:t}){const[e,r]=d.useState(()=>localStorage.getItem("theme")||"light"),[a,n]=d.useState(()=>localStorage.getItem("quranFont")||"Amiri Quran"),[o,i]=d.useState(()=>{const y=localStorage.getItem("fontSize");return y?parseInt(y):26}),[c,l]=d.useState(()=>{const y=localStorage.getItem("translationFontSize"),A=y?parseInt(y):17;return Math.min(19,Math.max(10,A))}),[u,h]=d.useState(()=>{const y=localStorage.getItem("viewType");return!y||!["Ayah Wise","Block Wise"].includes(y)?"Ayah Wise":y}),[m,f]=d.useState(()=>{const y=localStorage.getItem("translationLanguage");return!y||!["mal","E","ta","bn","ur","hi"].includes(y)?"mal":y}),g=d.useMemo(()=>m==="ur"?Math.min(22,c+2):c,[c,m]);d.useEffect(()=>{const y=window.document.documentElement;e==="dark"?y.classList.add("dark"):y.classList.remove("dark"),localStorage.setItem("theme",e)},[e]),d.useEffect(()=>{localStorage.setItem("quranFont",a)},[a]),d.useEffect(()=>{localStorage.setItem("fontSize",o.toString())},[o]),d.useEffect(()=>{const y=Math.min(19,Math.max(10,c));y!==c&&l(y),localStorage.setItem("translationFontSize",y.toString())},[c]),d.useEffect(()=>{localStorage.setItem("viewType",u)},[u]),d.useEffect(()=>{localStorage.setItem("translationLanguage",m),m&&m!=="mal"&&Go(m).catch(y=>{console.warn(`Failed to preload services for ${m}:`,y)})},[m]);const x=()=>{r(e==="dark"?"light":"dark")};return s.jsx(Zs.Provider,{value:{theme:e,toggleTheme:x,quranFont:a,setQuranFont:n,fontSize:o,setFontSize:i,translationFontSize:c,setTranslationFontSize:l,adjustedTranslationFontSize:g,viewType:u,setViewType:h,translationLanguage:m,setTranslationLanguage:f},children:t})}const Lt=()=>d.useContext(Zs),Yo=()=>{};var Ya={};const en=function(t){const e=[];let r=0;for(let a=0;a<t.length;a++){let n=t.charCodeAt(a);n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=n&63|128):(n&64512)===55296&&a+1<t.length&&(t.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++a)&1023),e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=n&63|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=n&63|128)}return e},Xo=function(t){const e=[];let r=0,a=0;for(;r<t.length;){const n=t[r++];if(n<128)e[a++]=String.fromCharCode(n);else if(n>191&&n<224){const o=t[r++];e[a++]=String.fromCharCode((n&31)<<6|o&63)}else if(n>239&&n<365){const o=t[r++],i=t[r++],c=t[r++],l=((n&7)<<18|(o&63)<<12|(i&63)<<6|c&63)-65536;e[a++]=String.fromCharCode(55296+(l>>10)),e[a++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],i=t[r++];e[a++]=String.fromCharCode((n&15)<<12|(o&63)<<6|i&63)}}return e.join("")},tn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<t.length;n+=3){const o=t[n],i=n+1<t.length,c=i?t[n+1]:0,l=n+2<t.length,u=l?t[n+2]:0,h=o>>2,m=(o&3)<<4|c>>4;let f=(c&15)<<2|u>>6,g=u&63;l||(g=64,i||(f=64)),a.push(r[h],r[m],r[f],r[g])}return a.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(en(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xo(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<t.length;){const o=r[t.charAt(n++)],c=n<t.length?r[t.charAt(n)]:0;++n;const u=n<t.length?r[t.charAt(n)]:64;++n;const m=n<t.length?r[t.charAt(n)]:64;if(++n,o==null||c==null||u==null||m==null)throw new Zo;const f=o<<2|c>>4;if(a.push(f),u!==64){const g=c<<4&240|u>>2;if(a.push(g),m!==64){const x=u<<6&192|m;a.push(x)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ei=function(t){const e=en(t);return tn.encodeByteArray(e,!0)},rn=function(t){return ei(t).replace(/\./g,"")},an=function(t){try{return tn.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ti(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ri=()=>ti().__FIREBASE_DEFAULTS__,ai=()=>{if(typeof process>"u"||typeof Ya>"u")return;const t=Ya.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},si=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&an(t[1]);return e&&JSON.parse(e)},ba=()=>{try{return Yo()||ri()||ai()||si()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ni=t=>ba()?.emulatorHosts?.[t],sn=()=>ba()?.config,nn=t=>ba()?.[`_${t}`];class oi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,a))}}}function Dr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ii(t){return(await fetch(t,{credentials:"include"})).ok}const sr={};function ci(){const t={prod:[],emulator:[]};for(const e of Object.keys(sr))sr[e]?t.emulator.push(e):t.prod.push(e);return t}function li(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Xa=!1;function di(t,e){if(typeof window>"u"||typeof document>"u"||!Dr(window.location.host)||sr[t]===e||sr[t]||Xa)return;sr[t]=e;function r(f){return`__firebase__banner__${f}`}const a="__firebase__banner",o=ci().prod.length>0;function i(){const f=document.getElementById(a);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Xa=!0,i()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=li(a),g=r("text"),x=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),A=document.getElementById(y)||document.createElement("a"),b=r("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;c(I),h(A,y);const F=u();l(S,b),I.append(S,x,A,F),document.body.appendChild(I)}o?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Te(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ui(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function hi(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function on(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mi(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fi(){const t=Te();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cn(){try{return typeof indexedDB=="object"}catch{return!1}}function ln(){return new Promise((t,e)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),t(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{e(n.error?.message||"")}}catch(r){e(r)}})}function pi(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const gi="FirebaseError";class Ge extends Error{constructor(e,r,a){super(r),this.code=e,this.customData=a,this.name=gi,Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(e,r,a){this.service=e,this.serviceName=r,this.errors=a}create(e,...r){const a=r[0]||{},n=`${this.service}/${e}`,o=this.errors[e],i=o?yi(o,a):"Error",c=`${this.serviceName}: ${i} (${n}).`;return new Ge(n,c,a)}}function yi(t,e){return t.replace(xi,(r,a)=>{const n=e[a];return n!=null?String(n):`<${a}?>`})}const xi=/\{\$([^}]+)}/g;function bi(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pt(t,e){if(t===e)return!0;const r=Object.keys(t),a=Object.keys(e);for(const n of r){if(!a.includes(n))return!1;const o=t[n],i=e[n];if(Za(o)&&Za(i)){if(!Pt(o,i))return!1}else if(o!==i)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function Za(t){return t!==null&&typeof t=="object"}function hr(t){const e=[];for(const[r,a]of Object.entries(t))Array.isArray(a)?a.forEach(n=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function wi(t,e){const r=new vi(t,e);return r.subscribe.bind(r)}class vi{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,a){let n;if(e===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");ki(e,["next","error","complete"])?n=e:n={next:e,error:r,complete:a},n.next===void 0&&(n.next=qr),n.error===void 0&&(n.error=qr),n.complete===void 0&&(n.complete=qr);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ki(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function qr(){}const _i=1e3,Ei=2,Si=14400*1e3,Ai=.5;function es(t,e=_i,r=Ei){const a=e*Math.pow(r,t),n=Math.round(Ai*a*(Math.random()-.5)*2);return Math.min(Si,a+n)}function De(t){return t&&t._delegate?t._delegate:t}class Je{constructor(e,r,a){this.name=e,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Nt="[DEFAULT]";class Ii{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const a=new oi;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(n){if(a)return null;throw n}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ti(e))try{this.getOrInitializeService({instanceIdentifier:Nt})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:n});a.resolve(o)}catch{}}}}clearInstance(e=Nt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nt){return this.instances.has(e)}getOptions(e=Nt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[o,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);a===c&&i.resolve(n)}return n}onInit(e,r){const a=this.normalizeInstanceIdentifier(r),n=this.onInitCallbacks.get(a)??new Set;n.add(e),this.onInitCallbacks.set(a,n);const o=this.instances.get(a);return o&&e(o,a),()=>{n.delete(e)}}invokeOnInitCallbacks(e,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Ni(e),options:r}),this.instances.set(e,a),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Nt){return this.component?this.component.multipleInstances?e:Nt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ni(t){return t===Nt?void 0:t}function Ti(t){return t.instantiationMode==="EAGER"}class Ci{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Ii(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const ji={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},Pi=de.INFO,Ri={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},$i=(t,e,...r)=>{if(e<t.logLevel)return;const a=new Date().toISOString(),n=Ri[e];if(n)console[n](`[${a}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wa{constructor(e){this.name=e,this._logLevel=Pi,this._logHandler=$i,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ji[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Li=(t,e)=>e.some(r=>t instanceof r);let ts,rs;function Mi(){return ts||(ts=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Di(){return rs||(rs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dn=new WeakMap,ia=new WeakMap,un=new WeakMap,Wr=new WeakMap,va=new WeakMap;function Oi(t){const e=new Promise((r,a)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{r(gt(t.result)),n()},i=()=>{a(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&dn.set(r,t)}).catch(()=>{}),va.set(e,t),e}function Fi(t){if(ia.has(t))return;const e=new Promise((r,a)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{r(),n()},i=()=>{a(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});ia.set(t,e)}let ca={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ia.get(t);if(e==="objectStoreNames")return t.objectStoreNames||un.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return gt(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ui(t){ca=t(ca)}function Bi(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const a=t.call(Jr(this),e,...r);return un.set(a,e.sort?e.sort():[e]),gt(a)}:Di().includes(t)?function(...e){return t.apply(Jr(this),e),gt(dn.get(this))}:function(...e){return gt(t.apply(Jr(this),e))}}function zi(t){return typeof t=="function"?Bi(t):(t instanceof IDBTransaction&&Fi(t),Li(t,Mi())?new Proxy(t,ca):t)}function gt(t){if(t instanceof IDBRequest)return Oi(t);if(Wr.has(t))return Wr.get(t);const e=zi(t);return e!==t&&(Wr.set(t,e),va.set(e,t)),e}const Jr=t=>va.get(t);function hn(t,e,{blocked:r,upgrade:a,blocking:n,terminated:o}={}){const i=indexedDB.open(t,e),c=gt(i);return a&&i.addEventListener("upgradeneeded",l=>{a(gt(i.result),l.oldVersion,l.newVersion,gt(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),n&&l.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Vi=["get","getKey","getAll","getAllKeys","count"],Hi=["put","add","delete","clear"],Qr=new Map;function as(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qr.get(e))return Qr.get(e);const r=e.replace(/FromIndex$/,""),a=e!==r,n=Hi.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||Vi.includes(r)))return;const o=async function(i,...c){const l=this.transaction(i,n?"readwrite":"readonly");let u=l.store;return a&&(u=u.index(c.shift())),(await Promise.all([u[r](...c),n&&l.done]))[0]};return Qr.set(e,o),o}Ui(t=>({...t,get:(e,r,a)=>as(e,r)||t.get(e,r,a),has:(e,r)=>!!as(e,r)||t.has(e,r)}));class qi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Wi(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function Wi(t){return t.getComponent()?.type==="VERSION"}const la="@firebase/app",ss="0.14.6";const st=new wa("@firebase/app"),Ji="@firebase/app-compat",Qi="@firebase/analytics-compat",Gi="@firebase/analytics",Ki="@firebase/app-check-compat",Yi="@firebase/app-check",Xi="@firebase/auth",Zi="@firebase/auth-compat",ec="@firebase/database",tc="@firebase/data-connect",rc="@firebase/database-compat",ac="@firebase/functions",sc="@firebase/functions-compat",nc="@firebase/installations",oc="@firebase/installations-compat",ic="@firebase/messaging",cc="@firebase/messaging-compat",lc="@firebase/performance",dc="@firebase/performance-compat",uc="@firebase/remote-config",hc="@firebase/remote-config-compat",mc="@firebase/storage",fc="@firebase/storage-compat",pc="@firebase/firestore",gc="@firebase/ai",yc="@firebase/firestore-compat",xc="firebase",bc="12.6.0";const da="[DEFAULT]",wc={[la]:"fire-core",[Ji]:"fire-core-compat",[Gi]:"fire-analytics",[Qi]:"fire-analytics-compat",[Yi]:"fire-app-check",[Ki]:"fire-app-check-compat",[Xi]:"fire-auth",[Zi]:"fire-auth-compat",[ec]:"fire-rtdb",[tc]:"fire-data-connect",[rc]:"fire-rtdb-compat",[ac]:"fire-fn",[sc]:"fire-fn-compat",[nc]:"fire-iid",[oc]:"fire-iid-compat",[ic]:"fire-fcm",[cc]:"fire-fcm-compat",[lc]:"fire-perf",[dc]:"fire-perf-compat",[uc]:"fire-rc",[hc]:"fire-rc-compat",[mc]:"fire-gcs",[fc]:"fire-gcs-compat",[pc]:"fire-fst",[yc]:"fire-fst-compat",[gc]:"fire-vertex","fire-js":"fire-js",[xc]:"fire-js-all"};const Ir=new Map,vc=new Map,ua=new Map;function ns(t,e){try{t.container.addComponent(e)}catch(r){st.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function nt(t){const e=t.name;if(ua.has(e))return st.debug(`There were multiple attempts to register component ${e}.`),!1;ua.set(e,t);for(const r of Ir.values())ns(r,t);for(const r of vc.values())ns(r,t);return!0}function Jt(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function He(t){return t==null?!1:t.settings!==void 0}const kc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yt=new Mt("app","Firebase",kc);class _c{constructor(e,r,a){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const mr=bc;function mn(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const a={name:da,automaticDataCollectionEnabled:!0,...e},n=a.name;if(typeof n!="string"||!n)throw yt.create("bad-app-name",{appName:String(n)});if(r||(r=sn()),!r)throw yt.create("no-options");const o=Ir.get(n);if(o){if(Pt(r,o.options)&&Pt(a,o.config))return o;throw yt.create("duplicate-app",{appName:n})}const i=new Ci(n);for(const l of ua.values())i.addComponent(l);const c=new _c(r,a,i);return Ir.set(n,c),c}function fn(t=da){const e=Ir.get(t);if(!e&&t===da&&sn())return mn();if(!e)throw yt.create("no-app",{appName:t});return e}function qe(t,e,r){let a=wc[t]??t;r&&(a+=`-${r}`);const n=a.match(/\s|\//),o=e.match(/\s|\//);if(n||o){const i=[`Unable to register library "${a}" with version "${e}":`];n&&i.push(`library name "${a}" contains illegal characters (whitespace or "/")`),n&&o&&i.push("and"),o&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),st.warn(i.join(" "));return}nt(new Je(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const Ec="firebase-heartbeat-database",Sc=1,cr="firebase-heartbeat-store";let Gr=null;function pn(){return Gr||(Gr=hn(Ec,Sc,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cr)}catch(r){console.warn(r)}}}}).catch(t=>{throw yt.create("idb-open",{originalErrorMessage:t.message})})),Gr}async function Ac(t){try{const r=(await pn()).transaction(cr),a=await r.objectStore(cr).get(gn(t));return await r.done,a}catch(e){if(e instanceof Ge)st.warn(e.message);else{const r=yt.create("idb-get",{originalErrorMessage:e?.message});st.warn(r.message)}}}async function os(t,e){try{const a=(await pn()).transaction(cr,"readwrite");await a.objectStore(cr).put(e,gn(t)),await a.done}catch(r){if(r instanceof Ge)st.warn(r.message);else{const a=yt.create("idb-set",{originalErrorMessage:r?.message});st.warn(a.message)}}}function gn(t){return`${t.name}!${t.options.appId}`}const Ic=1024,Nc=30;class Tc{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new jc(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=is();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(n=>n.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Nc){const n=Pc(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(n,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){st.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=is(),{heartbeatsToSend:r,unsentEntries:a}=Cc(this._heartbeatsCache.heartbeats),n=rn(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return st.warn(e),""}}}function is(){return new Date().toISOString().substring(0,10)}function Cc(t,e=Ic){const r=[];let a=t.slice();for(const n of t){const o=r.find(i=>i.agent===n.agent);if(o){if(o.dates.push(n.date),cs(r)>e){o.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),cs(r)>e){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class jc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cn()?ln().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ac(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return os(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return os(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function cs(t){return rn(JSON.stringify({version:2,heartbeats:t})).length}function Pc(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let a=1;a<t.length;a++)t[a].date<r&&(r=t[a].date,e=a);return e}function Rc(t){nt(new Je("platform-logger",e=>new qi(e),"PRIVATE")),nt(new Je("heartbeat",e=>new Tc(e),"PRIVATE")),qe(la,ss,t),qe(la,ss,"esm2020"),qe("fire-js","")}Rc("");var $c="firebase",Lc="12.6.0";qe($c,Lc,"app");const yn="@firebase/installations",ka="0.6.19";const xn=1e4,bn=`w:${ka}`,wn="FIS_v2",Mc="https://firebaseinstallations.googleapis.com/v1",Dc=3600*1e3,Oc="installations",Fc="Installations";const Uc={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rt=new Mt(Oc,Fc,Uc);function vn(t){return t instanceof Ge&&t.code.includes("request-failed")}function kn({projectId:t}){return`${Mc}/projects/${t}/installations`}function _n(t){return{token:t.token,requestStatus:2,expiresIn:zc(t.expiresIn),creationTime:Date.now()}}async function En(t,e){const a=(await e.json()).error;return Rt.create("request-failed",{requestName:t,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function Sn({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Bc(t,{refreshToken:e}){const r=Sn(t);return r.append("Authorization",Vc(e)),r}async function An(t){const e=await t();return e.status>=500&&e.status<600?t():e}function zc(t){return Number(t.replace("s","000"))}function Vc(t){return`${wn} ${t}`}async function Hc({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const a=kn(t),n=Sn(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const i={fid:r,authVersion:wn,appId:t.appId,sdkVersion:bn},c={method:"POST",headers:n,body:JSON.stringify(i)},l=await An(()=>fetch(a,c));if(l.ok){const u=await l.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:_n(u.authToken)}}else throw await En("Create Installation",l)}function In(t){return new Promise(e=>{setTimeout(e,t)})}function qc(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const Wc=/^[cdef][\w-]{21}$/,ha="";function Jc(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=Qc(t);return Wc.test(r)?r:ha}catch{return ha}}function Qc(t){return qc(t).substr(0,22)}function Or(t){return`${t.appName}!${t.appId}`}const Nn=new Map;function Tn(t,e){const r=Or(t);Cn(r,e),Gc(r,e)}function Cn(t,e){const r=Nn.get(t);if(r)for(const a of r)a(e)}function Gc(t,e){const r=Kc();r&&r.postMessage({key:t,fid:e}),Yc()}let Tt=null;function Kc(){return!Tt&&"BroadcastChannel"in self&&(Tt=new BroadcastChannel("[Firebase] FID Change"),Tt.onmessage=t=>{Cn(t.data.key,t.data.fid)}),Tt}function Yc(){Nn.size===0&&Tt&&(Tt.close(),Tt=null)}const Xc="firebase-installations-database",Zc=1,$t="firebase-installations-store";let Kr=null;function _a(){return Kr||(Kr=hn(Xc,Zc,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($t)}}})),Kr}async function Nr(t,e){const r=Or(t),n=(await _a()).transaction($t,"readwrite"),o=n.objectStore($t),i=await o.get(r);return await o.put(e,r),await n.done,(!i||i.fid!==e.fid)&&Tn(t,e.fid),e}async function jn(t){const e=Or(t),a=(await _a()).transaction($t,"readwrite");await a.objectStore($t).delete(e),await a.done}async function Fr(t,e){const r=Or(t),n=(await _a()).transaction($t,"readwrite"),o=n.objectStore($t),i=await o.get(r),c=e(i);return c===void 0?await o.delete(r):await o.put(c,r),await n.done,c&&(!i||i.fid!==c.fid)&&Tn(t,c.fid),c}async function Ea(t){let e;const r=await Fr(t.appConfig,a=>{const n=el(a),o=tl(t,n);return e=o.registrationPromise,o.installationEntry});return r.fid===ha?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function el(t){const e=t||{fid:Jc(),registrationStatus:0};return Pn(e)}function tl(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(Rt.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=rl(t,r);return{installationEntry:r,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:al(t)}:{installationEntry:e}}async function rl(t,e){try{const r=await Hc(t,e);return Nr(t.appConfig,r)}catch(r){throw vn(r)&&r.customData.serverCode===409?await jn(t.appConfig):await Nr(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function al(t){let e=await ls(t.appConfig);for(;e.registrationStatus===1;)await In(100),e=await ls(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:a}=await Ea(t);return a||r}return e}function ls(t){return Fr(t,e=>{if(!e)throw Rt.create("installation-not-found");return Pn(e)})}function Pn(t){return sl(t)?{fid:t.fid,registrationStatus:0}:t}function sl(t){return t.registrationStatus===1&&t.registrationTime+xn<Date.now()}async function nl({appConfig:t,heartbeatServiceProvider:e},r){const a=ol(t,r),n=Bc(t,r),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const i={installation:{sdkVersion:bn,appId:t.appId}},c={method:"POST",headers:n,body:JSON.stringify(i)},l=await An(()=>fetch(a,c));if(l.ok){const u=await l.json();return _n(u)}else throw await En("Generate Auth Token",l)}function ol(t,{fid:e}){return`${kn(t)}/${e}/authTokens:generate`}async function Sa(t,e=!1){let r;const a=await Fr(t.appConfig,o=>{if(!Rn(o))throw Rt.create("not-registered");const i=o.authToken;if(!e&&ll(i))return o;if(i.requestStatus===1)return r=il(t,e),o;{if(!navigator.onLine)throw Rt.create("app-offline");const c=ul(o);return r=cl(t,c),c}});return r?await r:a.authToken}async function il(t,e){let r=await ds(t.appConfig);for(;r.authToken.requestStatus===1;)await In(100),r=await ds(t.appConfig);const a=r.authToken;return a.requestStatus===0?Sa(t,e):a}function ds(t){return Fr(t,e=>{if(!Rn(e))throw Rt.create("not-registered");const r=e.authToken;return hl(r)?{...e,authToken:{requestStatus:0}}:e})}async function cl(t,e){try{const r=await nl(t,e),a={...e,authToken:r};return await Nr(t.appConfig,a),r}catch(r){if(vn(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await jn(t.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Nr(t.appConfig,a)}throw r}}function Rn(t){return t!==void 0&&t.registrationStatus===2}function ll(t){return t.requestStatus===2&&!dl(t)}function dl(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Dc}function ul(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function hl(t){return t.requestStatus===1&&t.requestTime+xn<Date.now()}async function ml(t){const e=t,{installationEntry:r,registrationPromise:a}=await Ea(e);return a?a.catch(console.error):Sa(e).catch(console.error),r.fid}async function fl(t,e=!1){const r=t;return await pl(r),(await Sa(r,e)).token}async function pl(t){const{registrationPromise:e}=await Ea(t);e&&await e}function gl(t){if(!t||!t.options)throw Yr("App Configuration");if(!t.name)throw Yr("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw Yr(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yr(t){return Rt.create("missing-app-config-values",{valueName:t})}const $n="installations",yl="installations-internal",xl=t=>{const e=t.getProvider("app").getImmediate(),r=gl(e),a=Jt(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},bl=t=>{const e=t.getProvider("app").getImmediate(),r=Jt(e,$n).getImmediate();return{getId:()=>ml(r),getToken:n=>fl(r,n)}};function wl(){nt(new Je($n,xl,"PUBLIC")),nt(new Je(yl,bl,"PRIVATE"))}wl();qe(yn,ka);qe(yn,ka,"esm2020");const Tr="analytics",vl="firebase_id",kl="origin",_l=60*1e3,El="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Aa="https://www.googletagmanager.com/gtag/js";const Ne=new wa("@firebase/analytics");const Sl={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Le=new Mt("analytics","Analytics",Sl);function Al(t){if(!t.startsWith(Aa)){const e=Le.create("invalid-gtag-resource",{gtagURL:t});return Ne.warn(e.message),""}return t}function Ln(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function Il(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function Nl(t,e){const r=Il("firebase-js-sdk-policy",{createScriptURL:Al}),a=document.createElement("script"),n=`${Aa}?l=${t}&id=${e}`;a.src=r?r?.createScriptURL(n):n,a.async=!0,document.head.appendChild(a)}function Tl(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Cl(t,e,r,a,n,o){const i=a[n];try{if(i)await e[i];else{const l=(await Ln(r)).find(u=>u.measurementId===n);l&&await e[l.appId]}}catch(c){Ne.error(c)}t("config",n,o)}async function jl(t,e,r,a,n){try{let o=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const c=await Ln(r);for(const l of i){const u=c.find(m=>m.measurementId===l),h=u&&e[u.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",a,n||{})}catch(o){Ne.error(o)}}function Pl(t,e,r,a){async function n(o,...i){try{if(o==="event"){const[c,l]=i;await jl(t,e,r,c,l)}else if(o==="config"){const[c,l]=i;await Cl(t,e,r,a,c,l)}else if(o==="consent"){const[c,l]=i;t("consent",c,l)}else if(o==="get"){const[c,l,u]=i;t("get",c,l,u)}else if(o==="set"){const[c]=i;t("set",c)}else t(o,...i)}catch(c){Ne.error(c)}}return n}function Rl(t,e,r,a,n){let o=function(...i){window[a].push(arguments)};return window[n]&&typeof window[n]=="function"&&(o=window[n]),window[n]=Pl(o,t,e,r),{gtagCore:o,wrappedGtag:window[n]}}function $l(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Aa)&&r.src.includes(t))return r;return null}const Ll=30,Ml=1e3;class Dl{constructor(e={},r=Ml){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Mn=new Dl;function Ol(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Fl(t){const{appId:e,apiKey:r}=t,a={method:"GET",headers:Ol(r)},n=El.replace("{app-id}",e),o=await fetch(n,a);if(o.status!==200&&o.status!==304){let i="";try{const c=await o.json();c.error?.message&&(i=c.error.message)}catch{}throw Le.create("config-fetch-failed",{httpStatus:o.status,responseMessage:i})}return o.json()}async function Ul(t,e=Mn,r){const{appId:a,apiKey:n,measurementId:o}=t.options;if(!a)throw Le.create("no-app-id");if(!n){if(o)return{measurementId:o,appId:a};throw Le.create("no-api-key")}const i=e.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Vl;return setTimeout(async()=>{c.abort()},_l),Dn({appId:a,apiKey:n,measurementId:o},i,c,e)}async function Dn(t,{throttleEndTimeMillis:e,backoffCount:r},a,n=Mn){const{appId:o,measurementId:i}=t;try{await Bl(a,e)}catch(c){if(i)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:i};throw c}try{const c=await Fl(t);return n.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!zl(l)){if(n.deleteThrottleMetadata(o),i)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:i};throw c}const u=Number(l?.customData?.httpStatus)===503?es(r,n.intervalMillis,Ll):es(r,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:r+1};return n.setThrottleMetadata(o,h),Ne.debug(`Calling attemptFetch again in ${u} millis`),Dn(t,h,a,n)}}function Bl(t,e){return new Promise((r,a)=>{const n=Math.max(e-Date.now(),0),o=setTimeout(r,n);t.addEventListener(()=>{clearTimeout(o),a(Le.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zl(t){if(!(t instanceof Ge)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Vl{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Hl(t,e,r,a,n){if(n&&n.global){t("event",r,a);return}else{const o=await e,i={...a,send_to:o};t("event",r,i)}}async function ql(t,e,r,a){if(a&&a.global){const n={};for(const o of Object.keys(r))n[`user_properties.${o}`]=r[o];return t("set",n),Promise.resolve()}else{const n=await e;t("config",n,{update:!0,user_properties:r})}}async function Wl(){if(cn())try{await ln()}catch(t){return Ne.warn(Le.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Ne.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Jl(t,e,r,a,n,o,i){const c=Ul(t);c.then(f=>{r[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Ne.error(f)),e.push(c);const l=Wl().then(f=>{if(f)return a.getId()}),[u,h]=await Promise.all([c,l]);$l(o)||Nl(o,u.measurementId),n("js",new Date);const m=i?.config??{};return m[kl]="firebase",m.update=!0,h!=null&&(m[vl]=h),n("config",u.measurementId,m),u.measurementId}class Ql{constructor(e){this.app=e}_delete(){return delete zt[this.app.options.appId],Promise.resolve()}}let zt={},us=[];const hs={};let Xr="dataLayer",Gl="gtag",ms,Ia,fs=!1;function Kl(){const t=[];if(on()&&t.push("This is a browser extension environment."),pi()||t.push("Cookies are not available."),t.length>0){const e=t.map((a,n)=>`(${n+1}) ${a}`).join(" "),r=Le.create("invalid-analytics-context",{errorInfo:e});Ne.warn(r.message)}}function Yl(t,e,r){Kl();const a=t.options.appId;if(!a)throw Le.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Le.create("no-api-key");if(zt[a]!=null)throw Le.create("already-exists",{id:a});if(!fs){Tl(Xr);const{wrappedGtag:o,gtagCore:i}=Rl(zt,us,hs,Xr,Gl);Ia=o,ms=i,fs=!0}return zt[a]=Jl(t,us,hs,e,ms,Xr,r),new Ql(t)}function Xl(t=fn()){t=De(t);const e=Jt(t,Tr);return e.isInitialized()?e.getImmediate():Zl(t)}function Zl(t,e={}){const r=Jt(t,Tr);if(r.isInitialized()){const n=r.getImmediate();if(Pt(e,r.getOptions()))return n;throw Le.create("already-initialized")}return r.initialize({options:e})}function ed(t,e,r){t=De(t),ql(Ia,zt[t.app.options.appId],e,r).catch(a=>Ne.error(a))}function td(t,e,r,a){t=De(t),Hl(Ia,zt[t.app.options.appId],e,r,a).catch(n=>Ne.error(n))}const ps="@firebase/analytics",gs="0.10.19";function rd(){nt(new Je(Tr,(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return Yl(a,n,r)},"PUBLIC")),nt(new Je("analytics-internal",t,"PRIVATE")),qe(ps,gs),qe(ps,gs,"esm2020");function t(e){try{const r=e.getProvider(Tr).getImmediate();return{logEvent:(a,n,o)=>td(r,a,n,o),setUserProperties:(a,n)=>ed(r,a,n)}}catch(r){throw Le.create("interop-component-reg-failed",{reason:r})}}}rd();function On(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ad=On,Fn=new Mt("auth","Firebase",On());const Cr=new wa("@firebase/auth");function sd(t,...e){Cr.logLevel<=de.WARN&&Cr.warn(`Auth (${mr}): ${t}`,...e)}function _r(t,...e){Cr.logLevel<=de.ERROR&&Cr.error(`Auth (${mr}): ${t}`,...e)}function Qe(t,...e){throw Ta(t,...e)}function Be(t,...e){return Ta(t,...e)}function Na(t,e,r){const a={...ad(),[e]:r};return new Mt("auth","Firebase",a).create(e,{appName:t.name})}function jt(t){return Na(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nd(t,e,r){const a=r;if(!(e instanceof a))throw a.name!==e.constructor.name&&Qe(t,"argument-error"),Na(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ta(t,...e){if(typeof t!="string"){const r=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=t.name),t._errorFactory.create(r,...a)}return Fn.create(t,...e)}function V(t,e,...r){if(!t)throw Ta(e,...r)}function tt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _r(e),new Error(e)}function ot(t,e){t||tt(e)}function ma(){return typeof self<"u"&&self.location?.href||""}function od(){return ys()==="http:"||ys()==="https:"}function ys(){return typeof self<"u"&&self.location?.protocol||null}function id(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(od()||on()||"connection"in navigator)?navigator.onLine:!0}function cd(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class fr{constructor(e,r){this.shortDelay=e,this.longDelay=r,ot(r>e,"Short delay should be less than long delay!"),this.isMobile=ui()||mi()}get(){return id()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ca(t,e){ot(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}class Un{static initialize(e,r,a){this.fetchImpl=e,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ld={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dd=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ud=new fr(3e4,6e4);function ja(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qt(t,e,r,a,n={}){return Bn(t,n,async()=>{let o={},i={};a&&(e==="GET"?i=a:o={body:JSON.stringify(a)});const c=hr({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...o};return hi()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(u.credentials="include"),Un.fetch()(await zn(t,t.config.apiHost,r,c),u)})}async function Bn(t,e,r){t._canInitEmulator=!1;const a={...ld,...e};try{const n=new md(t),o=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw br(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const c=o.ok?i.errorMessage:i.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw br(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw br(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw br(t,"user-disabled",i);const h=a[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Na(t,h,u);Qe(t,h)}}catch(n){if(n instanceof Ge)throw n;Qe(t,"network-request-failed",{message:String(n)})}}async function hd(t,e,r,a,n={}){const o=await Qt(t,e,r,a,n);return"mfaPendingCredential"in o&&Qe(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function zn(t,e,r,a){const n=`${e}${r}?${a}`,o=t,i=o.config.emulator?Ca(t.config,n):`${t.config.apiScheme}://${n}`;return dd.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}class md{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(Be(this.auth,"network-request-failed")),ud.get())})}}function br(t,e,r){const a={appName:t.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=Be(t,e,a);return n.customData._tokenResponse=r,n}async function fd(t,e){return Qt(t,"POST","/v1/accounts:delete",e)}async function jr(t,e){return Qt(t,"POST","/v1/accounts:lookup",e)}function nr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pd(t,e=!1){const r=De(t),a=await r.getIdToken(e),n=Pa(a);V(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const o=typeof n.firebase=="object"?n.firebase:void 0,i=o?.sign_in_provider;return{claims:n,token:a,authTime:nr(Zr(n.auth_time)),issuedAtTime:nr(Zr(n.iat)),expirationTime:nr(Zr(n.exp)),signInProvider:i||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Zr(t){return Number(t)*1e3}function Pa(t){const[e,r,a]=t.split(".");if(e===void 0||r===void 0||a===void 0)return _r("JWT malformed, contained fewer than 3 sections"),null;try{const n=an(r);return n?JSON.parse(n):(_r("Failed to decode base64 JWT payload"),null)}catch(n){return _r("Caught error parsing JWT payload as JSON",n?.toString()),null}}function xs(t){const e=Pa(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lr(t,e,r=!1){if(r)return e;try{return await e}catch(a){throw a instanceof Ge&&gd(a)&&t.auth.currentUser===t&&await t.auth.signOut(),a}}function gd({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class yd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class fa{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=nr(this.lastLoginAt),this.creationTime=nr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pr(t){const e=t.auth,r=await t.getIdToken(),a=await lr(t,jr(e,{idToken:r}));V(a?.users.length,e,"internal-error");const n=a.users[0];t._notifyReloadListener(n);const o=n.providerUserInfo?.length?Vn(n.providerUserInfo):[],i=bd(t.providerData,o),c=t.isAnonymous,l=!(t.email&&n.passwordHash)&&!i?.length,u=c?l:!1,h={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new fa(n.createdAt,n.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function xd(t){const e=De(t);await Pr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bd(t,e){return[...t.filter(a=>!e.some(n=>n.providerId===a.providerId)),...e]}function Vn(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function wd(t,e){const r=await Bn(t,{},async()=>{const a=hr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:o}=t.config,i=await zn(t,n,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:a};return t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(l.credentials="include"),Un.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function vd(t,e){return Qt(t,"POST","/v2/accounts:revokeToken",ja(t,e))}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){V(e.length!==0,"internal-error");const r=xs(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:a,refreshToken:n,expiresIn:o}=await wd(e,r);this.updateTokensAndExpiration(a,n,Number(o))}updateTokensAndExpiration(e,r,a){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,r){const{refreshToken:a,accessToken:n,expirationTime:o}=r,i=new Vt;return a&&(V(typeof a=="string","internal-error",{appName:e}),i.refreshToken=a),n&&(V(typeof n=="string","internal-error",{appName:e}),i.accessToken=n),o&&(V(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return tt("not implemented")}}function ut(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ue{constructor({uid:e,auth:r,stsTokenManager:a,...n}){this.providerId="firebase",this.proactiveRefresh=new yd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new fa(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const r=await lr(this,this.stsTokenManager.getToken(this.auth,e));return V(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return pd(this,e)}reload(){return xd(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ue({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),r&&await Pr(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(He(this.auth.app))return Promise.reject(jt(this.auth));const e=await this.getIdToken();return await lr(this,fd(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const a=r.displayName??void 0,n=r.email??void 0,o=r.phoneNumber??void 0,i=r.photoURL??void 0,c=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:m,emailVerified:f,isAnonymous:g,providerData:x,stsTokenManager:y}=r;V(m&&y,e,"internal-error");const A=Vt.fromJSON(this.name,y);V(typeof m=="string",e,"internal-error"),ut(a,e.name),ut(n,e.name),V(typeof f=="boolean",e,"internal-error"),V(typeof g=="boolean",e,"internal-error"),ut(o,e.name),ut(i,e.name),ut(c,e.name),ut(l,e.name),ut(u,e.name),ut(h,e.name);const b=new Ue({uid:m,auth:e,email:n,emailVerified:f,displayName:a,isAnonymous:g,photoURL:i,phoneNumber:o,tenantId:c,stsTokenManager:A,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(b.providerData=x.map(S=>({...S}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,r,a=!1){const n=new Vt;n.updateFromServerResponse(r);const o=new Ue({uid:r.localId,auth:e,stsTokenManager:n,isAnonymous:a});return await Pr(o),o}static async _fromGetAccountInfoResponse(e,r,a){const n=r.users[0];V(n.localId!==void 0,"internal-error");const o=n.providerUserInfo!==void 0?Vn(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!o?.length,c=new Vt;c.updateFromIdToken(a);const l=new Ue({uid:n.localId,auth:e,stsTokenManager:c,isAnonymous:i}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:o,metadata:new fa(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!o?.length};return Object.assign(l,u),l}}const bs=new Map;function rt(t){ot(t instanceof Function,"Expected a class definition");let e=bs.get(t);return e?(ot(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bs.set(t,e),e)}class Hn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Hn.type="NONE";const ws=Hn;function Er(t,e,r){return`firebase:${t}:${e}:${r}`}class Ht{constructor(e,r,a){this.persistence=e,this.auth=r,this.userKey=a;const{config:n,name:o}=this.auth;this.fullUserKey=Er(this.userKey,n.apiKey,o),this.fullPersistenceKey=Er("persistence",n.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await jr(this.auth,{idToken:e}).catch(()=>{});return r?Ue._fromGetAccountInfoResponse(this.auth,r,e):null}return Ue._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,a="authUser"){if(!r.length)return new Ht(rt(ws),e,a);const n=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=n[0]||rt(ws);const i=Er(a,e.config.apiKey,e.name);let c=null;for(const u of r)try{const h=await u._get(i);if(h){let m;if(typeof h=="string"){const f=await jr(e,{idToken:h}).catch(()=>{});if(!f)break;m=await Ue._fromGetAccountInfoResponse(e,f,h)}else m=Ue._fromJSON(e,h);u!==o&&(c=m),o=u;break}}catch{}const l=n.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ht(o,e,a):(o=l[0],c&&await o._set(i,c.toJSON()),await Promise.all(r.map(async u=>{if(u!==o)try{await u._remove(i)}catch{}})),new Ht(o,e,a))}}function vs(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qn(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kn(e))return"Blackberry";if(Yn(e))return"Webos";if(Wn(e))return"Safari";if((e.includes("chrome/")||Jn(e))&&!e.includes("edge/"))return"Chrome";if(Gn(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=t.match(r);if(a?.length===2)return a[1]}return"Other"}function qn(t=Te()){return/firefox\//i.test(t)}function Wn(t=Te()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jn(t=Te()){return/crios\//i.test(t)}function Qn(t=Te()){return/iemobile/i.test(t)}function Gn(t=Te()){return/android/i.test(t)}function Kn(t=Te()){return/blackberry/i.test(t)}function Yn(t=Te()){return/webos/i.test(t)}function Ra(t=Te()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kd(t=Te()){return Ra(t)&&!!window.navigator?.standalone}function _d(){return fi()&&document.documentMode===10}function Xn(t=Te()){return Ra(t)||Gn(t)||Yn(t)||Kn(t)||/windows phone/i.test(t)||Qn(t)}function Zn(t,e=[]){let r;switch(t){case"Browser":r=vs(Te());break;case"Worker":r=`${vs(Te())}-${t}`;break;default:r=t}const a=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${mr}/${a}`}class Ed{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const a=o=>new Promise((i,c)=>{try{const l=e(o);i(l)}catch(l){c(l)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const a of this.queue)await a(e),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function Sd(t,e={}){return Qt(t,"GET","/v2/passwordPolicy",ja(t,e))}const Ad=6;class Id{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Ad,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=e.length>=a),n&&(r.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<e.length;n++)a=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,r,a,n,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Nd{constructor(e,r,a,n){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.beforeStateQueue=new Ed(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=rt(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ht.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await jr(this,{idToken:e}),a=await Ue._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(He(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(i,i))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,n=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,i=a?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===i)&&c?.user&&(a=c.user,n=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Pr(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cd()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(He(this.app))return Promise.reject(jt(this));const r=e?De(e):null;return r&&V(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return He(this.app)?Promise.reject(jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return He(this.app)?Promise.reject(jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sd(this),r=new Id(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,r,a){return this.registerStateListener(this.authStateSubscription,e,r,a)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,a){return this.registerStateListener(this.idTokenSubscription,e,r,a)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await vd(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const a=await this.getOrInitRedirectPersistenceManager(r);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&rt(e)||this._popupRedirectResolver;V(r,this,"argument-error"),this.redirectPersistenceManager=await Ht.create(this,[rt(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,a,n){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let i=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(c,this,"internal-error"),c.then(()=>{i||o(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,a,n);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sd(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ur(t){return De(t)}class ks{constructor(e){this.auth=e,this.observer=null,this.addObserver=wi(r=>this.observer=r)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $a={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Td(t){$a=t}function Cd(t){return $a.loadJS(t)}function jd(){return $a.gapiScript}function Pd(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Rd(t,e){const r=Jt(t,"auth");if(r.isInitialized()){const n=r.getImmediate(),o=r.getOptions();if(Pt(o,e??{}))return n;Qe(n,"already-initialized")}return r.initialize({options:e})}function $d(t,e){const r=e?.persistence||[],a=(Array.isArray(r)?r:[r]).map(rt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(a,e?.popupRedirectResolver)}function Ld(t,e,r){const a=Ur(t);V(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const n=!1,o=eo(e),{host:i,port:c}=Md(e),l=c===null?"":`:${c}`,u={url:`${o}//${i}${l}/`},h=Object.freeze({host:i,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!a._canInitEmulator){V(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),V(Pt(u,a.config.emulator)&&Pt(h,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=u,a.emulatorConfig=h,a.settings.appVerificationDisabledForTesting=!0,Dr(i)?(ii(`${o}//${i}${l}`),di("Auth",!0)):Dd()}function eo(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Md(t){const e=eo(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const o=n[1];return{host:o,port:_s(a.substr(o.length+1))}}else{const[o,i]=a.split(":");return{host:o,port:_s(i)}}}function _s(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dd(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class to{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return tt("not implemented")}_getIdTokenResponse(e){return tt("not implemented")}_linkToIdToken(e,r){return tt("not implemented")}_getReauthenticationResolver(e){return tt("not implemented")}}async function qt(t,e){return hd(t,"POST","/v1/accounts:signInWithIdp",ja(t,e))}const Od="http://localhost";class it extends to{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new it(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Qe("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:n,...o}=r;if(!a||!n)return null;const i=new it(a,n);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return qt(e,r)}_linkToIdToken(e,r){const a=this.buildRequest();return a.idToken=r,qt(e,a)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,qt(e,r)}buildRequest(){const e={requestUri:Od,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=hr(r)}return e}}class La{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gt extends La{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or extends Gt{static credentialFromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;return V("providerId"in r&&"signInMethod"in r,"argument-error"),it._fromParams(r)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return V(e.idToken||e.accessToken,"argument-error"),it._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return or.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return or.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:a,oauthTokenSecret:n,pendingToken:o,nonce:i,providerId:c}=e;if(!a&&!n&&!r&&!o||!c)return null;try{return new or(c)._credential({idToken:r,accessToken:a,nonce:i,pendingToken:o})}catch{return null}}}class ht extends Gt{constructor(){super("facebook.com")}static credential(e){return it._fromParams({providerId:ht.PROVIDER_ID,signInMethod:ht.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ht.credentialFromTaggedObject(e)}static credentialFromError(e){return ht.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ht.credential(e.oauthAccessToken)}catch{return null}}}ht.FACEBOOK_SIGN_IN_METHOD="facebook.com";ht.PROVIDER_ID="facebook.com";class et extends Gt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return it._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:a}=e;if(!r&&!a)return null;try{return et.credential(r,a)}catch{return null}}}et.GOOGLE_SIGN_IN_METHOD="google.com";et.PROVIDER_ID="google.com";class mt extends Gt{constructor(){super("github.com")}static credential(e){return it._fromParams({providerId:mt.PROVIDER_ID,signInMethod:mt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mt.credentialFromTaggedObject(e)}static credentialFromError(e){return mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mt.credential(e.oauthAccessToken)}catch{return null}}}mt.GITHUB_SIGN_IN_METHOD="github.com";mt.PROVIDER_ID="github.com";class ft extends Gt{constructor(){super("twitter.com")}static credential(e,r){return it._fromParams({providerId:ft.PROVIDER_ID,signInMethod:ft.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ft.credentialFromTaggedObject(e)}static credentialFromError(e){return ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=e;if(!r||!a)return null;try{return ft.credential(r,a)}catch{return null}}}ft.TWITTER_SIGN_IN_METHOD="twitter.com";ft.PROVIDER_ID="twitter.com";class Wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,a,n=!1){const o=await Ue._fromIdTokenResponse(e,a,n),i=Es(a);return new Wt({user:o,providerId:i,_tokenResponse:a,operationType:r})}static async _forOperation(e,r,a){await e._updateTokensIfNecessary(a,!0);const n=Es(a);return new Wt({user:e,providerId:n,_tokenResponse:a,operationType:r})}}function Es(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Rr extends Ge{constructor(e,r,a,n){super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,Rr.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,r,a,n){return new Rr(e,r,a,n)}}function ro(t,e,r,a){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rr._fromErrorAndOperation(t,o,e,a):o})}async function Fd(t,e,r=!1){const a=await lr(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Wt._forOperation(t,"link",a)}async function Ud(t,e,r=!1){const{auth:a}=t;if(He(a.app))return Promise.reject(jt(a));const n="reauthenticate";try{const o=await lr(t,ro(a,n,e,t),r);V(o.idToken,a,"internal-error");const i=Pa(o.idToken);V(i,a,"internal-error");const{sub:c}=i;return V(t.uid===c,a,"user-mismatch"),Wt._forOperation(t,n,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qe(a,"user-mismatch"),o}}async function Bd(t,e,r=!1){if(He(t.app))return Promise.reject(jt(t));const a="signIn",n=await ro(t,a,e),o=await Wt._fromIdTokenResponse(t,a,n);return r||await t._updateCurrentUser(o.user),o}function zd(t,e,r,a){return De(t).onIdTokenChanged(e,r,a)}function Vd(t,e,r){return De(t).beforeAuthStateChanged(e,r)}function Hd(t,e,r,a){return De(t).onAuthStateChanged(e,r,a)}function qd(t){return De(t).signOut()}async function ug(t){return De(t).delete()}const $r="__sak";class ao{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem($r,"1"),this.storage.removeItem($r),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wd=1e3,Jd=10;class so extends ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&e(r,n,a)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,c,l)=>{this.notifyListeners(i,l)});return}const a=e.key;r?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(a);!r&&this.localCache[a]===i||this.notifyListeners(a,i)},o=this.storage.getItem(a);_d()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,Jd):n()}notifyListeners(e,r){this.localCache[e]=r;const a=this.listeners[e];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:a}),!0)})},Wd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}so.type="LOCAL";const Qd=so;class no extends ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}no.type="SESSION";const oo=no;function Gd(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}class Br{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(n=>n.isListeningto(e));if(r)return r;const a=new Br(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:a,eventType:n,data:o}=r.data,i=this.handlersMap[n];if(!i?.size)return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const c=Array.from(i).map(async u=>u(r.origin,o)),l=await Gd(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Br.receivers=[];function Ma(t="",e=10){let r="";for(let a=0;a<e;a++)r+=Math.floor(Math.random()*10);return t+r}class Kd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let o,i;return new Promise((c,l)=>{const u=Ma("",20);n.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},a);i={messageChannel:n,onMessage(m){const f=m;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(f.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function We(){return window}function Yd(t){We().location.href=t}function io(){return typeof We().WorkerGlobalScope<"u"&&typeof We().importScripts=="function"}async function Xd(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zd(){return navigator?.serviceWorker?.controller||null}function eu(){return io()?self:null}const co="firebaseLocalStorageDb",tu=1,Lr="firebaseLocalStorage",lo="fbase_key";class pr{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function zr(t,e){return t.transaction([Lr],e?"readwrite":"readonly").objectStore(Lr)}function ru(){const t=indexedDB.deleteDatabase(co);return new pr(t).toPromise()}function pa(){const t=indexedDB.open(co,tu);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const a=t.result;try{a.createObjectStore(Lr,{keyPath:lo})}catch(n){r(n)}}),t.addEventListener("success",async()=>{const a=t.result;a.objectStoreNames.contains(Lr)?e(a):(a.close(),await ru(),e(await pa()))})})}async function Ss(t,e,r){const a=zr(t,!0).put({[lo]:e,value:r});return new pr(a).toPromise()}async function au(t,e){const r=zr(t,!1).get(e),a=await new pr(r).toPromise();return a===void 0?null:a.value}function As(t,e){const r=zr(t,!0).delete(e);return new pr(r).toPromise()}const su=800,nu=3;class uo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pa(),this.db)}async _withRetries(e){let r=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(r++>nu)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return io()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Br._getInstance(eu()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Xd(),!this.activeServiceWorker)return;this.sender=new Kd(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zd()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pa();return await Ss(e,$r,"1"),await As(e,$r),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>Ss(a,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(a=>au(a,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>As(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const o=zr(n,!1).getAll();return new pr(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(e.length!==0)for(const{fbase_key:n,value:o}of e)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(o)&&(this.notifyListeners(n,o),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(e,r){this.localCache[e]=r;const a=this.listeners[e];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),su)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uo.type="LOCAL";const ou=uo;new fr(3e4,6e4);function ho(t,e){return e?rt(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Da extends to{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qt(e,this._buildIdpRequest())}_linkToIdToken(e,r){return qt(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return qt(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function iu(t){return Bd(t.auth,new Da(t),t.bypassAuthState)}function cu(t){const{auth:e,user:r}=t;return V(r,e,"internal-error"),Ud(r,new Da(t),t.bypassAuthState)}async function lu(t){const{auth:e,user:r}=t;return V(r,e,"internal-error"),Fd(r,new Da(t),t.bypassAuthState)}class mo{constructor(e,r,a,n,o=!1){this.auth=e,this.resolver=a,this.user=n,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:a,postBody:n,tenantId:o,error:i,type:c}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:a,tenantId:o||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iu;case"linkViaPopup":case"linkViaRedirect":return lu;case"reauthViaPopup":case"reauthViaRedirect":return cu;default:Qe(this.auth,"internal-error")}}resolve(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const du=new fr(2e3,1e4);async function hg(t,e,r){if(He(t.app))return Promise.reject(Be(t,"operation-not-supported-in-this-environment"));const a=Ur(t);nd(t,e,La);const n=ho(a,r);return new Ct(a,"signInViaPopup",e,n).executeNotNull()}class Ct extends mo{constructor(e,r,a,n,o){super(e,r,n,o),this.provider=a,this.authWindow=null,this.pollId=null,Ct.currentPopupAction&&Ct.currentPopupAction.cancel(),Ct.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){ot(this.filter.length===1,"Popup operations only handle one event");const e=Ma();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Be(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ct.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,du.get())};e()}}Ct.currentPopupAction=null;const uu="pendingRedirect",Sr=new Map;class hu extends mo{constructor(e,r,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let e=Sr.get(this.auth._key());if(!e){try{const a=await mu(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(r){e=()=>Promise.reject(r)}Sr.set(this.auth._key(),e)}return this.bypassAuthState||Sr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mu(t,e){const r=gu(e),a=pu(t);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function fu(t,e){Sr.set(t._key(),e)}function pu(t){return rt(t._redirectPersistence)}function gu(t){return Er(uu,t.config.apiKey,t.name)}async function yu(t,e,r=!1){if(He(t.app))return Promise.reject(jt(t));const a=Ur(t),n=ho(a,e),i=await new hu(a,n,r).execute();return i&&!r&&(delete i.user._redirectEventId,await a._persistUserIfCurrent(i.user),await a._setRedirectUser(null,e)),i}const xu=600*1e3;class bu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(r=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wu(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!fo(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";r.onError(Be(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const a=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xu&&this.cachedEventUids.clear(),this.cachedEventUids.has(Is(e))}saveEventToCache(e){this.cachedEventUids.add(Is(e)),this.lastProcessedEventTime=Date.now()}}function Is(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fo({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function wu(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fo(t);default:return!1}}async function vu(t,e={}){return Qt(t,"GET","/v1/projects",e)}const ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_u=/^https?/;async function Eu(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vu(t);for(const r of e)try{if(Su(r))return}catch{}Qe(t,"unauthorized-domain")}function Su(t){const e=ma(),{protocol:r,hostname:a}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&a===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===a}if(!_u.test(r))return!1;if(ku.test(t))return a===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}const Au=new fr(3e4,6e4);function Ns(){const t=We().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Iu(t){return new Promise((e,r)=>{function a(){Ns(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ns(),r(Be(t,"network-request-failed"))},timeout:Au.get()})}if(We().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(We().gapi?.load)a();else{const n=Pd("iframefcb");return We()[n]=()=>{gapi.load?a():r(Be(t,"network-request-failed"))},Cd(`${jd()}?onload=${n}`).catch(o=>r(o))}}).catch(e=>{throw Ar=null,e})}let Ar=null;function Nu(t){return Ar=Ar||Iu(t),Ar}const Tu=new fr(5e3,15e3),Cu="__/auth/iframe",ju="emulator/auth/iframe",Pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ru=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $u(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ca(e,ju):`https://${t.config.authDomain}/${Cu}`,a={apiKey:e.apiKey,appName:t.name,v:mr},n=Ru.get(t.config.apiHost);n&&(a.eid=n);const o=t._getFrameworks();return o.length&&(a.fw=o.join(",")),`${r}?${hr(a).slice(1)}`}async function Lu(t){const e=await Nu(t),r=We().gapi;return V(r,t,"internal-error"),e.open({where:document.body,url:$u(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pu,dontclear:!0},a=>new Promise(async(n,o)=>{await a.restyle({setHideOnLeave:!1});const i=Be(t,"network-request-failed"),c=We().setTimeout(()=>{o(i)},Tu.get());function l(){We().clearTimeout(c),n(a)}a.ping(l).then(l,()=>{o(i)})}))}const Mu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Du=500,Ou=600,Fu="_blank",Uu="http://localhost";class Ts{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bu(t,e,r,a=Du,n=Ou){const o=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const l={...Mu,width:a.toString(),height:n.toString(),top:o,left:i},u=Te().toLowerCase();r&&(c=Jn(u)?Fu:r),qn(u)&&(e=e||Uu,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,x])=>`${f}${g}=${x},`,"");if(kd(u)&&c!=="_self")return zu(e||"",c),new Ts(null);const m=window.open(e||"",c,h);V(m,t,"popup-blocked");try{m.focus()}catch{}return new Ts(m)}function zu(t,e){const r=document.createElement("a");r.href=t,r.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}const Vu="__/auth/handler",Hu="emulator/auth/handler",qu=encodeURIComponent("fac");async function Cs(t,e,r,a,n,o){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:a,v:mr,eventId:n};if(e instanceof La){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",bi(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))i[h]=m}if(e instanceof Gt){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(i.scopes=h.join(","))}t.tenantId&&(i.tid=t.tenantId);const c=i;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const l=await t._getAppCheckToken(),u=l?`#${qu}=${encodeURIComponent(l)}`:"";return`${Wu(t)}?${hr(c).slice(1)}${u}`}function Wu({config:t}){return t.emulator?Ca(t,Hu):`https://${t.authDomain}/${Vu}`}const ea="webStorageSupport";class Ju{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oo,this._completeRedirectFn=yu,this._overrideRedirectResult=fu}async _openPopup(e,r,a,n){ot(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Cs(e,r,a,ma(),n);return Bu(e,o,Ma())}async _openRedirect(e,r,a,n){await this._originValidation(e);const o=await Cs(e,r,a,ma(),n);return Yd(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:n,promise:o}=this.eventManagers[r];return n?Promise.resolve(n):(ot(o,"If manager is not set, promise should be"),o)}const a=this.initAndGetManager(e);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(e){const r=await Lu(e),a=new bu(e);return r.register("authEvent",n=>(V(n?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=r,a}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ea,{type:ea},n=>{const o=n?.[0]?.[ea];o!==void 0&&r(!!o),Qe(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Eu(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Xn()||Wn()||Ra()}}const Qu=Ju;var js="@firebase/auth",Ps="1.11.1";class Gu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ku(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yu(t){nt(new Je("auth",(e,{options:r})=>{const a=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:c}=a.options;V(i&&!i.includes(":"),"invalid-api-key",{appName:a.name});const l={apiKey:i,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(t)},u=new Nd(a,n,o,l);return $d(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,a)=>{e.getProvider("auth-internal").initialize()})),nt(new Je("auth-internal",e=>{const r=Ur(e.getProvider("auth").getImmediate());return(a=>new Gu(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),qe(js,Ps,Ku(t)),qe(js,Ps,"esm2020")}const Xu=300,Zu=nn("authIdTokenMaxAge")||Xu;let Rs=null;const eh=t=>async e=>{const r=e&&await e.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>Zu)return;const n=r?.token;Rs!==n&&(Rs=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function th(t=fn()){const e=Jt(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Rd(t,{popupRedirectResolver:Qu,persistence:[ou,Qd,oo]}),a=nn("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(a,location.origin);if(location.origin===o.origin){const i=eh(o.toString());Vd(r,i,()=>i(r.currentUser)),zd(r,c=>i(c))}}const n=ni("auth");return n&&Ld(r,`http://${n}`),r}function rh(){return document.getElementsByTagName("head")?.[0]??document}Td({loadJS(t){return new Promise((e,r)=>{const a=document.createElement("script");a.setAttribute("src",t),a.onload=e,a.onerror=n=>{const o=Be("internal-error");o.customData=n,r(o)},a.type="text/javascript",a.charset="UTF-8",rh().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yu("Browser");const ah={apiKey:"AIzaSyAWyTreHqwF5X_AAAnP9CeIRQ-ggMcOtBY",authDomain:"thafheem-ul-quran.firebaseapp.com",projectId:"thafheem-ul-quran",storageBucket:"thafheem-ul-quran.firebasestorage.app",messagingSenderId:"69349166270",appId:"1:69349166270:web:2ffde7a6faea461edb62ef",measurementId:"G-D7NNTSQSD2"},po=mn(ah);let sh=null;try{typeof window<"u"&&(sh=Xl(po))}catch(t){console.warn("Firebase Analytics initialization failed:",t.message)}const go=th(po),nh=new et,yo=new or("apple.com");nh.setCustomParameters({prompt:"select_account"});yo.addScope("email");yo.addScope("name");const xo=d.createContext(),bo=()=>{const t=d.useContext(xo);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function oh({children:t}){const[e,r]=d.useState(null),[a,n]=d.useState(!0);d.useEffect(()=>{const i=Hd(go,c=>{r(c),n(!1)});return()=>i()},[]);const o={user:e,loading:a};return a?s.jsx("div",{className:"min-h-screen bg-white dark:bg-black flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):s.jsx(xo.Provider,{value:o,children:t})}const ih=600*1e3,ch=6,wo=d.createContext(null),ta=(t,e)=>{const r=String(t??"").trim(),a=String(e??"mal").trim().toLowerCase();return`${r}::${a}`},lh=t=>{if(t.size<=ch)return;let e=null,r=Number.POSITIVE_INFINITY;t.forEach((a,n)=>{a?.timestamp<r&&(r=a.timestamp,e=n)}),e&&t.delete(e)},dh=(t,e)=>{const r=t.get(e);return r?Date.now()-r.timestamp>ih?(t.delete(e),null):r.payload:null},uh=(t,e,r)=>{r&&(t.set(e,{timestamp:Date.now(),payload:{...r,__meta:{...r.__meta||{},cachedAt:Date.now()}}}),lh(t))},hh=(t,e)=>{t.delete(e)},mh=({children:t})=>{const e=d.useRef(new Map),r=d.useRef(new Map),a=d.useMemo(()=>{const n=c=>({get:(l,u)=>{if(!l)return null;const h=ta(l,u);return dh(c.current,h)},set:(l,u,h)=>{if(!l||!h)return;const m=ta(l,u);uh(c.current,m,{...h,__meta:{...h.__meta,language:String(u??"mal").toLowerCase(),surahId:String(l??"").trim()}})},clear:(l,u)=>{if(!l)return;const h=ta(l,u);hh(c.current,h)},clearAll:()=>{c.current.clear()}}),o=n(e),i=n(r);return{getAyahViewCache:o.get,setAyahViewCache:o.set,clearAyahViewCache:o.clear,getBlockViewCache:i.get,setBlockViewCache:i.set,clearBlockViewCache:i.clear,clearAllSurahCaches:()=>{o.clearAll(),i.clearAll()}}},[]);return s.jsx(wo.Provider,{value:a,children:t})},mg=()=>{const t=d.useContext(wo);if(!t)throw new Error("useSurahViewCache must be used within a SurahViewCacheProvider");return t};const fh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ph=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),$s=t=>{const e=ph(t);return e.charAt(0).toUpperCase()+e.slice(1)},vo=(...t)=>t.filter((e,r,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===r).join(" ").trim(),gh=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var yh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xh=d.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:i,...c},l)=>d.createElement("svg",{ref:l,...yh,width:e,height:e,stroke:t,strokeWidth:a?Number(r)*24/Number(e):r,className:vo("lucide",n),...!o&&!gh(c)&&{"aria-hidden":"true"},...c},[...i.map(([u,h])=>d.createElement(u,h)),...Array.isArray(o)?o:[o]]));const q=(t,e)=>{const r=d.forwardRef(({className:a,...n},o)=>d.createElement(xh,{ref:o,iconNode:e,className:vo(`lucide-${fh($s(t))}`,`lucide-${t}`,a),...n}));return r.displayName=$s(t),r};const bh=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],wh=q("apple",bh);const vh=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m8 13 4-7 4 7",key:"4rari8"}],["path",{d:"M9.1 11h5.7",key:"1gkovt"}]],kh=q("book-a",vh);const _h=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Ot=q("book-open-check",_h);const Eh=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Oa=q("book-open",Eh);const Sh=[["path",{d:"M10 13h4",key:"ytezjc"}],["path",{d:"M12 6v7",key:"1f6ttz"}],["path",{d:"M16 8V6H8v2",key:"x8j6u4"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Ls=q("book-type",Sh);const Ah=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Ye=q("book",Ah);const Ih=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Nh=q("bookmark",Ih);const Th=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ar=q("check",Th);const Ch=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pt=q("chevron-down",Ch);const jh=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ph=q("chevron-right",jh);const Rh=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Fa=q("copy",Rh);const $h=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Lh=q("external-link",$h);const Mh=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Dh=q("facebook",Mh);const Oh=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wt=q("file-text",Oh);const Fh=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],vt=q("folder-open",Fh);const Uh=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Mr=q("heart",Uh);const Bh=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],kt=q("house",Bh);const zh=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Vh=q("info",zh);const Hh=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],qh=q("instagram",Hh);const Wh=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Jh=q("languages",Wh);const Qh=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],Gh=q("laptop-minimal",Qh);const Kh=[["path",{d:"M15 12h6",key:"upa0zy"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"m3 13 3.553-7.724a.5.5 0 0 1 .894 0L11 13",key:"blevx4"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3.92 11h6.16",key:"1bqo8m"}]],Ft=q("letter-text",Kh);const Yh=[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]],Ms=q("library-big",Yh);const Xh=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ds=q("log-out",Xh);const Zh=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],em=q("mail",Zh);const tm=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],rm=q("menu",tm);const am=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_t=q("message-circle-question-mark",am);const sm=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}]],Et=q("message-square-more",sm);const nm=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ut=q("message-square",nm);const om=[["path",{d:"M5 12h14",key:"1ays0h"}]],Os=q("minus",om);const im=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ko=q("moon",im);const cm=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M16 2v20",key:"rotuqe"}]],Fs=q("notebook",cm);const lm=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],dm=q("pause",lm);const um=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ua=q("play",um);const hm=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Us=q("plus",hm);const mm=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bt=q("search",mm);const fm=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pm=q("send",fm);const gm=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ym=q("settings",gm);const xm=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_o=q("share-2",xm);const bm=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],wm=q("share",bm);const vm=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],St=q("shield",vm);const km=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],_m=q("sparkles",km);const Em=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Eo=q("sun",Em);const Sm=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Am=q("user-x",Sm);const Im=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],At=q("user",Im);const Nm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kt=q("x",Nm);const Tm=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Cm=q("youtube",Tm),jm="/assets/logo-CKGD2Rec.png",Bs="/assets/logo-black-T_TZVNgo.png",ga="/assets/logo-white-srw7zPUu.png",Pm="https://thafheemapi.thafheem.net",So=Pm,ct=`${So}/api`,Rm=(t,{allowTrailingSlash:e=!1}={})=>t,Ba=So,U=ct,$m=Rm(void 0),Lm="https://thafheem.net/thafheem-api",Mm="https://thafheem.net/thafheem-api",gr=$m||Lm,Vr=Mm,Ao=`${U}/suranames/all`,Io=t=>`${U}/suranames/${t}`,Dm=`${U}/pageranges`,Om=`${gr}/quizquests`,Fm=`${U}/thajweedrules`,Um="https://old.thafheem.net/thaf-api/articles",Bm=[{id:1,RuleNo:"0",Rule:"   ( )",Ruledesc:`       .           .         .  ()  (),           .          ,            . 

  , , , ,  , ,     .        .     . 

1.    ()
2.   ()
3.   ()

     .`,Hassub:0,Examples:"",AudioUrl:""},{id:2,RuleNo:"1",Rule:" ",Ruledesc:` : 
:        .
 :                   .
:    
         =       .
 :
  =     
 =  . 
           .  
:
   =                     
    =                   
   =              
  =  `,Hassub:1,Examples:"",AudioUrl:""},{id:11,RuleNo:"2",Rule:" ",Ruledesc:"     ( ) ,  ( )  .",Hassub:1,Examples:"",AudioUrl:""},{id:18,RuleNo:"3",Rule:" ",Ruledesc:` : , . 

 :      . ( )  5       .        .     .   .`,Hassub:1,Examples:"",AudioUrl:""},{id:22,RuleNo:"4",Rule:" ",Ruledesc:`   :  ()     
  :      ,      . 
       .
                 ;       .          . 
      .`,Hassub:1,Examples:"",AudioUrl:""},{id:31,RuleNo:"5",Rule:" ",Ruledesc:"           .",Hassub:1,Examples:"",AudioUrl:""},{id:34,RuleNo:"6",Rule:" ",Ruledesc:"   (  )          .",Hassub:1,Examples:"",AudioUrl:""},{id:38,RuleNo:"7",Rule:" ",Ruledesc:`    ( )  . 

1.      = (  (  

2.     =    

3.    =  `,Hassub:1,Examples:"",AudioUrl:""},{id:48,RuleNo:"8",Rule:" ",Ruledesc:`: , . 
:                         (  )         .`,Hassub:1,Examples:"",AudioUrl:""},{id:63,RuleNo:"9",Rule:"    ",Ruledesc:"                .      .",Hassub:1,Examples:"",AudioUrl:""},{id:69,RuleNo:"10",Rule:" ",Ruledesc:`  ()  ()     .
1.   .  .           .       .    
2.    .           .

         :                           .  

:                         =     	
                               =  .   

      ()    () .`,Hassub:1,Examples:"",AudioUrl:""},{id:83,RuleNo:"11",Rule:"   ",Ruledesc:`      :

  1. 

  2. 

  3. `,Hassub:1,Examples:"",AudioUrl:""}],zm={1:[{id:101,RuleNo:"1.1",Rule:"  ",Ruledesc:"            .",Hassub:0,Examples:"83:14,75:27,36:52"},{id:102,RuleNo:"1.2",Rule:" ",Ruledesc:"    .    .",Hassub:0,Examples:"5:53,16:32,16:76"}],2:[{id:201,RuleNo:"2.1",Rule:" ",Ruledesc:"   ,    .       .",Hassub:0,Examples:"1:2,12:2"},{id:202,RuleNo:"2.2",Rule:" ",Ruledesc:"     .   .",Hassub:0,Examples:"112:1,2:255"}],4:[{id:401,RuleNo:"4.1",Rule:"",Ruledesc:"               .",Hassub:0,Examples:"2:3,36:9"},{id:402,RuleNo:"4.2",Rule:"",Ruledesc:"          .",Hassub:0,Examples:"2:5,97:4"}]},ra=(t="0")=>{const e=(t??"0").replace(/_/g,".");if(e==="0"||e==="")return Bm;const r=e.split(".")[0];return zm[r]||[]},ir={warningsLogged:new Set,tajweedApiUnavailable:!1},Zt=new Map,ye={data:null,promise:null,timestamp:null,maxAge:300*1e3,language:null,pendingLanguage:null},$e={data:null,promise:null,timestamp:null,maxAge:300*1e3},ya=(t,{leading:e=!1,trailing:r=!1}={})=>{if(t==null)return"";let a=t.toString().trim();return a?(e&&(a=a.replace(/^\/+/,"")),r&&(a=a.replace(/\/+$/,"")),a):""},zs=(t,e,r="")=>{const a=ya(t,{trailing:!0}),n=ya(r,{leading:!0,trailing:!0}),o=`${a}/preface/${e}`;return n?`${o}/${n}`:o},Vm=t=>{const e=ya(t,{leading:!0,trailing:!0});if(!e)return[""];const r=[],a=e.toLowerCase(),n=e.toUpperCase();return r.includes(e)||r.push(e),r.includes(a)||r.push(a),r.includes(n)||r.push(n),r},No=(t,e,...r)=>{ir.warningsLogged.has(t)||(ir.warningsLogged.add(t),console.warn(e,...r))},xe=async(t,e={},r=1e4)=>{const a=new AbortController,n=setTimeout(()=>a.abort(),r),o=new Headers;e.headers&&(e.headers instanceof Headers?e.headers.forEach((i,c)=>o.append(c,i)):Array.isArray(e.headers)?e.headers.forEach(([i,c])=>o.append(i,c)):Object.entries(e.headers).forEach(([i,c])=>{c!=null&&o.append(i,c)})),o.has("Accept")||o.set("Accept","application/json, text/plain, */*"),o.has("X-Requested-With")||o.set("X-Requested-With","XMLHttpRequest");try{const i=await fetch(t,{...e,headers:o,signal:a.signal,mode:"cors"});clearTimeout(n);const c=i.headers.get("content-type");if(c&&c.includes("text/html"))throw new Error(`Received HTML response instead of JSON from ${t}. This usually indicates a CORS or server error.`);return i}catch(i){throw clearTimeout(n),i.name==="AbortError"?new Error("Request timeout - API took too long to respond"):i.message?.includes("Failed to fetch")||i.message?.includes("ERR_CONNECTION_CLOSED")||i.message?.includes("ERR_NETWORK")||i.message?.includes("CORS")?new Error("Network error - API server may be unavailable or CORS blocked"):i}},er=new Map,Hm=300*1e3,fg=async(t,e,r="mal",a=1)=>{const n=ct||U,o=!r||r==="mal"?"malayalam":r,i=`${t}_${e}_${o}`,c=er.get(i);if(c&&Date.now()-c.timestamp<Hm)return c.data;const l=6e3,u=`${n}/ayatransl/${t}/${e}/${o}`;let h=null;for(let m=0;m<=a;m++)try{const f=await xe(u,{},l),g=f.headers.get("content-type");if(g&&g.includes("text/html"))throw new Error("Received HTML response instead of JSON - endpoint likely unavailable or CORS blocked");if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const x=await f.json();if(er.set(i,{data:x,timestamp:Date.now()}),er.size>100){const y=er.keys().next().value;er.delete(y)}return x}catch(f){h=f;const g=m===a,x=f.message?.includes("timeout");if((g||!x)&&console.error(`Error fetching translation from ${u} for ${t}:${e}:${o}${a>0?` (attempt ${m+1}/${a+1})`:""}:`,f.message),g)break;m<a&&await new Promise(y=>setTimeout(y,1e3*(m+1)))}throw h||new Error("Failed to fetch translation from MySQL API")},qm=t=>({E:"english",en:"english",english:"english",mal:"malayalam",ml:"malayalam",malayalam:"malayalam",bn:"bangla",bangla:"bangla",hi:"hindi",hindi:"hindi",ta:"tamil",tamil:"tamil",ur:"urdu",urdu:"urdu"})[t?.toLowerCase()]||"english",je=async(t={})=>{const{includePageRanges:e=!1,language:r=null}=t,a=r?qm(r):null,n=a?Io(a):Ao,o=a||"default",i=Date.now();return ye.data&&ye.language===o&&ye.timestamp&&i-ye.timestamp<ye.maxAge?(e&&ye.data&&dr().then(c=>{if(c&&c.length>0){const l=(h,m)=>{const f=m.filter(g=>g.SuraId===h);return f.length===0?null:Math.max(...f.map(g=>g.ayato))},u=ye.data.map(h=>{const m=l(h.number,c);return{...h,ayahs:m||h.ayahs}});ye.data=u}}).catch(()=>{}),ye.data):(ye.promise&&ye.pendingLanguage===o||(ye.promise=(async()=>{try{const c=await xe(n,{},15e3),l=c.headers.get("content-type");if(l&&l.includes("text/html"))throw new Error("Received HTML response, endpoint likely unavailable");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const u=await c.json();if(!Array.isArray(u)||u.length===0)throw new Error("Invalid response format or empty data");let h=[];e&&(h=await dr().catch(()=>[]));const m=(g,x)=>{const y=x.filter(A=>A.SuraId===g);return y.length===0?null:Math.max(...y.map(A=>A.ayato))},f=u.map(g=>{const y=m(g.SuraID,h)||g.TotalAyas;return{number:g.SuraID,arabic:g.ASuraName?.trim(),name:g.SuraName?.trim()||g.ESuraName?.trim(),ayahs:y,type:g.SuraType==="Makkan"?"Makki":"Madani"}});return ye.data=f,ye.language=o,ye.timestamp=Date.now(),ye.promise=null,ye.pendingLanguage=null,f}catch(c){throw ye.promise=null,ye.pendingLanguage=null,console.error(` Error fetching surahs from MySQL API (language: ${a}):`,c.message),c}})(),ye.pendingLanguage=o),ye.promise)},Wm=async(t=null)=>{try{const e=t?mapLanguageToAPIForList(t):null,r=e?Io(e):Ao,a=await xe(r,{},15e3);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();if(!Array.isArray(n)||n.length===0)throw new Error("Invalid response format or empty data");return n.map(i=>({id:i.SuraID,arabic:i.ASuraName?.trim(),name:i.SuraName?.trim()||i.ESuraName?.trim(),english:i.ESuraName?.trim()}))}catch(e){throw console.error(` Failed to fetch surah names from MySQL API (language: ${t}):`,e.message),e}},Jm=async()=>(await je()).flatMap(r=>Array.from({length:r.ayahs},(a,n)=>({id:`${r.number}-${n+1}`,surahId:r.number,arabic:r.arabic,english:r.name,verse:n+1}))),dr=async()=>{const t=Date.now();return $e.data&&$e.timestamp&&t-$e.timestamp<$e.maxAge?$e.data:($e.promise||($e.promise=(async()=>{try{const e=await xe(`${Dm}/all`,{},12e3),r=e.headers.get("content-type");if(r&&r.includes("text/html"))throw new Error("Received HTML response instead of JSON - endpoint likely unavailable");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json(),n=Array.isArray(a)?a:[];return $e.data=n,$e.timestamp=Date.now(),$e.promise=null,n}catch(e){if($e.promise=null,e.message?.includes("HTML")||e.message?.includes("Unexpected token"))No("page-ranges-html"," Page ranges API returned HTML (likely CORS/404), using empty array");else if(e.message?.includes("timeout"))return[];return[]}})()),$e.promise)},Qm=async()=>{try{const[t,e]=await Promise.allSettled([dr().catch(c=>(c.message?.includes("HTML")||c.message?.includes("Unexpected token")?console.warn(" Page ranges API returned HTML (likely CORS/404), skipping"):console.warn(" Failed to fetch page ranges:",c.message),[])),je().catch(c=>(c.message?.includes("HTML")||c.message?.includes("Unexpected token")?console.warn(" Surahs API returned HTML (likely CORS/404), using fallback"):console.warn(" Failed to fetch surahs:",c.message),[]))]);let r=t.status==="fulfilled"?t.value:[],a=e.status==="fulfilled"?e.value:[];Array.isArray(r)||(r=[]),Array.isArray(a)||(a=[]);const n={};a.forEach(c=>{n[c.number]={name:c.name,arabic:c.arabic,type:c.type,totalAyas:c.ayahs}});const o={};r.forEach(c=>{const l=c.juzid,u=c.SuraId;o[l]||(o[l]={}),o[l][u]||(o[l][u]=[]),o[l][u].push({ayaFrom:c.ayafrom,ayaTo:c.ayato,pageId:c.PageId})});const i=[];return Object.keys(o).forEach(c=>{const l=[];Object.keys(o[c]).forEach(u=>{const h=o[c][u],m=n[parseInt(u)];if(m){const f=h.map(g=>g.ayaFrom===g.ayaTo?`${g.ayaFrom}`:`${g.ayaFrom}-${g.ayaTo}`).join(", ");l.push({number:parseInt(u),name:m.name,arabic:m.arabic,verses:f,type:m.type,ayahs:m.totalAyas})}}),l.sort((u,h)=>u.number-h.number),l.length>0&&i.push({id:parseInt(c),title:`Juz ${c}`,surahs:l})}),i.sort((c,l)=>c.id-l.id),{juzData:i,surahNames:n}}catch(t){throw console.error(" Failed to fetch Juz data:",t.message),new Error(`Failed to fetch Juz data: ${t.message}`)}},Gm=t=>{const e=Array.isArray(t)?t:t?[t]:[],r=a=>{const n=Number.parseInt(a,10);return Number.isFinite(n)?n:null};return e.map((a={})=>{const n=r(a.suraid??a.SuraId??a.SuraID),o=r(a.ayaid??a.AyaId??a.AyaID),i=r(a.contiayano??a.contiAyaNo??a.ayaid??a.AyaId??a.AyaID);return{...a,suraid:n??a.suraid,ayaid:o??a.ayaid,contiayano:i??a.contiayano??o}})},Km=()=>U?U.replace(/\/+$/,""):`${Ba.replace(/\/+$/,"")}/api/v1`,Ym=async(t,e=null)=>{const r=Km();if(!r)throw new Error("MySQL API base path is not configured");const a=`${r}/malayalam/quranaya/${t}${e?`/${e}`:""}`,n=await xe(a,{},8e3);if(!n.ok)throw new Error(`MySQL quranaya error: ${n.status}`);const o=await n.json();return Gm(o)},pg=async(t,e=null)=>{const r=Number.parseInt(t,10),a=e!=null?Number.parseInt(e,10):null,n=Number.isFinite(a),o=c=>Array.isArray(c)&&n&&c.length===1?c[0]:c,i=await Ym(r,a);return o(i)},gg=async(t,e)=>{try{const r=`${U}/urdu/translation-audio/${t}/${e}`,a=await fetch(r);if(!a.ok)return a.status===404,null;const n=await a.json();return Array.isArray(n.audio)?n.audio[0]?.audio_url||null:n.audio_url||null}catch{return null}},yg=async(t,e)=>{try{const r=`${U}/urdu/interpretation-audio/${t}/${e}`,a=await fetch(r);if(!a.ok)return a.status===404,null;const n=await a.json();return Array.isArray(n.audio)?n.audio[0]?.audio_url||null:n.audio_url||null}catch{return null}},aa=(t,e)=>t.map((r,a)=>{const n=r?.ayah??r?.verse_number??r?.id??a+1;return{id:n,verse_number:n,verse_key:`${e}:${n}`,text_uthmani:r?.text_uthmani??r?.AyaHText??"",text_simple:r?.text_simple??r?.AyaNText??""}}),Xm=async t=>{const e=await fetch(`${U}/bangla/surah/${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json(),a=r.count||r.translations?.length||0,n=[];for(let i=1;i<=a;i++)n.push(fetch(`${U}/arabic/text/${t}/${i}`).then(c=>c.ok?c.json():null).catch(()=>null));return(await Promise.all(n)).filter(Boolean).map((i,c)=>({ayah:i.ayah??c+1,text_uthmani:i.text_uthmani||"",text_simple:i.text_simple||""}))},xg=async(t,e={})=>{try{const r=new URL(`${U}/arabic/surah/${t}`);e.page&&r.searchParams.append("page",e.page),e.limit?r.searchParams.append("limit",e.limit):e.pageSize&&r.searchParams.append("pageSize",e.pageSize);const a=await xe(r.toString(),{},1e4);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json(),o=Array.isArray(n?.verses)?n.verses:Array.isArray(n)?n:[],i=aa(o,t);return e.page?{verses:i,pagination:n?.pagination||null,count:n?.count??i.length}:i}catch(r){console.error("Failed to fetch Arabic verses from MySQL API:",r.message);try{const a=await Xm(t);if(e.page){const n=e.page||1,o=e.limit||e.pageSize||20,i=(n-1)*o,c=i+o,l=aa(a.slice(i,c),t);return{verses:l,pagination:{page:n,limit:o,totalItems:a.length,totalPages:Math.ceil(a.length/o),hasNext:c<a.length,hasPrev:n>1,from:l[0]?.verse_number??null,to:l[l.length-1]?.verse_number??null}}}return aa(a,t)}catch(a){throw console.error("Legacy Arabic fallback failed:",a.message),r}}},To=t=>{const e=(t??"").toString().trim().toLowerCase();return["mal","ml","m","malayalam",""].includes(e)?"M":(["e","en","eng","english"].includes(e),"E")},Zm=t=>{const e=(t??"").toString().trim().toLowerCase(),a={e:"en",en:"en",eng:"en",english:"en",mal:"en",ml:"en",m:"en",malayalam:"en",:"en",bn:"bn",bangla:"bn",ta:"ta",tamil:"ta",ur:"ur",urdu:"ur",hi:"hi",hindi:"hi"}[e]||"en",n=To(t);return{quranLanguage:a,prefaceLanguage:n}},ef=async(t,e="en")=>{try{const{quranLanguage:r,prefaceLanguage:a}=Zm(e),o=(await je()).find(u=>u.number===parseInt(t)),[i,c,l]=await Promise.all([df(t,r).catch(()=>null),tf(t,a).catch(()=>null),r==="hi"?uf(t).catch(()=>null):Promise.resolve(null)]);return{basic:i,detailed:r==="hi"&&l?{text:l.intro||"",language:"hi"}:null,thafheem:c,surah:o}}catch(r){throw console.error("Error fetching complete surah info:",r),r}},tf=async(t,e="E")=>{const r=ct||U,a=To(e),n=a==="E"?["E"]:[a,"E"],o=`${t}|${a}`;if(Zt.has(o))return Zt.get(o);const i=Array.from(new Set([r,gr,Vr].filter(Boolean))),c=new Set,l=async(u,h)=>{if(c.has(u))return null;c.add(u);try{const m=await xe(u,{},8e3);if(m.status===404)return{notFound:!0};if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const f=await m.json();if(!Array.isArray(f)||f.length===0)throw new Error("No preface data found");const g=f[0],x=f.map((b,S)=>{const I=b?.PrefaceSubTitle?.toString().trim()||"",F=b?.PrefaceText?.toString().trim()||"";return{order:S,subtitle:I,text:F}}),y=x.map(b=>!b.subtitle&&!b.text?"":b.subtitle&&b.text?`<h2>${b.subtitle}</h2>
${b.text}`:b.subtitle?`<h2>${b.subtitle}</h2>`:b.text).filter(Boolean).join(`

`);return{data:{...g,PrefaceText:y||g?.PrefaceText||"",PrefaceSections:x,PrefaceEntries:f}}}catch(m){return console.warn(`Thafheem preface (${h}) failed for Surah ${t}:`,m.message),null}};for(const u of i){for(const f of n){const g=Vm(f);for(const x of g){const y=zs(u,t,x),A=x?`lang=${x}`:"lang=default",b=await l(y,A);if(b?.data)return Zt.set(o,b.data),b.data;b?.notFound}}const h=zs(u,t),m=await l(h,"legacy");if(m?.data)return Zt.set(o,m.data),m.data}return console.error(`Error fetching Thafheem preface: all attempts failed for Surah ${t}`),Zt.set(o,null),null},rf=t=>{const e=(t||"mal").toString().trim().toLowerCase();return{mal:"malayalam",ml:"malayalam",malayalam:"malayalam",e:"english",en:"english",english:"english",bn:"bangla",bangla:"bangla",hi:"hindi",hindi:"hindi",ta:"tamil",tamil:"tamil",ur:"urdu",urdu:"urdu"}[e]||"malayalam"},af=async(t,e="mal")=>{const r=rf(e),a=`${U}/${r}/ayaranges/${t}`,n=r.toLowerCase()==="english"||r.toLowerCase()==="e"?3e4:1e4,o=await xe(a,{},n),i=o.headers.get("content-type");if(i&&i.includes("text/html"))throw new Error("Received HTML response instead of JSON - endpoint likely unavailable or CORS blocked");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);try{const c=await o.text();if(c.trim().startsWith("<!")||c.trim().startsWith("<html"))throw new Error("Received HTML response instead of JSON - endpoint likely unavailable or CORS blocked");return JSON.parse(c)}catch(c){throw c.message?.includes("HTML")?c:new Error(`Failed to parse JSON response: ${c.message}`)}},bg=async(t,e,r="en")=>{const n=(o=>({mal:"malayalam",ml:"malayalam",E:"english",en:"english",ta:"tamil",hi:"hindi",ur:"urdu",bangla:"bangla",bn:"bangla",ar:"arabic"})[o?.toLowerCase()]||"english")(r);try{const o=`${U}/${n}/word-by-word/${t}/${e}`,i=await fetch(o);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const c=await i.json();return{verse_key:`${t}:${e}`,words:c.words?.map((l,u)=>({id:l.WordId||l.id||u+1,position:l.WordId||l.id||u+1,text_uthmani:l.text_uthmani||l.WordPhrase||"",text_simple:l.text_simple||l.WordPhrase||"",translation:{text:l.WordMeaning||l.MalMeaning||l.EngMeaning||l.translation?.text||"",language_name:c.language||n,resource_name:`Thafheem ${n} Database`}}))||[]}}catch(o){throw console.error("Error fetching word-by-word meaning from MySQL API:",o),o}},wg=async(t,e)=>{const r=["malayalam","english"];for(const a of r)try{const n=`${U}/${a}/word-by-word/${t}/${e}`,o=await fetch(n);if(o.ok)return(await o.json()).words?.map((l,u)=>({WordId:l.WordId||l.id||u+1,WordPhrase:l.text_uthmani||l.WordPhrase||l.text_simple||"",Meaning:l.MalMeaning||l.WordMeaning||l.EngMeaning||l.translation?.text||"",id:l.WordId||l.id||u+1,position:l.WordId||l.id||u+1,text_uthmani:l.text_uthmani||l.WordPhrase||"",text_simple:l.text_simple||l.WordPhrase||"",translation:{text:l.WordMeaning||l.MalMeaning||l.EngMeaning||l.translation?.text||"",language_name:a,resource_name:`Thafheem ${a} Database`}}))||[]}catch{continue}return console.warn("Could not fetch word meanings from MySQL API for any language"),[]},sf=async t=>{const e=String(t).trim(),r=ct||U;if(!r)throw new Error("API base path not configured");const a=`${r.replace(/\/+$/,"")}/notes/${encodeURIComponent(e)}`;try{const n=await xe(a,{headers:{Accept:"application/json"}},5e3);if(!n.ok)throw n.status===404?new Error(`Note not found: ${e}`):new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.warn("Error fetching note by id:",n.message),n}},Vs=async(t,e,r=1,a="en")=>{const o=(i=>({en:"english",e:"english",mal:"malayalam",ml:"malayalam",hi:"hindi",bn:"bangla",bangla:"bangla",ta:"tamil",ur:"urdu"})[String(i).toLowerCase()]||"english")(a);try{const i=o==="english"&&r?`${U}/${o}/interpretation/${t}/${r}`:`${U}/${o}/interpretation/${t}/${e}${r?`?explanationNo=${r}`:""}`,c=await fetch(i);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const l=await c.json();if(r&&l.interpretation)return{Interpretation:l.interpretation||"",InterpretationNo:l.interpretationNo||r,surahId:parseInt(l.surah||t,10),verseId:parseInt(l.fromAyah||e,10),toAyah:parseInt(l.toAyah||e,10)};if(l.explanations&&l.explanations.length>0){const u=r&&l.explanations.find(h=>h.explanation_no_en==r||h.explanation_no_local==r)||l.explanations[0];return{Interpretation:u.explanation||"",InterpretationNo:u.explanation_no_en||u.explanation_no_local||r,surahId:parseInt(t),verseId:parseInt(e)}}return null}catch(i){return console.error("Interpretation fetch failed from MySQL API:",i.message),null}},vg=async(t,e,r=1,a="en")=>{const o=(l=>({en:"english",e:"english",mal:"malayalam",ml:"malayalam",hi:"hindi",bn:"bangla",bangla:"bangla",ta:"tamil",ur:"urdu"})[String(l).toLowerCase()]||"english")(a),[i,c]=e.includes("-")?e.split("-").map(Number):[parseInt(e),parseInt(e)];try{if(r){const m=`${U}/${o}/interpretation/${t}/${r}`,f=await fetch(m);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const g=await f.json();if(g.interpretation)return[{Interpretation:g.interpretation||"",InterpretationNo:g.interpretationNo||r,surahId:parseInt(g.surah||t,10),verseId:parseInt(g.fromAyah||i,10),toAyah:parseInt(g.toAyah||c,10)}];if(g.explanations&&g.explanations.length>0){const x=g.explanations.find(y=>y.explanation_no_en==r||y.explanation_no_local==r)||g.explanations[0];return[{Interpretation:x.explanation||"",InterpretationNo:x.explanation_no_en||x.explanation_no_local||r,surahId:parseInt(t,10),verseId:i}]}return[]}const l=[];for(let m=i;m<=c;m++){const f=`${U}/${o}/interpretation/${t}/${m}`;l.push(fetch(f).then(g=>g.ok?g.json():null).catch(()=>null))}const u=await Promise.all(l),h=new Set;return u.map((m,f)=>{if(!m||!Array.isArray(m.explanations))return null;const g=r!=null?String(r):null,y=(g?m.explanations.find(I=>{const F=I.explanation_no_local??I.InterpretationNo??I.interptn_no,H=I.explanation_no_en??I.InterpretationNo??I.interptn_no;return String(F??H??"").trim()===g.trim()}):m.explanations[0])||m.explanations[0];if(!y)return null;const A=y.explanation_no_en??y.explanation_no_local??y.InterpretationNo??y.interptn_no??r,b=A!=null?String(A).trim():"";if(!b)return null;const S=b;return h.has(S)?null:(h.add(S),{Interpretation:y.explanation||"",InterpretationNo:b,surahId:parseInt(t,10),verseId:i+f})}).filter(Boolean)}catch(l){throw console.error("Error fetching interpretation range from MySQL API:",l),l}},tr=new Map,nf=300*1e3,of=(t,e,r)=>`${String(r??"default").toLowerCase()}|${t}|${e}`,kg=async(t,e,r="E")=>{const a=of(t,e,r),n=Date.now(),o=tr.get(a);if(o){if(o.data&&n-o.timestamp<nf)return o.data;if(o.promise)return o.promise;tr.delete(a)}const i=String(r??"").toLowerCase()==="mal",c=(async()=>{const l=i?"malayalam":String(r??"").toLowerCase()==="en"||String(r??"")==="E"?"english":String(r??"").toLowerCase();try{const y=`${U}/${l}/interpretation/${t}/${e}`,A=await fetch(y);if(!A.ok)throw new Error(`HTTP error! status: ${A.status}`);const b=await A.json();return!b.explanations||b.explanations.length===0?[]:b.explanations.map((I,F)=>({Interpretation:I.explanation||"",InterpretationNo:String(I.explanation_no_en||I.explanation_no_local||F+1),resolvedInterpretationNo:parseInt(I.explanation_no_en||I.explanation_no_local||F+1,10),requestedInterpretationNo:parseInt(I.explanation_no_en||I.explanation_no_local||F+1,10),surahId:parseInt(t),verseId:parseInt(e)}))}catch(y){throw console.error(`[fetchAllInterpretations] Error fetching interpretations for Surah ${t}, Ayah ${e}:`,y),y}let u=20,h=[];const m=[],f=h.length>0,g=f?h:Array.from({length:u},(y,A)=>A+1),x=new Set;if(f)(await Promise.allSettled(g.map(async A=>{const b=await Vs(t,e,A,r);return{interpretationNo:A,data:b}}))).forEach(A=>{if(A.status!=="fulfilled")return;const{interpretationNo:b,data:S}=A.value||{};if(S&&S.Interpretation&&S.Interpretation.trim().length>0){const I=parseInt(S.InterpretationNo,10)||parseInt(S.Interpretation_No,10)||parseInt(S.interptn_no,10)||b;(f?h.includes(b):!0)&&!x.has(I)&&(x.add(I),m.push({...S,requestedInterpretationNo:b,resolvedInterpretationNo:I}))}});else{let y=0;const A=2;for(const b of g)try{const S=await Vs(t,e,b,r);if(S&&S.Interpretation&&S.Interpretation.trim().length>0){const I=parseInt(S.InterpretationNo,10)||parseInt(S.Interpretation_No,10)||parseInt(S.interptn_no,10)||b;x.has(I)||(x.add(I),m.push({...S,requestedInterpretationNo:b,resolvedInterpretationNo:I})),y=0;continue}if(y++,y>=A)break}catch(S){const I=S.message||String(S);if(I.includes("525")||I.includes("404")||I.includes("status: 525")||I.includes("status: 404")||I.includes("HTTP error! status: 525")||I.includes("HTTP error! status: 404")||(y++,y>=A))break}}return m})();tr.set(a,{promise:c});try{const l=await c,u=Array.isArray(l)?[...l].sort((h,m)=>{const f=parseInt(h?.resolvedInterpretationNo??h?.InterpretationNo??h?.Interpretation_No??h?.interptn_no,10)||parseInt(h?.requestedInterpretationNo,10)||0,g=parseInt(m?.resolvedInterpretationNo??m?.InterpretationNo??m?.Interpretation_No??m?.interptn_no,10)||parseInt(m?.requestedInterpretationNo,10)||0;return f-g}):l;return tr.set(a,{data:u,timestamp:Date.now()}),u}catch(l){throw tr.delete(a),l}},za=async(t,e)=>{const r=`${Om}/${t}/${e}`;try{const a=await fetch(r);if(!a.ok){const o=await a.text();throw console.error("Error response body:",o),new Error(`HTTP error! status: ${a.status}, body: ${o}`)}const n=await a.json();return Array.isArray(n)&&n.length>0,lf(n),n}catch(a){throw console.error("Error fetching quiz questions:",a),a}},Hs=async(t,e=5)=>{const r=`0-${e}`;return za(t,r)},_g=async(t=10)=>{try{const e=await je(),r=[],a=Math.max(1,Math.floor(t/5)),n=[];for(;n.length<Math.min(5,e.length);){const i=e[Math.floor(Math.random()*e.length)];n.find(c=>c.number===i.number)||n.push(i)}for(const i of n)try{const c=await Hs(i.number,a);c&&c.length>0&&r.push(...c)}catch(c){console.warn(`Failed to fetch questions from surah ${i.number}:`,c.message)}return r.sort(()=>Math.random()-.5).slice(0,t)}catch(e){return console.error("Error fetching random questions from all surahs:",e),Hs(1,t)}},Eg=async(t,e,r)=>{const a=e===r?`${e}`:`${e}-${r}`;return za(t,a)},cf=t=>(Array.isArray(t)||(t=[t]),t.map((r,a)=>{const n=r.id||r.questionId||r.question_id||r.QuestionId||r.qid||a+1,o=r.question||r.questionText||r.question_text||r.Quest||r.Question||r.QuestionText||r.quest||r.text||"Question not available",i=r.correctAnswer||r.correct_answer||r.answer||r.Answer||r.CorrectAnswer||r.correct||"A";let c=[];if(r.options&&Array.isArray(r.options)&&(c=r.options.map((h,m)=>({id:h.id||h.key||h.letter||["A","B","C","D"][m],text:h.text||h.option||h.value||h.content||(typeof h=="string"?h:`Option ${m+1}`)}))),c.length===0&&["A","B","C","D"].forEach(h=>{const m=[`option${h}`,`option_${h}`,`Option${h}`,`OPTION${h}`,h,h.toLowerCase(),`choice${h}`,`Choice${h}`,`ans${h}`,`answer${h}`,`Answer${h}`,`opt${h}`,`Opt${h}`,`OPT${h}`,`${h}Option`,`${h}option`,`${h}_option`,`${h.toLowerCase()}Option`,`${h.toLowerCase()}option`,`${h.toLowerCase()}_option`,`option${["A","B","C","D"].indexOf(h)+1}`,`Option${["A","B","C","D"].indexOf(h)+1}`,`choice${["A","B","C","D"].indexOf(h)+1}`,`Choice${["A","B","C","D"].indexOf(h)+1}`,`${h}Text`,`${h}text`,`${h}_text`,`text${h}`,`Text${h}`];for(const f of m)if(r.hasOwnProperty(f)&&r[f]!==void 0&&r[f]!==null&&r[f]!==""){const g=String(r[f]).trim();if(g.length>0&&g!=="null"&&g!=="undefined"){c.push({id:h,text:g});break}}}),c.length===0&&(r.choices&&(Array.isArray(r.choices)?c=r.choices.map((h,m)=>({id:["A","B","C","D"][m]||m.toString(),text:h.text||h.option||h.value||String(h)})):typeof r.choices=="object"&&Object.keys(r.choices).forEach((h,m)=>{const f=["A","B","C","D"][m]||h;c.push({id:f,text:String(r.choices[h])})})),c.length===0&&r.alternatives&&Array.isArray(r.alternatives)&&(c=r.alternatives.map((h,m)=>({id:["A","B","C","D"][m]||m.toString(),text:h.text||h.option||h.value||String(h)})))),c.length===0&&Object.keys(r).filter(f=>{const g=f.toLowerCase();return g.includes("option")||g.includes("choice")||g.includes("answer")||/^[a-d]$/i.test(f)||/option[a-d]/i.test(g)||/choice[a-d]/i.test(g)||/[a-d]option/i.test(g)||/opt[a-d]/i.test(g)||/[a-d]text/i.test(g)}).forEach((f,g)=>{if(r[f]&&String(r[f]).trim().length>0){const x=["A","B","C","D"][g]||f.match(/[A-D]/i)&&f.match(/[A-D]/i)[0].toUpperCase()||["A","B","C","D"][c.length];x&&!c.find(y=>y.id===x)&&c.push({id:x,text:String(r[f]).trim()})}}),c.length===0){console.error(`NO OPTIONS FOUND for question ${a+1}!`),console.error("Full item data:",JSON.stringify(r,null,2));const h=[];Object.entries(r).forEach(([m,f])=>{typeof f=="string"&&f.trim().length>5&&f!==o&&h.push({key:m,value:f.trim()})}),h.length>=2?c=h.slice(0,4).map((m,f)=>({id:["A","B","C","D"][f],text:m.value})):c=[{id:"A",text:"Option A (No data found)"},{id:"B",text:"Option B (No data found)"},{id:"C",text:"Option C (No data found)"}]}let l=i;if(/^\d+$/.test(String(i))){const h=parseInt(i)-1;h>=0&&h<c.length&&(l=c[h].id)}if(!c.find(h=>h.id===l)){console.warn(`Correct answer ${l} doesn't match any option ID`);const h=c.find(m=>m.text.toLowerCase().includes(String(i).toLowerCase())||String(i).toLowerCase().includes(m.text.toLowerCase()));h?l=h.id:(l=c[0]?.id||"A",console.warn(`No matching option found, defaulting to ${l}`))}return{id:n,question:o,options:c,correctAnswer:l}})),lf=t=>{if(Array.isArray(t)&&t.length>0){const e=t[0];Object.keys(e).filter(a=>a.toLowerCase().includes("option")||a.toLowerCase().includes("choice")||a.toLowerCase().includes("answer")||a.match(/^[A-D]$/)||a.match(/^[a-d]$/)).forEach(a=>{})}return t},Sg=t=>Array.isArray(t)?t.length===0?(console.warn("Quiz data array is empty"),!1):t.every((r,a)=>{const n=r.id!==void 0&&r.id!==null,o=r.question&&typeof r.question=="string"&&r.question.trim().length>0,i=r.options&&Array.isArray(r.options)&&r.options.length>0,c=r.correctAnswer&&typeof r.correctAnswer=="string";return n||console.warn(`Question ${a} missing ID:`,r),o||console.warn(`Question ${a} missing question text:`,r),i||console.warn(`Question ${a} missing or invalid options:`,r),c||console.warn(`Question ${a} missing correct answer:`,r),n&&o&&i&&c}):(console.warn("Quiz data is not an array:",t),!1),Ag=async(t,e)=>{try{const[r,a]=await Promise.all([za(t,e),je()]),n=cf(r),o=a.find(i=>i.number===parseInt(t));return{questions:n,surahInfo:o||{number:parseInt(t),arabic:"Unknown Surah",name:`Surah ${t}`,ayahs:0,type:"Unknown"},range:e,totalQuestions:n.length}}catch(r){throw console.error("Error fetching quiz with surah info:",r),r}},Ig=t=>({questions:[{id:1,question:"    ?",options:[{id:"A",text:"-"},{id:"B",text:"-"},{id:"C",text:" "},{id:"D",text:"-"}],correctAnswer:"A"},{id:2,question:"   ?",options:[{id:"A",text:"113"},{id:"B",text:"114"},{id:"C",text:"115"},{id:"D",text:"116"}],correctAnswer:"B"}],surahInfo:{number:parseInt(t),name:`Surah ${t}`,arabic:"Sample Surah",ayahs:7,type:"Unknown"},range:"1-7",totalQuestions:2}),df=async(t,e="en")=>{try{const r=ct||U,a=(e||"en").toLowerCase(),n=`${r}/surah-metadata/${t}/${a}`,o=await xe(n,{},8e3);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(r){return console.warn(`Surah metadata fetch failed for ${t}:`,r.message),null}},uf=async t=>{try{const r=`${ct||U}/hindi/surah-intro/${t}`,a=await xe(r,{},8e3);if(a.status===404)return null;if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(e){return console.warn(`Hindi surah intro fetch failed for ${t}:`,e.message),null}},hf=async t=>{try{const e=await je();if(!t||t.trim().length<1)return[];const r=t.toLowerCase().trim();return e.filter(n=>{const o=n.name.toLowerCase().includes(r),i=n.arabic.toLowerCase().includes(r),c=n.number.toString()===r;return o||i||c}).sort((n,o)=>{const i=n.name.toLowerCase()===r||n.number.toString()===r,c=o.name.toLowerCase()===r||o.number.toString()===r;return i&&!c?-1:!i&&c?1:n.number-o.number})}catch(e){throw console.error("Error searching surahs by name:",e),e}},mf=Array.from(new Set([`${gr}/malengsearch`,`${Vr}/malengsearch`].filter(Boolean))),ff={translation:1,interpret:2,interpretation:2},pf={e:"E",en:"E",eng:"E",english:"E",m:"M",ml:"M",mal:"M",malayalam:"M"},qs=30,gf=t=>{if(typeof t=="number")return t===2?2:1;const e=t?.toString().trim().toLowerCase();return e&&ff[e]||1},yf=t=>{if(typeof t=="number")return t===2?"M":"E";const e=t?.toString().trim().toLowerCase();return e&&pf[e]||"E"},xf=t=>Array.isArray(t)?t:Array.isArray(t?.data)?t.data:[],Ws=async({query:t,language:e="E",type:r="translation",limit:a=qs}={})=>{const n=t?.toString().trim();if(!n)return[];const o=typeof a=="number"&&Number.isFinite(a)&&a>0?Math.min(a,50):qs,i=gf(r),c=yf(e),l=encodeURIComponent(n);let u=null;for(const h of mf){const m=`${h}/${i}/${l}/${c}`;try{const f=await xe(m,{},1e4);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const g=await f.json(),x=xf(g);return o?x.slice(0,o):x}catch(f){u=f;continue}}throw console.error("Error searching legacy translations:",u),u||new Error("Failed to fetch legacy search results")},bf=t=>t?/[\u0600-\u06FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(t):!1,Co=async(t,e=40)=>{const r=t?.toString().trim();if(!r)return[];if(!bf(r))return[];const a=typeof e=="number"&&Number.isFinite(e)&&e>0?Math.min(e,100):40;try{const n=(ct||U||Ba||"").replace(/\/+$/,""),o=encodeURIComponent(r),i=`${n}/arabic/word-search?q=${o}`,c=await xe(i,{},1e4);if(!c.ok){if(c.status===404)return[];throw new Error(`HTTP error! status: ${c.status}`)}const l=await c.json(),u=Array.isArray(l?.results)?l.results:[];return(a?u.slice(0,a):u).map(m=>({surah:m.surah,ayah:m.ayah,SuraID:m.surah,AyaID:m.ayah,AyaHText:m.arabicWord||"",Text:m.matchedText||""}))}catch(n){return n.message?.includes("404")||n.response&&n.response.status===404||n.status===404||console.error("Error searching Arabic phrase data via API:",n),[]}},wf=async(t,e,r=50)=>{const a=t?.toString().trim();if(!a)return{language:e,query:"",count:0,results:[]};const n=typeof r=="number"&&Number.isFinite(r)&&r>0?Math.min(r,100):50,o=encodeURIComponent(a),c=`${(ct||U||Ba).replace(/\/+$/,"")}/${e}/word-search?q=${o}`;try{const l=await xe(c,{},1e4);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const u=await l.json();return u.results&&Array.isArray(u.results)?{...u,results:n?u.results.slice(0,n):u.results}:{language:e,query:a,count:0,results:[]}}catch(l){return console.error(`Error searching words for ${e}:`,l),{language:e,query:a,count:0,results:[]}}},vf=Array.from(new Set([`${gr}/qtsubjects`,`${Vr}/qtsubjects`].filter(Boolean))),kf=async({category:t=1,language:e="E"}={})=>{const r=typeof t=="number"&&Number.isFinite(t)&&t===2?2:1,a=typeof e=="string"&&e.trim().toUpperCase()==="M"?"M":"E";let n=null;for(const o of vf){const i=`${o}/${r}/${a}`;try{const c=await xe(i,{},1e4);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const l=await c.json();return Array.isArray(l)?l:Array.isArray(l?.data)?l.data:[]}catch(c){n=c;continue}}throw console.error("Error fetching Quran subjects:",n),n||new Error("Failed to fetch Quran subjects")},_f=Array.from(new Set([`${gr}/glossery`,`${Vr}/glossery`].filter(Boolean))),Ef=async(t=0)=>{let e=null;for(const r of _f)try{const a=await xe(r,{},1e4);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();if(Array.isArray(n))return t>0?n.slice(0,t):n;if(Array.isArray(n?.data)){const o=n.data;return t>0?o.slice(0,t):o}return[]}catch(a){e=a;continue}throw console.error("Error fetching glossary entries:",e),e||new Error("Failed to fetch glossary entries")},Sf=async(t="en")=>{try{const e=await je();return[67,2,1,18,36,55,56,78,112,113,114].map(n=>{const o=e.find(i=>i.number===n);return o?n===2?{id:o.number,name:"Ayatul Kursi",arabic:o.arabic,verses:"Verse 255",type:o.type,translated_name:"Ayatul Kursi",verseNumber:255,verseKey:"2:255"}:{id:o.number,name:o.name,arabic:o.arabic,verses:`${o.ayahs} verses`,type:o.type,translated_name:o.translated_name?.name||o.name_simple}:null}).filter(Boolean)}catch(e){return console.error("Error fetching popular chapters:",e),[{id:67,name:"Al-Mulk",verses:"30 verses",type:"Makki"},{id:2,name:"Ayatul Kursi",verses:"Verse 255",type:"Madani",verseNumber:255,verseKey:"2:255"},{id:1,name:"Al-Fatiha",verses:"7 verses",type:"Makki"},{id:18,name:"Al-Kahf",verses:"110 verses",type:"Makki"},{id:36,name:"Ya-Sin",verses:"83 verses",type:"Makki"}]}},jo=async(t="0")=>{if(ir.tajweedApiUnavailable)return ra(t?.toString().replace(/\./g,"_")??"0");const e=t?.toString().replace(/\./g,"_")??"0",r=ct||U,a=Array.from(new Set([Fm,`${r}/thajweedrules`,`${r}/tajweedrules`].filter(Boolean)));let n=null,o=null;for(const c of a){const l=e?`${c}/${e}`:c;try{const u=await xe(l,{},8e3);if(o=u.status,!u.ok){if(u.status===404){n=new Error(`HTTP error! status: ${u.status}`),o=404;break}if(u.status>=500)continue;throw new Error(`HTTP error! status: ${u.status}`)}return await u.json()}catch(u){n=u;continue}}if(o===404)return No(`tajweed-rules-${e}`,`Tajweed rule ${e} returned 404 - using fallback data`),ir.tajweedApiUnavailable=!0,ra(e);console.error("Error fetching Tajweed rules:",n),n&&(ir.tajweedApiUnavailable=!0);const i=ra(e);if(i.length>0)return i;throw n??new Error("Failed to fetch Tajweed rules")},Ng=async(t,e,r="E")=>{const n=(o=>({mal:"malayalam",ml:"malayalam",E:"english",en:"english",ta:"tamil",hi:"hindi",ur:"urdu",bangla:"bangla",bn:"bangla",ar:"arabic"})[o?.toLowerCase()]||"english")(r);try{const o=`${U}/${n}/word-by-word/${t}/${e}`,i=await xe(o,{},8e3);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const c=await i.json();return{words:c.words||[],language:c.language||n,surah:c.surah||t,ayah:c.ayah||e,count:c.count||c.words?.length||0}}catch(o){throw console.error("Error fetching word meanings from MySQL API:",o),o}},Tg=async()=>jo("0"),Cg=async t=>jo(t),jg=async t=>{try{const[e,r]=t.split(":").map(Number);if(!e||!r)throw new Error(`Invalid verse key format: ${t}`);const a=await xe(`${U}/arabic/text/${e}/${r}`,{},5e3);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();return n.text_uthmani||n.text_simple||"Arabic text not available"}catch(e){return console.error("Error fetching Arabic verse for Tajweed from MySQL API:",e),"Arabic text not available"}},Pg=async(t,e=7)=>{if(!t)return"";try{const[r,a]=t.split(":").map(Number);if(!r||!a||isNaN(r)||isNaN(a))return console.error("Invalid verseKey format:",t),"";const n=String(r).padStart(3,"0"),o=String(a).padStart(3,"0");return`https://thafheem.net/audio/qirath/al-afasy/QA${n}_${o}.ogg`}catch(r){return console.error("Error building audio URL for Tajweed:",r),""}},Rg=async(t=0,e="muk")=>{try{const r=`https://old.thafheem.net/thaf-api/malarticles/${t}/${e}`,a=await xe(r,{},8e3);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json();if(Array.isArray(n))return n.map(o=>({aid:o.aid,title:o.title}));throw new Error("Unexpected API response format")}catch(r){return console.warn("Failed to fetch malarticles from API:",r.message),[{aid:1,title:""},{aid:2,title:"  "},{aid:3,title:" "},{aid:4,title:"  "},{aid:5,title:" ?"},{aid:6,title:" "},{aid:7,title:" "},{aid:8,title:"  "},{aid:9,title:" "},{aid:10,title:""},{aid:11,title:" ?"},{aid:12,title:""},{aid:13,title:" "}]}},$g=async t=>{try{const e=`https://old.thafheem.net/thaf-api/malarticles/${t}/muk`,r=await xe(e,{},8e3);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json(),n=Array.isArray(a)?a[0]:a;if(!n)throw new Error("No article data found");return{id:n.aid,title:n.title,matter:n.matter||"",audiotext:n.audiotext||"",audiourl:n.audiourl||""}}catch(e){return console.error("Failed to fetch malarticle by ID:",e.message),{1:{id:1,title:"",matter:"           .           .   ' '   .",audiotext:"",audiourl:""}}[t]||{id:t,title:" ",matter:"  .",audiotext:"",audiourl:""}}},Js={1:{id:1,title:"Introduction",matter:"Content for Introduction section..."},2:{id:2,title:"The meaning of Khatamunnabiyyin",matter:"Content for the meaning of Khatamunnabiyyin section..."},3:{id:3,title:"The Prophet's sayings regarding the end of the world",matter:"Content for the Prophet's sayings regarding the end of the world..."},4:{id:4,title:"The consensus of the Companions",matter:"Content for the consensus of the Companions section..."},5:{id:5,title:"The consensus of religious scholars",matter:"Content for the consensus of religious scholars section..."},6:{id:6,title:"The Promised Messiah",matter:"Content for the Promised Messiah section..."},7:{id:7,title:"The Promised Messiah",matter:"Content for The Promised Messiah section..."},8:{id:8,title:"Additional Article 8",matter:"Content for Additional Article 8 section..."},13:{id:13,title:"Author's Conclusion",matter:""}},wr=t=>Js[t]?Js[t]:{id:t,title:`Article ${t}`,matter:""},Af=async t=>{try{const e=`${Um}/${t}/par`,r=await xe(e,{},8e3);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.text();if(!a||!a.trim())return console.warn(`Empty article response for ${t}, using fallback`),wr(t);let n;try{n=JSON.parse(a)}catch{return console.warn(`Invalid article JSON for ${t}, using fallback`),wr(t)}const o=Array.isArray(n)?n[0]:n;return o?{id:o.aid,title:o.title,matter:o.matter||"",audiotext:o.audiotext||"",audiourl:o.audiourl||""}:(console.warn(`Article ${t} response missing data, using fallback`),wr(t))}catch(e){return console.error("Failed to fetch article by ID:",e.message),wr(t)}},If={english:"english",e:"english",malayalam:"malayalam",mal:"malayalam",urdu:"urdu",u:"urdu",hindi:"hindi",hi:"hindi",bangla:"bangla",bn:"bangla",tamil:"tamil",ta:"tamil"},Lg=async(t="english")=>{const e=If[String(t||"").toLowerCase()]||"english";try{const r=await fetch(`${U}/${e}/appendix`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json();return{language:a?.language||e,count:a?.count??a?.sections?.length??0,sections:a?.sections||[]}}catch(r){return console.error(`Failed to fetch ${e} appendix:`,r.message),{language:e,count:0,sections:[],error:r.message}}},Mg=async()=>{try{const t=await fetch(`${U}/urdu/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"urdu",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Urdu Finality of Prophethood:",t.message),{language:"urdu",count:0,sections:[],error:t.message}}},Dg=async t=>{try{const e=parseInt(t,10);if(isNaN(e)||e<=0)throw new Error("Invalid footnote ID");const r=await fetch(`${U}/urdu/finality-of-prophethood/footnote/${e}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json();return{footnote_id:a?.footnote_id??e,footnote_text:a?.footnote_text||"",error:a?.error||null}}catch(e){return console.error("Failed to fetch Urdu Finality of Prophethood footnote:",e.message),{footnote_id:t??null,footnote_text:"",error:e.message}}},Og=async()=>{try{const t=await fetch(`${U}/urdu/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"urdu",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Urdu Jesus and Mohammed:",t.message),{language:"urdu",count:0,sections:[],error:t.message}}},Fg=async()=>{try{const t=await fetch(`${U}/malayalam/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Malayalam Jesus and Mohammed:",t.message),{language:"malayalam",count:0,sections:[],error:t.message}}},Ug=async()=>{try{const t=await fetch(`${U}/hindi/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"hindi",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Hindi Jesus and Mohammed:",t.message),{language:"hindi",count:0,sections:[],error:t.message}}},Bg=async()=>{try{const t=await fetch(`${U}/english/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"english",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch English Jesus and Mohammed:",t.message),{language:"english",count:0,sections:[],error:t.message}}},zg=async()=>{try{const t=await fetch(`${U}/malayalam/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Malayalam Finality of Prophethood:",t.message),{language:"malayalam",count:0,sections:[],error:t.message}}},Vg=async()=>{try{const t=await fetch(`${U}/malayalam/introduction-to-quran`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Malayalam Introduction to Quran:",t.message),{language:"malayalam",count:0,sections:[],error:t.message}}},Hg=async()=>{try{const t=await fetch(`${U}/english/introduction-to-quran`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"english",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch English Introduction to Quran:",t.message),{language:"english",count:0,sections:[],error:t.message}}},qg=async()=>{try{const t=await fetch(`${U}/hindi/introduction-to-quran`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"hindi",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Hindi Introduction to Quran:",t.message),{language:"hindi",count:0,sections:[],error:t.message}}},Wg=async()=>{try{const t=await fetch(`${U}/bangla/introduction-to-quran`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"bangla",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Bangla Introduction to Quran:",t.message),{language:"bangla",count:0,sections:[],error:t.message}}},Jg=async()=>{try{const t=await fetch(`${U}/tamil/introduction-to-quran`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"tamil",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Tamil Introduction to Quran:",t.message),{language:"tamil",count:0,sections:[],error:t.message}}},Qg=async()=>{try{const t=await fetch(`${U}/english/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"english",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch English Finality of Prophethood:",t.message),{language:"english",count:0,sections:[],error:t.message}}},Gg=async()=>{try{const t=await fetch(`${U}/hindi/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"hindi",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Hindi Finality of Prophethood:",t.message),{language:"hindi",count:0,sections:[],error:t.message}}},Kg=async()=>{try{const t=await fetch(`${U}/bangla/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"bangla",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Bangla Jesus and Mohammed:",t.message),{language:"bangla",count:0,sections:[],error:t.message}}},Yg=async()=>{try{const t=await fetch(`${U}/tamil/jesus-mohammed`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"tamil",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Tamil Jesus and Mohammed:",t.message),{language:"tamil",count:0,sections:[],error:t.message}}},Xg=async()=>{try{const t=await fetch(`${U}/bangla/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"bangla",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Bangla Finality of Prophethood:",t.message),{language:"bangla",count:0,sections:[],error:t.message}}},Zg=async()=>{try{const t=await fetch(`${U}/tamil/finality-of-prophethood`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"tamil",count:e?.count??e?.sections?.length??0,sections:e?.sections||[]}}catch(t){return console.error("Failed to fetch Tamil Finality of Prophethood:",t.message),{language:"tamil",count:0,sections:[],error:t.message}}},e0=async()=>{try{const t=await fetch(`${U}/malayalam/technical-terms`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",id:e?.id||9,title:e?.title||null,text:e?.text||"",raw_title:e?.raw_title||null,raw_text:e?.raw_text||"",error:e?.error||null}}catch(t){return console.error("Failed to fetch Malayalam Technical Terms:",t.message),{language:"malayalam",id:9,title:null,text:"",raw_title:null,raw_text:"",error:t.message}}},t0=async t=>{try{const e=parseInt(t,10);if(isNaN(e)||e<=0)throw new Error("Invalid footnote ID");const r=await fetch(`${U}/english/finality-of-prophethood/footnote/${e}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json();return{footnote_id:a?.footnote_id??e,footnote_text:a?.footnote_text||"",error:a?.error||null}}catch(e){return console.error("Failed to fetch English Finality of Prophethood footnote:",e.message),{footnote_id:t??null,footnote_text:"",error:e.message}}},r0=async()=>{try{const t=await fetch(`${U}/malayalam/translators`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",id:e?.id||null,title:e?.title||null,text:e?.text||"",raw_title:e?.raw_title||null,raw_text:e?.raw_text||"",error:e?.error||null}}catch(t){return console.error("Failed to fetch Malayalam Translators:",t.message),{language:"malayalam",id:null,title:null,text:"",raw_title:null,raw_text:"",error:t.message}}},a0=async()=>{try{const t=await fetch(`${U}/malayalam/history-of-translation`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return{language:e?.language||"malayalam",id:e?.id||11,title:e?.title||null,text:e?.text||"",raw_title:e?.raw_title||null,raw_text:e?.raw_text||"",error:e?.error||null}}catch(t){return console.error("Failed to fetch Malayalam History of Translation:",t.message),{language:"malayalam",id:11,title:null,text:"",raw_title:null,raw_text:"",error:t.message}}},s0=async()=>{try{const t=[1,2,3,4,5,6,7,8];return await Promise.all(t.map(async r=>{try{const a=await Af(r);return{aid:a.id,title:a.title}}catch(a){return console.warn(`Failed to fetch article ${r}:`,a.message),{aid:r,title:`Article ${r}`}}}))}catch(t){return console.error("Failed to fetch articles list:",t.message),[{aid:1,title:"Introduction"},{aid:2,title:"The meaning of Khatamunnabiyyin"},{aid:3,title:"The Prophet's sayings regarding the end of the world"},{aid:4,title:"The consensus of the Companions"},{aid:5,title:"The consensus of religious scholars"},{aid:6,title:"The Promised Messiah"},{aid:7,title:"The Promised Messiah"},{aid:8,title:"Additional Article 8"}]}},Nf=({onClose:t})=>{const[e,r]=d.useState(""),[a,n]=d.useState(""),[o,i]=d.useState([]),[c,l]=d.useState(!0),[u,h]=d.useState(null),m=ze();d.useEffect(()=>{(async()=>{try{l(!0),h(null);const y=await Jm();i(y.map(A=>({id:A.id,surah:A.english,verse:A.verse,surahId:A.surahId})))}catch(y){h(y.message)}finally{l(!1)}})()},[]);const f=o.filter(x=>x.surah.toLowerCase().includes(e.toLowerCase())&&(a===""||x.verse.toString().includes(a))),g=x=>{const y=`/surah/${x.surahId}#verse-${x.verse}`,A=window.location.pathname,b=`/surah/${x.surahId}`;A===b?window.location.href=y:m(y),t&&t()};return s.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] w-full  h-full max-w-md  flex flex-col  rounded-lg font-poppins",children:[s.jsxs("div",{className:"p-3 flex space-x-2",children:[s.jsx("input",{type:"text",placeholder:"Search Surah",value:e,onChange:x=>r(x.target.value),className:"flex-1 px-4 py-2 text-sm text-gray-600 bg-gray-50 dark:bg-black dark:text-white rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),s.jsx("input",{type:"text",placeholder:"Verse",value:a,onChange:x=>n(x.target.value),className:"w-20 px-3 py-2 text-sm text-gray-600 dark:bg-black dark:text-white bg-gray-50 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),u&&s.jsx("div",{className:"px-4 text-xs text-red-500",children:u}),s.jsx("div",{className:"overflow-y-auto overflow-x-hidden px-4 pb-3",children:c?s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"Loading..."}):f.length>0?s.jsx("ul",{className:"space-y-2",children:f.map((x,y)=>s.jsxs("li",{onClick:()=>g(x),className:"flex justify-between text-gray-800 dark:text-white hover:text-blue-600 transition-colors cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg p-2",children:[s.jsxs("span",{className:"w-10 text-center",children:[y+1,"."]}),s.jsx("span",{className:"flex-1 truncate",children:x.surah}),s.jsx("span",{className:"mr-10",children:x.verse})]},x.id))}):s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No verses found"})})]})},Tf=({onClose:t})=>{const[e,r]=d.useState(""),[a,n]=d.useState([]),[o,i]=d.useState(!0),c=ze();d.useEffect(()=>{(async()=>{try{i(!0);const f=await Qm();n(f.juzData||[])}catch(f){console.error("Error loading Juz data:",f),n(l)}finally{i(!1)}})()},[]);const l=[{id:1,title:"Juz 1",surahs:[{number:1,name:"Al-Fatihah",verses:"1-7"}]},{id:2,title:"Juz 2",surahs:[{number:2,name:"Al-Baqarah",verses:"142-252"}]},{id:3,title:"Juz 3",surahs:[{number:2,name:"Al-Baqarah",verses:"253-286"}]},{id:4,title:"Juz 4",surahs:[{number:3,name:"Al-Imran",verses:"93-200"}]},{id:5,title:"Juz 5",surahs:[{number:4,name:"An-Nisa",verses:"24-147"}]},{id:6,title:"Juz 6",surahs:[{number:4,name:"An-Nisa",verses:"148-176"}]},{id:7,title:"Juz 7",surahs:[{number:5,name:"Al-Maidah",verses:"82-120"}]},{id:8,title:"Juz 8",surahs:[{number:6,name:"Al-Anam",verses:"111-165"}]},{id:9,title:"Juz 9",surahs:[{number:7,name:"Al-Araf",verses:"88-206"}]},{id:10,title:"Juz 10",surahs:[{number:8,name:"Al-Anfal",verses:"41-75"}]},{id:11,title:"Juz 11",surahs:[{number:9,name:"At-Tawbah",verses:"93-129"}]},{id:12,title:"Juz 12",surahs:[{number:11,name:"Hud",verses:"6-123"}]},{id:13,title:"Juz 13",surahs:[{number:12,name:"Yusuf",verses:"53-111"}]},{id:14,title:"Juz 14",surahs:[{number:15,name:"Al-Hijr",verses:"1-99"}]},{id:15,title:"Juz 15",surahs:[{number:17,name:"Al-Isra",verses:"1-111"}]},{id:16,title:"Juz 16",surahs:[{number:18,name:"Al-Kahf",verses:"75-110"}]},{id:17,title:"Juz 17",surahs:[{number:21,name:"Al-Anbya",verses:"1-112"}]},{id:18,title:"Juz 18",surahs:[{number:23,name:"Al-Muminun",verses:"1-118"}]},{id:19,title:"Juz 19",surahs:[{number:25,name:"Al-Furqan",verses:"21-77"}]},{id:20,title:"Juz 20",surahs:[{number:27,name:"An-Naml",verses:"56-93"}]},{id:21,title:"Juz 21",surahs:[{number:29,name:"Al-Ankabut",verses:"46-69"}]},{id:22,title:"Juz 22",surahs:[{number:33,name:"Al-Ahzab",verses:"31-73"}]},{id:23,title:"Juz 23",surahs:[{number:36,name:"Ya-Sin",verses:"28-83"}]},{id:24,title:"Juz 24",surahs:[{number:39,name:"Az-Zumar",verses:"32-75"}]},{id:25,title:"Juz 25",surahs:[{number:41,name:"Fussilat",verses:"47-54"}]},{id:26,title:"Juz 26",surahs:[{number:46,name:"Al-Ahqaf",verses:"1-35"}]},{id:27,title:"Juz 27",surahs:[{number:51,name:"Adh-Dhariyat",verses:"31-60"}]},{id:28,title:"Juz 28",surahs:[{number:58,name:"Al-Mujadalah",verses:"1-22"}]},{id:29,title:"Juz 29",surahs:[{number:67,name:"Al-Mulk",verses:"1-30"}]},{id:30,title:"Juz 30",surahs:[{number:78,name:"An-Naba",verses:"1-40"}]}],u=(a.length>0?a:l).filter(m=>m.title?.toLowerCase().includes(e.toLowerCase())||m.name?.toLowerCase().includes(e.toLowerCase())||m.id?.toString().includes(e)||m.number?.toString().includes(e)),h=m=>{if(m.surahs&&m.surahs.length>0){const f=m.surahs[0],g=f.verses.split("-")[0].split(",")[0].trim(),x=`/surah/${f.number}#verse-${g}`;c(x)}else c(`/juz/${m.id}`);t&&t()};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white w-full h-full dark:bg-[#2A2C38]  flex flex-col  rounded-lg font-poppins",children:[s.jsx("div",{className:"p-3",children:s.jsx("input",{type:"text",placeholder:"Search juz",value:e,onChange:m=>r(m.target.value),className:"w-full px-4 py-2 text-sm text-gray-600 dark:bg-black dark:text-white bg-gray-50 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-3 ",children:o?s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"Loading Juz data..."}):u.length>0?s.jsx("div",{className:"space-y-2",children:u.map(m=>s.jsx("div",{onClick:()=>h(m),className:"cursor-pointer text-gray-800 dark:text-white hover:text-blue-600 transition-colors py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg",children:m.title||m.name},m.id))}):s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No juz found"})})]})})},Cf=({onClose:t})=>{const[e,r]=d.useState(""),[a,n]=d.useState([]),[o,i]=d.useState({}),[c,l]=d.useState(!0),[u,h]=d.useState(null),m=ze();d.useEffect(()=>{(async()=>{try{l(!0),h(null);const[y,A]=await Promise.all([dr(),Wm()]);if(!Array.isArray(y)||y.length===0)throw new Error("Page ranges are currently unavailable.");const b={};A.forEach(F=>{b[F.id]=F.english}),i(b);const S={};y.forEach(F=>{const H=F.PageId;if(!H||H<=0)return;S[H]||(S[H]={id:H,number:H,name:`Page ${H}`,surahs:[],startSurah:b[F.SuraId]||`Surah ${F.SuraId}`,startVerse:F.ayafrom,endVerse:F.ayato});const we={surahId:F.SuraId,surahName:b[F.SuraId]||`Surah ${F.SuraId}`,startVerse:F.ayafrom,endVerse:F.ayato};S[H].surahs.find(oe=>oe.surahId===F.SuraId)||S[H].surahs.push(we)});const I=Object.values(S).filter(F=>F.id&&F.id>0).sort((F,H)=>F.number-H.number);n(I)}catch(y){h(y.message),console.error("Error loading page data:",y);const A=Array.from({length:604},(b,S)=>({id:S+1,number:S+1,name:`Page ${S+1}`,startSurah:S<10?"Al-Fatihah":S<50?"Al-Baqarah":"Various"}));n(A)}finally{l(!1)}})()},[]);const f=a.filter(x=>x.name.toLowerCase().includes(e.toLowerCase())||x.number.toString().includes(e)||x.startSurah.toLowerCase().includes(e.toLowerCase())),g=x=>{if(x.surahs&&x.surahs.length>0){const y=x.surahs[0],A=`/surah/${y.surahId}#verse-${y.startVerse}`;m(A)}else m("/surah/1");t&&t()};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] w-full  h-full flex flex-col  rounded-lg font-poppins",children:[s.jsx("div",{className:"p-3",children:s.jsx("input",{type:"text",placeholder:"Search Page",value:e,onChange:x=>r(x.target.value),className:"w-full px-4 py-2 text-sm text-gray-600 dark:bg-black dark:text-white bg-gray-50 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),u&&s.jsx("div",{className:"px-4 text-xs text-red-500",children:u}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-3",children:c?s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"Loading pages..."}):f.length>0?s.jsx("div",{className:"space-y-2",children:f.map(x=>s.jsxs("div",{onClick:()=>g(x),className:"cursor-pointer text-gray-800 dark:text-white hover:text-blue-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors py-2 px-2 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-medium",children:["Page ",x.number||x.id]}),x.surahs&&x.surahs.length>0&&x.surahs[0].surahName&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.surahs[0].surahName})]}),x.surahs&&x.surahs.length>0&&x.surahs[0].startVerse!=null&&x.surahs[0].endVerse!=null&&s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.surahs.length>1?`${x.surahs.length} surahs`:`Verse ${x.surahs[0].startVerse}-${x.surahs[0].endVerse}`})]},x.id))}):s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No page found"})})]})})},It={},Xe={},Va=(t=null)=>{const e=t||"default",[r,a]=d.useState(It[e]||[]),[n,o]=d.useState(!It[e]),[i,c]=d.useState(null);d.useEffect(()=>{(async()=>{if(It[e]){a(It[e]),o(!1);return}if(Xe[e]){try{const h=await Xe[e];a(h),o(!1)}catch(h){c(h.message),o(!1)}return}try{o(!0),c(null),Xe[e]=je({language:t});const h=await Xe[e];It[e]=h,a(h)}catch(h){c(h.message),console.error("Error fetching surahs:",h)}finally{o(!1),Xe[e]=null}})()},[t,e]);const l=d.useCallback(async()=>{It[e]=null,Xe[e]=null,o(!0),c(null);try{Xe[e]=je({language:t});const u=await Xe[e];It[e]=u,a(u)}catch(u){c(u.message),console.error("Error fetching surahs:",u)}finally{o(!1),Xe[e]=null}},[t,e]);return{surahs:r,loading:n,error:i,retry:l}},jf=({className:t})=>s.jsx("svg",{viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M1 4.05096L5.50813 6.87531M1 4.05096L5.50813 1.22656L10.0017 4.05096M1 4.05096V5.72135M5.50813 12.2306L1 9.44877V5.72135M5.50813 12.2306L10.0017 9.44877V5.72135M5.50813 12.2306V8.52443M5.50813 6.87531L10.0017 4.05096M5.50813 6.87531V8.52443M10.0017 4.05096V5.72135M10.0017 5.72135L5.50813 8.52443M5.50813 8.52443L1 5.72135",stroke:"currentColor",strokeLinejoin:"round"})}),Pf=({className:t})=>s.jsx("svg",{width:"11",height:"15",viewBox:"0 0 11 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M5.625 1.0498C5.96379 1.0415 6.15318 1.43447 5.9375 1.69434L5.93848 1.69531C5.8059 1.85727 5.73354 2.06001 5.7334 2.26953C5.73364 2.7733 6.13675 3.17749 6.63965 3.17773C6.8485 3.17752 7.05247 3.1038 7.21484 2.9707C7.35907 2.84911 7.5516 2.85714 7.68555 2.94922C7.82703 3.0465 7.89339 3.22605 7.83203 3.42188C7.62359 4.1963 6.95559 4.74982 6.16699 4.82324V4.96973C6.38842 5.29376 6.73956 5.57803 7.17188 5.86035C7.39553 6.00639 7.63673 6.14949 7.88672 6.29688C8.13549 6.44354 8.39372 6.59442 8.64746 6.75391C9.69542 7.41265 10.702 8.26832 10.7217 9.86133C10.7302 10.5552 10.5894 11.4633 9.97949 12.293C10.3948 12.3364 10.7226 12.6925 10.7227 13.1182V13.9834C10.7235 14.202 10.5466 14.3792 10.3281 14.3789V14.3799H1.21582C0.998036 14.379 0.822454 14.2011 0.823242 13.9834V13.1182C0.823351 12.6643 1.19496 12.2891 1.65039 12.2891H8.89941C9.63381 11.6946 9.91674 10.8407 9.93359 9.86035C9.95344 8.7001 9.20568 8.05633 8.22656 7.4209C7.99002 7.26739 7.75176 7.12838 7.51562 6.99219C7.28064 6.85666 7.04583 6.72296 6.82227 6.58398C6.43649 6.34416 6.0728 6.08117 5.77148 5.74121C5.46708 6.08406 5.09223 6.35958 4.7002 6.60547C4.47252 6.74826 4.23591 6.88329 4.00293 7.0166C3.76878 7.15058 3.53754 7.28322 3.31543 7.42285C2.42056 7.98548 1.62622 8.63485 1.61133 9.86523C1.6014 10.6849 1.83171 11.2575 2.07324 11.6484H2.07227C2.13777 11.7504 2.15412 11.8634 2.12402 11.9678C2.0949 12.0686 2.02647 12.1474 1.94727 12.1963C1.86807 12.2451 1.76716 12.2711 1.66406 12.252C1.55623 12.2319 1.46123 12.1657 1.39941 12.0596V12.0586C1.0886 11.5539 0.816533 10.8308 0.823242 9.8623C0.83371 8.36129 1.75222 7.45412 2.89844 6.75293C3.41821 6.43497 3.92281 6.1624 4.37598 5.86426C4.80764 5.58025 5.15748 5.29245 5.37891 4.9668V4.72949C4.62425 4.47414 4.07622 3.76183 4.07617 2.9209C4.07617 2.19418 4.55355 1.26045 5.59473 1.05273L5.61035 1.0498H5.625ZM1.62207 13.0869C1.61745 13.0916 1.61137 13.1013 1.61133 13.1182V13.5908H9.93457V13.1182C9.93452 13.1022 9.92888 13.093 9.92383 13.0879C9.91879 13.0828 9.90931 13.0771 9.89355 13.0771H1.65039C1.63521 13.0771 1.6266 13.0825 1.62207 13.0869ZM4.95801 2.47852C4.89845 2.61488 4.86542 2.76443 4.86523 2.9209L4.87109 3.03613C4.92841 3.60447 5.40474 4.04371 5.98926 4.04395C6.14409 4.04376 6.29155 4.00941 6.42676 3.95117C5.66139 3.85413 5.05306 3.24442 4.95801 2.47852Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.35469"})}),Rf=({onClose:t,onSurahSelect:e})=>{const[r,a]=d.useState("Surah"),n=ze(),{translationLanguage:o}=Lt(),{surahs:i,loading:c}=Va(o),l=["Surah","Verse","Juz","Page"],u=[{id:1,name:"Al-Fatihah"},{id:2,name:"Al-Baqarah"},{id:3,name:"Aal-E-Imran"},{id:4,name:"An-Nisa"},{id:5,name:"Al-Maidah"},{id:6,name:"Al-Anam"},{id:7,name:"Al-Araf"},{id:8,name:"Al-Anfal"},{id:9,name:"At-Tawbah"},{id:10,name:"Yunus"},{id:11,name:"Hud"},{id:12,name:"Yusuf"},{id:13,name:"Ar-Rad"},{id:14,name:"Ibrahim"},{id:15,name:"Al-Hijr"},{id:16,name:"An-Nahl"},{id:17,name:"Al-Isra"},{id:18,name:"Al-Kahf"},{id:19,name:"Maryam"},{id:20,name:"Ta-Ha"},{id:21,name:"Al-Anbiya"},{id:22,name:"Al-Hajj"},{id:23,name:"Al-Muminun"},{id:24,name:"An-Nur"},{id:25,name:"Al-Furqan"},{id:26,name:"Ash-Shu'ara"},{id:27,name:"An-Naml"},{id:28,name:"Al-Qasas"},{id:29,name:"Al-Ankabut"},{id:30,name:"Ar-Rum"},{id:31,name:"Luqman"},{id:32,name:"As-Sajda"},{id:33,name:"Al-Ahzab"},{id:34,name:"Saba"},{id:35,name:"Fatir"},{id:36,name:"Ya-Sin"},{id:37,name:"As-Saffat"},{id:38,name:"Sad"},{id:39,name:"Az-Zumar"},{id:40,name:"Ghafir"},{id:41,name:"Fussilat"},{id:42,name:"Ash-Shura"},{id:43,name:"Az-Zukhruf"},{id:44,name:"Ad-Dukhan"},{id:45,name:"Al-Jathiya"},{id:46,name:"Al-Ahqaf"},{id:47,name:"Muhammad"},{id:48,name:"Al-Fath"},{id:49,name:"Al-Hujraat"},{id:50,name:"Qaf"},{id:51,name:"Adh-Dhariyat"},{id:52,name:"At-Tur"},{id:53,name:"An-Najm"},{id:54,name:"Al-Qamar"},{id:55,name:"Ar-Rahman"},{id:56,name:"Al-Waqia"},{id:57,name:"Al-Hadid"},{id:58,name:"Al-Mujadila"},{id:59,name:"Al-Hashr"},{id:60,name:"Al-Mumtahana"},{id:61,name:"As-Saff"},{id:62,name:"Al-Jumua"},{id:63,name:"Al-Munafiqoon"},{id:64,name:"At-Taghabun"},{id:65,name:"At-Talaq"},{id:66,name:"At-Tahrim"},{id:67,name:"Al-Mulk"},{id:68,name:"Al-Qalam"},{id:69,name:"Al-Haaqqa"},{id:70,name:"Al-Maarij"},{id:71,name:"Nuh"},{id:72,name:"Al-Jinn"},{id:73,name:"Al-Muzzammil"},{id:74,name:"Al-Muddathir"},{id:75,name:"Al-Qiyama"},{id:76,name:"Al-Insan"},{id:77,name:"Al-Mursalat"},{id:78,name:"An-Naba"},{id:79,name:"An-Nazi'at"},{id:80,name:"Abasa"},{id:81,name:"At-Takwir"},{id:82,name:"Al-Infitar"},{id:83,name:"Al-Mutaffifin"},{id:84,name:"Al-Inshiqaq"},{id:85,name:"Al-Buruj"},{id:86,name:"At-Tariq"},{id:87,name:"Al-Ala"},{id:88,name:"Al-Ghashiya"},{id:89,name:"Al-Fajr"},{id:90,name:"Al-Balad"},{id:91,name:"Ash-Shams"},{id:92,name:"Al-Lail"},{id:93,name:"Ad-Duhaa"},{id:94,name:"Ash-Sharh"},{id:95,name:"At-Tin"},{id:96,name:"Al-Alaq"},{id:97,name:"Al-Qadr"},{id:98,name:"Al-Bayyina"},{id:99,name:"Az-Zalzala"},{id:100,name:"Al-Adiyat"},{id:101,name:"Al-Qaria"},{id:102,name:"At-Takathur"},{id:103,name:"Al-Asr"},{id:104,name:"Al-Humaza"},{id:105,name:"Al-Fil"},{id:106,name:"Quraish"},{id:107,name:"Al-Maun"},{id:108,name:"Al-Kawthar"},{id:109,name:"Al-Kafiroon"},{id:110,name:"An-Nasr"},{id:111,name:"Al-Masad"},{id:112,name:"Al-Ikhlas"},{id:113,name:"Al-Falaq"},{id:114,name:"An-Nas"}],h=()=>{const[f,g]=d.useState(""),y=(i.length>0?i.map(b=>({...b,id:b.number})):u).filter(b=>b.english?.toLowerCase().includes(f.toLowerCase())||b.name?.toLowerCase().includes(f.toLowerCase())||b.id?.toString().includes(f)||b.number?.toString().includes(f)),A=b=>{const S=b.id||b.number;n(`/surah/${S}`),e&&e({...b,id:S,number:b.number??S,name:b.name,english:b.english||b.name}),t&&t()};return s.jsxs("div",{className:"bg-white dark:bg-[#2A2C38] flex flex-col h-full font-poppins",children:[s.jsx("div",{className:"px-5 pt-3 pb-4",children:s.jsx("input",{type:"text",placeholder:"Search Surah",value:f,onChange:b=>g(b.target.value),className:"w-full px-4 py-2.5 text-sm text-gray-600 dark:text-white bg-gray-50 dark:bg-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400"})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-3",children:c?s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"Loading surahs..."}):y.length>0?s.jsx("ol",{className:"list-decimal list-outside space-y-2 pl-6",children:y.map(b=>{const S=b.type==="Makki"?s.jsx(jf,{className:"h-4 w-4 text-primary"}):b.type==="Madani"?s.jsx(Pf,{className:"h-4 w-4 text-primary"}):null;return s.jsx("li",{onClick:()=>A(b),className:"cursor-pointer text-gray-800 dark:text-white hover:text-blue-600 transition-colors py-1.5 px-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:`flex-1 min-w-0 pr-2 ${o==="ur"?"font-urdu-nastaliq":o==="mal"?"font-malayalam":o==="hi"?"font-hindi":o==="bn"?"font-bengali":o==="ta"?"font-tamil":""}`,children:b.english||b.name}),S&&s.jsx("span",{className:"flex items-center justify-center w-5 h-5 flex-shrink-0 self-center",children:S})]})},b.id||b.number)})}):s.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No surahs found"})})]})},m=()=>{switch(r){case"Surah":return s.jsx(h,{});case"Verse":return s.jsx(Nf,{onClose:t});case"Juz":return s.jsx(Tf,{onClose:t});case"Page":return s.jsx(Cf,{onClose:t});default:return null}};return s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:t}),s.jsxs("div",{className:"relative w-full sm:w-[480px] max-h-[85vh] sm:max-h-[90vh] bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-slideUp sm:animate-fadeIn overflow-hidden",children:[s.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden cursor-grab active:cursor-grabbing",onClick:t,children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("div",{className:"flex items-center gap-1 font-poppins",children:l.map((f,g)=>s.jsxs(Mo.Fragment,{children:[s.jsx("button",{onClick:()=>a(f),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${r===f?"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:f}),g<l.length-1&&s.jsx("span",{className:"mx-1 text-gray-300 dark:text-gray-600 text-xs",children:"|"})]},f))}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400",children:s.jsx(Kt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:m()})]})]})},Ze="https://thafheem.net/thafheem-api";class sa{static getGuestUserId(){try{const e="thafheem_guest_user_id";let r=localStorage.getItem(e);return r||(r=`guest_${Math.random().toString(36).slice(2)}_${Date.now()}`,localStorage.setItem(e,r)),r}catch{return"guest_user"}}static getEffectiveUserId(e){return e?.uid||this.getGuestUserId()}static getLocalStorageKey(e){return`bookmarks_${e}`}static getLocalBookmarks(e){try{const r=localStorage.getItem(this.getLocalStorageKey(e));return r?JSON.parse(r):[]}catch(r){return console.error("Error reading local bookmarks:",r),[]}}static saveLocalBookmarks(e,r){try{localStorage.setItem(this.getLocalStorageKey(e),JSON.stringify(r))}catch(a){console.error("Error saving local bookmarks:",a)}}static async getBookmarks(e,r="translation"){try{const a=await fetch(`${Ze}/bookmarks?userId=${e}&bkType=${r}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){const o=this.getLocalBookmarks(e);return Array.isArray(o)?o.filter(i=>r?i.bookmarkType===r:!0):[]}const n=await a.json();return Array.isArray(n)?n:n.bookmarks&&Array.isArray(n.bookmarks)?n.bookmarks:n.data&&Array.isArray(n.data)?n.data:[]}catch(a){console.error("Error fetching bookmarks, using localStorage fallback:",a);const n=this.getLocalBookmarks(e);return Array.isArray(n)?n.filter(o=>r?o.bookmarkType===r:!0):[]}}static async addBookmark(e,r,a,n="translation",o="",i=""){const c={id:`${e}_${r}_${a}_${Date.now()}`,userId:e,surahId:parseInt(r),verseId:parseInt(a),bookmarkType:n,surahName:o,verseText:i,createdAt:new Date().toISOString()};try{const l=await fetch(`${Ze}/bookmarks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!l.ok){const h=this.getLocalBookmarks(e);return h.push(c),this.saveLocalBookmarks(e,h),c}return await l.json()}catch(l){console.error("Error adding bookmark, using localStorage fallback:",l);const u=this.getLocalBookmarks(e);return u.push(c),this.saveLocalBookmarks(e,u),c}}static async addAyahInterpretationBookmark(e,r,a,n,o=""){const i={id:`${e}_${r}_${a}_interpretation_${Date.now()}`,userId:e,surahId:parseInt(r),verseId:parseInt(a),surahName:n,verseText:o,bookmarkType:"interpretation",createdAt:new Date().toISOString()};try{const c=await fetch(`${Ze}/bookmarks`,{method:"POST",body:JSON.stringify(i)});if(!c.ok)throw new Error("API bookmark failed");return await c.json()}catch(c){console.warn("API bookmark failed, using local storage:",c);const l=this.getLocalBookmarks(e);return l.push(i),this.saveLocalBookmarks(e,l),i}}static async addBlockInterpretationBookmark(e,r,a,n,o=1,i="en"){const c={id:`${e}_${r}_${a}_block_${Date.now()}`,userId:e,surahId:parseInt(r),range:a,surahName:n,bookmarkType:"block-interpretation",interpretationNo:o,language:i,createdAt:new Date().toISOString()};try{const l=await fetch(`${Ze}/bookmarks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!l.ok){const u=this.getLocalBookmarks(e);return u.push(c),this.saveLocalBookmarks(e,u),c}return await l.json()}catch(l){console.warn("API bookmark failed, using local storage:",l);const u=this.getLocalBookmarks(e);return u.push(c),this.saveLocalBookmarks(e,u),c}}static async addBlockBookmark(e,r,a,n,o=""){const i={id:`${e}_${r}_${a}_${n}_${Date.now()}`,userId:e,surahId:parseInt(r),verseId:parseInt(a),bookmarkType:"block",surahName:o&&o.trim()?o:`Surah ${r}`,blockFrom:parseInt(a),blockTo:parseInt(n),createdAt:new Date().toISOString()};try{const c=await fetch(`${Ze}/bookmarks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!c.ok){const u=this.getLocalBookmarks(e);return u.push(i),this.saveLocalBookmarks(e,u),i}return await c.json()}catch(c){console.error("Error adding block bookmark, using localStorage fallback:",c);const l=this.getLocalBookmarks(e);return l.push(i),this.saveLocalBookmarks(e,l),i}}static async deleteBookmark(e,r=null){try{if(!(await fetch(`${Ze}/bookmarks/delete/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){if(r){const o=this.getLocalBookmarks(r).filter(i=>i.id!==e);this.saveLocalBookmarks(r,o)}return{success:!0}}return{success:!0}}catch(a){if(console.error("Error deleting bookmark, using localStorage fallback:",a),r){const o=this.getLocalBookmarks(r).filter(i=>i.id!==e);this.saveLocalBookmarks(r,o)}return{success:!0}}}static async isBookmarked(e,r,a,n="translation"){try{return(await this.getBookmarks(e,n)).some(i=>i.surahId===parseInt(r)&&i.verseId===parseInt(a))}catch(o){return console.error("Error checking bookmark status:",o),!1}}static async getFavoriteSurahs(e){try{const r=await fetch(`${Ze}/favorites?userId=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)return this.getLocalFavoriteSurahs(e);const a=await r.json();return Array.isArray(a)?a:[]}catch(r){return console.error("Error fetching favorites, using localStorage fallback:",r),this.getLocalFavoriteSurahs(e)}}static async addFavoriteSurah(e,r,a=""){const n={id:`${e}_surah_${r}_${Date.now()}`,userId:e,surahId:parseInt(r),surahName:a,createdAt:new Date().toISOString()};try{const o=await fetch(`${Ze}/favorites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return o.ok?await o.json():(this.addLocalFavoriteSurah(e,n),n)}catch(o){return console.error("Error adding favorite, using localStorage fallback:",o),this.addLocalFavoriteSurah(e,n),n}}static async deleteFavoriteSurah(e,r){try{return(await fetch(`${Ze}/favorites/${e}/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?{success:!0}:(this.removeLocalFavoriteSurah(e,r),{success:!0})}catch(a){return console.error("Error deleting favorite, using localStorage fallback:",a),this.removeLocalFavoriteSurah(e,r),{success:!0}}}static async isFavorited(e,r){try{return(await this.getFavoriteSurahs(e)).some(n=>n.surahId===parseInt(r))}catch(a){return console.error("Error checking favorite status:",a),!1}}static getLocalFavoriteSurahs(e){try{const r=localStorage.getItem(`favorites_${e}`);return r?JSON.parse(r):[]}catch(r){return console.error("Error reading local favorites:",r),[]}}static saveLocalFavoriteSurahs(e,r){try{localStorage.setItem(`favorites_${e}`,JSON.stringify(r))}catch(a){console.error("Error saving local favorites:",a)}}static addLocalFavoriteSurah(e,r){const a=this.getLocalFavoriteSurahs(e);a.push(r),this.saveLocalFavoriteSurahs(e,a)}static removeLocalFavoriteSurah(e,r){const n=this.getLocalFavoriteSurahs(e).filter(o=>o.surahId!==parseInt(r));this.saveLocalFavoriteSurahs(e,n)}}const $f=(t=0)=>t<=400?"sm:max-w-xl":t<=1200?"sm:max-w-3xl":"sm:max-w-5xl",Lf=({isOpen:t,onClose:e,noteId:r,noteContent:a,noteName:n=null,loading:o=!1,error:i=null})=>{const[c,l]=d.useState(!1),[u,h]=d.useState(!1);if(!t)return null;const m=b=>{if(typeof b=="string"){const S=document.createElement("div");return S.innerHTML=b,S.textContent||S.innerText||""}return String(b||"")},f=async()=>{try{const b=m(a),S=`Note ${r}

${b}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(S);else{const I=document.createElement("textarea");I.value=S,I.style.position="fixed",I.style.left="-999999px",I.style.top="-999999px",document.body.appendChild(I),I.focus(),I.select(),document.execCommand("copy"),document.body.removeChild(I)}l(!0),h(!0),setTimeout(()=>{l(!1),h(!1)},3e3)}catch(b){console.error("Failed to copy note:",b),alert("Failed to copy note to clipboard")}},g=async()=>{try{const b=m(a),S=`Note ${r}

${b}`,I=window.location.href;if(navigator.share)await navigator.share({title:`Note ${r} - Thafheem`,text:S,url:I});else{const F=`${S}

Shared from: ${I}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(F),alert("Note content copied to clipboard for sharing");else{const H=document.createElement("textarea");H.value=F,H.style.position="fixed",H.style.left="-999999px",H.style.top="-999999px",document.body.appendChild(H),H.focus(),H.select(),document.execCommand("copy"),document.body.removeChild(H),alert("Note content copied to clipboard for sharing")}}}catch(b){console.error("Failed to share note:",b),b.name!=="AbortError"&&alert("Failed to share note: "+b.message)}},x=m(a),y=$f(x.length),A=document.getElementById("modal-root")||document.body;return ur.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
          @keyframes backdropFadeIn {
            from {
              opacity: 0;
            }
            to {
              opacity: 1;
            }
          }
          @keyframes modalSlideUp {
            from {
              opacity: 0;
              transform: translateY(30px) scale(0.95);
            }
            to {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
          }
          @keyframes fade-in {
            from {
              opacity: 0;
              transform: translateY(-10px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          .animate-backdrop-fade-in {
            animation: backdropFadeIn 0.2s ease-out;
          }
          .animate-modal-slide-up {
            animation: modalSlideUp 0.3s ease-out;
          }
          .animate-fade-in {
            animation: fade-in 0.3s ease-out;
          }
        `}),s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[99999] px-4 animate-backdrop-fade-in",children:s.jsxs("div",{className:`bg-white dark:bg-[#2A2C38] rounded-xl shadow-2xl w-full sm:w-auto ${y} max-w-[95vw] max-h-[90vh] flex flex-col overflow-hidden transition-all duration-200 animate-modal-slide-up border border-gray-200 dark:border-gray-700`,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"px-3 py-1.5 rounded border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm",children:"Back"}),s.jsx("h2",{className:"text-lg font-medium text-[#2AA0BF]",style:{fontFamily:"'Noto Sans Malayalam'"},children:n||`Note ${r}`})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:f,disabled:o||!a,className:`p-2 transition-all duration-200 relative ${c?"text-green-600 dark:text-green-400 scale-110":`text-gray-400 ${o||!a?"opacity-40 cursor-not-allowed":"hover:text-gray-600 dark:hover:text-gray-300"}`}`,title:"Copy note content",children:[s.jsx(Fa,{size:18}),c&&s.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-green-600 text-white text-xs px-3 py-1 rounded-md shadow-lg whitespace-nowrap z-10 animate-pulse",children:" Copied to clipboard!"})]}),s.jsx("button",{onClick:g,disabled:o||!a,className:`p-2 text-gray-400 ${o||!a?"opacity-40 cursor-not-allowed":"hover:text-gray-600 dark:hover:text-gray-300"} transition-colors`,title:"Share note content",children:s.jsx(_o,{size:18})}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Close note",children:s.jsx(Kt,{size:18})})]})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-hidden flex flex-col",children:s.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[o&&s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx("div",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Loading note"})}),!o&&i&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg text-red-700 dark:text-red-300",children:i}),!o&&!i&&s.jsxs(s.Fragment,{children:[u&&s.jsxs("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg flex items-center space-x-2 animate-fade-in",children:[s.jsx("div",{className:"text-green-600 dark:text-green-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("span",{className:"text-green-800 dark:text-green-200 font-medium",children:"Note content copied to clipboard successfully!"})]}),typeof a=="string"?s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-800 dark:text-white break-words text-justify",style:{textAlign:"justify"},dangerouslySetInnerHTML:{__html:a}}):s.jsx("div",{className:"text-gray-800 dark:text-white leading-relaxed text-justify break-words",style:{fontFamily:"serif",textAlign:"justify"},children:a})]})]})})]})})]}),A)},Mf=({surahId:t,onClose:e})=>{const[r,a]=d.useState(null),[n,o]=d.useState(!0),[i,c]=d.useState(null),[l,u]=d.useState(!1),{translationLanguage:h}=Lt(),m=ze(),[f,g]=d.useState({isOpen:!1,noteId:null,loading:!1,error:null,content:null}),x=N=>{if(!N)return"";const j=document.createElement("div");return j.innerHTML=N,(j.textContent||j.innerText||"").replace(/\s+/g," ").trim()};d.useEffect(()=>{(async()=>{if(t)try{o(!0),c(null);const j=await ef(t,h);a(j)}catch(j){c(j.message)}finally{o(!1)}})()},[t,h]),d.useEffect(()=>{const N=j=>{j.key==="Escape"&&e()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[e]),d.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]);const y=d.useMemo(()=>N=>N?N.replace(/\r\n/g,`
`).replace(/\t+/g," ").split(/\n{2,}/).map(j=>j.trim()).filter(Boolean):[],[]),A=d.useMemo(()=>N=>{if(!N)return[];const j=[];return N.split(/<h2[^>]*>/).forEach((G,B)=>{if(B===0&&!G.includes("</h2>")){const P=x(G);P&&j.push({title:"Introduction",content:P})}else{const P=G.indexOf("</h2>");if(P!==-1){const M=G.substring(0,P).trim(),ue=G.substring(P+5).trim(),ve=x(ue);(x(M)||ve)&&j.push({title:x(M)||"Section",content:ve})}}}),j},[]),b=r?.thafheem?.PrefaceText?A(r.thafheem.PrefaceText):[],S=!b.length&&r?.detailed?.text?A(r.detailed.text):[],I=r?.basic?.revelation_place||r?.thafheem?.SuraType||r?.surah?.type||"Unknown",F=r?.basic?.revelation_order||r?.thafheem?.RevOrder||r?.surah?.revelation_order||"Unknown",H=r?.basic?.verses_count||r?.thafheem?.TotalAyas||r?.surah?.ayahs||"Unknown",we=(()=>{const N=r?.thafheem?.ThafVolume||r?.basic?.ThafVolume||null;return!N||N==="0"?"":N})(),pe=Array.isArray(r?.thafheem?.PrefaceSections)?r.thafheem.PrefaceSections.filter(N=>N?.subtitle&&N.subtitle.trim()||N?.text&&N.text.trim()):[],oe=h==="mal"&&pe.length>0,be=Array.isArray(r?.thafheem?.PrefaceSections)&&r.thafheem.PrefaceSections.length||Array.isArray(r?.thafheem?.PrefaceEntries)&&r.thafheem.PrefaceEntries.length||b.length||"",Y=h!=="hi"&&b.length>0;r?.detailed?.text,!oe&&r?.detailed?.short_text;const ie=N=>{if(h!=="mal")return;const j=N.target.closest("sup, a");if(!j)return;const L=(j.innerText||j.textContent||"").trim();if(!L)return;let G=!1;const B=L.replace(/[\s()]+/g,"").toUpperCase();if(/^[NHB]\d+$/.test(B))G=!0,se(B);else{const P=L.match(/(\d+)\s*[:]\s*(\d+)/);if(P){const M=parseInt(P[1],10),ue=parseInt(P[2],10);Number.isFinite(M)&&Number.isFinite(ue)&&(G=!0,m(`/reading/${M}?verse=${ue}`))}}G&&(N.preventDefault(),N.stopPropagation())},se=async N=>{g({isOpen:!0,noteId:N,loading:!0,error:null,content:null});try{const j=await sf(N),L=j?.NoteText||j?.note_text||j?.content||j?.html||j?.text||j?.body||(typeof j=="string"?j:null);g(G=>({...G,loading:!1,content:L||"Note content unavailable."}))}catch(j){console.error("Error fetching note:",j),g(L=>({...L,loading:!1,error:j?.message||"Unable to load this note at the moment. Please try again."}))}},Z=()=>{if(!r)return"";const N=r?.basic?.name_simple||r?.surah?.name||`Surah ${t}`,j=r?.basic?.name_arabic||r?.surah?.arabic||"";let L=`${N}
`;return j&&(L+=`${j}

`),L+=`Revelation: ${r?.basic?.revelation_place||r?.thafheem?.SuraType||r?.surah?.type||"Unknown"}
`,L+=`Revelation Order: ${r?.basic?.revelation_order||r?.thafheem?.RevOrder||"Unknown"}
`,L+=`Verses: ${r?.basic?.verses_count||r?.thafheem?.TotalAyas||r?.surah?.ayahs||"Unknown"}
`,r?.thafheem&&(L+=`Thafheem Vol: ${r.thafheem.ThafVolume||"Unknown"}
`,L+=`Type: ${r.thafheem.SuraType||"Unknown"}
`),L+=`
`,r?.detailed?.short_text&&(L+=`OVERVIEW
${x(r.detailed.short_text)}

`),r?.detailed?.text&&(L+=`DETAILED INFORMATION
${x(r.detailed.text)}

`),b.length>0&&(L+=`THAFHEEM COMMENTARY

`,b.forEach(G=>{L+=`${G.title}
${G.content}

`})),!r?.detailed?.text&&b.length===0&&(L+=`BASIC INFORMATION

`,r?.basic?.translated_name?.name&&(L+=`English Name: ${r.basic.translated_name.name}
`),r?.basic?.name_simple&&(L+=`Simple Name: ${r.basic.name_simple}
`),r?.basic?.revelation_place&&(L+=`Place of Revelation: ${r.basic.revelation_place}
`),r?.basic?.pages&&(L+=`Pages: ${r.basic.pages[0]} to ${r.basic.pages[1]}
`)),L+=`
 ${N} (Surah ${t})`,L},fe=async()=>{const N=Z();try{await navigator.clipboard.writeText(N),u(!0),setTimeout(()=>u(!1),2e3)}catch(j){console.error("Failed to copy text: ",j)}},ce=async()=>{const N=r?.basic?.name_simple||r?.surah?.name||`Surah ${t}`,j=Z(),L=`${window.location.origin}/surah/${t}`,G={title:`${N} - Surah Information`,text:j,url:L};try{if(navigator.share&&navigator.canShare&&navigator.canShare(G))await navigator.share(G);else{const B=`${j}

Read more: ${L}`;await navigator.clipboard.writeText(B),u(!0),setTimeout(()=>u(!1),2e3)}}catch(B){console.error("Error sharing:",B)}},Ae=document.getElementById("modal-root")||document.body;return ur.createPortal(s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:e}),s.jsxs("div",{className:"relative w-full sm:w-auto sm:max-w-4xl xl:max-w-[1073px] max-h-[85vh] sm:max-h-[90vh] bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-slideUp sm:animate-fadeIn overflow-hidden",children:[s.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden cursor-grab active:cursor-grabbing",onClick:e,children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:r?.basic?.name_simple||r?.surah?.name||`Surah ${t}`}),s.jsxs("div",{className:"flex items-center gap-2",children:[!n&&!i&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:fe,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors relative text-gray-500 dark:text-gray-400",title:"Copy all content",children:l?s.jsx("span",{className:"text-green-500 font-bold text-xs",children:"Copied!"}):s.jsx(Fa,{className:"w-5 h-5"})}),s.jsx("button",{onClick:ce,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",title:"Share",children:s.jsx(_o,{className:"w-5 h-5"})})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",title:"Close",children:s.jsx(Kt,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"px-4 sm:px-6 py-6 sm:py-8 overflow-y-auto flex-1",children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading Surah information..."})]})}):i?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"Failed to load Surah information"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:i}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600",children:"Try Again"})]}):s.jsxs("div",{className:"font-poppins",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 pb-4 sm:pb-6",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-arabic text-black mb-4 sm:mb-6 dark:text-white px-2",children:r?.basic?.name_arabic||r?.surah?.arabic||`Surah ${t}`}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 text-center",children:[s.jsxs("div",{className:"rounded-2xl border border-cyan-200 bg-cyan-50 px-3 py-2 sm:px-4 sm:py-3",children:[s.jsx("div",{className:"text-cyan-500 text-xs sm:text-sm",children:"Revelation"}),s.jsx("div",{className:"text-gray-900 font-semibold text-sm sm:text-base capitalize",children:I})]}),s.jsxs("div",{className:"rounded-2xl border border-cyan-200 bg-cyan-50 px-3 py-2 sm:px-4 sm:py-3",children:[s.jsx("div",{className:"text-cyan-500 text-xs sm:text-sm",children:"Revelation Order"}),s.jsx("div",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:F})]}),s.jsxs("div",{className:"rounded-2xl border border-cyan-200 bg-cyan-50 px-3 py-2 sm:px-4 sm:py-3",children:[s.jsx("div",{className:"text-cyan-500 text-xs sm:text-sm",children:"Verses"}),s.jsx("div",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:H})]}),s.jsxs("div",{className:"rounded-2xl border border-cyan-200 bg-cyan-50 px-3 py-2 sm:px-4 sm:py-3",children:[s.jsx("div",{className:"text-cyan-500 text-xs sm:text-sm",children:"Thafheem Vol"}),s.jsx("div",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:we})]}),s.jsxs("div",{className:"rounded-2xl border border-cyan-200 bg-cyan-50 px-3 py-2 sm:px-4 sm:py-3",children:[s.jsx("div",{className:"text-cyan-500 text-xs sm:text-sm",children:"Paragraphs"}),s.jsx("div",{className:"text-gray-900 font-semibold text-sm sm:text-base",children:be})]})]})]}),oe&&s.jsxs("div",{className:"mb-6 sm:mb-8",children:[h==="mal"&&s.jsx("style",{children:`
                        .surah-preface-content sup.f-noteno, .surah-preface-content a.crs { color: #2AA0BF !important; cursor: pointer !important; text-decoration: none !important; }
                        .surah-preface-content sup.f-noteno:hover, .surah-preface-content a.crs:hover { text-decoration: underline !important; }
                      `}),s.jsx("div",{className:"text-gray-700 leading-relaxed dark:text-gray-300 text-sm sm:text-base space-y-4 surah-preface-content",onClick:ie,children:pe.map((N,j)=>s.jsxs("div",{className:"space-y-3",children:[N.subtitle&&s.jsx("h4",{className:"text-base sm:text-lg font-semibold text-cyan-500",children:N.subtitle}),y(N.text).map((L,G)=>s.jsx("p",{dangerouslySetInnerHTML:{__html:L}},G))]},j))})]}),!oe&&r?.detailed?.short_text&&s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-600 mb-3 sm:mb-4",children:"Overview"}),s.jsx("p",{className:"text-gray-700 leading-relaxed dark:text-gray-300 text-sm sm:text-base",children:x(r.detailed.short_text)})]}),!oe&&r?.detailed?.text&&s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-600 mb-3 sm:mb-4",children:"Detailed Information"}),s.jsx("div",{className:"text-gray-700 leading-relaxed dark:text-gray-300 text-sm sm:text-base space-y-6",children:S.length>0?S.map((N,j)=>s.jsxs("div",{className:"space-y-2",children:[N.title&&s.jsx("h4",{className:"text-base sm:text-lg font-semibold text-cyan-500",children:N.title}),N.content.split(`
`).filter(L=>L.trim()).map((L,G)=>s.jsx("p",{className:"mb-2",children:L.trim()},G))]},j)):x(r.detailed.text).split(`

`).map((N,j)=>s.jsx("p",{children:N.trim()},j))})]}),!oe&&b.length>0&&h!=="hi"&&s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsx("div",{className:"space-y-6",children:b.map((N,j)=>s.jsxs("div",{children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold text-cyan-500 mb-2",children:N.title}),s.jsx("div",{className:"text-gray-700 leading-relaxed dark:text-gray-300 text-sm sm:text-base",children:N.content.split(`
`).filter(L=>L.trim()).map((L,G)=>s.jsx("p",{className:"mb-3",children:L.trim()},G))})]},j))})})]})})]})]}),s.jsx(Lf,{isOpen:f.isOpen,noteId:f.noteId,noteContent:f.content,loading:f.loading,error:f.error,onClose:()=>g(N=>({...N,isOpen:!1}))})]}),Ae)},Df=({className:t})=>s.jsx("svg",{viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M1 4.05096L5.50813 6.87531M1 4.05096L5.50813 1.22656L10.0017 4.05096M1 4.05096V5.72135M5.50813 12.2306L1 9.44877V5.72135M5.50813 12.2306L10.0017 9.44877V5.72135M5.50813 12.2306V8.52443M5.50813 6.87531L10.0017 4.05096M5.50813 6.87531V8.52443M10.0017 4.05096V5.72135M10.0017 5.72135L5.50813 8.52443M5.50813 8.52443L1 5.72135",stroke:"currentColor",strokeLinejoin:"round"})}),Of=({className:t})=>s.jsx("svg",{width:"11",height:"15",viewBox:"0 0 11 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M5.625 1.0498C5.96379 1.0415 6.15318 1.43447 5.9375 1.69434L5.93848 1.69531C5.8059 1.85727 5.73354 2.06001 5.7334 2.26953C5.73364 2.7733 6.13675 3.17749 6.63965 3.17773C6.8485 3.17752 7.05247 3.1038 7.21484 2.9707C7.35907 2.84911 7.5516 2.85714 7.68555 2.94922C7.82703 3.0465 7.89339 3.22605 7.83203 3.42188C7.62359 4.1963 6.95559 4.74982 6.16699 4.82324V4.96973C6.38842 5.29376 6.73956 5.57803 7.17188 5.86035C7.39553 6.00639 7.63673 6.14949 7.88672 6.29688C8.13549 6.44354 8.39372 6.59442 8.64746 6.75391C9.69542 7.41265 10.702 8.26832 10.7217 9.86133C10.7302 10.5552 10.5894 11.4633 9.97949 12.293C10.3948 12.3364 10.7226 12.6925 10.7227 13.1182V13.9834C10.7235 14.202 10.5466 14.3792 10.3281 14.3789V14.3799H1.21582C0.998036 14.379 0.822454 14.2011 0.823242 13.9834V13.1182C0.823351 12.6643 1.19496 12.2891 1.65039 12.2891H8.89941C9.63381 11.6946 9.91674 10.8407 9.93359 9.86035C9.95344 8.7001 9.20568 8.05633 8.22656 7.4209C7.99002 7.26739 7.75176 7.12838 7.51562 6.99219C7.28064 6.85666 7.04583 6.72296 6.82227 6.58398C6.43649 6.34416 6.0728 6.08117 5.77148 5.74121C5.46708 6.08406 5.09223 6.35958 4.7002 6.60547C4.47252 6.74826 4.23591 6.88329 4.00293 7.0166C3.76878 7.15058 3.53754 7.28322 3.31543 7.42285C2.42056 7.98548 1.62622 8.63485 1.61133 9.86523C1.6014 10.6849 1.83171 11.2575 2.07324 11.6484H2.07227C2.13777 11.7504 2.15412 11.8634 2.12402 11.9678C2.0949 12.0686 2.02647 12.1474 1.94727 12.1963C1.86807 12.2451 1.76716 12.2711 1.66406 12.252C1.55623 12.2319 1.46123 12.1657 1.39941 12.0596V12.0586C1.0886 11.5539 0.816533 10.8308 0.823242 9.8623C0.83371 8.36129 1.75222 7.45412 2.89844 6.75293C3.41821 6.43497 3.92281 6.1624 4.37598 5.86426C4.80764 5.58025 5.15748 5.29245 5.37891 4.9668V4.72949C4.62425 4.47414 4.07622 3.76183 4.07617 2.9209C4.07617 2.19418 4.55355 1.26045 5.59473 1.05273L5.61035 1.0498H5.625ZM1.62207 13.0869C1.61745 13.0916 1.61137 13.1013 1.61133 13.1182V13.5908H9.93457V13.1182C9.93452 13.1022 9.92888 13.093 9.92383 13.0879C9.91879 13.0828 9.90931 13.0771 9.89355 13.0771H1.65039C1.63521 13.0771 1.6266 13.0825 1.62207 13.0869ZM4.95801 2.47852C4.89845 2.61488 4.86542 2.76443 4.86523 2.9209L4.87109 3.03613C4.92841 3.60447 5.40474 4.04371 5.98926 4.04395C6.14409 4.04376 6.29155 4.00941 6.42676 3.95117C5.66139 3.85413 5.05306 3.24442 4.95801 2.47852Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.35469"})}),Ff=({showPageInfo:t=!1})=>{const[e,r]=d.useState(!1),a=d.useRef(null),n=d.useRef(null),[o,i]=d.useState({id:2,name:"Al-Baqarah",type:"Madani"}),[c,l]=d.useState(2),[u,h]=d.useState(!1),[m,f]=d.useState(null),[g,x]=d.useState(!1),[y,A]=d.useState(!1),[b,S]=d.useState(!1),[I,F]=d.useState([]),[H,we]=d.useState(!1),[pe,oe]=d.useState(null),be=d.useRef(null),[Y,ie]=d.useState(!1),[se,Z]=d.useState(null),fe=d.useRef(null),[ce,Ae]=d.useState(!1),[N,j]=d.useState(null),[L,G]=d.useState([]),B=d.useRef(null),{surahId:P}=Do(),M=xa(),ue=ze(),{user:ve}=bo(),{translationLanguage:Se}=Lt(),{surahs:ke,loading:Ve}=Va(Se),Oe=M.pathname.startsWith("/blockwise"),Ke=M.pathname.startsWith("/surah")&&!M.pathname.startsWith("/surah/all"),_e=M.pathname.startsWith("/reading"),p=()=>{const w=M?.pathname?.match(/\/(surah|reading|blockwise)\/(\d+)/);return w?parseInt(w[2]):void 0},[C,Q]=d.useState("book"),[v,E]=d.useState(null);d.useEffect(()=>{typeof document<"u"&&E(document.body)},[]),d.useEffect(()=>{const w=_=>{const T=a.current?.contains(_.target),J=n.current?.contains(_.target);e&&!T&&!J&&r(!1)};if(e)return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[e]),d.useEffect(()=>{if(ke.length>0){const w=P?parseInt(P):p();if(w){const _=ke.find(T=>T.number===w);_&&i({id:_.number,name:_.name,type:_.type})}}},[P,M.pathname,ke]),d.useEffect(()=>{(async()=>{const _=P?parseInt(P):p();if(_&&ke.length>0)try{const T=_,J=await dr();if(J&&J.length>0){const he=J.find(K=>K.SuraId===T);if(he)l(he.PageId);else{const K=Math.max(1,Math.min(604,T+1));l(K)}if(M.pathname.startsWith("/reading")){const K=J.filter(ne=>ne.SuraId===T);if(K.length>0){const ne=Math.max(...K.map(ae=>ae.ayato));f(ne);const ee=[...new Set(K.map(ae=>ae.PageId))].sort((ae,me)=>ae-me);G(ee)}else{const ne=ke.find(ee=>ee.number===T);ne&&ne.ayahs&&f(ne.ayahs),G([])}}else{const K=ke.find(ne=>ne.number===T);K&&K.ayahs&&f(K.ayahs)}}}catch(T){console.error("Error calculating page number:",T)}})()},[P,M.pathname,ke]),d.useEffect(()=>{(async()=>{if(!ve){x(!1);return}const _=P?parseInt(P):p();if(_)try{const T=await sa.getFavoriteSurahs(ve.uid);x(T.some(J=>J.surahId===_))}catch(T){console.error("Error checking favorite status:",T)}})()},[ve,P,M.pathname]),d.useEffect(()=>{const w=_=>{h(_.detail?.isPlaying||!1)};return window.addEventListener("audioStateChange",w),()=>{window.removeEventListener("audioStateChange",w)}},[]),d.useEffect(()=>{if(!Oe){F([]),oe(null);return}const w=P?parseInt(P):p();if(!w||!(Se==="mal"||Se==="E")){F([]);return}(async()=>{try{const J=await af(w,Se||"mal");F(J||[])}catch(J){console.error("Error fetching block ranges:",J),F([])}})()},[Oe,P,M.pathname,Se]),d.useEffect(()=>{if(!Oe||I.length===0)return;const w=()=>{const _=I.map(ee=>{const ae=ee.AyaFrom??ee.ayafrom??ee.from??1,me=ee.AyaTo??ee.ayato??ee.to??ae,X=Number.parseInt(ae,10),Ee=Number.parseInt(me,10),Ie=Number.isFinite(X)&&Number.isFinite(Ee),lt=Number.isFinite(Number(ae))?Number(ae):1,dt=Ie?X:lt,xt=Number.isFinite(Number(me))?Number(me):dt,bt=Ie?`${dt}-${Ie?Ee:xt}`:`${ae}-${me}`,k=document.getElementById(`block-${bt}`);return{rangeKey:bt,element:k,start:dt}}),T=window.scrollY,J=window.scrollY+window.innerHeight,he=T+window.innerHeight/2;let K=null,ne=1/0;_.forEach(({rangeKey:ee,element:ae,start:me})=>{if(ae){const X=ae.getBoundingClientRect(),Ee=X.top+window.scrollY,Ie=Ee+X.height,lt=Ee+X.height/2;if(Ee<=J&&Ie>=T){const dt=Math.abs(lt-he);dt<ne&&(ne=dt,K=ee)}}}),K&&oe(K)};return window.addEventListener("scroll",w,{passive:!0}),w(),()=>window.removeEventListener("scroll",w)},[Oe,I]),d.useEffect(()=>{_e||(G([]),j(null),Ae(!1))},[_e]),d.useEffect(()=>{if(!_e||L.length===0){j(null);return}const w=()=>{const _=window.scrollY,T=window.scrollY+window.innerHeight,J=_+window.innerHeight/2;let he=null,K=1/0;L.forEach(ne=>{const ee=document.getElementById(`page-${ne}`);if(ee){const ae=ee.getBoundingClientRect(),me=ae.top+window.scrollY,X=me+ae.height,Ee=me+ae.height/2;if(me<=T&&X>=_){const Ie=Math.abs(Ee-J);Ie<K&&(K=Ie,he=ne)}}}),he&&j(he)};return window.addEventListener("scroll",w,{passive:!0}),w(),()=>{window.removeEventListener("scroll",w)}},[_e,L]),d.useEffect(()=>{if(!Ke||!m){Z(null);return}const w=()=>{const _=window.scrollY,T=window.scrollY+window.innerHeight,J=_+window.innerHeight/2;let he=null,K=1/0;for(let ee=1;ee<=m;ee++){const ae=document.getElementById(`verse-${ee}`);if(ae){const me=ae.getBoundingClientRect(),X=me.top+window.scrollY,Ee=X+me.height,Ie=X+me.height/2;if(X<=T&&Ee>=_){const lt=Math.abs(Ie-J);lt<K&&(K=lt,he=ee)}}}if(he){Z(he);return}const ne=window.location.hash;if(ne&&ne.startsWith("#verse-")){const ee=parseInt(ne.replace("#verse-",""),10);!isNaN(ee)&&ee>=1&&ee<=m&&Z(ee)}};return window.addEventListener("scroll",w,{passive:!0}),window.addEventListener("hashchange",w),w(),()=>{window.removeEventListener("scroll",w),window.removeEventListener("hashchange",w)}},[Ke,m]),d.useEffect(()=>{const w=_=>{be.current&&!be.current.contains(_.target)&&we(!1)};if(H)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[H]),d.useEffect(()=>{const w=_=>{fe.current&&!fe.current.contains(_.target)&&ie(!1)};if(Y)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[Y]),d.useEffect(()=>{if(!ce)return;const w=_=>{B.current&&B.current.contains(_.target)||requestAnimationFrame(()=>{Ae(!1)})};return document.addEventListener("click",w),()=>{document.removeEventListener("click",w)}},[ce]);const z=w=>{const _=document.getElementById(`block-${w}`);_&&(_.scrollIntoView({behavior:"smooth",block:"center"}),_.style.backgroundColor="#fef3c7",setTimeout(()=>{_.style.backgroundColor=""},2e3),we(!1))},$=(w,_)=>{_&&(_.preventDefault(),_.stopPropagation()),Ae(!1),requestAnimationFrame(()=>{const T=document.getElementById(`page-${w}`);if(T){const K=T.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:K,behavior:"smooth"});const ne=T.style.backgroundColor;T.style.backgroundColor="#fef3c7",setTimeout(()=>{T.style.backgroundColor=ne||""},2e3)}else console.warn(`Page element with id "page-${w}" not found`)})},W=w=>{const _=P?parseInt(P):p();if(!_)return;ie(!1);const T=`/surah/${_}#verse-${w}`;if(window.location.pathname===`/surah/${_}`){window.location.hash=`verse-${w}`;const J=(he=1)=>{const K=document.getElementById(`verse-${w}`);K?(K.scrollIntoView({behavior:"smooth",block:"center"}),K.style.backgroundColor="#fef3c7",setTimeout(()=>{K.style.backgroundColor=""},2e3)):he<5&&setTimeout(()=>J(he+1),he*100)};requestAnimationFrame(()=>{J(1)})}else ue(T)},re=w=>{const _=w?.number??w?.id;if(!_){console.warn("handleSurahSelect called without a valid surah id",w);return}const T=ke.find(J=>J.number===_)||w;i({id:_,name:T?.name||w.name,type:T?.type||w.type}),r(!1),M.pathname.startsWith("/reading")?ue(`/reading/${_}`):M.pathname.startsWith("/blockwise")?ue(`/blockwise/${_}`):ue(`/surah/${_}`)},ge=async w=>{if(w.preventDefault(),w.stopPropagation(),!ve){window.dispatchEvent(new CustomEvent("showToast",{detail:{type:"warning",message:"Please sign in to add favorites"}}));return}const _=P?parseInt(P):p();if(_){A(!0);try{if(g)await sa.deleteFavoriteSurah(ve.uid,_),x(!1),window.dispatchEvent(new CustomEvent("showToast",{detail:{type:"info",message:"Surah removed from favorites"}}));else{const T=ke.find(J=>J.number===_);await sa.addFavoriteSurah(ve.uid,_,T?.name||`Surah ${_}`),x(!0),window.dispatchEvent(new CustomEvent("showToast",{detail:{type:"success",message:"Surah added to favorites"}}))}}catch(T){console.error("Error managing favorite:",T),window.dispatchEvent(new CustomEvent("showToast",{detail:{type:"error",message:"Failed to manage favorite. Please try again."}}))}finally{A(!1)}}},Pe=o.type==="Makki"?s.jsx(Df,{className:"w-4 h-4 text-[#3FA5C0]"}):s.jsx(Of,{className:"w-4 h-4 text-[#3FA5C0]"}),O=(w="desktop")=>{const _=w==="desktop",T=_?"hidden sm:flex items-center ml-1 sm:ml-2 space-x-1":"flex sm:hidden items-center space-x-1",J=_?"inline-flex items-center justify-center min-h-[44px] px-1.5 text-[#2AA0BF] hover:opacity-90 dark:text-[#2AA0BF]":"inline-flex items-center justify-center h-9 w-9 rounded-full text-[#2AA0BF] dark:text-[#2AA0BF] bg-gray-50 dark:bg-gray-800/70 hover:bg-gray-100 dark:hover:bg-gray-700/70 transition-colors",he=_?"flex items-center transition-colors text-[#2AA0BF] hover:opacity-90 dark:text-[#2AA0BF] min-h-[44px] px-1.5 relative":"flex items-center justify-center h-9 w-9 rounded-full text-[#2AA0BF] dark:text-[#2AA0BF] bg-gray-50 dark:bg-gray-800/70 hover:bg-gray-100 dark:hover:bg-gray-700/70 transition-colors relative",K=_?`flex items-center justify-center transition-colors min-h-[44px] px-1.5 ${y?"opacity-50 cursor-not-allowed":"hover:opacity-80 cursor-pointer"} ${g?"text-red-500":"text-[#2AA0BF] dark:text-[#2AA0BF]"}`:`flex items-center justify-center h-9 w-9 rounded-full transition-colors ${y?"opacity-50 cursor-not-allowed":"hover:opacity-80 cursor-pointer"} ${g?"text-red-500 bg-red-50 dark:bg-red-900/40":"text-[#2AA0BF] dark:text-[#2AA0BF] bg-gray-50 dark:bg-gray-800/70"} dark:hover:bg-red-900/50`,ne=_?"w-4 h-4 sm:w-5 sm:h-5":"w-4 h-4",ee=_?"relative w-4 h-4 sm:w-5 sm:h-5":"relative w-4 h-4",ae=_?"flex items-center text-xs sm:text-sm text-[#2AA0BF] dark:text-[#2AA0BF] pl-1":"flex items-center text-xs text-[#2AA0BF] dark:text-[#2AA0BF] pl-1";return s.jsxs("div",{className:T,children:[s.jsx("button",{onClick:()=>S(!0),className:J,"aria-label":"Surah info",title:"View Surah info",children:s.jsx(Vh,{className:ne})}),(M.pathname.startsWith("/surah")||M.pathname.startsWith("/reading")||M.pathname.startsWith("/blockwise"))&&s.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("playAudio"))},className:he,"aria-label":u?"Pause Audio":"Play Audio",title:u?"Pause recitation audio":"Play recitation audio",children:s.jsxs("div",{className:ee,children:[s.jsx(Ua,{className:`absolute inset-0 w-full h-full transition-all duration-300 ${u?"opacity-0 scale-0 rotate-90":"opacity-100 scale-100 rotate-0"}`}),s.jsx(dm,{className:`absolute inset-0 w-full h-full transition-all duration-300 ${u?"opacity-100 scale-100 rotate-0":"opacity-0 scale-0 -rotate-90"}`})]})}),(M.pathname.startsWith("/surah")||M.pathname.startsWith("/reading")||M.pathname.startsWith("/blockwise"))&&s.jsx("button",{onClick:ge,disabled:y,className:K,title:g?"Remove from favorites":"Add to favorites","aria-label":g?"Remove from favorites":"Add to favorites",children:s.jsx(Mr,{className:`${ne} ${g?"fill-current":""}`})}),M.pathname.startsWith("/reading")&&m&&s.jsxs("div",{className:ae,children:[s.jsx(Oa,{className:"h-4 w-4 flex-shrink-0 mr-1","aria-hidden":"true"}),s.jsx("span",{children:m})]})]})};return s.jsxs("div",{className:"w-full bg-white dark:bg-[#2A2C38] shadow-md dark:shadow-lg",children:[s.jsx("div",{className:"px-2 sm:px-4 py-1",children:s.jsx("div",{className:"max-w-none w-full mx-0 py-1",children:s.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-1 sm:gap-2 min-h-[48px]",children:[s.jsxs("div",{className:"flex items-center ml-[17px] sm:ml-[21px] justify-self-start space-x-1 sm:space-x-2",children:[s.jsxs("div",{className:"relative",ref:a,children:[s.jsxs("button",{onClick:()=>r(!e),className:"flex items-center space-x-1 sm:space-x-2 px-1.5 sm:px-2 py-1 text-gray-700 dark:text-white rounded-lg transition-colors",children:[s.jsx("span",{className:`font-medium text-xs sm:text-sm truncate max-w-[80px] sm:max-w-none ${Se==="ur"?"font-urdu-nastaliq":Se==="mal"?"font-malayalam":Se==="hi"?"font-hindi":Se==="bn"?"font-bengali":Se==="ta"?"font-tamil":""}`,children:Ve||ke.length===0?"...":o.name}),Pe,s.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"})]}),e&&v&&ur.createPortal(s.jsx("div",{ref:n,className:"fixed inset-0 z-[99990]",children:s.jsx(Rf,{onSurahSelect:re,onClose:()=>r(!1)})}),v)]}),Oe&&I.length>0&&s.jsxs("div",{className:"relative",ref:be,children:[s.jsxs("button",{onClick:()=>we(!H),className:"flex items-center justify-center space-x-1.5 sm:space-x-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors shadow-sm min-h-[36px] sm:min-h-[40px]",title:"Select block range",children:[s.jsx("span",{className:"whitespace-nowrap",children:pe||""}),s.jsx(pt,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0 transition-transform ${H?"rotate-180":""}`})]}),H&&s.jsx("div",{className:"absolute left-0 top-full mt-1.5 w-full min-w-[120px] sm:min-w-[140px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-[60vh] overflow-y-auto z-50",children:I.map((w,_)=>{const T=w.AyaFrom??w.ayafrom??w.from??1,J=w.AyaTo??w.ayato??w.to??T,he=Number.parseInt(T,10),K=Number.parseInt(J,10),ne=Number.isFinite(he)&&Number.isFinite(K),ee=Number.isFinite(Number(T))?Number(T):1,ae=ne?he:ee,me=Number.isFinite(Number(J))?Number(J):ae,Ee=ne?`${ae}-${ne?K:me}`:`${T}-${J}`,Ie=pe===Ee;return s.jsxs("button",{onClick:()=>z(Ee),className:`w-full text-left px-3 sm:px-4 py-2 sm:py-2.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-between gap-2 ${Ie?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[s.jsx("span",{className:"flex-1",children:Ee}),Ie&&s.jsx(ar,{className:"w-4 h-4 flex-shrink-0"})]},`dropdown-${Ee}-${_}`)})})]}),Ke&&m&&m>0&&s.jsxs("div",{className:"relative",ref:fe,children:[s.jsxs("button",{onClick:()=>ie(!Y),className:"flex items-center justify-center space-x-1.5 sm:space-x-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors shadow-sm min-h-[36px] sm:min-h-[40px]",title:"Select ayah",children:[s.jsx("span",{className:"whitespace-nowrap",children:se||""}),s.jsx(pt,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0 transition-transform ${Y?"rotate-180":""}`})]}),Y&&s.jsx("div",{className:"absolute left-0 top-full mt-1.5 w-full min-w-[120px] sm:min-w-[140px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-[60vh] overflow-y-auto z-50",children:Array.from({length:m},(w,_)=>{const T=_+1,J=se===T;return s.jsxs("button",{onClick:()=>W(T),className:`w-full text-left px-3 sm:px-4 py-2 sm:py-2.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-between gap-2 ${J?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[s.jsxs("span",{className:"flex-1",children:["Ayah ",T]}),J&&s.jsx(ar,{className:"w-4 h-4 flex-shrink-0"})]},`ayah-${T}`)})})]})]}),s.jsx("div",{className:"flex justify-center justify-self-center",children:(M.pathname.startsWith("/surah")||M.pathname.startsWith("/reading")||M.pathname.startsWith("/blockwise"))&&s.jsxs("div",{className:"flex justify-center",children:[s.jsx("div",{className:"hidden sm:flex",children:s.jsx("div",{className:"bg-gray-100 dark:bg-[#323A3F] rounded-full p-1",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs("button",{onClick:()=>{const w=P?parseInt(P):p()||o.id;M.pathname.startsWith("/reading")&&ue(`/surah/${w}`)},className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium min-h-[40px] transition-colors ${M.pathname.startsWith("/surah")||M.pathname.startsWith("/blockwise")?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-white hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Ms,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"text-xs sm:text-sm font-poppins",children:"Translation"})]}),s.jsxs("div",{className:"relative",ref:B,children:[s.jsxs("button",{onClick:w=>{const _=P?parseInt(P):p()||o.id;M.pathname.startsWith("/reading")?_e&&L.length>0&&(w.stopPropagation(),Ae(!ce)):ue(`/reading/${_}`)},className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium min-h-[40px] transition-colors ${M.pathname.startsWith("/reading")?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-white hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(Fs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"text-xs sm:text-sm font-poppins",children:"Reading"}),_e&&N&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs sm:text-sm font-poppins",children:""}),s.jsx("span",{className:"text-xs sm:text-sm font-poppins font-semibold",children:N}),s.jsx(pt,{className:`w-3 h-3 sm:w-4 sm:h-4 transition-transform ${ce?"rotate-180":""}`})]})]}),_e&&ce&&L.length>0&&s.jsx("div",{className:"absolute left-0 top-full mt-1.5 w-full min-w-[120px] sm:min-w-[140px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-[60vh] overflow-y-auto z-[100] pointer-events-auto",children:L.map(w=>{const _=N===w;return s.jsxs("button",{onClick:T=>$(w,T),type:"button",className:`w-full text-left px-3 sm:px-4 py-2 sm:py-2.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-between gap-2 pointer-events-auto ${_?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[s.jsxs("span",{className:"flex-1",children:["Page ",w]}),_&&s.jsx(ar,{className:"w-4 h-4 flex-shrink-0"})]},`page-${w}`)})})]})]})})}),s.jsx("div",{className:"sm:hidden",children:s.jsx("div",{className:"bg-gray-100 dark:bg-[#323A3F] rounded-full p-0.5",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{const w=P?parseInt(P):p()||o.id;M.pathname.startsWith("/reading")&&ue(`/surah/${w}`)},"aria-label":"Translation",title:"Go to translation view",className:`flex items-center px-2 py-2 rounded-full min-h-[32px] transition-colors ${M.pathname.startsWith("/surah")||M.pathname.startsWith("/blockwise")?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-white hover:text-cyan-600 dark:hover:text-cyan-400"}`,children:s.jsx(Ms,{className:"w-2.5 h-2.5"})}),s.jsxs("div",{className:"relative",ref:B,children:[s.jsxs("button",{onClick:w=>{const _=P?parseInt(P):p()||o.id;M.pathname.startsWith("/reading")?_e&&L.length>0&&(w.stopPropagation(),Ae(!ce)):ue(`/reading/${_}`)},"aria-label":"Reading",title:_e&&N?`Page ${N}`:"Go to reading view",className:`flex items-center px-2 py-2 rounded-full min-h-[32px] transition-colors ${M.pathname.startsWith("/reading")?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-white hover:text-cyan-600 dark:hover:text-cyan-400"}`,children:[s.jsx(Fs,{className:"w-2.5 h-2.5"}),_e&&N&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"ml-1 text-[10px] font-semibold",children:N}),s.jsx(pt,{className:`w-2.5 h-2.5 ml-0.5 transition-transform ${ce?"rotate-180":""}`})]})]}),_e&&ce&&L.length>0&&s.jsx("div",{className:"absolute left-0 top-full mt-1.5 w-[140px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-[60vh] overflow-y-auto z-[100] pointer-events-auto",children:L.map(w=>{const _=N===w;return s.jsxs("button",{onClick:T=>$(w,T),type:"button",className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-between gap-2 pointer-events-auto ${_?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[s.jsxs("span",{className:"flex-1",children:["Page ",w]}),_&&s.jsx(ar,{className:"w-3 h-3 flex-shrink-0"})]},`page-mobile-${w}`)})})]})]})})})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-1 sm:space-x-2 mr-1 sm:mr-4 justify-self-end",children:[t?s.jsx("div",{className:"hidden sm:flex items-center text-sm text-gray-500",children:s.jsx("span",{children:"Juz 1 | Hizb 1"})}):null,O("mobile"),O("desktop")]})]})})}),b&&s.jsx(Mf,{surahId:P?parseInt(P):p()||o.id,onClose:()=>S(!1)})]})},Uf=({onClose:t,translationLanguage:e="mal"})=>{const[r,a]=d.useState("Translation"),[n,o]=d.useState(""),[i,c]=d.useState("Translation"),[l,u]=d.useState(""),[h,m]=d.useState([]),[f,g]=d.useState([]),[x,y]=d.useState(!1),[A,b]=d.useState(!1),[S,I]=d.useState(null),[F,H]=d.useState(null),[we,pe]=d.useState(!1),[oe,be]=d.useState(!1),[Y,ie]=d.useState(""),[se,Z]=d.useState([]),[fe,ce]=d.useState(!1),[Ae,N]=d.useState(null),[j,L]=d.useState(!1),[G,B]=d.useState(""),[P,M]=d.useState("E"),[ue,ve]=d.useState(1),[Se,ke]=d.useState([]),[Ve,Oe]=d.useState(!1),[Ke,_e]=d.useState(null),[p,C]=d.useState(!1),[Q,v]=d.useState(20),[E,z]=d.useState("Arabic");d.useEffect(()=>{e!=="E"&&e!=="mal"&&z("Arabic")},[e]);const[$,W]=d.useState(""),[re,ge]=d.useState([]),[Pe,O]=d.useState(!1),[w,_]=d.useState(null),[T,J]=d.useState(!1),[he,K]=d.useState(20),ne=G.trim().toLowerCase(),ee=Se.filter(k=>k.SubjText?.toLowerCase().includes(ne)),ae=$.trim().toLowerCase(),me=re.filter(k=>{if(!ae)return!0;const le=E==="English"&&(k.engtitleglossary?.toLowerCase().includes(ae)||k.glossarytext?.toLowerCase().includes(ae)),te=E==="Arabic"&&(k.arrtitleglossary?.toLowerCase().includes(ae)||k.glossarytext?.toLowerCase().includes(ae));return le||te}),X=d.useRef({english:0,malayalam:0,arabic:0,subjects:0,glossary:0}),Ee=ze(),Ie=k=>{const le=typeof k?.Interpretation=="string"&&k.Interpretation.trim().length>0?k.Interpretation:k?.TranslationText||k?.AyaHText;return le?le.replace(/\t+/g," ").replace(/\s+/g," ").trim():"Text not available"},lt=k=>{if(k?.InterpretationNo)return`Interpretation ${k.InterpretationNo}`;const le=k?.AyaFrom??k?.ayaid??k?.AyaID;if(le!=null){const te=le.toString();return te.includes("-")?`Verses ${te}`:`Ayah ${te}`}return"View details"},dt=(...k)=>{for(const le of k){if(!le)continue;const te=le.toString().match(/\d+/);if(te)return te[0]}return null},xt=k=>{if(k==null)return null;const le=Number(k);return Number.isFinite(le)&&le>0?Math.trunc(le):null},qa=k=>{const le=k?.SuraID??k?.suraid??k?.SuraId??k?.SuraNo??k?.suraNo,te=xt(le);if(!te)return;const Ce=xt(k.ayaid)??xt(k.AyaID)??xt(k.AyaFrom),Re=dt(k.ayaid,k.AyaID,k.AyaFrom,typeof k.TranslationText=="string"?k.TranslationText:null,typeof k.Interpretation=="string"?k.Interpretation:null,k.AyaHText,k.contiayano),Fe=Ce??xt(Re),Yt=Fe!=null?{scrollToVerse:Fe.toString(),highlightVerse:`${te}:${Fe}`}:void 0,yr=Fe!=null?`/surah/${te}#verse-${Fe}`:`/surah/${te}`;Ee(yr,Yt?{state:Yt}:void 0),t?.()},bt=({id:k,languageLabel:le,query:te,isLoading:Ce,error:Re,results:Fe,hasSearched:Yt,isMalayalam:yr=!1,isArabic:Wa=!1,isSubject:Dt=!1})=>!Dt&&!te.trim()&&!Yt&&!Ce?null:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-300",children:le}),!Ce&&Fe.length>0&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:[Fe.length," ",Fe.length===1?"result":"results"]})]}),s.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto pr-1",children:[Ce&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-300",children:[s.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent dark:border-gray-500 animate-spin"}),s.jsx("span",{children:"Searching..."})]}),Re&&s.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:Re}),!Ce&&!Re&&!Dt&&Yt&&Fe.length===0&&s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No matches found"}),Fe.map(Me=>s.jsxs("button",{type:"button",onClick:()=>qa(Me),className:"w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black/30 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[Dt?s.jsx("div",{className:"flex items-center justify-between text-[11px] text-gray-500 dark:text-gray-400 mb-1",children:s.jsxs("span",{children:["Subject #",Me.ID]})}):s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500 dark:text-gray-400 mb-1",children:[s.jsxs("span",{children:["Surah ",Me.SuraID??Me.suraid??Me.SuraId]}),s.jsx("span",{children:lt(Me)})]}),s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-100 leading-relaxed",dir:yr||Wa||Dt&&P==="M"?"rtl":"ltr",lang:yr?"ml":Wa?"ar":Dt&&P==="M"?"ml":"en",children:Dt?Me.SubjText:Ie(Me)})]},`${k}-${Me.ID}-${Me.SuraID}-${Me.AyaFrom??Me.InterpretationNo??"0"}`))]})]});return d.useEffect(()=>{const k=n.trim();if(!k){m([]),pe(!1),y(!1),I(null);return}const le=r==="Interpretation"?"interpretation":"translation";pe(!0),y(!0),I(null);const te=++X.current.english,Ce=setTimeout(async()=>{try{const Re=await Ws({query:k,language:"E",type:le});if(X.current.english!==te)return;m(Re)}catch(Re){if(X.current.english!==te)return;m([]),I(Re.message||"Failed to fetch results.")}finally{X.current.english===te&&y(!1)}},450);return()=>clearTimeout(Ce)},[n,r]),d.useEffect(()=>{const k=l.trim();if(!k){g([]),be(!1),b(!1),H(null);return}const le=i==="Interpretation"?"interpretation":"translation";be(!0),b(!0),H(null);const te=++X.current.malayalam,Ce=setTimeout(async()=>{try{const Re=await Ws({query:k,language:"M",type:le});if(X.current.malayalam!==te)return;g(Re)}catch(Re){if(X.current.malayalam!==te)return;g([]),H(Re.message||"Failed to fetch results.")}finally{X.current.malayalam===te&&b(!1)}},450);return()=>clearTimeout(Ce)},[l,i]),d.useEffect(()=>{const k=Y.trim();if(!k){Z([]),L(!1),ce(!1),N(null);return}L(!0),ce(!0),N(null);const le=++X.current.arabic,te=setTimeout(async()=>{try{const Ce=await Co(k);if(X.current.arabic!==le)return;Z(Ce)}catch(Ce){if(X.current.arabic!==le)return;Z([]),N(Ce.message||"Failed to fetch Arabic matches.")}finally{X.current.arabic===le&&ce(!1)}},450);return()=>clearTimeout(te)},[Y]),d.useEffect(()=>{e==="E"?(M("E"),ve(1)):e==="mal"&&M("M")},[e]),d.useEffect(()=>{P==="E"&&ue!==1&&ve(1)},[P,ue]),d.useEffect(()=>{if(!p)return;const k=++X.current.subjects;return Oe(!0),_e(null),(async()=>{try{const te=await kf({category:ue,language:P});if(X.current.subjects!==k)return;ke(te||[])}catch(te){if(X.current.subjects!==k)return;ke([]),_e(te.message||"Failed to load Quran subjects.")}finally{X.current.subjects===k&&Oe(!1)}})(),()=>{}},[ue,P,p]),d.useEffect(()=>{if(!T)return;const k=++X.current.glossary;O(!0),_(null),(async()=>{try{const te=await Ef();if(X.current.glossary!==k)return;ge(te||[])}catch(te){if(X.current.glossary!==k)return;ge([]),_(te.message||"Failed to load glossary entries.")}finally{X.current.glossary===k&&O(!1)}})()},[T]),d.useEffect(()=>{if(typeof document>"u")return;const k=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=k}},[]),s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:t}),s.jsxs("div",{className:"relative w-full sm:w-[480px] max-h-[85vh] sm:max-h-[90vh] bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-slideUp sm:animate-fadeIn overflow-hidden",children:[s.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden cursor-grab active:cursor-grabbing",onClick:t,children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Search"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400",children:s.jsx(Kt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:s.jsxs("div",{className:"mt-6 space-y-5",children:[e==="E"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-gray-500 dark:text-white mb-4 italic",children:"English phrase"}),s.jsxs("div",{className:"flex items-center space-x-8 mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"Translation",checked:r==="Translation",onChange:k=>a(k.target.value),className:"w-4 h-4 text-blue-600 dark:text-white dark:focus:ring-white focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"Translation"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"Interpretation",checked:r==="Interpretation",onChange:k=>a(k.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 dark:bg-white dark:text-white dark:focus:ring-white"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"Interpretation"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-white"}),s.jsx("input",{type:"text",placeholder:"Search...",value:n,onChange:k=>o(k.target.value),className:"w-full pl-10 pr-4 py-3 text-sm bg-gray-50 dark:text-white dark:bg-black dark:placeholder-white border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400"})]}),bt({id:"english",languageLabel:`English ${r}`,query:n,isLoading:x,error:S,results:h,hasSearched:we})]}),e==="mal"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-gray-500 dark:text-white mb-4 italic",children:"Malayalam phrase"}),s.jsxs("div",{className:"flex items-center space-x-8 mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"Translation",checked:i==="Translation",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600 dark:text-white dark:focus:ring-white focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"Translation"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"Interpretation",checked:i==="Interpretation",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 dark:bg-white dark:text-white dark:focus:ring-white"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"Interpretation"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-white"}),s.jsx("input",{type:"text",placeholder:"Search in Malayalam...",value:l,onChange:k=>u(k.target.value),className:"w-full pl-10 pr-4 py-3 text-sm bg-gray-50 dark:text-white dark:bg-black dark:placeholder-white border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400",dir:"auto"})]}),bt({id:"malayalam",languageLabel:`Malayalam ${i}`,query:l,isLoading:A,error:F,results:f,hasSearched:oe,isMalayalam:!0})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-gray-500 mb-4 italic dark:text-white",children:"Arabic phrase"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 dark:text-white text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search...",value:Y,onChange:k=>ie(k.target.value),className:"w-full pl-10 pr-4 py-3 text-sm dark:bg-black dark:text-white dark:placeholder-white bg-gray-50 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400",dir:"rtl"})]}),bt({id:"arabic",languageLabel:"Arabic phrase",query:Y,isLoading:fe,error:Ae,results:se,hasSearched:j,isArabic:!0})]}),(e==="E"||e==="mal")&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-gray-500 dark:text-white mb-4 italic",children:"Quran Subject"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("select",{value:P,onChange:k=>M(k.target.value),disabled:!0,className:"px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm text-gray-700 dark:text-white opacity-60 cursor-not-allowed",children:[e==="E"&&s.jsx("option",{value:"E",children:"English"}),e==="mal"&&s.jsx("option",{value:"M",children:"Malayalam"})]}),s.jsxs("select",{value:ue,onChange:k=>ve(Number(k.target.value)),disabled:P==="E",className:`px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-black text-sm text-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${P==="E"?"opacity-60 cursor-not-allowed":""}`,children:[s.jsx("option",{value:1,children:"Translation Subjects"}),s.jsx("option",{value:2,children:"Thafheem Subjects"})]})]}),P==="E"&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Thafheem subjects currently available only in Malayalam."}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-white"}),s.jsx("input",{type:"text",placeholder:"Filter subjects...",value:G,onChange:k=>{B(k.target.value),v(20)},className:"w-full pl-10 pr-4 py-3 text-sm bg-gray-50 dark:bg-black dark:text-white dark:placeholder-white border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400",disabled:!p})]}),s.jsx("button",{type:"button",onClick:()=>{C(!p)},className:"px-4 py-2 text-sm font-medium rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:p?"Hide subjects":"Load subjects"})]})]}),p&&bt({id:"subjects",languageLabel:`Subjects  ${P==="M"?"Malayalam":"English"} ${ue===2?"Thafheem":"Translation"}`,query:G,isLoading:Ve,error:Ke,results:ee.slice(0,Q),hasSearched:!0,isSubject:!0}),p&&!Ve&&ee.length>Q&&s.jsx("button",{type:"button",onClick:()=>v(k=>Math.min(k+20,ee.length)),className:"mt-3 inline-flex items-center justify-center px-4 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 rounded-lg text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Load more subjects"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-gray-500 dark:text-white mb-4 italic",children:"Glossary Search"}),s.jsxs("div",{className:"flex items-center space-x-8 mb-4",children:[(e==="E"||e==="mal")&&s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"English",checked:E==="English",onChange:k=>z(k.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"English"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"Arabic",checked:E==="Arabic",onChange:k=>z(k.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"Arabic"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-white"}),s.jsx("input",{type:"text",placeholder:"Search glossary...",value:$,onChange:k=>{W(k.target.value),K(20)},className:"w-full pl-10 pr-4 py-3 text-sm bg-gray-50 dark:bg-black dark:text-white dark:placeholder-white border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400",dir:E==="Arabic"?"rtl":"ltr",disabled:!T})]}),s.jsx("button",{type:"button",onClick:()=>{J(!T)},className:"px-4 py-2 text-sm font-medium rounded-lg border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-white hover.bg-gray-100 dark:hover:bg-gray-800 transition",children:T?"Hide glossary":"Load glossary"})]}),T&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-300",children:["Glossary (",E,")"]}),!Pe&&me.length>0&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:[me.length," entries"]})]}),s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1",children:[Pe&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark.text-gray-300",children:[s.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent dark:border-gray-500 animate-spin"}),s.jsx("span",{children:"Loading glossary..."})]}),w&&s.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:w}),!Pe&&!w&&me.length===0&&s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No entries found"}),me.slice(0,he).map(k=>s.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-black/30",children:[s.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500 dark:text-gray-400 mb-1",children:[s.jsx("span",{children:k.engtitleglossary}),s.jsx("span",{dir:"rtl",className:"text-sm",children:k.arrtitleglossary})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200 leading-relaxed",children:k.glossarytext})]},`glossary-${k.id}-${k.engtitleglossary}`))]}),!Pe&&me.length>he&&s.jsx("button",{type:"button",onClick:()=>K(k=>Math.min(k+20,me.length)),className:"mt-3 inline-flex items-center justify-center px-4 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 rounded-lg text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Load more glossary entries"})]})]})]})})]})]})},Bf=({onClose:t,onLanguageSelect:e,selectedLanguage:r="English"})=>{const[a,n]=d.useState(r),[o,i]=d.useState(!1);d.useEffect(()=>{n(r)},[r]),d.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]);const c=[{id:"english",name:"English",nativeName:"English",code:"en",icon:"E",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"},{id:"malayalam",name:"Malayalam",nativeName:"",code:"ml",icon:"",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"},{id:"urdu",name:"Urdu",nativeName:"",code:"ur",icon:"",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"},{id:"bangla",name:"Bangla",nativeName:"",code:"bn",icon:"",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"},{id:"tamil",name:"Tamil",nativeName:"",code:"ta",icon:"",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"},{id:"hindi",name:"Hindi",nativeName:"",code:"hi",icon:"",color:"bg-[#b7e3ef] text-[#2aa0bf] dark:bg-[#225B6A] dark:text-[#b7e3ef]"}],l=m=>{n(m.name),e&&e(m),u()},u=()=>{i(!0),setTimeout(()=>{t&&t()},200)},h=document.getElementById("modal-root")||document.body;return ur.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center font-poppins",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:u}),s.jsxs("div",{className:`relative w-full sm:w-[550px] max-h-[85vh] sm:max-h-[90vh] bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-slideUp sm:animate-fadeIn overflow-hidden ${o?"animate-slideDown sm:animate-fadeOut":""}`,children:[s.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden cursor-grab active:cursor-grabbing",onClick:u,children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Choose Translation Language"}),s.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400",children:s.jsx(Kt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map(m=>s.jsxs("button",{onClick:()=>l(m),className:`relative flex items-center justify-between w-full p-4 rounded-xl transition-all border h-[88px] group ${a===m.name?"border-[#2AA0BF] bg-white dark:bg-gray-800 shadow-sm ring-1 ring-[#2AA0BF]":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-[#2AA0BF]/50 hover:shadow-md"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-xl font-semibold transition-colors ${m.color}`,children:m.icon}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-900 dark:text-white text-base mb-0.5",dir:m.code==="ur"?"rtl":"ltr",children:m.name}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:m.nativeName})]})]}),a===m.name&&s.jsx("div",{className:"absolute top-3 right-3 w-5 h-5 bg-[#3B82F6] rounded-full flex items-center justify-center shadow-sm animate-fadeIn",children:s.jsx(ar,{size:12,className:"text-white stroke-[3]"})})]},m.id))})})]})]}),h)};function zf({options:t,value:e,onChange:r,className:a=""}){return s.jsx("div",{className:`flex items-center bg-gray-50 dark:bg-gray-800 rounded-full p-0.5 transition-all w-fit ${a}`,children:t.map(n=>{const o=e===n;return s.jsx("button",{type:"button",onClick:()=>r(n),className:`px-3 py-1 text-sm font-medium rounded-full focus:outline-none transition-all whitespace-nowrap
              ${o?"bg-white dark:bg-gray-700 border-2 border-cyan-400 dark:border-cyan-500 text-gray-900 dark:text-white shadow":"bg-transparent text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
            `,style:{boxShadow:o?"0 2px 8px 0 rgba(0,0,0,0.04)":void 0},children:n},n)})})}const Qs=t=>({mal:"Malayalam",E:"English",hi:"Hindi",bn:"Bangla",ur:"Urdu",ta:"Tamil"})[t]||"Malayalam",Vf=t=>({Malayalam:"mal",English:"E",Hindi:"hi",Bangla:"bn",Urdu:"ur",Tamil:"ta"})[t]||"mal",Hf=t=>{const e={Malayalam:"   ",English:"In the name of Allah, the Merciful, the Compassionate.",Hindi:"          ",Bangla:"    ",Urdu:"       ",Tamil:" ,    ()"};return e[t]||e.English},qf=t=>{const e={Malayalam:"Noto Sans Malayalam, sans-serif",English:"Poppins, sans-serif",Hindi:"NotoSansDevanagari, sans-serif",Bangla:"SutonnyMJ, serif",Urdu:"'Noto Nastaliq Urdu', 'JameelNoori', serif",Tamil:"Bamini, serif"};return e[t]||e.English},na=["mal","E"],Po=({onClose:t})=>{const{theme:e,toggleTheme:r,quranFont:a,setQuranFont:n,fontSize:o,setFontSize:i,translationFontSize:c,setTranslationFontSize:l,viewType:u,setViewType:h,translationLanguage:m,setTranslationLanguage:f}=Lt(),[g,x]=d.useState(e==="dark"?"Dark":"Light"),[y,A]=d.useState(a),[b,S]=d.useState(o),[I,F]=d.useState(()=>Qs(m));d.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),d.useEffect(()=>{F(Qs(m))},[m]);const[H,we]=d.useState(c),[pe,oe]=d.useState(u),[be,Y]=d.useState(!0),[ie,se]=d.useState(()=>{const B=localStorage.getItem("playbackSpeed");return B?parseFloat(B):1}),[Z,fe]=d.useState(()=>localStorage.getItem("reciter")||"al-afasy");d.useEffect(()=>{const B=P=>{const M=P.detail.playbackSpeed;M!==ie&&se(M)};return window.addEventListener("playbackSpeedChange",B),()=>{window.removeEventListener("playbackSpeedChange",B)}},[ie]),d.useEffect(()=>{const B=P=>{const M=P.detail.reciter;M!==Z&&fe(M)};return window.addEventListener("reciterChange",B),()=>{window.removeEventListener("reciterChange",B)}},[Z]);const ce=["Malayalam","English","Hindi","Bangla","Urdu","Tamil"],Ae=[{value:"al-afasy",label:"Mishari Rashid al-`Afasy"},{value:"al-ghamidi",label:"Saad Al Ghamidi"},{value:"al-hudaify",label:"Al-Hudaify"}],N=na.includes(m);d.useEffect(()=>{oe(u)},[u]),d.useEffect(()=>{!na.includes(m)&&(u!=="Ayah Wise"||pe!=="Ayah Wise")&&(oe("Ayah Wise"),h("Ayah Wise"))},[m,u,pe,h]),d.useEffect(()=>{localStorage.setItem("playbackSpeed",ie.toString()),window.dispatchEvent(new CustomEvent("playbackSpeedChange",{detail:{playbackSpeed:ie}}))},[ie]);const j=()=>{x("Light"),e==="dark"&&r(),A("Amiri Quran"),n("Amiri Quran"),S(26),i(26),F("Malayalam"),f("mal"),we(12),l(12),oe("Ayah Wise"),h("Ayah Wise"),Y(!0),se(1),localStorage.setItem("playbackSpeed","1.0"),fe("al-afasy"),localStorage.setItem("reciter","al-afasy"),window.dispatchEvent(new CustomEvent("reciterChange",{detail:{reciter:"al-afasy"}}))},L=()=>{n(y),i(b),l(H);const B=N?pe:"Ayah Wise";oe(B),h(B),localStorage.setItem("reciter",Z),localStorage.setItem("playbackSpeed",ie.toString()),window.dispatchEvent(new CustomEvent("reciterChange",{detail:{reciter:Z}})),t&&t()},G=document.getElementById("modal-root")||document.body;return ur.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-end sm:items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:t}),s.jsxs("div",{className:"relative w-full sm:w-[480px] max-h-[85vh] sm:max-h-[90vh] bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-slideUp sm:animate-fadeIn overflow-hidden",children:[s.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden cursor-grab active:cursor-grabbing",onClick:t,children:s.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Settings"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400",children:s.jsx(Kt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Theme"}),s.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-xl",children:[s.jsxs("button",{onClick:()=>{x("Light"),e==="dark"&&r()},className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-medium transition-all ${g==="Light"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[s.jsx(Eo,{className:"w-4 h-4"})," Light"]}),s.jsxs("button",{onClick:()=>{x("Dark"),e==="light"&&r()},className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-medium transition-all ${g==="Dark"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[s.jsx(ko,{className:"w-4 h-4"})," Dark"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Quran Font"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>A("ScheherazadeNew-Regular"),className:`py-3 px-4 rounded-xl border text-sm font-medium transition-all ${y==="ScheherazadeNew-Regular"?"border-primary bg-primary/5 text-primary dark:border-primary dark:bg-primary/10 dark:text-primary-light":"border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Scheherazade"}),s.jsx("button",{onClick:()=>A("Amiri Quran"),className:`py-3 px-4 rounded-xl border text-sm font-medium transition-all ${y==="Amiri Quran"?"border-primary bg-primary/5 text-primary dark:border-primary dark:bg-primary/10 dark:text-primary-light":"border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Amiri Quran"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Arabic Font Size"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[b,"px"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>S(Math.max(12,b-1)),className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300 transition-colors",children:s.jsx(Os,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(b-12)/36*100}%`}})}),s.jsx("button",{onClick:()=>S(Math.min(48,b+1)),className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mt-4 p-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700 text-center",children:s.jsx("p",{className:"text-gray-900 dark:text-white leading-relaxed transition-all duration-200",style:{fontFamily:y,fontSize:`${b}px`},dir:"rtl",children:"   "})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Translation Language"}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:I,onChange:B=>{const P=B.target.value,M=Vf(P);F(P),f(M),window.dispatchEvent(new CustomEvent("languageChange",{detail:{language:M}})),na.includes(M)||(pe!=="Ayah Wise"&&oe("Ayah Wise"),u!=="Ayah Wise"&&h("Ayah Wise"))},className:"w-full appearance-none bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-xl px-4 py-3 pr-10 focus:outline-none focus:ring-2 focus:ring-primary/50",children:ce.map(B=>s.jsx("option",{value:B,children:B},B))}),s.jsx(pt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Translation Size"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[H,"px"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>we(Math.max(10,H-1)),className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300 transition-colors",children:s.jsx(Os,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${(H-10)/9*100}%`}})}),s.jsx("button",{onClick:()=>we(Math.min(19,H+1)),className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 transition-all duration-200",style:{fontSize:`${H}px`,fontFamily:qf(I)},dir:I==="Urdu"?"rtl":"ltr",children:Hf(I)})})]}),N&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"View Type"}),s.jsx("div",{className:"flex justify-center",children:s.jsx(zf,{options:["Ayah Wise","Block Wise"],value:pe,onChange:B=>{oe(B),h(B)}})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Audio Settings"}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Quran Audio"}),s.jsx("button",{onClick:()=>Y(!be),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${be?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${be?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Speed"}),s.jsxs("span",{children:[ie.toFixed(1),"x"]})]}),s.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:ie,onChange:B=>se(parseFloat(B.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Reciter"}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:Z,onChange:B=>{const P=B.target.value;fe(P),localStorage.setItem("reciter",P),window.dispatchEvent(new CustomEvent("reciterChange",{detail:{reciter:P}}))},className:"w-full appearance-none bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white rounded-xl px-4 py-2.5 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50",children:Ae.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))}),s.jsx(pt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-5 border-t border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 z-10",children:[s.jsx("button",{onClick:j,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Reset"}),s.jsx("button",{onClick:L,className:"flex-1 py-3 px-4 rounded-xl bg-primary text-white font-medium hover:bg-primary-dark shadow-lg shadow-primary/20 transition-colors",children:"Save Changes"})]})]})]}),G)},Wf=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Jf=()=>{const{theme:t,toggleTheme:e,setViewType:r,translationLanguage:a,setTranslationLanguage:n}=Lt(),{user:o}=bo(),[i,c]=d.useState(!1),[l,u]=d.useState(null),[h,m]=d.useState(!1),[f,g]=d.useState(!1),[x,y]=d.useState(!1),[A,b]=d.useState(!1),[S,I]=d.useState(!1),[F,H]=d.useState(!0),[we,pe]=d.useState(0),[oe,be]=d.useState({}),Y=d.useRef(null),ie=d.useRef(0),se=ze(),Z=xa(),fe=Z.pathname.startsWith("/reading")||Z.pathname.startsWith("/surah")||Z.pathname.startsWith("/blockwise");Z.pathname.startsWith("/bookmark")||Z.pathname.startsWith("/bookmarked")||Z.pathname.startsWith("/favorite");const ce=()=>c(!i),Ae=v=>u(l===v?null:v),N=window.location.origin,j=async()=>{const E={title:"Thafheem ul Quran",text:"Explore Thafheem ul Quran",url:`${N}/`};try{navigator.share?await navigator.share(E):I(!0)}catch(z){console.error("Share failed:",z),I(!0)}},L=async()=>{try{b(!0),await qd(go),se("/")}catch(v){console.error("Error signing out:",v)}finally{b(!1)}};d.useEffect(()=>{const v=new Set(["ta","hi","bn","ur"]);if(Z.pathname.startsWith("/blockwise/")&&v.has(a)){const E=Z.pathname.match(/\/blockwise\/(\d+)/),z=E?E[1]:void 0;z?se(`/surah/${z}`,{replace:!0}):se("/",{replace:!0})}},[a,Z.pathname,se]);const G=()=>{o?L():se("/sign")},B=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/authorpreface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/malayalam",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/malayalam",key:"appendix"},{label:"Jesus and Mohammed",path:"/malayalam/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/malayalam/finality-of-prophethood",key:"finality_of_prophethood"},{label:"Technical Terms",path:"/technical-terms",key:"technical_terms"},{label:"Translators",path:"/translators",key:"translators"},{label:"History of Translation",path:"/history-of-translation",key:"history_of_translation"}]},{icon:Ls,label:"Tajwid",path:"/tajweed",key:"tajwid"},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],P=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/authorpreface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/english",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/english",key:"appendix"},{label:"Jesus and Mohammed",path:"/english/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/english/finality-of-prophethood",key:"finality_of_prophethood"},{label:"English Translation",path:"/englishtranslate",key:"english_translation"}]},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],M=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/authorpreface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/urdu",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/urdu",key:"appendix"},{label:"Jesus and Mohammed",path:"/urdu/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/urdu/finality-of-prophethood",key:"finality_of_prophethood"}]},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],ue=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/authorpreface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/hindi",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/hindi",key:"appendix"},{label:"Jesus and Mohammed",path:"/hindi/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/hindi/finality-of-prophethood",key:"finality_of_prophethood"}]},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],ve=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/authorpreface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/bangla",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/bangla",key:"appendix"},{label:"Jesus and Mohammed",path:"/bangla/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/bangla/finality-of-prophethood",key:"finality_of_prophethood"}]},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],Se=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:wt,label:"Sayyid Maududi",path:"/tamil/sayyid-maududi",key:"sayyid_maududi"},{icon:Ye,label:"Thafheemul Quran",path:"/tamil/author-preface",key:"thafheemul_quran",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/tamil/author-preface",key:"authors_preface"},{label:"Author's Conclusion",path:"/tamil/author-conclusion",key:"authors_conclusion"}]},{icon:vt,label:"Library",path:"/appendix/tamil",key:"library",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Appendix",path:"/appendix/tamil",key:"appendix"},{label:"Jesus and Mohammed",path:"/tamil/jesus-mohammed",key:"jesus_mohammed"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"},{label:"The Finality of Prophethood",path:"/tamil/finality-of-prophethood",key:"finality_of_prophethood"}]},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:_t,label:"Share app",onClick:j,key:"share_app"},{icon:Ut,label:"Feedback",path:"/feedback",key:"feedback"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],ke=[{icon:kt,label:"Home",path:"/",key:"home"},{icon:Oa,label:"Table of Contents",path:"/tablecontents",key:"table_of_contents"},{icon:wt,label:"Sayyid Maududi",path:"/maududi",key:"sayyid_maududi"},{icon:kh,label:"English Translation",path:"/englishtranslate",key:"english_translation"},{icon:Ye,label:"Library",path:"/authorpreface",key:"introduction",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Author's Preface",path:"/authorpreface",key:"authors_preface"},{label:"Author's Conclusion",path:"/authorconclusion",key:"authors_conclusion"},{label:"An Introduction to the Quran",path:"/introduction-to-quran",key:"introduction_to_quran"}]},{icon:vt,label:"Appendix",path:"/appendix/english",key:"appendix",hasSubmenu:!0,hasArrow:!0,submenuItems:[{label:"Malayalam Appendix",path:"/appendix/malayalam",key:"malayalam_appendix"},{label:"English Appendix",path:"/appendix/english",key:"english_appendix"},{label:"Urdu Appendix",path:"/appendix/urdu",key:"urdu_appendix"}]},{icon:Ye,label:"The Finality of Prophethood",path:"/urdu/finality-of-prophethood",key:"urdu_finality_of_prophethood"},{icon:Ye,label:"Jesus and Mohammed",path:"/urdu/jesus-mohammed",key:"urdu_jesus_mohammed"},{icon:Gh,label:"Digitisation",path:"/digitisation",key:"digitisation"},{icon:Ls,label:"Tajwid",path:"/tajweed",key:"tajwid"},{icon:Ot,label:"Quiz",path:"/quiz",key:"quiz"},{icon:Ft,label:"Drag & drop",path:"/dragdrop",key:"drag_drop"},{icon:_m,label:"What's New",path:"/whatsnew",key:"whats_new"},{icon:_t,label:"Share App",onClick:j,key:"share_app"},{icon:At,label:"About Us",path:"/about",key:"about_us"},{icon:Et,label:"Contact Us",path:"/contact",key:"contact_us"},{icon:St,label:"Privacy",onClick:()=>window.open("https://d4dx.co/privacy-policy/","_blank"),key:"privacy"}],Ve=(v,E)=>(a==="ur"||a==="ta")&&oe[v]?oe[v]:E,Ke=(a==="mal"?B:a==="E"?P:a==="ur"?M:a==="ta"?Se:a==="hi"?ue:a==="bn"?ve:ke).map(v=>({...v,label:Ve(v.key,v.label),submenuItems:v.submenuItems?.map(E=>({...E,label:Ve(E.key,E.label)}))})),p=[{icon:Am,label:"Delete Account",path:"/deleteaccount",key:"delete_account",isDanger:!0},{icon:Ds,label:"Log Out",path:"/logout",key:"log_out",isDanger:!0}].map(v=>({...v,label:Ve(v.key,v.label)})),C=v=>Z.pathname===v,Q=()=>{se("/bookmarkedverses")};return d.useEffect(()=>{a!=="ur"&&be({})},[a]),d.useEffect(()=>{if(typeof window>"u")return;const v=()=>{Y.current&&pe(Y.current.offsetHeight||0)};return v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}},[]),d.useEffect(()=>{if(typeof window>"u"||(ie.current=window.scrollY,H(!0),!fe))return;const v=()=>{const E=window.scrollY;if(Math.abs(E-ie.current)<4)return;let $=!0;E<80?$=!0:E>ie.current?$=!1:$=!0,H(W=>W===$?W:$),ie.current=E};return window.addEventListener("scroll",v,{passive:!0}),()=>{window.removeEventListener("scroll",v)}},[fe,Z.pathname]),s.jsxs(s.Fragment,{children:[S&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:()=>I(!1)}),s.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-lg bg-white dark:bg-[#2A2C38] p-4 shadow-xl",children:[s.jsxs("div",{className:"mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(wm,{className:"w-5 h-5"})," Share Thafheem"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Invite others with your favorite app or copy the link."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{const v=`${N}/`,E=encodeURIComponent("Explore Thafheem ul Quran"),z=encodeURIComponent(v);window.open(`https://wa.me/?text=${E}%20${z}`,"_blank")},className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-[#25D366] text-white hover:opacity-90 transition",children:[s.jsx(pm,{className:"w-4 h-4"})," WhatsApp"]}),s.jsxs("button",{onClick:()=>{const v=`${N}/`,E=encodeURIComponent("Explore Thafheem ul Quran"),z=encodeURIComponent(v);window.open(`https://t.me/share/url?url=${z}&text=${E}`,"_blank")},className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-[#229ED9] text-white hover:opacity-90 transition",children:[s.jsx(Lh,{className:"w-4 h-4"})," Telegram"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{readOnly:!0,value:`${N}/`,className:"flex-1 px-3 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm text-gray-800 dark:text-gray-100"}),s.jsxs("button",{onClick:async()=>{await navigator.clipboard.writeText(`${N}/`),alert("Link copied to clipboard")},className:"px-3 py-2 rounded-md bg-gray-900 text-white dark:bg-gray-700 hover:opacity-90 transition flex items-center gap-2",children:[s.jsx(Fa,{className:"w-4 h-4"})," Copy"]})]}),s.jsx("button",{onClick:()=>I(!1),className:"w-full mt-1 px-3 py-2 rounded-md border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Close"})]})]})]}),h&&s.jsx(Uf,{onClose:()=>m(!1),translationLanguage:a}),f&&s.jsx(Bf,{onClose:()=>g(!1),selectedLanguage:a==="E"?"English":a==="ta"?"Tamil":a==="hi"?"Hindi":a==="ur"?"Urdu":a==="bn"?"Bangla":"Malayalam",onLanguageSelect:v=>{let E="mal";v.code?.toLowerCase()==="en"?E="E":v.code?.toLowerCase()==="ta"?E="ta":v.code?.toLowerCase()==="hi"?E="hi":v.code?.toLowerCase()==="ur"?E="ur":v.code?.toLowerCase()==="bn"&&(E="bn"),n(E),g(!1)}}),s.jsx("nav",{ref:Y,className:`bg-white/95 dark:bg-[#2A2C38]/95 backdrop-blur-md w-full z-[80] border-b border-gray-200/50 dark:border-gray-700/50 ${fe?"shadow-none":"shadow-lg shadow-gray-200/50 dark:shadow-black/20"} sticky top-0 transition-all duration-300 ${fe&&!F?"-translate-y-full":""}`,children:s.jsxs("div",{className:`flex items-center justify-between px-3 sm:px-4 ${fe?"py-2 sm:py-2.5":"py-2.5 sm:py-3"}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 ml-2 sm:ml-4",children:[s.jsx("button",{onClick:ce,"aria-label":i?"Close menu":"Open menu","aria-expanded":i,className:`group relative flex items-center space-x-2 p-2 sm:px-3 sm:py-2 \r
             text-gray-700 dark:text-gray-200 \r
             hover:text-[#2596be] dark:hover:text-[#62C3DC] \r
             hover:bg-gradient-to-br hover:from-cyan-50 hover:to-blue-50 \r
             dark:hover:bg-gradient-to-br dark:hover:from-gray-800 dark:hover:to-gray-700 \r
             rounded-xl transition-all duration-300 ease-out\r
             min-h-[44px] min-w-[44px] justify-center \r
             sm:min-h-auto sm:min-w-auto sm:justify-start\r
             hover:shadow-md hover:scale-105 active:scale-95`,title:i?"Close menu":"Open menu",children:s.jsx(rm,{size:18,className:"sm:w-5 sm:h-5 transition-transform duration-300 group-hover:rotate-180"})}),s.jsx("button",{onClick:()=>{se("/"),window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center cursor-pointer hover:opacity-80 transition-all duration-300 hover:scale-105 active:scale-95","aria-label":"Go to home page",children:s.jsx("img",{src:t==="dark"?ga:Bs,alt:"Thafheem ul Quran",className:"h-7 sm:h-8 w-auto select-none drop-shadow-sm",draggable:"false"})})]}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mr-1 sm:mr-4",children:[s.jsx("button",{onClick:()=>g(!0),"aria-label":"Change language",className:`group relative p-2 sm:p-2.5 text-gray-700 dark:text-gray-200 \r
                hover:text-white hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#3FA6C0] \r
                dark:hover:from-[#3FA6C0] dark:hover:to-[#2596be] \r
                rounded-xl transition-all duration-300 ease-out\r
                min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] \r
                flex items-center justify-center\r
                hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95`,title:"Change language",children:s.jsx(Jh,{size:15,className:"sm:w-[18px] sm:h-[18px] transition-all duration-300 group-hover:rotate-12"})}),s.jsx("button",{onClick:e,"aria-label":t==="dark"?"Switch to light mode":"Switch to dark mode",className:`group relative p-2 sm:p-2.5 text-gray-700 dark:text-gray-200 \r
                hover:text-white hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#3FA6C0] \r
                dark:hover:from-[#3FA6C0] dark:hover:to-[#2596be] \r
                rounded-xl transition-all duration-300 ease-out\r
                min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] \r
                flex items-center justify-center\r
                hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95`,title:t==="dark"?"Switch to light mode":"Switch to dark mode",children:t==="dark"?s.jsx(Eo,{size:15,className:"sm:w-[18px] sm:h-[18px] transition-all duration-300 group-hover:rotate-180"}):s.jsx(ko,{size:15,className:"sm:w-[18px] sm:h-[18px] transition-all duration-300 group-hover:-rotate-12"})}),o&&s.jsx("button",{onClick:Q,"aria-label":"View bookmarks",className:`group relative p-2 sm:p-2.5 text-gray-700 dark:text-gray-200 \r
                  hover:text-white hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#3FA6C0] \r
                  dark:hover:from-[#3FA6C0] dark:hover:to-[#2596be] \r
                  rounded-xl transition-all duration-300 ease-out\r
                  min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] \r
                  flex items-center justify-center\r
                  hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95`,title:"View bookmarks",children:s.jsx(Nh,{size:15,className:"sm:w-[18px] sm:h-[18px] transition-all duration-300 group-hover:scale-110 group-hover:fill-current"})}),s.jsx("button",{onClick:()=>y(!0),"aria-label":"Open settings",className:`group relative p-2 sm:p-2.5 text-gray-700 dark:text-gray-200 \r
                hover:text-white hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#3FA6C0] \r
                dark:hover:from-[#3FA6C0] dark:hover:to-[#2596be] \r
                rounded-xl transition-all duration-300 ease-out\r
                min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] \r
                flex items-center justify-center\r
                hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95`,title:"Open settings",children:s.jsx(ym,{size:18,className:"transition-all duration-300 group-hover:rotate-90"})}),x&&s.jsx(Po,{onClose:()=>y(!1)}),s.jsx("button",{onClick:()=>m(!0),className:`group relative p-2 sm:p-2.5 text-gray-700 dark:text-gray-200 \r
                hover:text-white hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#3FA6C0] \r
                dark:hover:from-[#3FA6C0] dark:hover:to-[#2596be] \r
                rounded-xl transition-all duration-300 ease-out\r
                min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] \r
                flex items-center justify-center\r
                hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95`,title:"Search",children:s.jsx(Bt,{size:15,className:"sm:w-[18px] sm:h-[18px] transition-all duration-300 group-hover:scale-110"})}),o?s.jsx("button",{onClick:G,disabled:A,className:`group relative flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 \r
                  rounded-full text-red-500 \r
                  hover:bg-gradient-to-br hover:from-red-50 hover:to-red-100 \r
                  dark:hover:from-red-900/40 dark:hover:to-red-800/40 \r
                  transition-all duration-300 ease-out\r
                  disabled:opacity-50 disabled:cursor-not-allowed\r
                  hover:shadow-lg hover:shadow-red-500/30 hover:scale-110 active:scale-95`,title:"Sign out",children:A?s.jsx("div",{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 border-2 border-red-500 border-t-transparent rounded-full animate-spin"}):s.jsx(Ds,{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-300 group-hover:translate-x-0.5"})}):s.jsxs("button",{onClick:G,className:`group relative px-3 py-1.5 xs:px-4 sm:px-5 xs:py-2 sm:py-2.5 text-[9px] xs:text-xs sm:text-sm \r
                  bg-white dark:bg-[#2A2C38] \r
                  text-[#2596be] dark:text-[#62C3DC] \r
                  border border-[#2596be]/30 dark:border-[#62C3DC]/30 \r
                  hover:bg-gradient-to-r hover:from-[#2596be] hover:to-[#1e7a9a] \r
                  hover:text-white hover:border-[#2596be]\r
                  rounded-xl transition-all duration-300 ease-out\r
                  font-medium whitespace-nowrap\r
                  shadow-sm hover:shadow-md hover:shadow-cyan-500/20 \r
                  hover:scale-[1.02] active:scale-[0.98]\r
                  overflow-hidden min-h-[32px] xs:min-h-[36px] sm:min-h-[40px] \r
                  flex items-center justify-center\r
                  backdrop-blur-sm`,title:"Sign in",children:[s.jsx("span",{className:"relative z-10 hidden xs:inline font-semibold text-sm sm:text-base",children:"Sign In"}),s.jsx("span",{className:"relative z-10 xs:hidden text-[15px] font-semibold",children:"Sign in"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#62C3DC] to-[#2596be] opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]})]})]})}),fe&&s.jsx("div",{className:"sticky z-[70] transition-all duration-300",style:{top:F?we:0},children:s.jsx(Ff,{showPageInfo:!1})}),i&&s.jsxs("div",{className:"fixed inset-0 z-[80]",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:ce}),s.jsxs("div",{className:"absolute left-0 top-0 h-full max-w-[280px] sm:max-w-[300px] md:w-72 bg-white dark:bg-[#2A2C38] shadow-lg overflow-y-auto",children:[s.jsx("div",{className:"flex flex-col items-start p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between w-full mb-4 mt-15 border-b border-gray-200 dark:border-gray-700 pb-2",children:[s.jsx("img",{src:t==="dark"?ga:Bs,alt:"Thafheemul Quran",className:"h-10 sm:h-12 w-auto"}),s.jsxs("button",{onClick:()=>window.open("https://app.thafheem.net/","_blank"),className:"flex items-center gap-2 px-3 py-2 bg-[#2596be] hover:bg-[#1e7a9a] text-white rounded-lg transition-colors duration-200 text-sm font-medium",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Donate Now"})]})]})}),s.jsxs("div",{className:"py-2 font-poppins",children:[Ke.map((v,E)=>{const z=v.icon,$=C(v.path)||v.hasSubmenu&&v.submenuItems?.some(W=>C(W.path));return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{v.hasSubmenu?Ae(E):v.onClick?(v.onClick(),c(!1)):(se(v.path),c(!1))},className:`w-full flex items-center justify-between px-4 sm:px-6 py-3 sm:py-3 transition-colors ${a==="ur"||a==="ta"?"text-right":"text-left"} min-h-[48px] ${$?"bg-[#ebeef0] dark:bg-gray-900 text-black dark:text-white":"text-black dark:text-white hover:bg-[#ebeef0] dark:hover:bg-gray-900"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(z,{size:18,className:`flex-shrink-0 ${$?"text-black dark:text-white ":"text-[#d9d9d9] dark:text-gray-400"}`}),s.jsx("span",{className:"text-sm sm:text-sm leading-tight",dir:a==="ur"||a==="ta"?"rtl":"ltr",children:v.label})]}),v.hasArrow&&(l===E?s.jsx(pt,{size:16,className:"text-black dark:text-white flex-shrink-0 transition-transform"}):s.jsx(Ph,{size:16,className:"text-black dark:text-white flex-shrink-0 transition-transform"}))]}),v.hasSubmenu&&l===E&&s.jsx("div",{className:`bg-gray-50 dark:bg-[#2A2C38] ${a==="ur"||a==="ta"?"mr-4 sm:mr-6":"ml-4 sm:ml-6"}`,children:v.submenuItems.map((W,re)=>{const ge=W.path?C(W.path):!1;return s.jsxs("button",{onClick:()=>{W.action==="setAyahWise"?(r("Ayah Wise"),se("/"),c(!1)):W.action==="setBlockWise"?(r("Block Wise"),se("/"),c(!1)):W.path&&(se(W.path),c(!1))},className:`w-full rounded-xl flex items-center ${a==="ur"||a==="ta"?"flex-row-reverse":""} px-4 sm:px-6  py-2 sm:py-2 transition-colors ${a==="ur"||a==="ta"?"text-right":"text-left"} text-sm min-h-[44px] ${ge?"bg-gray-100 dark:bg-gray-900 text-black dark:text-white":"text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900"}`,dir:a==="ur"||a==="ta"?"rtl":"ltr",children:[s.jsx("span",{className:`${a==="ur"||a==="ta"?"ml-2":"mr-3"} flex-shrink-0`,children:""}),s.jsx("span",{className:"leading-tight whitespace-nowrap",dir:a==="ur"||a==="ta"?"rtl":"ltr",children:W.label})]},re)})})]},E)}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),p.map((v,E)=>{const z=v.icon,$=C(v.path);return s.jsxs("button",{onClick:()=>{se(v.path),c(!1)},className:`w-full flex items-center space-x-3 px-4 sm:px-6 py-3 transition-colors ${a==="ur"||a==="ta"?"text-right":"text-left"} min-h-[48px] ${$?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30"}`,dir:a==="ur"||a==="ta"?"rtl":"ltr",children:[s.jsx(z,{size:18,className:"flex-shrink-0 text-red-600 dark:text-red-400"}),s.jsx("span",{className:"text-sm leading-tight",dir:a==="ur"||a==="ta"?"rtl":"ltr",children:v.label})]},`danger-${E}`)})]})]})]})]})},Qf="/assets/google-play-badge-C1TO9YmS.png",Gf="/assets/app-store-badge-CYDVmG5r.png",Kf=()=>{const t=ze(),e=new Date().getFullYear(),r=[{label:"About",path:"/about"},{label:"Privacy Policy",path:"/privacy",external:"https://d4dx.co/privacy-policy/"},{label:"Contact",path:"/contact"}],a=[{icon:qh,href:"https://instagram.com/thafheemulquran_app",label:"Instagram"},{icon:Dh,href:"https://facebook.com/ThafheemulQuran",label:"Facebook"},{icon:Cm,href:"https://youtube.com/@thafheemulquranapp",label:"YouTube"},{icon:Ua,href:"https://play.google.com/store/apps/details?id=com.d4media.thafheem",label:"Play Store"},{icon:wh,href:"https://apps.apple.com/in/app/thafheem-ul-quran/id1292572556",label:"App Store"}];return s.jsxs("footer",{className:"relative bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-black py-8 mt-auto font-poppins border-t border-gray-200 dark:border-gray-800",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#62C3DC] via-[#2596be] to-[#1e7a9a]"}),s.jsxs("div",{className:"max-w-[1290px] mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-6",children:[s.jsxs("div",{className:"flex flex-col items-center md:items-start space-y-3",children:[s.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-[#2596be] to-[#62C3DC] bg-clip-text text-transparent",children:"Thafheem ul Quran"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center md:text-left max-w-xs",children:"It opens the Quran to the mind and the heart so we may understand,reflect, and live by it"}),s.jsxs("button",{onClick:()=>window.open("https://app.thafheem.net/","_blank"),className:"group flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#2596be] to-[#1e7a9a] hover:from-[#1e7a9a] hover:to-[#2596be] text-white rounded-lg transition-all duration-300 shadow-md hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-105 active:scale-95",children:[s.jsx(Mr,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-medium",children:"Support Us"})]})]}),s.jsxs("div",{className:"flex flex-col items-center md:items-start space-y-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Quick Links"}),s.jsx("nav",{className:"flex flex-col space-y-2",children:r.map((n,o)=>s.jsx("button",{onClick:()=>{n.external?window.open(n.external,"_blank"):t(n.path)},className:"text-sm text-gray-600 dark:text-gray-400 hover:text-[#2596be] dark:hover:text-[#62C3DC] transition-colors duration-200 text-center md:text-left hover:translate-x-1 transform",children:n.label},o))})]}),s.jsxs("div",{className:"flex flex-col items-center md:items-start space-y-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Connect With Us"}),s.jsx("div",{className:"flex gap-3 flex-wrap",children:a.map((n,o)=>{const i=n.icon;return s.jsx("a",{href:n.href,target:"_blank",rel:"noopener noreferrer","aria-label":n.label,className:"group p-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gradient-to-br hover:from-[#62C3DC] hover:to-[#2596be] hover:text-white transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/30 hover:scale-110 active:scale-95",children:s.jsx(i,{className:"w-4 h-4 transition-transform group-hover:rotate-12"})},o)})}),s.jsxs("a",{href:"mailto:mail@d4dx.co",className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-[#2596be] dark:hover:text-[#62C3DC] transition-colors duration-200",children:[s.jsx(em,{className:"w-4 h-4"}),s.jsx("span",{children:"support@thafheem.net"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[s.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.d4media.thafheem",target:"_blank",rel:"noopener noreferrer",className:"group transition-all duration-300 hover:-translate-y-0.5 hover:scale-105",children:s.jsx("img",{src:Qf,alt:"Get it on Google Play",className:"h-12 w-auto object-contain"})}),s.jsx("a",{href:"https://apps.apple.com/in/app/thafheem-ul-quran/id1292572556",target:"_blank",rel:"noopener noreferrer",className:"group transition-all duration-300 hover:-translate-y-0.5 hover:scale-105",children:s.jsx("img",{src:Gf,alt:"Download on the App Store",className:"h-12 w-auto object-contain"})})]})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-6"}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 text-center sm:text-left",children:[" ",e," Thafheem ul Quran. All Rights Reserved"]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Crafted with"," ",s.jsx(Mr,{className:"inline w-3.5 h-3.5 text-red-500 fill-current animate-pulse"})," ","by"," ",s.jsx("a",{href:"https://d4dx.co/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold bg-gradient-to-r from-[#2596be] to-[#62C3DC] bg-clip-text text-transparent hover:from-[#62C3DC] hover:to-[#2596be] transition-all duration-300",children:"D4DX"})]})]})]})]})},Yf=({message:t="Loading..."})=>s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-cyan-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:t})]})}),Xf="/assets/banner-3CoDmLuj.png",Ha="thafheem:last-reading",Ro=()=>typeof window<"u"&&typeof window.localStorage<"u",Zf=()=>{if(!Ro())return null;try{const t=window.localStorage.getItem(Ha);if(!t)return null;const e=JSON.parse(t);return e?.surahId?e:null}catch(t){return console.error("Failed to read last reading from storage:",t),null}},n0=({surahId:t,verseId:e=null,path:r,viewType:a="surah"})=>{if(Ro()&&t)try{const n={surahId:String(t),verseId:e?String(e):null,viewType:a,path:r||`/surah/${t}`,timestamp:Date.now()};window.localStorage.setItem(Ha,JSON.stringify(n))}catch(n){console.error("Failed to save last reading to storage:",n)}},oa=()=>Zf(),ep=Ha,tp=({className:t})=>s.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Gs=({className:t})=>s.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Ks=({className:t})=>s.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),rr=({className:t})=>s.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),rp=({className:t})=>s.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),vr=(t="")=>t.replace(/\s*:\s*/g,":").replace(/\s+/g," ").trim(),kr=(t="")=>{const e=/^(\d{1,3}):(\d{1,3})$/.exec(t);if(!e)return null;const r=e[1].replace(/^0+/,"")||"0",a=e[2].replace(/^0+/,"")||"0";return{surah:r,verse:a}},ap=()=>{const{theme:t,setViewType:e,translationLanguage:r}=Lt(),[a,n]=d.useState(!1),[o,i]=d.useState(""),[c,l]=d.useState([]),[u,h]=d.useState(!1),[m,f]=d.useState(!1),[g,x]=d.useState(null),[y,A]=d.useState([]),[b,S]=d.useState(!1),[I,F]=d.useState(null),[H,we]=d.useState(null),[pe,oe]=d.useState(null),be=ze(),Y=d.useRef(null),ie=d.useRef(!1),se=d.useRef(!1),Z=d.useRef(0),fe=d.useRef(0),ce=d.useRef(!1);d.useEffect(()=>{P(),je().then(p=>{oe(p)}).catch(p=>{console.warn("Failed to preload surahs:",p)})},[]),d.useEffect(()=>(a||u?(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"):(document.body.style.overflow="",document.body.style.paddingRight=""),()=>{document.body.style.overflow="",document.body.style.paddingRight=""}),[a,u]),d.useEffect(()=>{we(oa());const p=C=>{C.key&&C.key!==ep||we(oa())};return typeof window<"u"&&window.addEventListener("storage",p),()=>{typeof window<"u"&&window.removeEventListener("storage",p)}},[]);const Ae=p=>{ie.current=!0,se.current=!1,Z.current=p.pageX-Y.current.offsetLeft,fe.current=Y.current.scrollLeft,Y.current.style.cursor="grabbing",Y.current.style.userSelect="none"},N=p=>{if(!ie.current)return;p.preventDefault();const Q=(p.pageX-Y.current.offsetLeft-Z.current)*2;Math.abs(Q)>6&&(se.current=!0),Y.current.scrollLeft=fe.current-Q},j=()=>{ie.current=!1,Y.current&&(Y.current.style.cursor="grab",Y.current.style.userSelect="")},L=p=>{ie.current=!0,se.current=!1,Z.current=p.touches[0].pageX-Y.current.offsetLeft,fe.current=Y.current.scrollLeft},G=p=>{if(!ie.current)return;const Q=(p.touches[0].pageX-Y.current.offsetLeft-Z.current)*2;Math.abs(Q)>6&&(se.current=!0),Y.current.scrollLeft=fe.current-Q},B=()=>{ie.current=!1},P=async()=>{S(!0),F(null);try{const p=await Sf("en");A(p)}catch(p){console.error("Error fetching popular data:",p),F("Failed to load popular content"),A([{id:67,name:"Al-Mulk",verses:"30 verses",type:"Makki"},{id:2,name:"Ayatul Kursi",verses:"Verse 255",type:"Madani",verseNumber:255,verseKey:"2:255"},{id:1,name:"Al-Fatiha",verses:"7 verses",type:"Makki"},{id:18,name:"Al-Kahf",verses:"110 verses",type:"Makki"},{id:36,name:"Ya-Sin",verses:"83 verses",type:"Makki"},{id:55,name:"Ar-Rahman",verses:"78 verses",type:"Makki"},{id:112,name:"Al-Ikhlas",verses:"4 verses",type:"Makki"},{id:114,name:"An-Nas",verses:"6 verses",type:"Makki"}])}finally{S(!1)}},M=async p=>{const C=p.toLowerCase().trim();if(/^\d+$/.test(C)){const $=parseInt(C,10);if($>=1&&$<=114)return{number:$,name:`Surah ${$}`}}let v=pe;if(!v)try{v=await je(),oe(v)}catch($){return console.warn("Failed to fetch surahs for name matching:",$),null}if(!v||v.length===0)return null;const E=v.find($=>$.name?.toLowerCase()===C||$.number?.toString()===C||$.arabic?.toLowerCase()===C);if(E)return E;const z=v.find($=>$.name?.toLowerCase().startsWith(C)||$.arabic?.toLowerCase().startsWith(C));return z||null},ue=async p=>{const C=vr(p);if(!C){h(!1),l([]),x(null);return}if(!kr(C)){ce.current=!1,f(!0),x(null),h(!0);try{const E={E:"english",mal:"malayalam",ta:"tamil",bn:"bangla",ur:"urdu",hi:"hindi"}[r]||"malayalam",z=[wf(C,E,15).catch(O=>(console.warn(`Word search failed for ${E}:`,O),{language:E,results:[]})),Co(C,15).catch(O=>(console.warn("Arabic phrase search failed:",O),[]))],[$,W]=await Promise.all(z),re=($.results||[]).map(O=>{const w=typeof O.surah=="number"?O.surah:parseInt(String(O.surah),10),_=typeof O.ayah=="number"?O.ayah:parseInt(String(O.ayah),10);if(!w||!_||isNaN(w)||isNaN(_))return console.warn("Invalid surah/ayah in result:",{item:O,surah:w,ayah:_,language:$.language}),null;const T=O.sourceType||"",J=T?`  ${T}`:"";return{type:"word_search",language:$.language,surah:w,ayah:_,displayText:O.matchedText||"",subText:`${$.language}${J}  Surah ${w}:${_}`,arabicWord:O.arabicWord||"",matchedText:O.matchedText||"",sourceType:T||void 0}}).filter(O=>O!==null&&O.surah>0&&O.ayah>0);let ge=[];Array.isArray(W)&&W.length>0&&(ge=W.map(O=>{const w=O.SuraID||O.suraid||O.SuraId||O.surah||O.Sura,_=O.AyaID||O.ayaid||O.AyaId||O.ayah||O.Aya,T=O.AyaHText||O.text_uthmani||O.Text||O.text||O.AyaText||"";return{type:"word_search",language:"arabic",surah:parseInt(w)||0,ayah:parseInt(_)||0,displayText:T,subText:`arabic  Surah ${w}:${_}`,matchedText:C}}).filter(O=>O.surah>0&&O.ayah>0));const Pe=[];try{const O=await hf(C);O&&O.length>0&&Pe.push(...O.map(w=>({type:"surah",data:w,displayText:`${w.number}. ${w.name}`,subText:`${w.ayahs} verses  ${w.type}`,arabicText:w.arabic})))}catch{}l(O=>[...(O||[]).filter(T=>T.type==="verse_reference"||T.type==="surah"),...Pe,...re,...ge].slice(0,25)),l(O=>{const w=(O||[]).filter(T=>T.type==="verse_reference"||T.type==="surah"),_=[...w,...Pe,...re,...ge];return console.log(" Search results:",{selectedLanguage:E,wordResults:re.length,arabicResults:ge.length,surahResults:Pe.length,existingResults:w.length,total:_.length,sampleWordResult:re[0],allWordResults:re}),_.slice(0,25)})}catch{x("Failed to search. Please try again."),l([])}finally{f(!1)}}},ve=p=>{const C=p.target.value,Q=vr(C);if(i(C),Q.length<1){h(!1),l([]),x(null),ce.current=!1;return}ce.current=!1,h(!1)},Se=(p,C)=>{C&&(C.preventDefault(),C.stopPropagation()),console.log(" Click handler called:",{type:p.type,language:p.language,surah:p.surah,ayah:p.ayah,fullResult:p}),ce.current=!0;const Q=C?.ctrlKey||C?.metaKey;if(p.type==="word_search"){const v=typeof p.surah=="number"?p.surah:parseInt(String(p.surah||""),10),E=typeof p.ayah=="number"?p.ayah:parseInt(String(p.ayah||""),10);if(console.log(" Navigating to word search result:",{surah:v,ayah:E,language:p.language,originalResult:p}),!v||!E||isNaN(v)||isNaN(E)||v<1||v>114||E<1){console.warn("Invalid surah or ayah:",{surah:v,ayah:E,result:p});return}const z=`/surah/${v}#verse-${E}`;if(Q){C?.preventDefault(),window.open(z,"_blank","noopener,noreferrer");return}sessionStorage.setItem("scrollToVerse",E.toString()),sessionStorage.setItem("navigationState",JSON.stringify({viewType:"Ayah Wise",highlightVerse:`${v}:${E}`,scrollToVerse:E})),h(!1),i(""),l([]),window.location.href=z}else if(p.type==="surah"){let v=p.data?.number??p.data?.id??p.data?.chapter_id??p.data?.code??p.number??p.id??p.chapter_id??p.code??null;if(v!=null){let E=String(v).replace(/^0+/,"");const z=parseInt(E,10);if(isNaN(z)||z<1||z>114){console.warn("Invalid surah number:",{surahNumber:v,surahNum:z,result:p});return}const W=`/surah/${z.toString()}`;if(Q){C?.preventDefault(),window.open(W,"_blank","noopener,noreferrer");return}h(!1),i(""),l([]),be(W)}else{console.warn("Unable to determine surah number from search result:",p);return}}else if(p.type==="verse"||p.type==="verse_reference"){const v=p.surah||(p.verse_key?parseInt(p.verse_key.split(":")[0],10):null),E=p.ayah||p.verse||(p.verse_key?parseInt(p.verse_key.split(":")[1],10):null);if(!v||!E){console.warn("Invalid verse reference:",p);return}const z=`/surah/${v}#verse-${E}`,$=p.verse_key||`${v}:${E}`;if(Q){C?.preventDefault(),window.open(z,"_blank","noopener,noreferrer");return}sessionStorage.setItem("scrollToVerse",E.toString()),sessionStorage.setItem("navigationState",JSON.stringify({viewType:"Ayah Wise",highlightVerse:$,scrollToVerse:E})),h(!1),i(""),l([]),window.location.href=z}h(!1),i(""),l([])},ke=async p=>{p.preventDefault();const C=vr(o);if(!C){h(!1),l([]),x(null);return}ce.current=!1,f(!0),x(null),h(!0),i(C);try{const Q=[],v=kr(C);if(v){const $=parseInt(v.surah,10),W=parseInt(v.verse,10);if($>=1&&$<=114&&W>=1){let re=pe;if(!re)try{re=await je(),oe(re)}catch(w){console.warn("Failed to fetch surahs:",w)}const ge=re?.find(w=>w.number===$),Pe=ge?.name||`Surah ${$}`,O=ge?.arabic||"";Q.push({type:"verse_reference",surah:$,ayah:W,displayText:`${Pe} - Verse ${W}`,subText:`Surah ${$}:${W}`,arabicText:O,verse_key:`${$}:${W}`})}}const E=/^\d+$/.test(C);if(E){const $=parseInt(C,10);if($>=1&&$<=114){let W=pe;if(!W)try{W=await je(),oe(W)}catch(ge){console.warn("Failed to fetch surahs:",ge)}const re=W?.find(ge=>ge.number===$);re&&Q.push({type:"surah",data:re,displayText:`${re.number}. ${re.name}`,subText:`${re.ayahs} verses  ${re.type}`,arabicText:re.arabic})}}const z=await M(C);if(z&&!E){const $=z.number||z.id;if($>=1&&$<=114){let W=pe;if(!W)try{W=await je(),oe(W)}catch(ge){console.warn("Failed to fetch surahs:",ge)}const re=W?.find(ge=>ge.number===$);re&&Q.push({type:"surah",data:re,displayText:`${re.number}. ${re.name}`,subText:`${re.ayahs} verses  ${re.type}`,arabicText:re.arabic})}}if(Q.length>0){l(Q),f(!1);const $=kr(C),W=/^\d+$/.test(C);!$&&!W&&ue(C).catch(()=>{})}else await ue(C)}catch{x("Failed to search. Please try again."),l([]),f(!1)}},Ve=()=>{be("/bookmarkedverses")},Oe=()=>{const p=oa();if(!p){we(null);return}we(p),p.viewType==="blockwise"?e?.("Block Wise"):p.viewType==="surah"&&e?.("Ayah Wise");const C=p.path||(p.surahId?`/surah/${p.surahId}`:"/reading");be(C)},Ke=async()=>{setTimeout(async()=>{if(ce.current)return;const p=vr(o);if(!p){h(!1);return}const C=kr(p);if(C){const E=parseInt(C.surah,10),z=parseInt(C.verse,10);if(E>=1&&E<=114&&z>=1){const $=`/surah/${E}#verse-${z}`;sessionStorage.setItem("scrollToVerse",z.toString()),sessionStorage.setItem("navigationState",JSON.stringify({viewType:"Ayah Wise",highlightVerse:`${E}:${z}`,scrollToVerse:z})),window.location.href=$;return}}if(/^\d+$/.test(p)){const E=parseInt(p,10);if(E>=1&&E<=114){be(`/surah/${E}`),i("");return}}const v=await M(p);if(v){const E=v.number||v.id;if(E>=1&&E<=114){be(`/surah/${E}`),i("");return}}C&&p.trim().length>0,h(!1)},200)},_e=(p,C)=>{if(se.current){se.current=!1;return}const Q=p?.id??p?.chapter_id;if(!Q)return;const v=p?.verseKey||p?.verse_key,E=p?.verseNumber??p?.verse_number??(typeof v=="string"?v.split(":")[1]:void 0),z=`/surah/${Q}`,$=C?.ctrlKey||C?.metaKey,W=E||v?{...E?{scrollToVerse:E}:{},...v?{highlightVerse:v}:{}}:void 0;$?(C?.preventDefault(),window.open(z,"_blank","noopener,noreferrer")):be(z,{state:W}),n(!1),se.current=!1};return s.jsxs("div",{className:"flex flex-col items-center justify-center bg-white dark:bg-gray-900 px-4 py-6 sm:py-8 lg:py-12",children:[s.jsx("div",{className:"w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl xl:max-w-4xl mb-6 sm:mb-8 mx-auto",children:s.jsx("a",{href:"https://app.thafheem.net/",target:"_blank",rel:"noopener noreferrer",className:"block cursor-pointer hover:opacity-90 transition-opacity",children:s.jsx("img",{src:Xf,alt:"Banner",className:"w-full h-auto object-contain rounded-xl"})})}),s.jsx("div",{className:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl mb-8 sm:mb-10 mx-auto",children:s.jsx("div",{className:"w-full h-20 sm:h-24 md:h-28 lg:h-32 rounded-lg flex items-center justify-center",children:s.jsx("img",{src:t==="dark"?ga:jm,alt:"Logo",className:"object-contain transition-transform h-16 sm:h-20 md:h-24 lg:h-28 max-w-[260px] sm:max-w-[300px] md:max-w-[360px] lg:max-w-[400px] w-auto"})})}),s.jsxs("div",{className:"w-full max-w-xl sm:max-w-2xl md:max-w-3xl mb-8 sm:mb-10 relative",children:[s.jsxs("form",{onSubmit:ke,className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(tp,{className:"h-5 w-5 text-gray-400 dark:text-white"})}),s.jsx("input",{type:"text",value:o,onChange:ve,onBlur:Ke,placeholder:"Search surahs, verses, or try '2:255' for specific verses...",className:"w-full h-[49px] pl-12 pr-12 py-4 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent bg-white dark:bg-[#2A2C38] dark:border-gray-600 dark:text-white shadow-sm text-gray-700 placeholder-gray-400 text-base"})]}),u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/40 z-[300] backdrop-blur-sm",onClick:()=>{h(!1),l([]),i(""),ce.current=!0}}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-[#2A2C38] rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 w-[95vw] max-w-xl sm:max-w-2xl md:max-w-3xl z-[310] max-h-[85vh] flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium font-poppins text-gray-900 dark:text-white",children:"Search Results"}),s.jsx("button",{onClick:()=>{h(!1),l([]),i(""),ce.current=!0},className:"text-gray-500 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 transition-colors p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(Ks,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[m&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-cyan-500"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Searching..."})]}),g&&s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-red-500 dark:text-red-400",children:g})}),!m&&!g&&c.length===0&&o.length>=2&&s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No results found"})}),!m&&c.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:["Found ",c.filter(p=>p.type==="surah").length," surahs, ",c.filter(p=>p.type==="verse"||p.type==="verse_reference").length," verses, ",c.filter(p=>p.type==="word_search").length," word matches"]}),c.map((p,C)=>s.jsx("div",{onMouseDown:Q=>{Q.preventDefault(),Q.stopPropagation(),console.log(" Div clicked:",{result:p,index:C}),Se(p,Q)},onClick:Q=>{Q.preventDefault(),Q.stopPropagation()},className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:p.type==="word_search"?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-cyan-600 dark:text-cyan-400 uppercase",children:p.language}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.subText})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.displayText}),p.arabicWord&&s.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mt-1",dir:"rtl",children:p.arabicWord})]}),s.jsx(rr,{className:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"})]}):p.type==="surah"?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-cyan-600 dark:text-cyan-400",children:"Surah"}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.subText})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.displayText}),s.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 ml-4",dir:"rtl",children:p.arabicText})]})]}),s.jsx(rr,{className:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"})]}):p.type==="verse_reference"?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-cyan-600 dark:text-cyan-400",children:"Verse Reference"}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.subText})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.displayText}),p.arabicText&&s.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 ml-4",dir:"rtl",children:p.arabicText})]})]}),s.jsx(rr,{className:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"})]}):s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-cyan-600 dark:text-cyan-400",children:"Verse"}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.surahName}),p.surahType&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.surahType})]}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:["Verse ",p.verseNumber]})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("div",{className:"flex-1 pr-3",children:s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-3 leading-relaxed",children:p.displayText})}),p.surahArabic&&s.jsx("div",{className:"text-right",dir:"rtl",children:s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:p.surahArabic})})]})]}),s.jsx(rr,{className:"h-4 w-4 text-gray-400 ml-2 flex-shrink-0"})]})},`${p.type}-${C}-${p.surah||p.data?.number||C}`))]})]})]})]}),a&&!u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/40 z-[300] backdrop-blur-sm",onClick:()=>n(!1)}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-[#2A2C38] rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 w-[95vw] max-w-lg sm:max-w-xl md:max-w-2xl z-[310] max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsx(Gs,{className:"h-5 w-5 text-cyan-500"}),s.jsx("h2",{className:"sm:text-[15px] font-semibold font-poppins text-gray-600 dark:text-[#95959b]",children:"Popular"})]}),s.jsx("button",{onClick:()=>n(!1),className:"text-[#323A3F] dark:text-white transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded-lg",children:s.jsx(Ks,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"overflow-y-auto flex-1 p-3 sm:p-4 space-y-3",children:[s.jsx("h3",{className:"text-base font-medium font-poppins text-gray-900 dark:text-white",children:"Chapters and Verses"}),b&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-cyan-500"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading popular content..."})]}),I&&s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-red-500 dark:text-red-400",children:I})}),!b&&!I&&s.jsx(s.Fragment,{children:s.jsx("div",{ref:Y,className:"flex gap-2.5 mb-3 overflow-x-auto scrollbar-hide pr-3 border-b border-gray-200 dark:border-gray-700 pb-2.5 cursor-grab",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},onMouseDown:Ae,onMouseMove:N,onMouseUp:j,onMouseLeave:j,onTouchStart:L,onTouchMove:G,onTouchEnd:B,children:y.map((p,C)=>s.jsxs("button",{type:"button",onClick:Q=>_e(p,Q),className:"inline-flex font-poppins items-center space-x-2.5 px-3.5 py-2.5 bg-[#D8D8D8] dark:bg-gray-900 dark:text-white dark:hover:bg-gray-800 hover:bg-gray-200 rounded-lg transition-colors text-xs sm:text-sm text-gray-700 flex-shrink-0 min-w-fit shadow pointer-events-auto",style:C===y.length-1?{marginRight:"1rem"}:{},title:`${p.translated_name||p.name} - ${p.verses} (${p.type})`,children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsxs("span",{className:"font-medium",children:[p.id,". ",p.name]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[p.verseNumber?`Surah Al-Baqra ${p.verses}`:p.verses,"  ",p.type]})]}),s.jsx(rr,{className:"h-3.5 w-3.5 ml-1.5"})]},`${p.id??p.chapter_id}-${C}`))})})]})]})]})]}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-4 w-full max-w-4xl px-2",children:s.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-4 w-full",children:[s.jsxs("button",{type:"button",onClick:Oe,disabled:!H,title:H?"Jump back to your last reading session":"Start reading any Surah to enable this shortcut",className:"flex items-center space-x-2 px-6 py-3 bg-white dark:bg-[#2A2C38] text-[#62C3DC] dark:text-cyan-200 rounded-full shadow-md transition-all duration-200 text-sm hover:bg-[#62C3DC] hover:text-white hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none dark:hover:bg-[#3FA6C0] dark:hover:text-white [&_svg]:transition-colors [&_svg]:duration-200 [&:hover_svg]:text-white",children:[s.jsx(Ua,{className:"h-4 w-4 text-[#3FA6C0]"}),s.jsx("span",{className:"font-medium whitespace-nowrap font-poppins",children:"Continue Reading"})]}),s.jsxs("button",{onClick:Ve,className:"flex items-center space-x-2 px-6 py-3 bg-white dark:bg-[#2A2C38] text-[#62C3DC] dark:text-cyan-200 rounded-full shadow-md transition-all duration-200 text-sm hover:bg-[#62C3DC] hover:text-white hover:shadow-lg flex-shrink-0 dark:hover:bg-[#3FA6C0] dark:hover:text-white [&_svg]:transition-colors [&_svg]:duration-200 [&:hover_svg]:text-white",children:[s.jsx(rp,{className:"h-4 w-4 text-[#3FA6C0]"}),s.jsx("span",{className:"font-medium whitespace-nowrap font-poppins",children:"Bookmarks"})]}),s.jsxs("button",{onClick:()=>{n(!0),y.length===0&&!b&&P()},className:"flex items-center space-x-2 px-6 py-3 bg-white dark:bg-[#2A2C38] text-[#62C3DC] dark:text-cyan-200 rounded-full shadow-md transition-all duration-200 text-sm hover:bg-[#62C3DC] hover:text-white hover:shadow-lg flex-shrink-0 dark:hover:bg-[#3FA6C0] dark:hover:text-white [&_svg]:transition-colors [&_svg]:duration-200 [&:hover_svg]:text-white",children:[s.jsx(Gs,{className:"h-4 w-4 text-[#3FA6C0]"}),s.jsx("span",{className:"font-medium whitespace-nowrap font-poppins",children:"Popular"})]})]})})]})},sp=({number:t,size:e=45,isHighlighted:r=!1,className:a=""})=>{const n=(o=12)=>{const i=e/2,c=i*.9,l=e/2,u=e/2;let h="";for(let m=0;m<o*2;m++){const f=m%2===0?i:c,g=m*Math.PI/o-Math.PI/2,x=l+f*Math.cos(g),y=u+f*Math.sin(g);h+=m===0?`M${x},${y}`:`L${x},${y}`}return h+"Z"};return s.jsxs("svg",{width:`${e}px`,height:`${e}px`,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",className:a,children:[s.jsx("path",{d:n(12),className:`${r?"fill-[#2c3e50]":"fill-[#EBEEF0] dark:fill-[#323A3F] group-hover:fill-[#3FA5C0] transition-colors duration-200"}`}),s.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",fontSize:e*.4,fontWeight:"bold",className:`${r?"fill-white":"fill-black dark:fill-white group-hover:fill-white transition-colors duration-200"}`,children:t})]})},Ys={1:"U+E001",2:"U+E002",3:"U+E003",4:"U+E004",5:"U+E005",6:"U+E006",7:"U+E007",8:"U+E008",9:"U+E009",10:"U+E010",11:"U+E011",12:"U+E012",13:"U+E013",14:"U+E014",15:"U+E015",16:"U+E016",17:"U+E017",18:"U+E018",19:"U+E019",20:"U+E020",21:"U+E021",22:"U+E022",23:"U+E023",24:"U+E024",25:"U+E025",26:"U+E026",27:"U+E027",28:"U+E028",29:"U+E029",30:"U+E030",31:"U+E031",32:"U+E032",33:"U+E033",34:"U+E034",35:"U+E035",36:"U+E036",37:"U+E037",38:"U+E038",39:"U+E039",40:"U+E040",41:"U+E041",42:"U+E042",43:"U+E043",44:"U+E044",45:"U+E045",46:"U+E046",47:"U+E047",48:"U+E048",49:"U+E049",50:"U+E050",51:"U+E051",52:"U+E052",53:"U+E053",54:"U+E054",55:"U+E055",56:"U+E056",57:"U+E057",58:"U+E058",59:"U+E059",60:"U+E060",61:"U+E061",62:"U+E062",63:"U+E063",64:"U+E064",65:"U+E065",66:"U+E066",67:"U+E067",68:"U+E068",69:"U+E069",70:"U+E070",71:"U+E071",72:"U+E072",73:"U+E073",74:"U+E074",75:"U+E075",76:"U+E076",77:"U+E077",78:"U+E078",79:"U+E079",80:"U+E080",81:"U+E081",82:"U+E082",83:"U+E083",84:"U+E084",85:"U+E085",86:"U+E086",87:"U+E087",88:"U+E088",89:"U+E089",90:"U+E090",91:"U+E091",92:"U+E092",93:"U+E093",94:"U+E094",95:"U+E095",96:"U+E096",97:"U+E097",98:"U+E098",99:"U+E099",100:"U+E100",101:"U+E101",102:"U+E102",103:"U+E103",104:"U+E104",105:"U+E105",106:"U+E106",107:"U+E107",108:"U+E108",109:"U+E109",110:"U+E110",111:"U+E111",112:"U+E112",113:"U+E113",114:"U+E114"},np=({className:t})=>s.jsx("svg",{viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M1 4.05096L5.50813 6.87531M1 4.05096L5.50813 1.22656L10.0017 4.05096M1 4.05096V5.72135M5.50813 12.2306L1 9.44877V5.72135M5.50813 12.2306L10.0017 9.44877V5.72135M5.50813 12.2306V8.52443M5.50813 6.87531L10.0017 4.05096M5.50813 6.87531V8.52443M10.0017 4.05096V5.72135M10.0017 5.72135L5.50813 8.52443M5.50813 8.52443L1 5.72135",stroke:"currentColor",strokeLinejoin:"round"})}),op=({className:t})=>s.jsx("svg",{width:"11",height:"15",viewBox:"0 0 11 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:s.jsx("path",{d:"M5.625 1.0498C5.96379 1.0415 6.15318 1.43447 5.9375 1.69434L5.93848 1.69531C5.8059 1.85727 5.73354 2.06001 5.7334 2.26953C5.73364 2.7733 6.13675 3.17749 6.63965 3.17773C6.8485 3.17752 7.05247 3.1038 7.21484 2.9707C7.35907 2.84911 7.5516 2.85714 7.68555 2.94922C7.82703 3.0465 7.89339 3.22605 7.83203 3.42188C7.62359 4.1963 6.95559 4.74982 6.16699 4.82324V4.96973C6.38842 5.29376 6.73956 5.57803 7.17188 5.86035C7.39553 6.00639 7.63673 6.14949 7.88672 6.29688C8.13549 6.44354 8.39372 6.59442 8.64746 6.75391C9.69542 7.41265 10.702 8.26832 10.7217 9.86133C10.7302 10.5552 10.5894 11.4633 9.97949 12.293C10.3948 12.3364 10.7226 12.6925 10.7227 13.1182V13.9834C10.7235 14.202 10.5466 14.3792 10.3281 14.3789V14.3799H1.21582C0.998036 14.379 0.822454 14.2011 0.823242 13.9834V13.1182C0.823351 12.6643 1.19496 12.2891 1.65039 12.2891H8.89941C9.63381 11.6946 9.91674 10.8407 9.93359 9.86035C9.95344 8.7001 9.20568 8.05633 8.22656 7.4209C7.99002 7.26739 7.75176 7.12838 7.51562 6.99219C7.28064 6.85666 7.04583 6.72296 6.82227 6.58398C6.43649 6.34416 6.0728 6.08117 5.77148 5.74121C5.46708 6.08406 5.09223 6.35958 4.7002 6.60547C4.47252 6.74826 4.23591 6.88329 4.00293 7.0166C3.76878 7.15058 3.53754 7.28322 3.31543 7.42285C2.42056 7.98548 1.62622 8.63485 1.61133 9.86523C1.6014 10.6849 1.83171 11.2575 2.07324 11.6484H2.07227C2.13777 11.7504 2.15412 11.8634 2.12402 11.9678C2.0949 12.0686 2.02647 12.1474 1.94727 12.1963C1.86807 12.2451 1.76716 12.2711 1.66406 12.252C1.55623 12.2319 1.46123 12.1657 1.39941 12.0596V12.0586C1.0886 11.5539 0.816533 10.8308 0.823242 9.8623C0.83371 8.36129 1.75222 7.45412 2.89844 6.75293C3.41821 6.43497 3.92281 6.1624 4.37598 5.86426C4.80764 5.58025 5.15748 5.29245 5.37891 4.9668V4.72949C4.62425 4.47414 4.07622 3.76183 4.07617 2.9209C4.07617 2.19418 4.55355 1.26045 5.59473 1.05273L5.61035 1.0498H5.625ZM1.62207 13.0869C1.61745 13.0916 1.61137 13.1013 1.61133 13.1182V13.5908H9.93457V13.1182C9.93452 13.1022 9.92888 13.093 9.92383 13.0879C9.91879 13.0828 9.90931 13.0771 9.89355 13.0771H1.65039C1.63521 13.0771 1.6266 13.0825 1.62207 13.0869ZM4.95801 2.47852C4.89845 2.61488 4.86542 2.76443 4.86523 2.9209L4.87109 3.03613C4.92841 3.60447 5.40474 4.04371 5.98926 4.04395C6.14409 4.04376 6.29155 4.00941 6.42676 3.95117C5.66139 3.85413 5.05306 3.24442 4.95801 2.47852Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.35469"})}),ip=()=>{const[t,e]=d.useState("Quran"),[r,a]=d.useState(null),{viewType:n,translationLanguage:o}=Lt(),i=ze(),c=xa(),{surahs:l,loading:u,error:h,retry:m}=Va(o),f=(y,A)=>{const b=A?.ctrlKey||A?.metaKey,I=n==="Block Wise"&&(o==="mal"||o==="E")?`/blockwise/${y}`:`/surah/${y}`;b?(A?.preventDefault(),window.open(I,"_blank","noopener,noreferrer")):i(I)},g=y=>{a(y)},x=()=>{setTimeout(()=>{a(null)},150)};return s.jsxs(s.Fragment,{children:[s.jsx(ap,{}),s.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-900 min-h-screen",children:s.jsxs("div",{className:"max-w-[1290px] w-full mx-auto px-5 sm:px-6 md:px-8 lg:px-10 xl:px-12",children:[s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex overflow-x-auto",children:[s.jsx("button",{onClick:()=>i("/"),className:`cursor-pointer px-4 sm:px-6 py-3 sm:py-4 text-sm font-medium border-b-2 transition-colors min-h-[48px] flex items-center whitespace-nowrap ${c.pathname==="/"?"border-cyan-500 text-cyan-600 dark:text-cyan-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Surah"}),s.jsx("button",{onClick:()=>i("/juz"),className:`cursor-pointer px-4 sm:px-6 py-3 sm:py-4 text-sm font-medium border-b-2 transition-colors min-h-[48px] flex items-center whitespace-nowrap ${c.pathname==="/juz"?"border-cyan-500 text-cyan-600 dark:text-cyan-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Juz"})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 py-4 sm:py-6",children:u?Array.from({length:6}).map((y,A)=>s.jsxs("div",{className:`w-full max-w-[421px] sm:max-w-full h-auto sm:h-[81px] bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700
                       rounded-xl px-4 py-3 sm:py-0 mx-auto flex items-center animate-pulse`,children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full"}),s.jsxs("div",{className:"flex flex-col justify-center min-w-0 flex-1",children:[s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-16"})})]},A)):h?s.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-12",children:s.jsxs("div",{className:"text-red-500 dark:text-red-400 text-center",children:[s.jsx("p",{className:"text-lg font-semibold mb-2",children:"Failed to load Surahs"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h}),s.jsx("button",{onClick:m,className:"mt-4 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Try Again"})]})}):l.map(y=>{const A=r===y.number;return s.jsxs("div",{onClick:b=>f(y.number,b),onTouchStart:()=>g(y.number),onTouchEnd:x,className:`group w-full max-w-[421px] sm:max-w-full h-auto sm:h-[81px] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700
                     rounded-xl px-4 py-3 sm:py-0 transition-all duration-200 cursor-pointer mx-auto
                     flex items-center ${A?"shadow-md border-[#3FA5C0]":"hover:shadow-md active:shadow-md hover:border-[#3FA5C0] active:border-[#3FA5C0] active:bg-gray-50 dark:active:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx(sp,{number:y.number,color:"#E5E7EB",textColor:"#000"}),s.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[s.jsx("h3",{className:`text-base sm:text-[16px] font-medium truncate transition-colors duration-200 ${A?"text-[#3FA5C0]":"text-gray-900 dark:text-white group-hover:text-[#3FA5C0]"} ${o==="mal"?"font-malayalam":o==="ur"?"font-urdu-nastaliq":o==="hi"?"font-hindi":o==="bn"?"font-bengali":o==="ta"?"font-tamil":"font-poppins"}`,dir:o==="ur"?"ltr":void 0,style:o==="mal"?{fontFamily:"'Noto Sans Malayalam'"}:o==="ur"?{fontFamily:"'Noto Nastaliq Urdu', 'JameelNoori', serif",lineHeight:"2.2",direction:"ltr",textAlign:"left"}:{},children:(()=>{const b=y.name||"",S=/^\d+\.\s+/;return b.replace(S,"")})()}),s.jsxs("div",{className:"flex items-center gap-3 text-gray-500 dark:text-gray-400 text-sm mt-1",children:[y.type==="Makki"?s.jsx(np,{className:"h-4 w-4 flex-shrink-0 text-[#3FA5C0]"}):s.jsx(op,{className:"h-4 w-4 flex-shrink-0 text-[#3FA5C0]"}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsx(Oa,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:y.ayahs})]})]})]}),s.jsx("div",{className:"ml-auto text-right",dir:"rtl",children:s.jsx("h3",{className:`text-lg sm:text-[30px] font-normal transition-colors duration-200 ${A?"text-[#3FA5C0]":"text-gray-900 dark:text-white group-hover:text-[#3FA5C0]"}`,style:{fontFamily:"SuraName, Amiri, serif"},children:Ys[y.number]?String.fromCharCode(parseInt(Ys[y.number].replace("U+",""),16)):y.arabic})})]},y.number)})})]})})]})},Xs=d.lazy(()=>R(()=>import("./Juz-DMdM2600.js"),__vite__mapDeps([11,2,12]))),cp=d.lazy(()=>R(()=>import("./Sign-B7_4cF1P.js"),__vite__mapDeps([13,2,12]))),lp=d.lazy(()=>R(()=>import("./Surah-Drxy7siQ.js"),__vite__mapDeps([14,2,15,9,1,7,8,4,16,17,5,0,3,6,18,19,20,21,22,23,24]))),dp=d.lazy(()=>R(()=>import("./SurahInfo-Cq1LpFap.js"),__vite__mapDeps([25,2,12]))),up=d.lazy(()=>R(()=>import("./Reading-BNTKsUIn.js"),__vite__mapDeps([26,2,19,16,18,17]))),hp=d.lazy(()=>R(()=>import("./BlockWise-CYfjn6BS.js"),__vite__mapDeps([27,2,16,15,9,1,7,8,4,17,5,0,3,6,18,28,29,30,20,19,21,22,23,24]))),mp=d.lazy(()=>R(()=>import("./bookmarkedVerses-4x_cYgZV.js"),__vite__mapDeps([31,2,32,12,16,33]))),fp=d.lazy(()=>R(()=>import("./BookmarkBlock-DnDLoMnT.js"),__vite__mapDeps([34,2,32,12,33]))),pp=d.lazy(()=>R(()=>import("./BookInterpretations-DHPgeMKC.js"),__vite__mapDeps([35,2,32,12,16,15,9,1,7,8,4,17,5,0,3,6,18,29,30,20,33]))),gp=d.lazy(()=>R(()=>import("./MalayalamInterpreter-BM521lYP.js"),__vite__mapDeps([36,2,30,20,17,15,9,1,7,8,4,16,5,0,3,6,18]))),yp=d.lazy(()=>R(()=>import("./FavoriteSurahs-YfZbIhEw.js"),__vite__mapDeps([37,2,32,12,16]))),xp=d.lazy(()=>R(()=>Promise.resolve().then(()=>Wf),void 0)),bp=d.lazy(()=>R(()=>import("./PlayAudio-CszON32x.js"),__vite__mapDeps([38,2,39,22,23]))),wp=d.lazy(()=>R(()=>import("./TableContents-v5W3CZiP.js"),__vite__mapDeps([40,2]))),vp=d.lazy(()=>R(()=>import("./Maududi-DkT0JVxM.js"),__vite__mapDeps([41,2,42]))),kp=d.lazy(()=>R(()=>import("./WhatsNew-DaaFrw4o.js"),__vite__mapDeps([43,2]))),_p=d.lazy(()=>R(()=>import("./Digitisation-Ca19Leyr.js"),__vite__mapDeps([44,2]))),Ep=d.lazy(()=>R(()=>import("./About-DZtFsfZN.js"),__vite__mapDeps([45,2]))),Sp=d.lazy(()=>R(()=>import("./AuthorPreface-Dha11ake.js"),__vite__mapDeps([46,2]))),Ap=d.lazy(()=>R(()=>import("./AuthorConclusion-DgOFWNE-.js"),__vite__mapDeps([47,2]))),Ip=d.lazy(()=>R(()=>import("./IntroductionToQuran-DBznPFyP.js"),__vite__mapDeps([48,2]))),Np=d.lazy(()=>R(()=>import("./Appendix-C_YiVyHe.js"),__vite__mapDeps([49,2]))),Tp=d.lazy(()=>R(()=>import("./EnglishTranslate-6fp-bWUL.js"),__vite__mapDeps([50,2]))),Cp=d.lazy(()=>R(()=>import("./Quiz-D3aTIN0S.js"),__vite__mapDeps([51,2,17]))),jp=d.lazy(()=>R(()=>import("./DragDrop-CbGHl7QF.js"),__vite__mapDeps([52,2,17]))),Pp=d.lazy(()=>R(()=>import("./Privacy-DT0Yfy92.js"),__vite__mapDeps([53,2]))),Rp=d.lazy(()=>R(()=>import("./DeleteAccount-BD1vXl1R.js"),__vite__mapDeps([54,2]))),$p=d.lazy(()=>R(()=>import("./LogOut-CiK8pmji.js"),__vite__mapDeps([55,2]))),Lp=d.lazy(()=>R(()=>import("./Conclusion-Cn5LwtKK.js"),__vite__mapDeps([56,2]))),Mp=d.lazy(()=>R(()=>import("./Tajweed-Dho0er1R.js"),__vite__mapDeps([57,2,58,22]))),Dp=d.lazy(()=>R(()=>import("./QuranStudy-BTVFY546.js"),__vite__mapDeps([59,2,58,60,39,22]))),Op=d.lazy(()=>R(()=>import("./EndofProphethood-CZ1sOlh7.js"),__vite__mapDeps([61,2,58,60,39,22]))),Fp=d.lazy(()=>R(()=>import("./WordByWordPage-BuiFbaCu.js"),__vite__mapDeps([62,2,15,9,1,7,8,4,16,17,5,0,3,6,18]))),Up=d.lazy(()=>R(()=>import("./InterpretationBlockwise-bzGSXxyX.js"),__vite__mapDeps([28,2,29,15,9,1,7,8,4,16,17,5,0,3,6,18,30,20]))),Bp=d.lazy(()=>R(()=>import("./Note-AwIC1I7x.js"),__vite__mapDeps([63,2]))),zp=d.lazy(()=>R(()=>import("./UrduFinalityOfProphethood-DFFT3hDL.js"),__vite__mapDeps([64,2]))),Vp=d.lazy(()=>R(()=>import("./UrduJesusMohammed-BcITf-4C.js"),__vite__mapDeps([65,2]))),Hp=d.lazy(()=>R(()=>import("./Contact-jCFx9Wid.js"),__vite__mapDeps([66,2]))),qp=d.lazy(()=>R(()=>import("./Feedback-DjalRZA8.js"),__vite__mapDeps([67,2]))),Wp=d.lazy(()=>R(()=>import("./TechnicalTerms-CYw-OJss.js"),__vite__mapDeps([68,2]))),Jp=d.lazy(()=>R(()=>import("./Translators-Cw-mxhuy.js"),__vite__mapDeps([69,2]))),Qp=d.lazy(()=>R(()=>import("./HistoryOfTranslation-CxWXhFvJ.js"),__vite__mapDeps([70,2]))),Gp=d.lazy(()=>R(()=>import("./MalayalamJesusMohammed-Bza83n3G.js"),__vite__mapDeps([71,2]))),Kp=d.lazy(()=>R(()=>import("./MalayalamFinalityOfProphethood-Dah_BiPC.js"),__vite__mapDeps([72,2]))),Yp=d.lazy(()=>R(()=>import("./EnglishJesusMohammed-CZZz6sfG.js"),__vite__mapDeps([73,2]))),Xp=d.lazy(()=>R(()=>import("./EnglishFinalityOfProphethood-D-YCBLhz.js"),__vite__mapDeps([74,2]))),Zp=d.lazy(()=>R(()=>import("./HindiJesusMohammed-mf9mnCZi.js"),__vite__mapDeps([75,2]))),eg=d.lazy(()=>R(()=>import("./HindiFinalityOfProphethood-DqpPlvKd.js"),__vite__mapDeps([76,2]))),tg=d.lazy(()=>R(()=>import("./BanglaJesusMohammed-pfH8GURQ.js"),__vite__mapDeps([77,2]))),rg=d.lazy(()=>R(()=>import("./BanglaFinalityOfProphethood-BOkB5ORq.js"),__vite__mapDeps([78,2]))),ag=d.lazy(()=>R(()=>import("./TamilSayyidMaududi-B8RWZo0d.js"),__vite__mapDeps([79,2,42]))),sg=d.lazy(()=>R(()=>import("./TamilAuthorPreface-DFVbtzSq.js"),__vite__mapDeps([80,2]))),ng=d.lazy(()=>R(()=>import("./TamilAuthorConclusion-CdnJ6U0m.js"),__vite__mapDeps([81,2]))),og=d.lazy(()=>R(()=>import("./TamilJesusMohammed-CyFtfv31.js"),__vite__mapDeps([82,2]))),ig=d.lazy(()=>R(()=>import("./TamilFinalityOfProphethood-BXGy0K3Q.js"),__vite__mapDeps([83,2])));function cg(){return"/"}function lg(){const t=cg();return s.jsx(Ko,{children:s.jsx(oh,{children:s.jsx(mh,{children:s.jsxs(Oo,{basename:t,children:[s.jsx("a",{href:"#main-content",className:`sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[1000] 
                       bg-cyan-500 text-white px-4 py-2 rounded-lg font-medium shadow-lg
                       focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:ring-offset-2`,children:"Skip to content"}),s.jsx(Jf,{}),s.jsx(d.Suspense,{fallback:s.jsx(Yf,{message:"Loading page..."}),children:s.jsx("main",{id:"main-content",children:s.jsxs(Fo,{children:[s.jsx(D,{path:"/",element:s.jsx(ip,{})})," ",s.jsx(D,{path:"/juz",element:s.jsx(Xs,{})}),s.jsx(D,{path:"/juz/:juzId",element:s.jsx(Xs,{})}),s.jsx(D,{path:"/sign",element:s.jsx(cp,{})}),s.jsx(D,{path:"/surah/:surahId",element:s.jsx(lp,{})}),s.jsx(D,{path:"/surahinfo/:surahId",element:s.jsx(dp,{})}),s.jsx(D,{path:"/reading/:surahId?",element:s.jsx(up,{})}),s.jsx(D,{path:"/blockwise/:surahId",element:s.jsx(hp,{})}),s.jsx(D,{path:"/bookmarkblock",element:s.jsx(fp,{})}),s.jsx(D,{path:"/bookmarkedverses",element:s.jsx(mp,{})}),s.jsx(D,{path:"/favoritesurahs",element:s.jsx(yp,{})}),s.jsx(D,{path:"/bookinterpretations",element:s.jsx(pp,{})}),s.jsx(D,{path:"/malayalaminterpretations",element:s.jsx(gp,{})}),s.jsx(D,{path:"/settings",element:s.jsx(xp,{})}),s.jsx(D,{path:"/play",element:s.jsx(bp,{})}),s.jsx(D,{path:"/tablecontents",element:s.jsx(wp,{})}),s.jsx(D,{path:"/maududi",element:s.jsx(vp,{})}),s.jsx(D,{path:"/whatsnew",element:s.jsx(kp,{})}),s.jsx(D,{path:"/digitisation",element:s.jsx(_p,{})}),s.jsx(D,{path:"/about",element:s.jsx(Ep,{})}),s.jsx(D,{path:"/authorpreface",element:s.jsx(Sp,{})}),s.jsx(D,{path:"/authorconclusion",element:s.jsx(Ap,{})}),s.jsx(D,{path:"/introduction-to-quran",element:s.jsx(Ip,{})}),s.jsx(D,{path:"/appendix/:lang",element:s.jsx(Np,{})}),s.jsx(D,{path:"/englishtranslate",element:s.jsx(Tp,{})}),s.jsx(D,{path:"/quiz",element:s.jsx(Cp,{})}),s.jsx(D,{path:"/dragdrop",element:s.jsx(jp,{})}),s.jsx(D,{path:"/privacy",element:s.jsx(Pp,{})}),s.jsx(D,{path:"/deleteaccount",element:s.jsx(Rp,{})}),s.jsx(D,{path:"/logout",element:s.jsx($p,{})}),s.jsx(D,{path:"/conclusion",element:s.jsx(Lp,{})}),s.jsx(D,{path:"/tajweed",element:s.jsx(Mp,{})}),s.jsx(D,{path:"/quranstudy",element:s.jsx(Dp,{})}),s.jsx(D,{path:"/end",element:s.jsx(Op,{})}),s.jsx(D,{path:"/urdu/finality-of-prophethood",element:s.jsx(zp,{})}),s.jsx(D,{path:"/urdu/jesus-mohammed",element:s.jsx(Vp,{})}),s.jsx(D,{path:"/contact",element:s.jsx(Hp,{})}),s.jsx(D,{path:"/feedback",element:s.jsx(qp,{})}),s.jsx(D,{path:"/technical-terms",element:s.jsx(Wp,{})}),s.jsx(D,{path:"/translators",element:s.jsx(Jp,{})}),s.jsx(D,{path:"/history-of-translation",element:s.jsx(Qp,{})}),s.jsx(D,{path:"/malayalam/jesus-mohammed",element:s.jsx(Gp,{})}),s.jsx(D,{path:"/malayalam/finality-of-prophethood",element:s.jsx(Kp,{})}),s.jsx(D,{path:"/english/jesus-mohammed",element:s.jsx(Yp,{})}),s.jsx(D,{path:"/english/finality-of-prophethood",element:s.jsx(Xp,{})}),s.jsx(D,{path:"/hindi/jesus-mohammed",element:s.jsx(Zp,{})}),s.jsx(D,{path:"/hindi/finality-of-prophethood",element:s.jsx(eg,{})}),s.jsx(D,{path:"/bangla/jesus-mohammed",element:s.jsx(tg,{})}),s.jsx(D,{path:"/bangla/finality-of-prophethood",element:s.jsx(rg,{})}),s.jsx(D,{path:"/tamil/sayyid-maududi",element:s.jsx(ag,{})}),s.jsx(D,{path:"/tamil/author-preface",element:s.jsx(sg,{})}),s.jsx(D,{path:"/tamil/author-conclusion",element:s.jsx(ng,{})}),s.jsx(D,{path:"/tamil/jesus-mohammed",element:s.jsx(og,{})}),s.jsx(D,{path:"/tamil/finality-of-prophethood",element:s.jsx(ig,{})}),s.jsx(D,{path:"/word-by-word/:surahId/:verseId",element:s.jsx(Fp,{})}),s.jsx(D,{path:"/interpretation-blockwise",element:s.jsx(Up,{})}),s.jsx(D,{path:"/note/:id",element:s.jsx(Bp,{})})]})})}),s.jsx(Kf,{})]})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{}).catch(t=>{})});Vo.createRoot(document.getElementById("root")).render(s.jsx(d.StrictMode,{children:s.jsx(lg,{})}));export{Bt as $,Va as A,Oa as B,Fa as C,dm as D,af as E,wt as F,fg as G,ap as H,q as I,Vs as J,vg as K,Mr as L,ym as M,Lf as N,Jh as O,Ua as P,Vg as Q,qg as R,sp as S,zf as T,Wg as U,Jg as V,Hg as W,Kt as X,Lg as Y,pt as Z,R as _,bo as a,_g as a0,cf as a1,Ag as a2,Eg as a3,Sg as a4,Ig as a5,Ng as a6,ug as a7,qd as a8,Tg as a9,Fg as aA,zg as aB,Bg as aC,Qg as aD,t0 as aE,Ug as aF,Gg as aG,Kg as aH,Xg as aI,Yg as aJ,Zg as aK,Bm as aa,Cg as ab,jg as ac,Pg as ad,Rg as ae,$g as af,ct as ag,kg as ah,bg as ai,wg as aj,ar as ak,Os as al,Us as am,So as an,s0 as ao,Af as ap,Mg as aq,Dg as ar,Og as as,em as at,Lh as au,Ut as av,pm as aw,e0 as ax,r0 as ay,a0 as az,Eo as b,hg as c,go as d,nh as e,dr as f,Io as g,yo as h,gg as i,s as j,yg as k,jm as l,mg as m,n0 as n,xg as o,Nh as p,_o as q,Ph as r,Ys as s,Wm as t,Lt as u,je as v,pg as w,sa as x,ef as y,sf as z};
